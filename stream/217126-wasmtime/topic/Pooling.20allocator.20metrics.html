<html>
<head><meta charset="utf-8"><title>Pooling allocator metrics · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Pooling.20allocator.20metrics.html">Pooling allocator metrics</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="534977781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Pooling%20allocator%20metrics/near/534977781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Pooling.20allocator.20metrics.html#534977781">(Aug 18 2025 at 15:41)</a>:</h4>
<p>I'd like to expose things like pooled instance counts to embedders; looking for feedback on API and implementation approach: <a href="https://github.com/bytecodealliance/wasmtime/issues/11449">https://github.com/bytecodealliance/wasmtime/issues/11449</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/11449" style="background-image: url(&quot;https://uploads.zulipusercontent.net/f1b3a222648988707427b3c3df142e6547d030ab/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f306165343262316439616161626239326633386430376363373565633938336434646431653661613464373661373239623439333836336131343138393565312f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f3131343439&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/11449" title="Expose pooling allocator runtime metrics · Issue #11449 · bytecodealliance/wasmtime">Expose pooling allocator runtime metrics · Issue #11449 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This is similar to #2640 but is about pull rather than push metrics. The pooling allocator has a bunch of configurable limits. It can be difficult to understand the runtime behavior of a system to ...</div></div></div>



<a name="534994611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Pooling%20allocator%20metrics/near/534994611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Pooling.20allocator.20metrics.html#534994611">(Aug 18 2025 at 17:38)</a>:</h4>
<p>Seems reasonable to me!</p>



<a name="535001641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Pooling%20allocator%20metrics/near/535001641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Osborne <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Pooling.20allocator.20metrics.html#535001641">(Aug 18 2025 at 18:29)</a>:</h4>
<p>Seems reasonable to me as well; one of the main changes on our internal fork of wasmtime right now is changes we have to get metrics out of wasmtime in a few more places.  Having a few things like this that we could poll using external APIs would be nice for reducing the patches we need to maintain (and potentially useful for other consumers).</p>
<p>Some of the ones we have a transient and probably not generally useful, but I'll add it to my backlog to audit and potentially propose any additional metrics (especially things that map to gauges or counters) that may be generally useful.  Some of the stuff we have are quantiles for specific syscalls and such (e.g. madvise/mmap/etc.) that probably don't have a place in upstream and which we could probably tackle at another layer to drop the patches (e.g. ebpf black magic to capture specific syscall metrics).</p>



<a name="535542652"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Pooling%20allocator%20metrics/near/535542652" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Pooling.20allocator.20metrics.html#535542652">(Aug 21 2025 at 16:46)</a>:</h4>
<p>Starting with just some basic allocation counts: <a href="https://github.com/bytecodealliance/wasmtime/pull/11490">https://github.com/bytecodealliance/wasmtime/pull/11490</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/11490" style="background-image: url(&quot;https://uploads.zulipusercontent.net/c50360fd0bf38d8f6ff6e7f62d7c01970e495ca9/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f366437353262616636613031366464636638346165363034376562363765636434303237303735343935336437386363653034633037336563666562396132612f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f3131343930&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/11490" title="Add PoolingAllocatorMetrics by lann · Pull Request #11490 · bytecodealliance/wasmtime">Add PoolingAllocatorMetrics by lann · Pull Request #11490 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This exposes some basic runtime metrics derived from the internal state of a PoolingInstanceAllocator.
Two new atomics were added to PoolingInstanceAllocator: live_memories and live_tables. While t...</div></div></div>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>