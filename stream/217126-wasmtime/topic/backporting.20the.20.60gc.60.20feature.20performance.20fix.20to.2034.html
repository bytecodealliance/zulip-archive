<html>
<head><meta charset="utf-8"><title>backporting the `gc` feature performance fix to 34 · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/backporting.20the.20.60gc.60.20feature.20performance.20fix.20to.2034.html">backporting the `gc` feature performance fix to 34</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="524857649"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/backporting%20the%20%60gc%60%20feature%20performance%20fix%20to%2034/near/524857649" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Volosatovs <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/backporting.20the.20.60gc.60.20feature.20performance.20fix.20to.2034.html#524857649">(Jun 19 2025 at 10:36)</a>:</h4>
<p>Currently, disabling <code>gc</code> via feature flag (or otherwise) may carry pretty significant performance penalty, at least in Wasm modules. I know that 34 release has already been branched off, but is there a chance the fix could be back ported? I am happy to open a PR to the release branch to facilitate that</p>
<p>Here's the PR with more details and the fix (which is tiny): <a href="https://github.com/bytecodealliance/wasmtime/pull/11068">https://github.com/bytecodealliance/wasmtime/pull/11068</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/11068" style="background-image: url(&quot;https://uploads.zulipusercontent.net/0eaf022116e7a01b9775086852673152cc01d597/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f626565643736633732626563363565613636343934326462663339663165396461656166666464313137343162336137623930363365626165393932333133642f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f3131303638&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/11068" title="fix: do not collect backtrace on each `gc_runtime` access by rvolosatovs · Pull Request #11068 · bytecodealliance/wasmtime">fix: do not collect backtrace on each `gc_runtime` access by rvolosatovs · Pull Request #11068 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This is something I&#39;ve discovered profiling a Wasmtime embedding with wasm32-unknown-unknown modules. Currently, gc_runtime accessor returns an anyhow::Result, which triggers a backtrace collec...</div></div></div>



<a name="524858333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/backporting%20the%20%60gc%60%20feature%20performance%20fix%20to%2034/near/524858333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Volosatovs <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/backporting.20the.20.60gc.60.20feature.20performance.20fix.20to.2034.html#524858333">(Jun 19 2025 at 10:40)</a>:</h4>
<p>Filed a backport PR for now: <a href="https://github.com/bytecodealliance/wasmtime/pull/11074">https://github.com/bytecodealliance/wasmtime/pull/11074</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/11074" style="background-image: url(&quot;https://uploads.zulipusercontent.net/0d1eed79fd41fcb649b059f31fc2aab781c1d9d9/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663837356234663066363930613938333630336364666131313030393532346130323235306333636639646633333639303930393163396636303638336237382f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f3131303734&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/11074" title="[backport] fix: do not collect backtrace on each gc_runtime access by rvolosatovs · Pull Request #11074 · bytecodealliance/wasmtime">[backport] fix: do not collect backtrace on each gc_runtime access by rvolosatovs · Pull Request #11074 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This is a backport of #11068 to 34.0.0 release branch.
I am not entirely sure what&#39;s the standard procedure for backports, but hopefully this helps.
Zulip discussion: #wasmtime &gt; backporting...</div></div></div>



<a name="524945709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/backporting%20the%20%60gc%60%20feature%20performance%20fix%20to%2034/near/524945709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/backporting.20the.20.60gc.60.20feature.20performance.20fix.20to.2034.html#524945709">(Jun 19 2025 at 20:41)</a>:</h4>
<p>Backport sounds good to me, and thanks for making the PR!</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>