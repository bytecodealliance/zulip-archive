<html>
<head><meta charset="utf-8"><title>Variable not available · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html">Variable not available</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="547017207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Variable%20not%20available/near/547017207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html#547017207">(Oct 25 2025 at 01:20)</a>:</h4>
<p>On aarch64, I'm trying to debug some wasm and using</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">lldb</span><span class="w"> </span><span class="n">wasmtime</span>
</code></pre></div>
<p>Then</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">breakpoint</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="o">--</span><span class="n">file</span><span class="w"> </span><span class="n">StackFrame</span><span class="p">.</span><span class="n">NativeAot</span><span class="p">.</span><span class="n">Wasm</span><span class="p">.</span><span class="n">cs</span><span class="w"> </span><span class="o">--</span><span class="n">line</span><span class="w"> </span><span class="mi">42</span>
<span class="n">process</span><span class="w"> </span><span class="n">launch</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccache</span><span class="o">=</span><span class="n">no</span><span class="w"> </span><span class="o">-</span><span class="n">Oopt</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="n">S</span><span class="w"> </span><span class="n">http</span><span class="w"> </span><span class="o">-</span><span class="n">Ddebug</span><span class="o">-</span><span class="n">info</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">scott</span><span class="o">/</span><span class="n">github</span><span class="o">/</span><span class="n">runtimelab</span><span class="o">-</span><span class="n">sep</span><span class="o">/</span><span class="n">artifacts</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">System</span><span class="p">.</span><span class="n">Diagnostics</span><span class="p">.</span><span class="n">StackTrace</span><span class="p">.</span><span class="n">Tests</span><span class="o">/</span><span class="n">Debug</span><span class="o">/</span><span class="n">net10</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">wasm</span><span class="o">/</span><span class="n">publish</span><span class="o">/</span><span class="n">System</span><span class="p">.</span><span class="n">Diagnostics</span><span class="p">.</span><span class="n">StackTrace</span><span class="p">.</span><span class="n">Tests</span><span class="p">.</span><span class="n">wasm</span>
</code></pre></div>
<p>The breakpoint is hit.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">__vmctx</span><span class="p">-&gt;</span><span class="nc">set</span><span class="p">()</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="n">variable</span>
<span class="p">(</span><span class="n">WasmtimeVMContext</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">__vmctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0000aaab19392a30</span>
<span class="p">(</span><span class="n">WebAssemblyPtrWrapper</span><span class="o">&lt;</span><span class="n">S_P_CoreLib_System_Diagnostics_StackFrame</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="n">__this</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>

<span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="n">includeFileInfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>

<span class="p">(</span><span class="n">WebAssemblyRefWrapper</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="n">isStackTraceHidden</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>

<span class="p">(</span><span class="n">int</span><span class="p">)</span><span class="w"> </span><span class="n">ip</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>

<span class="p">(</span><span class="n">WebAssemblyRefWrapper</span><span class="o">&lt;</span><span class="n">System_String</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span><span class="o">&gt;</span>
</code></pre></div>
<p>And my variables are not available, </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">__this</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">materialize</span><span class="p">:</span><span class="w"> </span><span class="nc">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">__this</span><span class="p">:</span><span class="w"> </span><span class="nc">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">errored</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">DoExecute</span><span class="p">,</span><span class="w"> </span><span class="n">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">PrepareToExecuteJITExpression</span>
</code></pre></div>
<p>Any thing I can try?</p>



<a name="547017323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Variable%20not%20available/near/547017323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html#547017323">(Oct 25 2025 at 01:22)</a>:</h4>
<p>I tried wasmtime 31 and 37, but they both seem the same for this, I guess I'm either missing an option, or my wasm is missing some debug things.</p>



<a name="547057289"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Variable%20not%20available/near/547057289" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html#547057289">(Oct 25 2025 at 13:19)</a>:</h4>
<p>Try <code>p __vmctx-&gt;set()</code> before accessing any variables.</p>



<a name="547058213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Variable%20not%20available/near/547058213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html#547058213">(Oct 25 2025 at 13:34)</a>:</h4>
<p>thanks, yes I have that</p>



<a name="547058242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Variable%20not%20available/near/547058242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html#547058242">(Oct 25 2025 at 13:35)</a>:</h4>
<p>missed it from the OP</p>



<a name="547058406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Variable%20not%20available/near/547058406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Variable.20not.20available.html#547058406">(Oct 25 2025 at 13:37)</a>:</h4>
<p>could be I suppose it is reported incorrectly, I don't know how I would test that</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">__vmctx</span><span class="p">-&gt;</span><span class="nc">set</span><span class="p">()</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">frame</span><span class="w"> </span><span class="n">variable</span>
<span class="p">(</span><span class="n">WasmtimeVMContext</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="n">__vmctx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0000aaab06db8fe0</span>
</code></pre></div>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>