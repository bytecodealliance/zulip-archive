<html>
<head><meta charset="utf-8"><title>Meeting with the Rust Lang Team · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html">Meeting with the Rust Lang Team</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="533149826"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533149826" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533149826">(Aug 06 2025 at 17:22)</a>:</h4>
<p>Hey all, following up on my question a few weeks ago: the Rust lang team would be happy to meet to talk about limitations in the language that currently affect Wasmtime. The date they've proposed for that is <time datetime="2025-09-24T16:30:00Z">2025-09-24T18:30:00+02:00</time>, scheduled for 90 mins.</p>



<a name="533150548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533150548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533150548">(Aug 06 2025 at 17:26)</a>:</h4>
<p>For Wasmtime maintainers: can y'all make this date?</p>



<a name="533150895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533150895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533150895">(Aug 06 2025 at 17:29)</a>:</h4>
<p>Once we confirm the date, I'm happy to take point on writing up a doc for the meeting. My hope for the outcome of this meeting is that the Rust language team can walk away with a healthy set of use cases and problems, which can then be used to motivate language features which resolve those limitations.</p>



<a name="533192694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533192694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533192694">(Aug 06 2025 at 23:34)</a>:</h4>
<p>I can make the date as well, and in the meantime I'm going to drop some loose notes here about what we can talk about. I'm a bit intimidated to take up 90m of the lang team's time just for us in the sense that I'm not sure our feedback is worth so much time, but I figure we can collect things first to better gauge if it'll be worth it. The things that I can think of are:</p>
<h2><code>become</code></h2>
<p>On the top of my head because I just saw it, but our Pulley interpreter in "tail loop" mode requires the <code>become</code> keyword. Right now we have a <code>#[cfg]</code> to switch between a "match loop" and a "tail loop" but it'd be nice to commit to just one. This isn't entirely on Rust though, we have what we need to evaluate <code>become</code> and we mostly just haven't put in all the legwork to say with confidence "yep this is what we want"</p>
<h2>Non-overwritable <code>&amp;mut T</code></h2>
<p>We have a problem where host functions get <code>&amp;mut Store&lt;T&gt;</code> more-or-less, but the problem is that it's not sound to do something like <code>*the_store = Store::new(some_ctor())</code>. To work around this we have our own type <code>StoreContextMut&lt;'_, T&gt;</code> which internally holds <code>&amp;mut Store&lt;T&gt;</code>. This has decent enough ergonomics for external users given enough trait impls, but it has pretty awful ergonomics internally within Wasmtime. It'd be much nicer to "just use <code>&amp;mut Thing</code>".</p>
<h2>Read-only fields (unsafe fields?)</h2>
<p>We're (ab)using <code>Pin</code> right now to make it unsafe to get a <code>&amp;mut vm::Instance</code> right now. It's not really about self-referential types at all, we just want to make it unsafe to get a <code>&amp;mut vm::Instance</code> because it's not safe to mutate some fields. This works well-enough but it's a roundabout solution for what we want which is to disallow mutation of a field after creation (or overwriting it?). Or maybe require unsafe access to a field which would disallow overwriting the whole structure? Unsure.</p>
<h2>Pin ergonomics</h2>
<p>Given above we're using <code>Pin</code> internally but the ergonomics are not great:</p>
<ul>
<li>Lots of <code>self.as_mut().thing(...)</code></li>
<li><code>mut self: Pin&lt;&amp;mut Self&gt;</code> is a mouthful</li>
<li>pin-projection requires <code>unsafe</code> or integration of foreign crates, just a bit awkward</li>
</ul>
<p>(I don't think any of this is news to the lang team)</p>
<h2>Non-leakable types</h2>
<p>For Rust-compiled-to-wasm the component model has async support now which is, if you squint enough, io-uring like in that you give a region of memory to the host and it fills it in later. Rust's "any type is safe to leak" forces safe bindings to always pass everything by ownership which is a bit of a bummer. Not that adding non-leak types is easy of course, but if we're listing out everything may as well list it out.</p>
<h2><code>where F: AsyncFn(), F(..): Send</code></h2>
<p>We more-or-less can't use <code>AsyncFn*</code> anywhere unless we can bound the return type. A well-known issue but we can add fuel to the fire maybe.</p>
<h2><code>fn(T)</code> is not <code>'static</code> unless <code>T: 'static</code></h2>
<p>Feels weird to us (shouldn't require <code>T: 'static</code>), but we don't know if it's intentional or not. Would be nice if it weren't the case, but it's also not the end of the world to us.</p>
<h2>dyn-compatible <code>async fn</code></h2>
<p>We've got a number of usages of <code>#[async_trait]</code> specifically for <code>dyn</code>-compatibility. Again not an easy ask by any means but like above maybe we can add fuel to the fire.</p>
<h2>Esoteric reasons we still have C code in Wasmtime/wit-bindgen</h2>
<ul>
<li>AFAIK it's impossible to call <code>setjmp</code> in Rust safely</li>
<li>Need to be able to define a symbol as "weak" (the defining half of weak linkage)</li>
<li>Need to be able to optionally import a symbol (the declaring half of weak linkage) -- this is used much more rarely but still used in Wasmtime.</li>
<li>Need to define "dllexport" symbols on Windows (we have a comment saying <code>#[export_name]</code> isn't sufficient)</li>
</ul>
<h2>Calling a <code>&amp;mut self</code> method with access to a subset of fields</h2>
<p>We've got a giant <code>Store&lt;T&gt;</code> type which is passed everywhere internally within Wasmtime. More and more methods need simultaneous borrows to multiple fields in this type, but in an effort to keep the implementation details private we keep adding more and more methods for various permutations of fields. It'd be nice if we could call "base methods" where each method accesses a disjoint set of fields. Like many above this is a well-known problem in Rust I believe.</p>
<h2>Wasm proc macros</h2>
<p>Rustc should have more wasm in it <span aria-label="smiling face with horns" class="emoji emoji-1f608" role="img" title="smiling face with horns">:smiling_face_with_horns:</span></p>
<p>(this is a joke, not a serious ask)</p>



<a name="533192758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533192758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533192758">(Aug 06 2025 at 23:35)</a>:</h4>
<p>that's at least what's on my head right now, and I'm not sure it'd make sense to explicitly talk about all of these during such a meeting. Some I think we could explain our use case more to help design (e.g. <code>&amp;mut self</code> and subsets of fields) but others are just a "yep someone still wants this" (e.g. <code>F(..): Send</code>).</p>
<p>If we do move forward with this list I would also want to compile a similar list which is "all the stuff added to Rust since Wasmtime started which we're very happy to be using". I think it'd be worth outlining all the historical major features too</p>



<a name="533197673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533197673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533197673">(Aug 07 2025 at 00:37)</a>:</h4>
<blockquote>
<p>I'm a bit intimidated to take up 90m of the lang team's time just for us in the sense that I'm not sure our feedback is worth so much time, but I figure we can collect things first to better gauge if it'll be worth it.</p>
</blockquote>
<p>Hah, so - I really wouldn't worry about that. Just from the conversations you and I have had, I know that the time spent with the lang team would be worth it.</p>



<a name="533197852"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533197852" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533197852">(Aug 07 2025 at 00:39)</a>:</h4>
<p>Thank you so much for the list so far btw! These are all great so far!</p>



<a name="533197940"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533197940" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533197940">(Aug 07 2025 at 00:40)</a>:</h4>
<p>Loving the idea of also calling out some of the bigger wins the language has provided - that kind of feedback is also quite rare</p>



<a name="533201421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533201421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533201421">(Aug 07 2025 at 01:17)</a>:</h4>
<p>I’m not sure where the whole “Send is infectious through the whole wasmtime API and we basically can’t stomach supporting non-Send embeddings, they just have to deal with it (usually by lying to the type checker” issue fits into Alex’s list but that’s the biggest one for me. I also don’t really feel like I know how to present that in a way that makes good use of their time. Alex can represent it better than me. I’d be grateful just to listen in.</p>



<a name="533209339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533209339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533209339">(Aug 07 2025 at 03:10)</a>:</h4>
<p>Oh actually now that I look at the calendar for real I would be unable to make that slot as Fermyon has its off-site then, would it be possible to use the slot after?</p>
<p>Also good point Pat that's a good one to include on the list</p>



<a name="533289480"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533289480" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533289480">(Aug 07 2025 at 13:08)</a>:</h4>
<p>will include!</p>



<a name="533289703"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533289703" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533289703">(Aug 07 2025 at 13:09)</a>:</h4>
<p>Messaged the lang team back; I think that means this is going to need to be bumped back to the next planning cycle.</p>



<a name="533370148"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533370148" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533370148">(Aug 07 2025 at 22:13)</a>:</h4>
<p>Writing down those prior thoughts:</p>
<h3>Infectiousness of <code>Send</code> with <code>async</code></h3>
<p>Wasmtime's current <code>async</code> support effectively ends up meaning that we require <code>Send</code> on pretty much everything. There's no way currently to use Wasmtime in a non-<code>Send</code> context or a single-threaded <code>async</code> executor. Unsure what a solution would look like, but it's something we've come up against.</p>
<h3>Generic parameters in constant expressions</h3>
<p>We've run into this not compiling:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">N</span><span class="p">:</span><span class="w"> </span><span class="kt">usize</span><span class="p">;</span>

<span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">slice</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="p">[</span><span class="kt">u8</span><span class="p">;</span><span class="w"> </span><span class="bp">Self</span><span class="p">::</span><span class="n">N</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
<p>and it'd be a nice simplification of canonical ABI lifting/lowering if were were able to express this</p>



<a name="533492669"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533492669" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533492669">(Aug 08 2025 at 16:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team/near/533209339">said</a>:</p>
<blockquote>
<p>Oh actually now that I look at the calendar for real I would be unable to make that slot as Fermyon has its off-site then, would it be possible to use the slot after?</p>
<p>Also good point Pat that's a good one to include on the list</p>
</blockquote>
<p>lang team seems happy to push the meeting by a week (still waiting on final confirmation tho) - are y'all able to make <time datetime="2025-10-01T16:30:00Z">2025-10-01T18:30:00+02:00</time>?</p>



<a name="533494231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533494231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533494231">(Aug 08 2025 at 16:33)</a>:</h4>
<p>Works for me <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="533500142"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533500142" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533500142">(Aug 08 2025 at 17:15)</a>:</h4>
<p>works for me as well</p>



<a name="533535696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533535696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533535696">(Aug 08 2025 at 22:30)</a>:</h4>
<p>another thing to talk about: better language tools for bitpacking enums and arbitrary bit width integers</p>
<p>see <code>CompileKey</code> (soon to be renamed to <code>FuncKey</code>) and wasmparser's <code>RefType</code> and <code>PackedIndex</code> and <code>UnpackedIndex</code> and cranelift_entity's <code>PackedOption</code></p>



<a name="533814555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/533814555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#533814555">(Aug 11 2025 at 15:09)</a>:</h4>
<blockquote>
<p>bitpacking enums</p>
</blockquote>
<p>A few more examples that are interesting: <code>ValueData</code> in Cranelift's DFG, which is a four-way enum; and <code>Operand</code> in regalloc2, which has a bunch of fields and cannot just be divided into arbitrary bitwidth fields (steals bits from some fields when upper bits of the discriminant are in some states for more sub-discriminant)</p>
<p>Also one more topic: representing ownership to avoid dynamic checks. We currently have a bunch of dynamic "is same engine" and "is same store" checks, out of necessity, because our index-based handles could otherwise lead to incorrectness. We would need "generative" or "path-dependent" or "place-based" types/lifetimes to statically encode, in the types, that e.g. an <code>Instance</code> is associated with a particular engine, and ensure only values from the same engine interact; Rust's type system today mostly can't do this. (Gankra's masters thesis contains a neat closure-trick that is technically generative within the scope of a closure, but would be completely unergonomic in our APIs.) I know the Rust community generally is thinking about this; and Niko has a <a href="https://smallcultfollowing.com/babysteps/blog/2024/06/02/the-borrow-checker-within/">blog post</a> that mentions "place-based lifetimes" that is a step in the direction. I wrote up a random <a href="https://cfallin.org/blog/2024/06/12/rust-path-generics/">idea</a> last year (but haven't seriously pursued it); in general I'd just be curious if this problem has further thoughts from the lang-team, and emphasize that it occurs in practice and leads to dynamic checks.</p>



<a name="535370378"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/535370378" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#535370378">(Aug 20 2025 at 18:37)</a>:</h4>
<p>Another thing to talk about: how to make Pulley and threads work with Rust's memory model</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/pull/9818">https://github.com/bytecodealliance/wasmtime/pull/9818</a></li>
<li><a href="https://rust-lang.zulipchat.com/#narrow/channel/213817-t-lang/topic/Writing.20a.20WebAssembly.20interpreter.20in.20Rust.20for.20wasm.20threads/near/488915886">https://rust-lang.zulipchat.com/#narrow/channel/213817-t-lang/topic/Writing.20a.20WebAssembly.20interpreter.20in.20Rust.20for.20wasm.20threads/near/488915886</a></li>
</ul>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/9818" style="background-image: url(&quot;https://uploads.zulipusercontent.net/bf371b2446304eb3ba8de7bfb4d01f764169fbf7/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f376633666234346261303033363836383131323865353938393865653636303733353234343830383366646638666535366266356532326637333235643637372f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f39383138&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/9818" title="pulley: Disable the WebAssembly `threads` proposal by alexcrichton · Pull Request #9818 · bytecodealliance/wasmtime">pulley: Disable the WebAssembly `threads` proposal by alexcrichton · Pull Request #9818 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Forcibly disable the threads proposal for Pulley. This is done because I don&#39;t believe there&#39;s any way that we can, in Rust, implement non-atomic loads and stores in a manner that isn&#39;t...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://rust-lang.zulipchat.com/#narrow/channel/213817-t-lang/topic/Writing.20a.20WebAssembly.20interpreter.20in.20Rust.20for.20wasm.20threads/near/488915886" style="background-image: url(&quot;https://uploads.zulipusercontent.net/62a5be7c4dbb3d51af34a64dfbc026434727b1f6/68747470733a2f2f617661746172732e7a756c69702e636f6d2f343731352f7265616c6d2f69636f6e2e706e673f76657273696f6e3d32&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://rust-lang.zulipchat.com/#narrow/channel/213817-t-lang/topic/Writing.20a.20WebAssembly.20interpreter.20in.20Rust.20for.20wasm.20threads/near/488915886" title="Public view of rust-lang | Zulip team chat">Public view of rust-lang | Zulip team chat</a></div><div class="message_embed_description">Browse the publicly accessible channels in rust-lang without logging in.</div></div></div>



<a name="536473610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/536473610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#536473610">(Aug 27 2025 at 18:07)</a>:</h4>
<p>topic: x86_64-unknown-none softfloat abi is a problem, can we have an otherwise identical target with the "regular" float abi? or can we stabilize build-std?</p>



<a name="542005322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542005322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542005322">(Sep 29 2025 at 11:00)</a>:</h4>
<p>Reminder for Wasmtime maintainers: the meeting with the Rust language team is this Wednesday at <time datetime="2025-10-01T16:30:00Z">2025-10-01T18:30:00+02:00</time>. The meeting lasts 90 mins: the first 30 mins are spent reading a doc and writing out questions, which is then followed by 60 mins of discussion.</p>



<a name="542005584"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542005584" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542005584">(Sep 29 2025 at 11:01)</a>:</h4>
<p>I'll send through a hackmd doc later today, which will includes everything posted in this thread so far + other items from individual conversations.</p>



<a name="542005943"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542005943" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542005943">(Sep 29 2025 at 11:03)</a>:</h4>
<p>If anyone has any other items they haven't seen mentioned yet in this thread, you're welcome to share them! - We should have more than plenty to fill out an hour's worth of conversation already though. So don't feel like you have to.</p>



<a name="542054301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542054301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542054301">(Sep 29 2025 at 14:22)</a>:</h4>
<p>Looking forward to it! Also happy to help out with editing the doc too</p>



<a name="542100783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542100783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542100783">(Sep 29 2025 at 17:36)</a>:</h4>
<p>First pass of the doc is done: <a href="https://hackmd.io/@yoshuawuyts/HkW6fBd2le">https://hackmd.io/@yoshuawuyts/HkW6fBd2le</a></p>



<a name="542100887"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542100887" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542100887">(Sep 29 2025 at 17:36)</a>:</h4>
<p>I think we could probably do with some more code examples and links</p>



<a name="542100932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542100932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542100932">(Sep 29 2025 at 17:36)</a>:</h4>
<p>I still need to reformat some things too</p>



<a name="542101023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542101023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542101023">(Sep 29 2025 at 17:37)</a>:</h4>
<p><span class="user-mention" data-user-id="253992">@Pat Hickey</span> if you have the time, can I ask you to elaborate on the softfloat target topic in the doc?</p>



<a name="542102255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542102255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542102255">(Sep 29 2025 at 17:44)</a>:</h4>
<p>thats more of a <span class="user-mention" data-user-id="254389">@Chris Fallin</span> / <span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> topic</p>



<a name="542104203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542104203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542104203">(Sep 29 2025 at 17:54)</a>:</h4>
<p><span class="user-mention" data-user-id="344849">@Yosh Wuyts</span>  So the issue is that we embed Wasmtime in an x86-64 Linux process with very special requirements, namely that it cannot make syscalls; others embed Wasmtime in their own bespoke x86-64 environments with no OS or custom OS functionality. For all these cases, the usual approach would be to compile for <code>x86_64-unknown-none</code>, which is a <code>no_std</code> target. That's all well and good except that that target has an ABI that assumes <em>softfloat</em>: vector registers are not available at all and all FP values go through software implementations of operators. Usually in these environments we've done the legwork to be able to actually use the ordinary hardware float ABI.</p>
<p>So it's a pretty simple mechanical plumbing thing, but basically we end up needing is a custom target.</p>
<p>Where this gets weird/interesting is that custom targets are nightly-only, so our current plan is just to require a nightly compiler, but that sucks, especially in a corporate environment where new things are already seen as suspicious and unstable.</p>
<p>The concrete ask for rustlang as a whole would be to stabilize <code>-Zbuild-std</code> so custom targets can work at the same level as built-in targets for <code>no_std</code> code that uses <code>core</code>/<code>alloc</code>. That may or may not be a lang-team thing but I guess Pat brought it up because it's a real impediment for adoption</p>



<a name="542105862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542105862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542105862">(Sep 29 2025 at 18:01)</a>:</h4>
<p>it is the kind of thing that Microsoft Corporate would like to see, certainly, if an example is required.....</p>



<a name="542106278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542106278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542106278">(Sep 29 2025 at 18:02)</a>:</h4>
<p>I added a paragraph to the doc, feel free to expand/edit it</p>



<a name="542111016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542111016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542111016">(Sep 29 2025 at 18:25)</a>:</h4>
<p>Did a pass and edited some things. Chris/Nick y'all might want to expand on the <a href="https://hackmd.io/qBBoEgNISROHUpLBlYLf8w?both#Bitpacking-Enums">bitpacking part</a></p>



<a name="542111491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542111491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542111491">(Sep 29 2025 at 18:27)</a>:</h4>
<p>I also added this to the intro:</p>
<blockquote>
<p>Below is a listing of topics that the Wasmtime team has brainstormed about possible discussion points with T-lang. Most of these are centered around things we've run into when implementing Wasmtime itself in Rust. This is, however, also a great opportunity if T-lang would like to pick our own brains about wasm support and how it relates to Rust. We're of course willing to chat about anything related to wasm and development of the standard and such!</p>
</blockquote>



<a name="542123107"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542123107" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542123107">(Sep 29 2025 at 19:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team/near/542111016">said</a>:</p>
<blockquote>
<p>Chris/Nick y'all might want to expand on the <a href="https://hackmd.io/qBBoEgNISROHUpLBlYLf8w?both#Bitpacking-Enums">bitpacking part</a></p>
</blockquote>
<p>done</p>



<a name="542127127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542127127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542127127">(Sep 29 2025 at 19:47)</a>:</h4>
<p>Also, logistics-wise, how will we join?</p>



<a name="542141981"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542141981" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542141981">(Sep 29 2025 at 21:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team/near/542127127">said</a>:</p>
<blockquote>
<p>Also, logistics-wise, how will we join?</p>
</blockquote>
<p>At the meeting time, join <a href="https://meet.jit.si/ferris-rules">https://meet.jit.si/ferris-rules</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://meet.jit.si/ferris-rules" style="background-image: url(&quot;https://uploads.zulipusercontent.net/050c7e43c0fc5dfcc5ba4105d6e634252586c236/68747470733a2f2f6d6565742e6a69742e73692f696d616765732f6a697473696c6f676f2e706e673f763d31&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://meet.jit.si/ferris-rules" title="Jitsi Meet">Jitsi Meet</a></div><div class="message_embed_description">Join a WebRTC video conference powered by the Jitsi Videobridge</div></div></div>



<a name="542142037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542142037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542142037">(Sep 29 2025 at 21:18)</a>:</h4>
<p>(Will take a look at the updated doc tomorrow!)</p>



<a name="542320722"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542320722" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542320722">(Sep 30 2025 at 16:30)</a>:</h4>
<p><span class="user-mention" data-user-id="253990">@fitzgen (he/him)</span> could I ask you to expand a little on the Pulley + Atomics section? I'm reading the explainer and the links, and I'm missing:</p>
<ul>
<li>what does the ecmascript-atomics crate provide?</li>
<li>what would a potential stable solution look like? new atomic instructions or orderings?</li>
</ul>



<a name="542320923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542320923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542320923">(Sep 30 2025 at 16:31)</a>:</h4>
<p>oh I can take care of that b/c I added most of that</p>



<a name="542320956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542320956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542320956">(Sep 30 2025 at 16:31)</a>:</h4>
<p>ty ty!</p>



<a name="542321330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542321330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542321330">(Sep 30 2025 at 16:33)</a>:</h4>
<p>okay, finished reading over the doc! - tysm for all the changes and edits, I think this looks great, and will give us a lot to talk about tomorrow!</p>



<a name="542563614"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Meeting%20with%20the%20Rust%20Lang%20Team/near/542563614" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Meeting.20with.20the.20Rust.20Lang.20Team.html#542563614">(Oct 01 2025 at 18:58)</a>:</h4>
<p>I think the meeting went really well. Thank you all for joining!</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>