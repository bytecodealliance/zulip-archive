<html>
<head><meta charset="utf-8"><title>Wasmtime breakpoints  - Windows - C_API calls in DLL not EXE · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html">Wasmtime breakpoints  - Windows - C_API calls in DLL not EXE</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="544802220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544802220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544802220">(Oct 14 2025 at 17:14)</a>:</h4>
<p>Seems when wasmtime C/API calls are made from a Windows DLL, lldb fails to resolve the breakpoint.<br>
When C/API calls made from a window exe, such as the example I posted yesterday, breakpoints resolve.<br>
Seems to be an lldb issue. Will update yesterday's repro to emulate what our actual app does in a DLL &amp; see if that can reproduce. If so, seems an LLDB issue, not a wasmtime issue, but FYI.</p>
<p>lldb version 21.1.3</p>
<p>next step is build lldb trunk from source in debug mode &amp; see if I can figure out what's going on.</p>
<p>This is a regression somewhere as it used to work.</p>



<a name="544806166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544806166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544806166">(Oct 14 2025 at 17:39)</a>:</h4>
<p>Fixed this once. Will be something like this.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">diff</span><span class="w"> </span><span class="o">--</span><span class="n">git</span><span class="w"> </span><span class="s">"a/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp"</span><span class="w"> </span><span class="s">"b/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp"</span>
<span class="n">index</span><span class="w"> </span><span class="mi">7</span><span class="n">b810c0fee43</span><span class="o">..</span><span class="n">f6d45685e4b7</span><span class="w"> </span><span class="mi">100644</span>
<span class="o">---</span><span class="w"> </span><span class="s">"a/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp"</span>
<span class="o">+++</span><span class="w"> </span><span class="s">"b/lldb/source/Plugins/JITLoader/GDB/JITLoaderGDB.cpp"</span>
<span class="o">@@</span><span class="w"> </span><span class="o">-</span><span class="mi">195</span><span class="p">,</span><span class="mi">7</span><span class="w"> </span><span class="o">+</span><span class="mi">195</span><span class="p">,</span><span class="mi">17</span><span class="w"> </span><span class="o">@@</span><span class="w"> </span><span class="n">void</span><span class="w"> </span><span class="n">JITLoaderGDB</span><span class="p">::</span><span class="n">SetJITBreakpoint</span><span class="p">(</span><span class="n">lldb_private</span><span class="p">::</span><span class="n">ModuleList</span><span class="w"> </span><span class="o">&amp;</span><span class="n">module_list</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="k">return</span><span class="p">;</span>

<span class="w">   </span><span class="n">m_jit_descriptor_addr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GetSymbolAddress</span><span class="p">(</span>
<span class="o">-</span><span class="w">      </span><span class="n">module_list</span><span class="p">,</span><span class="w"> </span><span class="n">ConstString</span><span class="p">(</span><span class="s">"__jit_debug_descriptor"</span><span class="p">),</span><span class="w"> </span><span class="n">eSymbolTypeData</span><span class="p">);</span>
<span class="o">+</span><span class="w">      </span><span class="n">module_list</span><span class="p">,</span><span class="w"> </span><span class="n">ConstString</span><span class="p">(</span><span class="s">"__jit_debug_descriptor"</span><span class="p">),</span>
<span class="o">+</span>
<span class="o">+</span><span class="p">#</span><span class="k">if</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">WIN32</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">WINDOWS</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">WIN64</span>
<span class="o">+</span><span class="w">                       </span><span class="c1">// ADV_SW_PATCH: Windows implementation not indicating symbol is Data</span>
<span class="o">+</span><span class="w">                       </span><span class="c1">// so we use Any as workaround for the time being.</span>
<span class="o">+</span><span class="w">                       </span><span class="n">eSymbolTypeAny</span><span class="p">);</span>
<span class="o">+</span><span class="p">#</span><span class="k">else</span>
<span class="o">+</span><span class="w">                       </span><span class="n">eSymbolTypeData</span><span class="p">);</span>
<span class="o">+</span><span class="p">#</span><span class="n">endif</span>
<span class="o">+</span>
<span class="o">+</span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">m_jit_descriptor_addr</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">LLDB_INVALID_ADDRESS</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">LLDB_LOGF</span><span class="p">(</span><span class="n">log</span><span class="p">,</span><span class="w"> </span><span class="s">"JITLoaderGDB::%s failed to find JIT descriptor address"</span><span class="p">,</span>
<span class="w">               </span><span class="n">__FUNCTION__</span><span class="p">);</span>
</code></pre></div>



<a name="544807526"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544807526" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544807526">(Oct 14 2025 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="448652">@Steve Williams</span> this is not a forum for LLDB diffs; please take it to their issue tracker. Thanks.</p>



<a name="544807663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544807663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544807663">(Oct 14 2025 at 17:49)</a>:</h4>
<p>course but this stuff is difficult, if it doesn't interest you, stay out of my threads. you're getting annoying.</p>
<p>its core functionality. without this wasmtime is a toy.</p>



<a name="544808176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544808176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544808176">(Oct 14 2025 at 17:53)</a>:</h4>
<p>that's not a fix, that's how I fixed it last time. I don't know what the current status is yet, but the issue will be somewhere around there. robust wasm debugging on core platforms absolutely is relevant here.</p>



<a name="544809726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544809726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ramon Klass <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544809726">(Oct 14 2025 at 18:02)</a>:</h4>
<p>you can't force people to reprioritize your favorite toy by shouting louder, what do you think would happen if everyone started to post a zulip message every time they found out another detail about what they are currently working on?</p>



<a name="544809870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Wasmtime%20breakpoints%20%20-%20Windows%20-%20C_API%20calls%20in%20DLL%20not%20EXE/near/544809870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Steve Williams <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Wasmtime.20breakpoints.20.20-.20Windows.20-.20C_API.20calls.20in.20DLL.20not.20EXE.html#544809870">(Oct 14 2025 at 18:03)</a>:</h4>
<p>You're in my thread, if you've got an issue higher priority, post it.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>