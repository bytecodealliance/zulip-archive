<html>
<head><meta charset="utf-8"><title>Debugging a wasm module in a hyperlight guest · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html">Debugging a wasm module in a hyperlight guest</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="523732189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/523732189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#523732189">(Jun 12 2025 at 11:04)</a>:</h4>
<p>You are using the steps at <a href="https://github.com/hyperlight-dev/hyperlight/blob/main/docs/how-to-debug-a-hyperlight-guest.md">https://github.com/hyperlight-dev/hyperlight/blob/main/docs/how-to-debug-a-hyperlight-guest.md</a> to attach gdb to the guest process? You could try if enabling debug-builtins compiles. Also make sure to tell Wasmtime to generate debuginfo in the first place (<code>config.debug_info(true)</code>).</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/hyperlight-dev/hyperlight/blob/main/docs/how-to-debug-a-hyperlight-guest.md" style="background-image: url(&quot;https://uploads.zulipusercontent.net/1d4f969a063d0640aa8297c5fbc6a2315fba151b/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633864383439613632616532653462373861613965653539313961643762383461373336633431383230316134383966376133386463656636643263313533622f68797065726c696768742d6465762f68797065726c69676874&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/hyperlight-dev/hyperlight/blob/main/docs/how-to-debug-a-hyperlight-guest.md" title="hyperlight/docs/how-to-debug-a-hyperlight-guest.md at main · hyperlight-dev/hyperlight">hyperlight/docs/how-to-debug-a-hyperlight-guest.md at main · hyperlight-dev/hyperlight</a></div><div class="message_embed_description">Hyperlight is a lightweight Virtual Machine Manager (VMM) designed to be embedded within applications. It enables safe execution of untrusted code within micro virtual machines with very low latenc...</div></div></div>



<a name="523732371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/523732371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#523732371">(Jun 12 2025 at 11:05)</a>:</h4>
<p>2 messages were moved here from <a class="stream-topic" data-stream-id="217126" href="/#narrow/channel/217126-wasmtime/topic/Debugging.20wasm.20with.20lldb.2Fgdb/with/340514698">#wasmtime &gt; Debugging wasm with lldb/gdb</a> by <span class="user-mention silent" data-user-id="264278">bjorn3</span>.</p>



<a name="523734832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/523734832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#523734832">(Jun 12 2025 at 11:21)</a>:</h4>
<p>Yes, I am using the steps in Hyperlight, this is not related to hyperlight.<br>
I am able to attach and debug the guest. However, when the guest tries to use the wasmtime runtime to execute a module, I am not able to make <code>gdb/lldb</code> interactively debug the wasm source code for the module</p>



<a name="523735158"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/523735158" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#523735158">(Jun 12 2025 at 11:23)</a>:</h4>
<p>I provided the <code>config.debug_info(true)</code> option to the wasmtime Engine Config.</p>



<a name="523772577"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/523772577" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#523772577">(Jun 12 2025 at 14:40)</a>:</h4>
<p>I am wondering whether the <code>debug-builtins</code> are needed for this to work.</p>



<a name="523816121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/523816121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#523816121">(Jun 12 2025 at 19:02)</a>:</h4>
<p>Yeah, I believe you need to enable debug-builtins.</p>



<a name="524270251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/524270251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#524270251">(Jun 16 2025 at 14:30)</a>:</h4>
<p>I've looked more thoroughly and tested and it does need the <code>debug-builtins</code> feature to allow debugger inspect the wasm module at runtime.<br>
I cannot enable <code>debug-builtins</code> because it depends on the <code>std</code> feature and I am running in a no_std environment.<br>
I've browsed the code that depends on the <code>debug-builtins</code> feature, and I am not sure, but it looks like that could be modified to run in a <code>no_std</code> env.</p>
<p>What do you think?</p>



<a name="524273170"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/524273170" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#524273170">(Jun 16 2025 at 14:45)</a>:</h4>
<p>When no_std support was added most preexisting features were flagged as requiring std blindly. If debug-builtins works without std then that's great! If you're able to help out (which would be much appreciated!) the fix would look like <a href="https://github.com/bytecodealliance/wasmtime/blob/60269d642510263ccf5fe637c042d663fecfc43a/.github/workflows/main.yml#L506-L515">configuring CI to test the feature here</a> (e.g. adding it to the list of features already built) and then fixing up any issues that arise.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/60269d642510263ccf5fe637c042d663fecfc43a/.github/workflows/main.yml#L506-L515" style="background-image: url(&quot;https://uploads.zulipusercontent.net/9f90f85e7d84412802c32af8c24381b480301b78/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f303865306566313761613134666431376337383165666336363766653261643334343665666565396466633836316336366464363139343366346430303366312f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/60269d642510263ccf5fe637c042d663fecfc43a/.github/workflows/main.yml#L506-L515" title="wasmtime/.github/workflows/main.yml at 60269d642510263ccf5fe637c042d663fecfc43a · bytecodealliance/wasmtime">wasmtime/.github/workflows/main.yml at 60269d642510263ccf5fe637c042d663fecfc43a · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>



<a name="524274294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/524274294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#524274294">(Jun 16 2025 at 14:50)</a>:</h4>
<p>Thanks for the explanation, Alex!<br>
I'll try make it not depend on <code>std</code> <span aria-label="smile" class="emoji emoji-1f604" role="img" title="smile">:smile:</span></p>



<a name="524410411"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/524410411" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#524410411">(Jun 17 2025 at 09:35)</a>:</h4>
<p>GO DORU GO</p>



<a name="530214772"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/530214772" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#530214772">(Jul 22 2025 at 20:07)</a>:</h4>
<p>I've submitted a PR regarding this no_std support for the debug-builtins feature, and I can't seem to figure out why <code>cargo vet</code> fails.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/pull/11304">https://github.com/bytecodealliance/wasmtime/pull/11304</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/11304" style="background-image: url(&quot;https://uploads.zulipusercontent.net/b7b9fd30c00ddb4e32d10acf961e0c9e206f8405/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633664333932636535646239646661326538663363666366303338653332636139356230386339633666346330373362366363613838373764323064646436642f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f3131333034&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/11304" title="Allow compiling debug-builtins in no_std environment to enable gdb jit by dblnz · Pull Request #11304 · bytecodealliance/wasmtime">Allow compiling debug-builtins in no_std environment to enable gdb jit by dblnz · Pull Request #11304 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Description
This PR takes care of enabling the compilation of gdb_jit_int module in the jit-debug crate to ensure the native debugging also works in no_std environments.
The
This work has been disc...</div></div></div>



<a name="530377860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/530377860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#530377860">(Jul 23 2025 at 15:42)</a>:</h4>
<p>We are targeting Wasmtime 36.0.0 LTS release to use for debugging wasm modules/components running in the no_std environment of a Hyperlight guest.</p>



<a name="531878691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/531878691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Doru Blânzeanu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#531878691">(Jul 30 2025 at 16:03)</a>:</h4>
<p>Thanks for the help provided in merging this! It is in time for the <code>v36.0.0</code> right?</p>



<a name="531885403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/Debugging%20a%20wasm%20module%20in%20a%20hyperlight%20guest/near/531885403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/Debugging.20a.20wasm.20module.20in.20a.20hyperlight.20guest.html#531885403">(Jul 30 2025 at 16:39)</a>:</h4>
<p>It is indeed yeah, that'll branch next week</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>