<html>
<head><meta charset="utf-8"><title>✔ Module instantiation hook · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Module.20instantiation.20hook.html">✔ Module instantiation hook</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="540050994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20Module%20instantiation%20hook/near/540050994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Volosatovs <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Module.20instantiation.20hook.html#540050994">(Sep 17 2025 at 15:52)</a>:</h4>
<p>Thank you all for the advice, I've settled on the start function re-export approach, which seems to be working really well!</p>
<p>for reference,<br>
instrumentation: <a href="https://github.com/near/finite-wasm/pull/80">https://github.com/near/finite-wasm/pull/80</a><br>
embedding: <a href="https://github.com/near/nearcore/pull/14248">https://github.com/near/nearcore/pull/14248</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/near/finite-wasm/pull/80" style="background-image: url(&quot;https://uploads.zulipusercontent.net/3dfed7673c8618696b78838f20ab57313511d44b/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f336430323964303735636239646337303537666634393665643733643431333732356234373462656464326334323732626231653439623363636663396337302f6e6561722f66696e6974652d7761736d2f70756c6c2f3830&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/near/finite-wasm/pull/80" title="feat: implement instrumentation inline by rvolosatovs · Pull Request #80 · near/finite-wasm">feat: implement instrumentation inline by rvolosatovs · Pull Request #80 · near/finite-wasm</a></div><div class="message_embed_description">Implement instrumentation inline.
This relies on two new imports:

finite_wasm_stack_exhausted
finite_wasm_gas_exhausted

and 1 exported global:

finite_wasm_remaining_gas - the runtime is expected...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/near/nearcore/pull/14248" style="background-image: url(&quot;https://uploads.zulipusercontent.net/44a605760266458c7d246dfbb2466037d9cddac2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363531353963653666323762353031663738346535316664353164333934336261643634343266363738316233323933393930613366643433323264613232382f6e6561722f6e656172636f72652f70756c6c2f3134323438&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/near/nearcore/pull/14248" title="feat: instrument modules inline by rvolosatovs · Pull Request #14248 · near/nearcore">feat: instrument modules inline by rvolosatovs · Pull Request #14248 · near/nearcore</a></div><div class="message_embed_description">Depends on near/finite-wasm#80
Benchmarks using mainnet data, protocol version 79
NearVm (Wasmer):

Applied the chunk 915 times. - average stats: (application time: 5.4ms, applications per second: ...</div></div></div>



<a name="540051006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/%E2%9C%94%20Module%20instantiation%20hook/near/540051006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/.E2.9C.94.20Module.20instantiation.20hook.html#540051006">(Sep 17 2025 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="484032">Roman Volosatovs</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>