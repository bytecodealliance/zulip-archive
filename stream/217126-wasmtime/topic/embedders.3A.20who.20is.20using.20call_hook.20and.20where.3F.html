<html>
<head><meta charset="utf-8"><title>embedders: who is using call_hook and where? · wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/index.html">wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html">embedders: who is using call_hook and where?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="570667774"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570667774" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570667774">(Jan 28 2026 at 21:59)</a>:</h4>
<p>I introduced the <a href="https://docs.rs/wasmtime/latest/wasmtime/struct.Store.html#method.call_hook"><code>call_hook</code></a> machinery when I was working on Fastly's embedding of wasmtime. I'm noodling what some design changes there might look like and I'm curious if any other embedders are actually using that feature with components, and if so, what are you using it for?</p>



<a name="570667968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570667968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570667968">(Jan 28 2026 at 22:00)</a>:</h4>
<p><span class="user-mention" data-user-id="254083">@Dan Gohman</span> is Fastly still using the call hook in roughly the same way as before with the component embedding?</p>



<a name="570668186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570668186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570668186">(Jan 28 2026 at 22:01)</a>:</h4>
<p>pinging some other folks who have maintained major embeddings: <span class="user-mention" data-user-id="509936">@Joel Dice</span> <span class="user-mention" data-user-id="421591">@Bailey Hayes</span> <span class="user-mention" data-user-id="344849">@Yosh Wuyts</span> <span class="user-mention" data-user-id="411395">@Saúl Cabrera</span></p>



<a name="570669000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570669000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Gohman <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570669000">(Jan 28 2026 at 22:07)</a>:</h4>
<p><span class="user-mention" data-user-id="253992">@Pat Hickey</span> We're still using it, or rather, we're using <code>call_hook_async</code> now, but for effectively the same purpose, iiuc.</p>



<a name="570669882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570669882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bailey Hayes <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570669882">(Jan 28 2026 at 22:13)</a>:</h4>
<p>we're not currently using it</p>



<a name="570680016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570680016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570680016">(Jan 28 2026 at 23:41)</a>:</h4>
<p>cc/ <span class="user-mention" data-user-id="443063">@Dan Chiarlone (danbugs)</span> <span class="user-mention" data-user-id="761042">@Lucy Menon</span></p>



<a name="570681840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570681840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Saúl Cabrera <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570681840">(Jan 28 2026 at 23:57)</a>:</h4>
<p>cc/ <span class="user-mention" data-user-id="477345">@Jeff Charles</span></p>



<a name="570700377"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570700377" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570700377">(Jan 29 2026 at 03:45)</a>:</h4>
<p>I believe that Spin is using the synchronous version for tracking time-in and time-out for requests</p>



<a name="570810503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570810503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Till Schneidereit <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570810503">(Jan 29 2026 at 14:30)</a>:</h4>
<p>correct yeah, we're using it. However, I think we should actually do more coarse-grained time tracking based on Tokio tasks, so if there's a good argument for removing them, that's something we could discuss</p>



<a name="570828487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/570828487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jeff Charles <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#570828487">(Jan 29 2026 at 15:36)</a>:</h4>
<p>We're not currently using it</p>



<a name="571066841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/571066841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#571066841">(Jan 30 2026 at 16:01)</a>:</h4>
<p>Spin uses it to emit metrics for guest execution wall time. Till is right that we could potentially replace that with task busy time but they aren't <em>exactly</em> equivalent. We've also discussed using them for tracking CPU counters but I'd be even happier to add e.g. USDT probes for that (since counters aren't terribly portable to begin with).</p>



<a name="572163883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/572163883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lucy Menon <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#572163883">(Feb 05 2026 at 14:30)</a>:</h4>
<p>I don't believe we are using it right now. We don't need per-instance execution time or anything like that at the moment.</p>



<a name="572200259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217126-wasmtime/topic/embedders%3A%20who%20is%20using%20call_hook%20and%20where%3F/near/572200259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/217126-wasmtime/topic/embedders.3A.20who.20is.20using.20call_hook.20and.20where.3F.html#572200259">(Feb 05 2026 at 16:43)</a>:</h4>
<p>Thanks all. FWIW I moved on to working on another mechanism at the moment and don't plan to make any changes to call hooks.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>