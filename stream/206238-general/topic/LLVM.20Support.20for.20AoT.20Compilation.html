<html>
<head><meta charset="utf-8"><title>LLVM Support for AoT Compilation · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html">LLVM Support for AoT Compilation</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="561204922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561204922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561204922">(Dec 01 2025 at 16:08)</a>:</h4>
<p>I am working on a VM for my own blockchain and would like to know if there is any workaround or way to somehow use LLVM for AoT compilation of WASM binaries.</p>
<p>The reason I want to do this is so that I can use wasmtime and benefit from it being up to date with the latest wasm 3.0 spec and an active ecosystem etc. while using cranelift for dev builds and llvm for much more optimized AoT builds.</p>



<a name="561221484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561221484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561221484">(Dec 01 2025 at 17:01)</a>:</h4>
<p>there is no support for using llvm as a backend in the wasmtime project, and its reasonable to expect that there never will be. wasmtime are designed for running untrusted wasm, and llvm is not designed to accept untrusted inputs.</p>



<a name="561223222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561223222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561223222">(Dec 01 2025 at 17:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253992">Pat Hickey</span> <a href="#narrow/channel/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation/near/561221484">said</a>:</p>
<blockquote>
<p>there is no support for using llvm as a backend in the wasmtime project, and its reasonable to expect that there never will be. wasmtime are designed for running untrusted wasm, and llvm is not designed to accept untrusted inputs.</p>
</blockquote>
<p>Wait what really? Why so? (The LLVM untrusted inputs part.)</p>



<a name="561223949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561223949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561223949">(Dec 01 2025 at 17:09)</a>:</h4>
<p>How does wasmer deal with this? Or other wasm runtimes that support LLVM as a backend.</p>



<a name="561223955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561223955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561223955">(Dec 01 2025 at 17:09)</a>:</h4>
<p>The general expectation right now is that you'd use LLVM to compile-to-wasm which does all the necessary high-level optimizations that Cranelift won't do like auto-vectorization, loop rotations, etc. Cranelift is then a high-quality code generator which means that the &lt;src&gt; -&gt; LLVM -&gt; &lt;wasm&gt; -&gt; Cranelift -&gt; &lt;asm&gt; chain is still quite well optimized. Our experience is that tight loops are on-par with other WebAssembly compilers in terms of performance. In that sense while Cranelift is not as optimized of a code generator as LLVM it's expected that the lion's share of performance is still gained.</p>
<blockquote>
<p>Wait what really? Why so? (The LLVM untrusted inputs part.)</p>
</blockquote>
<p>LLVM is not written or architected to compile untrusted inputs. It's not really supposed to be since it's tasked with being a suitable compiler for first-party-sourced code. Compiling untrusted inputs (like what Wasmtime/WebAssembly are) is an entirely different problem. The expectation is "garbage in garbage out" with LLVM.</p>
<p>An example of this is that a miscompile in LLVM is not a CVE. Every single miscompile, however, has the possibility of being a CVE in the context of compiling untrusted code. LLVM maintainers (rightfully) are not reviewing all commits for evaluating the imapct of bug fixes and changes. Such behavior is required in the space of compiling untrusted inputs, however.</p>



<a name="561224099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224099">(Dec 01 2025 at 17:10)</a>:</h4>
<p>As far as we are aware no other WebAssembly runtime using LLVM deals with this. They're either unaware of the consequences of using LLVM or choose to ignore it.</p>



<a name="561224516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224516">(Dec 01 2025 at 17:11)</a>:</h4>
<p>You can read up on LLVM's security policy <a href="https://llvm.org/docs/Security.html#what-is-considered-a-security-issue">here</a>, notably:</p>
<blockquote>
<p>For example, a maliciously crafted C, Rust or bitcode input file can cause arbitrary code to execute in LLVM</p>
</blockquote>
<p>And this is NOT considered a security issue in LLVM since LLVM explicitly does not provide this guarantee</p>



<a name="561224547"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224547" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224547">(Dec 01 2025 at 17:11)</a>:</h4>
<p>Oh wow damn. I didn't know this.</p>
<p>Is Cranelift the most optimized right now?</p>



<a name="561224609"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224609" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224609">(Dec 01 2025 at 17:12)</a>:</h4>
<p>For Wasmtime, yes.</p>



<a name="561224641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224641">(Dec 01 2025 at 17:12)</a>:</h4>
<p>What do you mean?</p>



<a name="561224698"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224698" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224698">(Dec 01 2025 at 17:12)</a>:</h4>
<p>Cranelift is Wasmtime's most optimized code generator</p>



<a name="561224793"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224793" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224793">(Dec 01 2025 at 17:13)</a>:</h4>
<p>Are there better code generators which give the best runtime performance as in my usecase startup times are a lesser priority over runtime performance.</p>



<a name="561224890"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224890" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224890">(Dec 01 2025 at 17:13)</a>:</h4>
<p>Like not specific to wasmtime.</p>



<a name="561224925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224925">(Dec 01 2025 at 17:13)</a>:</h4>
<p>I am stilling exploring options to commit to a runtime.</p>



<a name="561224989"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561224989" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561224989">(Dec 01 2025 at 17:13)</a>:</h4>
<p>wasmtime seems to be the best bet because of the strong backing by huge corporations.</p>



<a name="561225009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561225009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561225009">(Dec 01 2025 at 17:13)</a>:</h4>
<p>That you'll have to evaluate for yourself, I at least do not personally keep tabs on other runtimes.</p>



<a name="561225489"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561225489" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aarav Dayal <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561225489">(Dec 01 2025 at 17:15)</a>:</h4>
<p>Yeah I mean I just wanted to suggest that like someone at BCA should probably release benchmarks with every major release comparing wasmtime with other runtimes.</p>
<p>Really helps because I don't know what all kind of workloads to test the runtime on to properly compare two runtimes or whether I am even testing the runtimes on the right thing in the first place.</p>



<a name="561231691"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561231691" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561231691">(Dec 01 2025 at 17:38)</a>:</h4>
<blockquote>
<p>Yeah I mean I just wanted to suggest that like someone at BCA should probably release benchmarks with every major release comparing wasmtime with other runtimes.</p>
</blockquote>
<p>Please feel free to do so and post results here -- in the spirit of open source, "be the change you want to see" etc etc. As-is we don't have a benchmarking team ready to go (we're all quite busy).</p>
<p>If you do a modest amount of Internet searching, you'll find various comparisons people have done. Frank Denis has a round of benchmarks of a bunch of major engines that showed Wasmtime+Cranelift comparing well to LLVM-based engines. On <a href="http://cranelift.dev">cranelift.dev</a> we link a paper that has detailed data as well.</p>



<a name="561259389"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/LLVM%20Support%20for%20AoT%20Compilation/near/561259389" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/LLVM.20Support.20for.20AoT.20Compilation.html#561259389">(Dec 01 2025 at 19:40)</a>:</h4>
<p>moreover, to be useful the benchmarking would need to be largely agreed upon across the runtime ecosystem, and as each runtime is optimized for certain scenarios that were originally important to them, that agreement is unlikely to come. you, however, are free to help out others in your position by doing something about that. :-)</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>