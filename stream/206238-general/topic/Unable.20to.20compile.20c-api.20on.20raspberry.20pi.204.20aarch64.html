<html>
<head><meta charset="utf-8"><title>Unable to compile c-api on raspberry pi 4 aarch64 路 general 路 Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Unable.20to.20compile.20c-api.20on.20raspberry.20pi.204.20aarch64.html">Unable to compile c-api on raspberry pi 4 aarch64</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="501587923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Unable%20to%20compile%20c-api%20on%20raspberry%20pi%204%20aarch64/near/501587923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mode <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Unable.20to.20compile.20c-api.20on.20raspberry.20pi.204.20aarch64.html#501587923">(Feb 24 2025 at 16:19)</a>:</h4>
<p>Following: <a href="https://github.com/bytecodealliance/wasmtime/tree/main/crates/c-api">https://github.com/bytecodealliance/wasmtime/tree/main/crates/c-api</a><br>
The <code>cmake --build target/c-api</code> line is giving me:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Package</span><span class="w"> </span><span class="err">`</span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">118.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">x</span><span class="o">/</span><span class="n">Desktop</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="p">)</span><span class="err">`</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="err">`</span><span class="n">pulley</span><span class="o">-</span><span class="n">interpreter</span><span class="err">`</span><span class="p">.</span><span class="w"> </span><span class="n">It</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">optional</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">dependency</span><span class="w"> </span><span class="n">uses</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="s">"dep:"</span><span class="w"> </span><span class="n">syntax</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="n">table</span><span class="p">,</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">implicit</span><span class="w"> </span><span class="n">feature</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">name</span><span class="p">.</span>
<span class="n">gmake</span><span class="p">[</span><span class="mi">2</span><span class="p">]:</span><span class="w"> </span><span class="o">***</span><span class="w"> </span><span class="p">[</span><span class="n">CMakeFiles</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="k">crate</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">build</span><span class="p">.</span><span class="n">make</span><span class="p">:</span><span class="mi">86</span><span class="p">:</span><span class="w"> </span><span class="nc">wasmtime</span><span class="o">-</span><span class="k">crate</span><span class="o">-</span><span class="n">prefix</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="k">crate</span><span class="o">-</span><span class="n">stamp</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="k">crate</span><span class="o">-</span><span class="n">build</span><span class="p">]</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="mi">101</span>
<span class="n">gmake</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span><span class="w"> </span><span class="o">***</span><span class="w"> </span><span class="p">[</span><span class="n">CMakeFiles</span><span class="o">/</span><span class="n">Makefile2</span><span class="p">:</span><span class="mi">85</span><span class="p">:</span><span class="w"> </span><span class="nc">CMakeFiles</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="k">crate</span><span class="p">.</span><span class="n">dir</span><span class="o">/</span><span class="n">all</span><span class="p">]</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="mi">2</span>
<span class="n">gmake</span><span class="p">:</span><span class="w"> </span><span class="o">***</span><span class="w"> </span><span class="p">[</span><span class="n">Makefile</span><span class="p">:</span><span class="mi">136</span><span class="p">:</span><span class="w"> </span><span class="nc">all</span><span class="p">]</span><span class="w"> </span><span class="n">Error</span><span class="w"> </span><span class="mi">2</span>
</code></pre></div>
<p>From what I have read, pulley is used for unsupported cranelift platforms. Except that I should be using aarch64 (double checked using <code>rustc --print cfg</code>)</p>
<p>Am I doing something wrong?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/tree/main/crates/c-api" style="background-image: url(&quot;https://uploads.zulipusercontent.net/dd20aa68983f06e36d3c82b33759695d4929206d/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f383966633630313062613335623537383332643135343333363734383638646432373637333531303163653837366366656163383233366539363032316166312f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/tree/main/crates/c-api" title="wasmtime/crates/c-api at main 路 bytecodealliance/wasmtime">wasmtime/crates/c-api at main 路 bytecodealliance/wasmtime</a></div><div class="message_embed_description">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>



<a name="501589209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Unable%20to%20compile%20c-api%20on%20raspberry%20pi%204%20aarch64/near/501589209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Unable.20to.20compile.20c-api.20on.20raspberry.20pi.204.20aarch64.html#501589209">(Feb 24 2025 at 16:24)</a>:</h4>
<p>Did you execute </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cmake</span><span class="w"> </span><span class="o">-</span><span class="n">S</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="o">-</span><span class="n">B</span><span class="w"> </span><span class="n">target</span><span class="o">/</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="w"> </span><span class="o">--</span><span class="n">install</span><span class="o">-</span><span class="n">prefix</span><span class="w"> </span><span class="s">"$(pwd)/artifacts"</span>
</code></pre></div>
<p>prior to <code>cmake --build target/c-api</code>? If so what version of rustc are you using and can you gist the full error? If not can you share your intial <code>cmake</code> configuration line?</p>



<a name="501590112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Unable%20to%20compile%20c-api%20on%20raspberry%20pi%204%20aarch64/near/501590112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mode <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Unable.20to.20compile.20c-api.20on.20raspberry.20pi.204.20aarch64.html#501590112">(Feb 24 2025 at 16:27)</a>:</h4>
<p>I did execute the first command yes. Rustc 1.63.0. Full result: <a href="https://pastes.dev/OyIXAcEORb">https://pastes.dev/OyIXAcEORb</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://pastes.dev/OyIXAcEORb" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5a6c822912524e8008c410b4b29281411246ef7a/68747470733a2f2f7061737465732e6465762f6173736574732f6c6f676f3235362e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://pastes.dev/OyIXAcEORb" title="pastes">pastes</a></div><div class="message_embed_description">a simple pastebin.</div></div></div>



<a name="501591100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Unable%20to%20compile%20c-api%20on%20raspberry%20pi%204%20aarch64/near/501591100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Unable.20to.20compile.20c-api.20on.20raspberry.20pi.204.20aarch64.html#501591100">(Feb 24 2025 at 16:31)</a>:</h4>
<p>I think you'll need a more recent version of rustc, our minimial supported verison of rust is more in the 1.8x range</p>



<a name="501591166"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Unable%20to%20compile%20c-api%20on%20raspberry%20pi%204%20aarch64/near/501591166" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Unable.20to.20compile.20c-api.20on.20raspberry.20pi.204.20aarch64.html#501591166">(Feb 24 2025 at 16:31)</a>:</h4>
<p>In theory you should have gotten an error saying you're on an old rustc but I'm not sure why you didn't get that</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>