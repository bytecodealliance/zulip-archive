<html>
<head><meta charset="utf-8"><title>How to write wit ? · general · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html">How to write wit ?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="508276681"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508276681" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508276681">(Mar 26 2025 at 13:32)</a>:</h4>
<p>Hi</p>
<p>I am trying to create a component using cargo component.  In my <a href="http://lib.rs">lib.rs</a> I have a function which I export with signature<br>
<code>fn compute_result(&amp;mut self, out: &amp;mut [u8])</code></p>
<p>I am confused how to write this in wit. Self comes in Resource I think . I don't have resources. <br>
Also how to write the second parameter which is array.</p>
<div class="message_embed"><a class="message_embed_image" href="http://lib.rs" style="background-image: url(&quot;https://uploads.zulipusercontent.net/a025d1dfcfcdb4f622e82e9f608412cba3162ba3/68747470733a2f2f6c69622e72732f6372617465732d6c6f676f2e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="http://lib.rs" title="Lib.rs — home for Rust crates // Lib.rs">Lib.rs — home for Rust crates // Lib.rs</a></div><div class="message_embed_description">List of Rust libraries and applications. An unofficial experimental opinionated alternative to crates.io</div></div></div>



<a name="508348724"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508348724" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colin D Murphy <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508348724">(Mar 26 2025 at 18:12)</a>:</h4>
<p>Here is an example I'm working on: <br>
<a href="https://github.com/cdmurph32/c2pa-component/blob/v24/wit/cai.wit">https://github.com/cdmurph32/c2pa-component/blob/v24/wit/cai.wit</a></p>
<p>It has a couple of resources. The self is implied.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/cdmurph32/c2pa-component/blob/v24/wit/cai.wit" style="background-image: url(&quot;https://uploads.zulipusercontent.net/4543fe0427824a7bf32d3ea2fa9777a03a847965/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f353566356536393730336532366139366139306438666636346130303431653063306563333639346136353137653433626130633234333664643331333738612f63646d7572706833322f633270612d636f6d706f6e656e74&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/cdmurph32/c2pa-component/blob/v24/wit/cai.wit" title="c2pa-component/wit/cai.wit at v24 · cdmurph32/c2pa-component">c2pa-component/wit/cai.wit at v24 · cdmurph32/c2pa-component</a></div><div class="message_embed_description">WASI P2 component for C2PA. Contribute to cdmurph32/c2pa-component development by creating an account on GitHub.</div></div></div>



<a name="508353764"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508353764" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508353764">(Mar 26 2025 at 18:41)</a>:</h4>
<p>Thanks.<br>
What about the second parameter which is an array.<br>
I am not able to write the corresponding wit for it. I can only see list&lt;u8&gt; which is vec in rust.</p>



<a name="508522975"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508522975" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colin D Murphy <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508522975">(Mar 27 2025 at 13:47)</a>:</h4>
<p>That might be best implemented as an output stream depending on how big you intend it to be. Is there a reason it needs to be a pointer to an array?</p>



<a name="508523884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508523884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Colin D Murphy <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508523884">(Mar 27 2025 at 13:51)</a>:</h4>
<p>In your implementation on either side of the wit interface you can have an array.</p>



<a name="508540486"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508540486" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508540486">(Mar 27 2025 at 14:53)</a>:</h4>
<p>This is my implementation in <a href="http://lib.rs">lib.rs</a></p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">])</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">hasher</span><span class="p">.</span><span class="n">finalize_reset</span><span class="p">();</span>
<span class="w">        </span><span class="n">copy_slices</span><span class="o">!</span><span class="p">(</span><span class="n">hash</span><span class="p">.</span><span class="n">as_slice</span><span class="p">(),</span><span class="w"> </span><span class="n">out</span><span class="p">)</span>

<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>It's a function in snow framework. I want to override this function, so I am trying to implement the same thing with same function signature.</p>
<div class="message_embed"><a class="message_embed_image" href="http://lib.rs" style="background-image: url(&quot;https://uploads.zulipusercontent.net/a025d1dfcfcdb4f622e82e9f608412cba3162ba3/68747470733a2f2f6c69622e72732f6372617465732d6c6f676f2e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="http://lib.rs" title="Lib.rs — home for Rust crates // Lib.rs">Lib.rs — home for Rust crates // Lib.rs</a></div><div class="message_embed_description">List of Rust libraries and applications. An unofficial experimental opinionated alternative to crates.io</div></div></div>



<a name="508540720"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508540720" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508540720">(Mar 27 2025 at 14:54)</a>:</h4>
<p>So I was stuck at a point where I am writing the wit for it, because of second parameter. It's slice , sorry I thought it was an array.</p>



<a name="508553005"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/508553005" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#508553005">(Mar 27 2025 at 15:39)</a>:</h4>
<p>The component model is designed around "shared-nothing" composition, meaning components do not have access to each others' memory.  Consequently, WIT interfaces do not support passing pointers, and a slice is basically just a fat pointer.  The callee couldn't do anything with such a pointer, since it's relative to a memory it doesn't have access to.</p>
<p>If you need to return a list of bytes to the caller, you'll want to model that as <code>%result: func() -&gt; list&lt;u8&gt;</code> (which translates to <code>fn result(&amp;self) -&gt; Vec&lt;u8&gt;;</code> in Rust).  The host will take care of copying the contents of that <code>list&lt;u8&gt;</code> from the callee's memory to the caller's memory.</p>



<a name="509036051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/509036051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> celine santosh <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#509036051">(Mar 30 2025 at 15:20)</a>:</h4>
<p>Thanks<br>
So even if I compose both wasm components together with wac plug , both components will have isolated memory right?</p>



<a name="509221301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/How%20to%20write%20wit%20%3F/near/509221301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/How.20to.20write.20wit.20.3F.html#509221301">(Mar 31 2025 at 14:41)</a>:</h4>
<p>Yes, correct.  You also have the option of "shared-everything" module linking using <code>wasm-tools component link</code> if you prefer.  <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Linking.md">This document</a> describes the various way static libraries, modules, and components can be composed.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Linking.md" style="background-image: url(&quot;https://uploads.zulipusercontent.net/a37214201a030d520af31d2402a8532660b1b7a4/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f343763653538383165333834363333313738643430323431313366313266353431666330393862613937383039656436363262303536366437346533636238632f576562417373656d626c792f636f6d706f6e656e742d6d6f64656c&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Linking.md" title="component-model/design/mvp/Linking.md at main · WebAssembly/component-model">component-model/design/mvp/Linking.md at main · WebAssembly/component-model</a></div><div class="message_embed_description">Repository for design and specification of the Component Model - WebAssembly/component-model</div></div></div>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>