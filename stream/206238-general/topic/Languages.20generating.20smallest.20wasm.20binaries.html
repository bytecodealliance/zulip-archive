<html>
<head><meta charset="utf-8"><title>Languages generating smallest wasm binaries Â· general Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/index.html">general</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html">Languages generating smallest wasm binaries</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="504408618"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504408618" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504408618">(Mar 09 2025 at 16:26)</a>:</h4>
<p>Is there any research on what languages generate the smallest wasm binaries? <br>
I understand that this depends a lot on the application being compiled, but I'm sure certain languages make it easier than others to get small binaries.</p>
<p>Here's what I was able to gather from sources online. Note this is not a real apples to apples comparison, as they all deal with completely different applications. </p>
<p><strong>Rust</strong>: Rust is able to get pretty small, but you have to bend over backwards to get those benefits, and won't be able to use a lot of the tools most Rust applications use. <a href="https://github.com/johnthagen/min-sized-rust">https://github.com/johnthagen/min-sized-rust</a></p>
<p><strong>C/C++</strong>: not too big, if you don't use some features <a href="https://stackoverflow.com/a/74982101/5253155">https://stackoverflow.com/a/74982101/5253155</a></p>
<p><strong>Go</strong>: seems like Go wasm binaries are quite large <a href="https://www.fermyon.com/blog/optimizing-tinygo-wasm">https://www.fermyon.com/blog/optimizing-tinygo-wasm</a>, much better: <a href="https://dev.bitolog.com/minimizing-go-webassembly-binary-size">https://dev.bitolog.com/minimizing-go-webassembly-binary-size</a></p>
<p><strong>Swift</strong>: Swift binary sizes are huge <a href="https://github.com/swiftwasm/swift/issues/7">https://github.com/swiftwasm/swift/issues/7</a> <a href="https://forums.swift.org/t/swift-wasm-binary-sizes/51533">https://forums.swift.org/t/swift-wasm-binary-sizes/51533</a></p>
<p><strong>C#</strong>: C#/blazor apps are also gigantic <a href="https://www.meziantou.net/optimizing-a-blazor-webassembly-application-size.htm">https://www.meziantou.net/optimizing-a-blazor-webassembly-application-size.htm</a></p>
<p><strong>AssemblyScript</strong>: My understanding is that AssemblyScript is able to generate fairly small binaries, but couldn't easily find any sources. </p>
<p><strong>Porffor</strong>: <a href="http://porffor.dev">porffor.dev</a> explicitly states that they want to reduce binary sizes, which is refreshing. They make some big claims on the website, but not sure if this has been independently verified.</p>
<p><strong>StarlingMonkey</strong>: IIUC StarlingMonkey is aiming to be a full JS engine, which is at odds with creating small binaries.</p>
<p>Any thoughts on this? Did I miss anything? Has anyone done this in a more methodical way?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/johnthagen/min-sized-rust" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5ad9ceb42ee54afe2447d28822a817d86831e6ae/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f346361656435303261366661323939633233366138346433396431356237343163326162613131393932633732633132353434616665386130346638346337342f6a6f686e74686167656e2f6d696e2d73697a65642d72757374&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/johnthagen/min-sized-rust" title="GitHub - johnthagen/min-sized-rust: ðŸ¦€ How to minimize Rust binary size ðŸ“¦">GitHub - johnthagen/min-sized-rust: ðŸ¦€ How to minimize Rust binary size ðŸ“¦</a></div><div class="message_embed_description">ðŸ¦€ How to minimize Rust binary size ðŸ“¦. Contribute to johnthagen/min-sized-rust development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://stackoverflow.com/a/74982101/5253155" style="background-image: url(&quot;https://uploads.zulipusercontent.net/925df65c212e80f19e81fcac1fb25e660797c3ce/68747470733a2f2f63646e2e737374617469632e6e65742f53697465732f737461636b6f766572666c6f772f496d672f6170706c652d746f7563682d69636f6e40322e706e673f763d373364373961383962646564&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://stackoverflow.com/a/74982101/5253155" title="How to reduce size of WASM binary?">How to reduce size of WASM binary?</a></div><div class="message_embed_description">I have a project written in C++, and the platform to be deployed in has a limitation of 256KB of binary size.
The toolchain is wasi-sdk-16.0 clang++, we use this compiler to compile the source code...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://www.fermyon.com/blog/optimizing-tinygo-wasm" style="background-image: url(&quot;https://uploads.zulipusercontent.net/9533af41c423b4f96ae5ad7d96389cbedf817b42/68747470733a2f2f7777772e6665726d796f6e2e636f6d2f7374617469632f696d6167652f7477632d74696e79676f2d36307065722e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://www.fermyon.com/blog/optimizing-tinygo-wasm" title="Shrink Your TinyGo WebAssembly Modules by 60%">Shrink Your TinyGo WebAssembly Modules by 60%</a></div><div class="message_embed_description">Cutting down on the size of a Wasm binary has advantages for performance and transfer speed. This post covers some tricks for reducing the size of Go code projects when compiled to WebAssembly with TinyGo</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://dev.bitolog.com/minimizing-go-webassembly-binary-size" style="background-image: url(&quot;https://uploads.zulipusercontent.net/da21ea3420f637da3fadaa60ff6558e13272dfdd/68747470733a2f2f6465762e6269746f6c6f672e636f6d2f77702d636f6e74656e742f75706c6f6164732f323032302f31302f7761736d2d73697a652e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://dev.bitolog.com/minimizing-go-webassembly-binary-size" title="Minimizing Go WebAssembly Binary Size - Code The Cloud">Minimizing Go WebAssembly Binary Size - Code The Cloud</a></div><div class="message_embed_description">In this blog post I'll show you how to minimize your Go WebAssembly binary size so it will be much more web friendly.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/swiftwasm/swift/issues/7" style="background-image: url(&quot;https://uploads.zulipusercontent.net/803eb947a43761fb5c4ba24150aaed97dab10c72/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f613261626531303734363966356166316662343962353361333030653564626633613030356130626366653437363937366566373634386632393736316466652f73776966747761736d2f73776966742f6973737565732f37&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/swiftwasm/swift/issues/7" title="build wasm file is very big??? Â· Issue #7 Â· swiftwasm/swift">build wasm file is very big??? Â· Issue #7 Â· swiftwasm/swift</a></div><div class="message_embed_description">build wasm file is very big golang is 2mb+ rust is 20k+ this is 9.5mb</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://forums.swift.org/t/swift-wasm-binary-sizes/51533" style="background-image: url(&quot;https://uploads.zulipusercontent.net/10d0ac27eea94f23c4bdc4df7876f19d1652729c/68747470733a2f2f676c6f62616c2e646973636f757273652d63646e2e636f6d2f73776966742f6f726967696e616c2f31582f306139306464653938613232336635383431656563613439643839646339663537353932653864362e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://forums.swift.org/t/swift-wasm-binary-sizes/51533" title="Swift wasm binary sizes?">Swift wasm binary sizes?</a></div><div class="message_embed_description">Hey folks,  I had a need to delve into the world of WASM, and so I figured I'd see what Swift WASM is all about.  Long story short, the environment that I'd like to deploy to is seriously memory constrained (less than 8MB).  Now, thanks to the awesome work of @Max_Desiatov and others, I was able to produce a wasm binary from Swift source without too much struggle, but, it weighs in at 15 MB, well over my limit â˜¹  So, my question is, what's typical for the size of a swift wasm binary?  I...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://www.meziantou.net/optimizing-a-blazor-webassembly-application-size.htm" style="background-image: url(&quot;https://uploads.zulipusercontent.net/6511f428d40dfa973d9c422dd145a4432fa983e8/68747470733a2f2f7777772e6d657a69616e746f752e6e65742f6173736574732f636f7665722d3766653633322e6a70673f763d31313363&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://www.meziantou.net/optimizing-a-blazor-webassembly-application-size.htm" title="Optimizing a Blazor WebAssembly application size - GÃ©rald BarrÃ©">Optimizing a Blazor WebAssembly application size - GÃ©rald BarrÃ©</a></div><div class="message_embed_description">In this post, I explain a few tricks to reduce the size of a Blazor WebAssembly application.</div></div></div>



<a name="504413944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504413944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504413944">(Mar 09 2025 at 17:34)</a>:</h4>
<p>note that that rust post is mostly concerned with non-wasm binaries, on wasm, one major way to save lots of space is to target <a href="https://doc.rust-lang.org/rustc/platform-support/wasm32-unknown-unknown.html"><code>wasm32-unknown-unknown</code></a>, though note that there is no libc so it works best when you only use Rust code and no C/C++. also most of <code>std</code> is unavailable (as in it'll panic if you use it), but you can still use <code>core</code>, <code>alloc</code>, the stuff re-exported in <code>std</code>, and <code>HashMap</code>/<code>HashSet</code>.</p>



<a name="504467880"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504467880" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ryuta Suzuki <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504467880">(Mar 10 2025 at 04:20)</a>:</h4>
<p>MoonBit? <a href="https://www.moonbitlang.com/">https://www.moonbitlang.com/</a></p>



<a name="504522113"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504522113" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504522113">(Mar 10 2025 at 09:42)</a>:</h4>
<p>The reason that historically rustc produced native executables larger than 1MB are twofold:</p>
<ul>
<li>Debuginfo for the standard library was included. Cargo now strips debuginfo by default in release mode, which saves &gt;500kb.</li>
<li>Every rust executable by default contains a backtrace symbolizer for <code>RUST_BACKTRACE=1</code>. On wasm there is no way for a guest to get a backtrace in the first place and as such the backtrace symbolizer is omitted too, saving about 400kb.</li>
</ul>
<p>When compiling rust hello world for wasm32-wasip1 in release mode I get a 64kb binary. With fat LTO and stripping symbols that is already brought down to 45kb without loss of functionality. You still get panic messages, are able to allocate memory and use libstd as usual. If you are fine with not having useful panic messages you can use <code>-Zbuild-std -Zbuild-std-features=panic_immediate_abort</code> to get the binary size down to 14kb (or 11kb with wasm-opt) with most space being taken by the memory allocator (which you aren't going to get around).</p>



<a name="504588031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504588031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504588031">(Mar 10 2025 at 13:51)</a>:</h4>
<p>Here's an example of a 1.3KB <code>no_std</code> Rust module with a dummy panic handler and no memory allocator, for reference: <a href="https://github.com/bytecodealliance/wasm-tools/tree/main/crates/wit-component/dl">source</a>; <a href="https://github.com/bytecodealliance/wasm-tools/blob/main/crates/wit-component/libdl.so">binary</a>.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/tree/main/crates/wit-component/dl" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ef4ee3ee9845bc9f1b1165b1ff595dedb0516b05/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f636438623130653733336534663564383531653331356564353266316133666366636632633639616531643561653536366633633461656330303731323562342f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/tree/main/crates/wit-component/dl" title="wasm-tools/crates/wit-component/dl at main Â· bytecodealliance/wasm-tools">wasm-tools/crates/wit-component/dl at main Â· bytecodealliance/wasm-tools</a></div><div class="message_embed_description"> CLI and Rust libraries for low-level manipulation of WebAssembly modules  - bytecodealliance/wasm-tools</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/blob/main/crates/wit-component/libdl.so" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ef4ee3ee9845bc9f1b1165b1ff595dedb0516b05/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f636438623130653733336534663564383531653331356564353266316133666366636632633639616531643561653536366633633461656330303731323562342f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/blob/main/crates/wit-component/libdl.so" title="wasm-tools/crates/wit-component/libdl.so at main Â· bytecodealliance/wasm-tools">wasm-tools/crates/wit-component/libdl.so at main Â· bytecodealliance/wasm-tools</a></div><div class="message_embed_description"> CLI and Rust libraries for low-level manipulation of WebAssembly modules  - bytecodealliance/wasm-tools</div></div></div>



<a name="504589120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504589120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504589120">(Mar 10 2025 at 13:55)</a>:</h4>
<p>BTW, a tiny bump allocator might make sense for short-lived instances (e.g. serverless functions).  Naturally, the minimum binary size is going to depend on the minimum feature set your application requires.</p>



<a name="504597849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504597849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504597849">(Mar 10 2025 at 14:23)</a>:</h4>
<p>Re Rust: seems like a hello world example can get quite small. However, when building real world applications, Rust has a few disadvantages compared a other languages. <br>
a) Monomorphization can grow a binary quickly. (e.g. anything making much use of serde will grow fast).<br>
2) std::fmt seems to blow up binary sizes (there are some libraries that are better at this than std::fmt).<br>
III) Panic unwinding is heavy (can get around this with <code>panic_immediate_abort</code> as mentioned, but you loos panic-hooks, and hence the ability to let the user know that something went wrong).</p>



<a name="504598635"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504598635" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504598635">(Mar 10 2025 at 14:26)</a>:</h4>
<p>You can write your own panic handler which prints a message to stderr prior to calling <code>unreachable</code>.</p>



<a name="504599026"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504599026" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504599026">(Mar 10 2025 at 14:27)</a>:</h4>
<p>Agreed that monomorphization can lead to bloat very quickly, which requires discipline (and being picky about dependencies) to avoid.</p>



<a name="504599293"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504599293" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504599293">(Mar 10 2025 at 14:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="509936">Joel Dice</span> <a href="#narrow/channel/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries/near/504598635">said</a>:</p>
<blockquote>
<p>You can write your own panic handler which prints a message to stderr prior to calling <code>unreachable</code>.</p>
</blockquote>
<p>Good point. But that only covers cases where you panic, not when libraries panic.<br>
It won't catch:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="kc">true</span><span class="p">];</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
</code></pre></div>



<a name="504599813"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504599813" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504599813">(Mar 10 2025 at 14:30)</a>:</h4>
<p>My understanding is that <a href="https://doc.rust-lang.org/nomicon/panic-handler.html">panic_handler</a> affects the whole binary (including libraries).  I could be mistaken, though.</p>



<a name="504600218"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504600218" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504600218">(Mar 10 2025 at 14:31)</a>:</h4>
<p>I think you're right. But don't think it'll run if you set <code>panic_immediate_abort</code>.</p>



<a name="504601857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504601857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504601857">(Mar 10 2025 at 14:36)</a>:</h4>
<p>Yeah; I think you need to <em>either</em> set a custom handler <em>or</em> use <code>panic_immediate_abort</code>; either one will give you small binaries, but only the former lets you print a message to stderr or otherwise customize the behavior.</p>



<a name="504602183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504602183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504602183">(Mar 10 2025 at 14:37)</a>:</h4>
<p>Interesting. Wasn't aware that setting a custom handler by itself can reduce binary size</p>



<a name="504604058"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504604058" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504604058">(Mar 10 2025 at 14:43)</a>:</h4>
<p>That's what the 1.3KB example I gave above does.</p>



<a name="504610649"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504610649" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504610649">(Mar 10 2025 at 15:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="576121">Ryuta Suzuki</span> <a href="#narrow/channel/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries/near/504467880">said</a>:</p>
<blockquote>
<p>MoonBit? <a href="https://www.moonbitlang.com/">https://www.moonbitlang.com/</a></p>
</blockquote>
<p>Seems like small binary sizes is an explicit goal here, which is great!<br>
<a href="https://www.moonbitlang.com/blog/first-announce#compact---tiny-wasm-output">https://www.moonbitlang.com/blog/first-announce#compact---tiny-wasm-output</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://www.moonbitlang.com/blog/first-announce#compact---tiny-wasm-output" style="background-image: url(&quot;https://uploads.zulipusercontent.net/22170953bd8b4777acd6261187ff87d15fa3010a/68747470733a2f2f7777772e6d6f6f6e6269746c616e672e636f6d2f6173736574732f696d616765732f626c6f672d7469746c652d31316430363235353264383863643130643663656563353831616164663361642e6a7067&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://www.moonbitlang.com/blog/first-announce#compact---tiny-wasm-output" title="Moonbit: the fast, compact &amp; user friendly language for WebAssembly | MoonBit">Moonbit: the fast, compact &amp; user friendly language for WebAssembly | MoonBit</a></div><div class="message_embed_description">The first announcement of MoonBit</div></div></div>



<a name="504687942"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504687942" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504687942">(Mar 10 2025 at 21:09)</a>:</h4>
<p>I made a hello-world that compiles to 703 bytes using Rust 1.82.0:<br>
<code>Cargo.toml</code>:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[package]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"wasm-test"</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.1.0"</span>
<span class="n">edition</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"2021"</span>

<span class="k">[lib]</span>
<span class="n">crate-type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"cdylib"</span><span class="p">]</span>

<span class="k">[dependencies]</span>
<span class="n">wasi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"0.11.0"</span>
</code></pre></div>
<p><code>src/lib.rs</code>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[unsafe(no_mangle)]</span>
<span class="k">pub</span><span class="w"> </span><span class="k">extern</span><span class="w"> </span><span class="s">"C"</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">_start</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">hello_world</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">"Hello World!</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasi</span><span class="p">::</span><span class="n">fd_write</span><span class="p">(</span>
<span class="w">            </span><span class="mi">1</span><span class="p">,</span>
<span class="w">            </span><span class="o">&amp;</span><span class="p">[</span><span class="n">wasi</span><span class="p">::</span><span class="n">Ciovec</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">buf</span><span class="p">:</span><span class="w"> </span><span class="nc">hello_world</span><span class="p">.</span><span class="n">as_ptr</span><span class="p">(),</span>
<span class="w">                </span><span class="n">buf_len</span><span class="p">:</span><span class="w"> </span><span class="nc">hello_world</span><span class="p">.</span><span class="n">len</span><span class="p">(),</span>
<span class="w">            </span><span class="p">}],</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>build with (output is in <code>target/wasm32-unknown-unknown/release/wasm_test.wasm</code>):</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>cargo<span class="w"> </span>build<span class="w"> </span>--release<span class="w"> </span>--target<span class="o">=</span>wasm32-unknown-unknown
</code></pre></div>



<a name="504688653"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504688653" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504688653">(Mar 10 2025 at 21:13)</a>:</h4>
<p>it should be able to be optimized further, since looking at the binary, a bunch of it is rustc version and target feature strings that should be able to be omitted, and some of the symbol names are like 40 bytes long so could be shrunk</p>



<a name="504688881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504688881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504688881">(Mar 10 2025 at 21:15)</a>:</h4>
<p>Curious if can get anything close to this with an allocator</p>



<a name="504689057"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504689057" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mendy Berger <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504689057">(Mar 10 2025 at 21:16)</a>:</h4>
<p>Well, probably possible with a bump allocator. Thinking more of a 'real' allocator.</p>



<a name="504690565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504690565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504690565">(Mar 10 2025 at 21:27)</a>:</h4>
<p>despite targeting wasm32-unknown-unknown theres still std in there and it has the ability to allocate (since memory.grow is an ISA concern not an operating system concern), but since its not reachable in that code it would be dead-code-eliminated away</p>



<a name="504690728"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504690728" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504690728">(Mar 10 2025 at 21:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="315881">Jacob Lifshay</span> <a href="#narrow/channel/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries/near/504688653">said</a>:</p>
<blockquote>
<p>it should be able to be optimized further, since looking at the binary, a bunch of it is rustc version and target feature strings that should be able to be omitted, and some of the symbol names are like 40 bytes long so could be shrunk</p>
</blockquote>
<p><code>wasm-tools strip</code> and <code>wasm-tools strip --delete name</code> might help with that.</p>



<a name="504693348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504693348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504693348">(Mar 10 2025 at 21:46)</a>:</h4>
<p>IMO if the goal is to make small binaries you want Rust, C++, or C. If you do anything nontrivial you probably don't want C, and if you want it to be approachable to most folks you probably want Rust. Rust, like any other language discussed here, is no silver bullet. That being said Rust has solutions for binary size things for most of what you'd run into. Applying said solutions can range from "massive refactor" to "use this flag", however.</p>
<p>My personal gut is that if you were to code golf other languages it would basically look the same if you zoom out enough. Some of this gets into language choice though which is sort of orthogonal to this</p>



<a name="504706348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504706348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504706348">(Mar 10 2025 at 23:20)</a>:</h4>
<p>code golf is its own sport that is almost completely distinct from software engineering, i think its valuable to come up with a spec for a real program that solves a real problem and then implement that in a variety of languages if you want to compare how toolchains do</p>



<a name="504706380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504706380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pat Hickey <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504706380">(Mar 10 2025 at 23:21)</a>:</h4>
<p>(c.f. lies, damn lies, and microbenchmarks)</p>



<a name="504857255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504857255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504857255">(Mar 11 2025 at 14:26)</a>:</h4>
<p>you people just taught me code golfing, I love it.</p>



<a name="504931603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504931603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Isom <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504931603">(Mar 11 2025 at 19:14)</a>:</h4>
<p>Pedantic note on C++:  templates and static initializers do add a significant amount of bloat at scale. The linked SO question is technically correct (the best kind of correct) about iostream, but that is not because of template bloat, rather, stream operations (including stringstream) must implicitly link against functions from &lt;locale&gt; to do all sorts of culture-sensitive parsing and conversion. This is a problem on native against statically linked c runtimes as well. See Dan's excellent answer here: <a href="https://github.com/WebAssembly/wasi-sdk/issues/87#issuecomment-567925947">https://github.com/WebAssembly/wasi-sdk/issues/87#issuecomment-567925947</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sdk/issues/87#issuecomment-567925947" style="background-image: url(&quot;https://uploads.zulipusercontent.net/bd0c1214616a71ff8566c884887d83280702ec20/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f353163616330386137393135333433366231363630653138363863316635643534346461303965373330336239666564326632373339623537316430393837312f576562417373656d626c792f776173692d73646b2f6973737565732f3837&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sdk/issues/87#issuecomment-567925947" title="Using std::cout increases .wasm size by 900kb Â· Issue #87 Â· WebAssembly/wasi-sdk">Using std::cout increases .wasm size by 900kb Â· Issue #87 Â· WebAssembly/wasi-sdk</a></div><div class="message_embed_description">A simple C++ program I wrote was ~40kb, but adding a simple std::cout &lt;&lt; "Hello World" increased the bundle size to ~950kb (using -O2, -Os doesn't affect the size much). Using stdio.h printf() does...</div></div></div>



<a name="504932740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504932740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Isom <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504932740">(Mar 11 2025 at 19:19)</a>:</h4>
<p>I've done a lot of optimization work in C and C++ Wasm land, and generally, raw C scales pretty linearly between Wasm and native binary size. With C++, stl, templates, conversions, and non-elided copies (even moves) scale more exponentially against native binaries where these features do bloat binaries but not significantly. Just doing something seemingly innocuous like std::make_shared in an initializer and passing the shared_ptr by value can add like 1kb of wasm binary size.</p>



<a name="504933415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504933415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Isom <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504933415">(Mar 11 2025 at 19:23)</a>:</h4>
<p>I wish godbolt actually supported wasm (their clang wasm doesn't ship with a libc++) - would be very useful for more directly comparing output</p>



<a name="504933482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504933482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Denis <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504933482">(Mar 11 2025 at 19:23)</a>:</h4>
<p>Zig tends to produce the fastest and smallest WebAssembly modules out of the box. Moonbit and AssemblyScript also produce small binaries, but performance is meh.</p>



<a name="504940516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504940516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Gryski <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504940516">(Mar 11 2025 at 19:57)</a>:</h4>
<p>Note that for Go, "standard" Go generates <em>much</em> larger binaries than TinyGo due mostly to the more complicated runtime.</p>



<a name="504941432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/206238-general/topic/Languages%20generating%20smallest%20wasm%20binaries/near/504941432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Damian Gryski <a href="https://bytecodealliance.github.io/zulip-archive/stream/206238-general/topic/Languages.20generating.20smallest.20wasm.20binaries.html#504941432">(Mar 11 2025 at 20:01)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">~/</span><span class="n">go</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dgryski</span><span class="o">/</span><span class="n">hw</span><span class="w"> </span><span class="cp">$</span><span class="w"> </span><span class="n">tinygo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">target</span><span class="o">=</span><span class="n">wasip1</span><span class="w">  </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">hw</span><span class="p">.</span><span class="n">tinygo</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">go</span>
<span class="o">~/</span><span class="n">go</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dgryski</span><span class="o">/</span><span class="n">hw</span><span class="w"> </span><span class="cp">$</span><span class="w"> </span><span class="n">GOOS</span><span class="o">=</span><span class="n">wasip1</span><span class="w"> </span><span class="n">GOARCH</span><span class="o">=</span><span class="n">wasm</span><span class="w"> </span><span class="n">go</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">hw</span><span class="p">.</span><span class="n">biggo</span><span class="w"> </span><span class="n">main</span><span class="p">.</span><span class="n">go</span>
<span class="o">~/</span><span class="n">go</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dgryski</span><span class="o">/</span><span class="n">hw</span><span class="w"> </span><span class="cp">$</span><span class="w"> </span><span class="n">ls</span><span class="w"> </span><span class="o">-</span><span class="n">l</span><span class="w"> </span><span class="n">hw</span><span class="p">.</span><span class="o">*</span>
<span class="o">-</span><span class="n">rwxr</span><span class="o">-</span><span class="n">xr</span><span class="o">-</span><span class="n">x</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">dgryski</span><span class="w">  </span><span class="n">staff</span><span class="w">  </span><span class="mi">1581105</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">13</span><span class="p">:</span><span class="mi">00</span><span class="w"> </span><span class="n">hw</span><span class="p">.</span><span class="n">biggo</span><span class="o">*</span>
<span class="o">-</span><span class="n">rw</span><span class="o">-</span><span class="n">r</span><span class="o">--</span><span class="n">r</span><span class="o">--</span><span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="n">dgryski</span><span class="w">  </span><span class="n">staff</span><span class="w">   </span><span class="mi">105383</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="n">Mar</span><span class="w"> </span><span class="mi">12</span><span class="p">:</span><span class="mi">59</span><span class="w"> </span><span class="n">hw</span><span class="p">.</span><span class="n">tinygo</span>
</code></pre></div>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>