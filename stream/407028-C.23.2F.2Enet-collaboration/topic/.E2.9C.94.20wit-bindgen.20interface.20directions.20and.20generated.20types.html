<html>
<head><meta charset="utf-8"><title>✔ wit-bindgen interface directions and generated types · C#/.net-collaboration · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/index.html">C#/.net-collaboration</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html">✔ wit-bindgen interface directions and generated types</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="536862305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862305">(Aug 29 2025 at 21:09)</a>:</h4>
<p>I don't remember offhand, but I think everything is driven by the <code>WorldGenerator::generate</code> funciton in <code>crates/core/src/lib.rs</code>, which first generates code for all the imports, then for all the exports.  Since imports can't possibly refer to exported types, any aliases we generate for them must refer to the imported resource type.  On the other hand, exports <em>can</em> refer to imported types, and I don't recall how we know which one is of interest when e.g. generating code for an alias that refers to a resource which is both imported and exported.</p>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> has explained this to me about five times already; maybe I can do it a sixth time?</p>



<a name="536862542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862542">(Aug 29 2025 at 21:11)</a>:</h4>
<p>ah yeah so the way this is handled in the Rust generator is subtly generating things in the "right order", more-or-less there's a <code>map&lt;TypeId, YourGeneratorThing&gt;</code> somewhere and that's populated as types are generated.</p>
<p>Imports are generated in topo-order and then exports, so that way everything should "just work" if you resolve aliases by "just look at the map"</p>



<a name="536862564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862564">(Aug 29 2025 at 21:11)</a>:</h4>
<p>basically things get really tricky if you try to resolve aliases or references in anything other than a trivial manner</p>



<a name="536862650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862650">(Aug 29 2025 at 21:12)</a>:</h4>
<p>BTW, I've always wished <code>wit-parser</code> would assign different <code>TypeId</code>s to the imported and exported version of a resource, which would make this easier to reason about.  Not so much that I've actually <em>done</em> anything about it, of course.</p>



<a name="536862688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862688">(Aug 29 2025 at 21:12)</a>:</h4>
<p>there's also <a href="https://github.com/bytecodealliance/wasm-tools/issues/1497">https://github.com/bytecodealliance/wasm-tools/issues/1497</a> which is a long-term aspiration here</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/issues/1497" style="background-image: url(&quot;https://uploads.zulipusercontent.net/2c7b76180945cb592dc1aac6b378bcb6024c6d34/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363539663961633038353531356236386163366166646461396164396130323030643431386266663231316539633063356634333935363063333633613635392f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c732f6973737565732f31343937&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/issues/1497" title="proposal: wit-parser: create distinct imported and exported TypeDefs, Functions, and Interfaces in a Resolve · Issue #1497 · bytecodealliance/wasm-tools">proposal: wit-parser: create distinct imported and exported TypeDefs, Functions, and Interfaces in a Resolve · Issue #1497 · bytecodealliance/wasm-tools</a></div><div class="message_embed_description">We propose to move logic from wit-bindgen into the wit-parser crate that determines whether an interface, type, or function in a Resolve structure is either imported or exported, and label those st...</div></div></div>



<a name="536862818"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862818" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862818">(Aug 29 2025 at 21:13)</a>:</h4>
<p>Very helpful, thanks both!</p>



<a name="536862827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/%E2%9C%94%20wit-bindgen%20interface%20directions%20and%20generated%20types/near/536862827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/.E2.9C.94.20wit-bindgen.20interface.20directions.20and.20generated.20types.html#536862827">(Aug 29 2025 at 21:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395878">Scott Waye</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>