<html>
<head><meta charset="utf-8"><title>using `Task.WhenEach` · C#/.net-collaboration · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/index.html">C#/.net-collaboration</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/using.20.60Task.2EWhenEach.60.html">using `Task.WhenEach`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="441335297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/using%20%60Task.WhenEach%60/near/441335297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/using.20.60Task.2EWhenEach.60.html#441335297">(May 29 2024 at 23:03)</a>:</h4>
<p>Can someone spot what I'm doing wrong here?  I'm trying to use <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.wheneach?view=net-9.0#system-threading-tasks-task-wheneach-1(system-collections-generic-ienumerable((system-threading-tasks-task((-0)))))">https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.wheneach?view=net-9.0#system-threading-tasks-task-wheneach-1(system-collections-generic-ienumerable((system-threading-tasks-task((-0)))))</a>, which is new in .NET 9, but the compiler complains it doesn't exist:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dicej</span><span class="o">/</span><span class="n">dotnet</span><span class="o">/</span><span class="n">sdk</span><span class="o">/</span><span class="mf">9.0.100</span><span class="o">-</span><span class="n">preview</span><span class="p">.</span><span class="mf">4.24267.66</span><span class="o">/</span><span class="n">Sdks</span><span class="o">/</span><span class="n">Microsoft</span><span class="p">.</span><span class="n">NET</span><span class="p">.</span><span class="n">Sdk</span><span class="o">/</span><span class="n">targets</span><span class="o">/</span><span class="n">Microsoft</span><span class="p">.</span><span class="n">NET</span><span class="p">.</span><span class="n">RuntimeIdentifierInference</span><span class="p">.</span><span class="n">targets</span><span class="p">(</span><span class="mi">314</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span><span class="w"> </span><span class="nc">message</span><span class="w"> </span><span class="n">NETSDK1057</span><span class="p">:</span><span class="w"> </span><span class="nc">You</span><span class="w"> </span><span class="n">are</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">preview</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="p">.</span><span class="n">NET</span><span class="p">.</span><span class="w"> </span><span class="n">See</span><span class="p">:</span><span class="w"> </span><span class="nc">https</span><span class="p">:</span><span class="c1">//aka.ms/dotnet-support-policy [/home/dicej/p/dotnet9-wasi-http-example/App.csproj]</span>
<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dicej</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">dotnet9</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">example</span><span class="o">/</span><span class="n">App</span><span class="p">.</span><span class="n">cs</span><span class="p">(</span><span class="mi">49</span><span class="p">,</span><span class="mi">59</span><span class="p">):</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="n">CS0117</span><span class="p">:</span><span class="w"> </span><span class="o">'</span><span class="na">Task</span><span class="o">'</span><span class="w"> </span><span class="nc">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">'</span><span class="na">WhenEach</span><span class="o">'</span><span class="w"> </span><span class="p">[</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">dicej</span><span class="o">/</span><span class="n">p</span><span class="o">/</span><span class="n">dotnet9</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">example</span><span class="o">/</span><span class="n">App</span><span class="p">.</span><span class="n">csproj</span><span class="p">]</span>
</code></pre></div>
<div class="message_embed"><a class="message_embed_image" href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.wheneach?view=net-9.0#system-threading-tasks-task-wheneach-1(system-collections-generic-ienumerable((system-threading-tasks-task((-0)))))" style="background-image: url(&quot;https://uploads.zulipusercontent.net/3ce17f2b2911dcb735720cc46e75758679339053/68747470733a2f2f6c6561726e2e6d6963726f736f66742e636f6d2f656e2d75732f6d656469612f6f70656e2d67726170682d696d6167652e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.wheneach?view=net-9.0#system-threading-tasks-task-wheneach-1(system-collections-generic-ienumerable((system-threading-tasks-task((-0)))))" title="Task.WhenEach Method (System.Threading.Tasks)">Task.WhenEach Method (System.Threading.Tasks)</a></div><div class="message_embed_description">Learn more about the System.Threading.Tasks.Task.WhenEach in the System.Threading.Tasks namespace.</div></div></div>



<a name="441335699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/using%20%60Task.WhenEach%60/near/441335699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/using.20.60Task.2EWhenEach.60.html#441335699">(May 29 2024 at 23:05)</a>:</h4>
<p>Is there something special I need to do to request prerelease features like that (besides actually using the prerelease SDK, I mean)?</p>



<a name="441336658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/using%20%60Task.WhenEach%60/near/441336658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/using.20.60Task.2EWhenEach.60.html#441336658">(May 29 2024 at 23:10)</a>:</h4>
<p>Code snippet for reference:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">                </span><span class="n">var</span><span class="w"> </span><span class="n">tasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Task</span><span class="o">&lt;</span><span class="p">(</span><span class="n">string</span><span class="p">,</span><span class="w"> </span><span class="n">string</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="p">();</span>
<span class="w">                </span><span class="n">foreach</span><span class="w"> </span><span class="p">(</span><span class="n">var</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">urls</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">tasks</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">Sha256</span><span class="p">(</span><span class="n">url</span><span class="p">));</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">                </span><span class="k">await</span><span class="w"> </span><span class="n">foreach</span><span class="w"> </span><span class="p">((</span><span class="n">var</span><span class="w"> </span><span class="n">url</span><span class="p">,</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">sha</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">Task</span><span class="p">.</span><span class="n">WhenEach</span><span class="p">(</span><span class="n">tasks</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="k">await</span><span class="w"> </span><span class="n">sink</span><span class="p">.</span><span class="n">WriteAsync</span><span class="p">(</span><span class="n">Encoding</span><span class="p">.</span><span class="n">UTF8</span><span class="p">.</span><span class="n">GetBytes</span><span class="p">(</span><span class="cp">$</span><span class="s">"{url}: {sha}</span><span class="se">\n</span><span class="s">"</span><span class="p">));</span>
<span class="w">                </span><span class="p">}</span>
</code></pre></div>



<a name="441338483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/using%20%60Task.WhenEach%60/near/441338483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/using.20.60Task.2EWhenEach.60.html#441338483">(May 29 2024 at 23:20)</a>:</h4>
<p>Ah, this is probably the culprit: <code>&lt;TargetFramework&gt;net8.0&lt;/TargetFramework&gt;</code></p>



<a name="441338609"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/407028-C%23/.net-collaboration/topic/using%20%60Task.WhenEach%60/near/441338609" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/407028-C.23.2F.2Enet-collaboration/topic/using.20.60Task.2EWhenEach.60.html#441338609">(May 29 2024 at 23:21)</a>:</h4>
<p>Yup, that was it.  Sorry for the noise (again).</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>