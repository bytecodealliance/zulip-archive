<html>
<head><meta charset="utf-8"><title>Compatibility of enum/variant 路 wit-bindgen 路 Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/index.html">wit-bindgen</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html">Compatibility of enum/variant</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="558270340"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558270340" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> anb <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558270340">(Nov 19 2025 at 17:56)</a>:</h4>
<p>Hi, I wonder if there's any docs about adding/removing members from enum/variant break binary compatibility? And if so, what's the best/safe way to change an existing enum?</p>



<a name="558275137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558275137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558275137">(Nov 19 2025 at 18:23)</a>:</h4>
<p>I don't think there is any kind of variant subtyping currently implemented in the component model, so any changes to variant cases would be backward-incompatible. The only "safe" ways to migrate would be to create a new variant that is only used by new functions or by updating the package version to indicate the backward-incompatibility.</p>



<a name="558279615"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558279615" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> anb <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558279615">(Nov 19 2025 at 18:47)</a>:</h4>
<p>Thanks Lann, how about enum? Is it backed by integers? Any way to safely change it without breaking anything?</p>



<a name="558280886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558280886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558280886">(Nov 19 2025 at 18:55)</a>:</h4>
<p>Same for enums and all other value types. The ABI does indeed use integers but components have self-describing interfaces that include most of what is specified in WIT; see the spec here: <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Binary.md#type-definitions">https://github.com/WebAssembly/component-model/blob/main/design/mvp/Binary.md#type-definitions</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Binary.md#type-definitions" style="background-image: url(&quot;https://uploads.zulipusercontent.net/0206aaa5aa2025def503a8bbaafc25eac922a37d/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313236363438653932343539396634376264343935666564316636393034366365303433343139653461616265643661303137373165666530333331316531342f576562417373656d626c792f636f6d706f6e656e742d6d6f64656c&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/Binary.md#type-definitions" title="component-model/design/mvp/Binary.md at main 路 WebAssembly/component-model">component-model/design/mvp/Binary.md at main 路 WebAssembly/component-model</a></div><div class="message_embed_description">Repository for design and specification of the Component Model - WebAssembly/component-model</div></div></div>



<a name="558281300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558281300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558281300">(Nov 19 2025 at 18:57)</a>:</h4>
<p>In the specific case of <code>enum</code> you can see that the binary type information includes <code>&lt;label&gt;</code> strings.</p>



<a name="558286205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558286205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> anb <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558286205">(Nov 19 2025 at 19:27)</a>:</h4>
<p>That feels like a pain :-/</p>



<a name="558302820"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/327223-wit-bindgen/topic/Compatibility%20of%20enum/variant/near/558302820" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/327223-wit-bindgen/topic/Compatibility.20of.20enum.2Fvariant.html#558302820">(Nov 19 2025 at 21:06)</a>:</h4>
<p>There was a rough outline of subtyping prior to the 0.2 release but it was removed. You can see some discussion of why here: <a href="#narrow/channel/219900-wasi/topic/.60.40since.60.20gates.20on.20variant.20and.20enum.20members.3F/near/441081505">#wasi &gt; &#96;@since&#96; gates on variant and enum members? @ </a></p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>