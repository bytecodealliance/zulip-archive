<html>
<head><meta charset="utf-8"><title>Can non-function types be imported to JS? #183 · ComponentizeJS · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/index.html">ComponentizeJS</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html">Can non-function types be imported to JS? #183</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="508540588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508540588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508540588">(Mar 27 2025 at 14:53)</a>:</h4>
<p>Hey Folks, I'm running into an issue importing / generating types for a JS component I'm working on. I have no problem generating function imports, but the types that are needed by that function are failing to generate. The error is as follows:</p>
<p>Error: Import 'example:domain/types@0.3.1' is not defined by the WIT world. Available imports are: 'example:domain/adder@0.3.1', 'example:domain/chat@0.3.1', 'wasi:clocks/monotonic-clock@0.2.3', 'wasi:http/types@0.2.3', 'wasi:io/error@0.2.3', 'wasi:io/poll@0.2.3', 'wasi:io/streams@0.2.3'.</p>
<p>The offending import is example:domain/types@0.3.1', which can be found in the wit deps dir in the linked repo. The code is located here: <a href="https://github.com/devigned/wasm-packs/tree/3a82b341e3b9ba43bc3844f59102c0e432217206/apps/compose/app-js">https://github.com/devigned/wasm-packs/tree/3a82b341e3b9ba43bc3844f59102c0e432217206/apps/compose/app-js</a></p>
<p>I was not the OP for <a href="https://github.com/bytecodealliance/ComponentizeJS/issues/183">https://github.com/bytecodealliance/ComponentizeJS/issues/183</a>, but I believe I'm seeing the same problem.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/devigned/wasm-packs/tree/3a82b341e3b9ba43bc3844f59102c0e432217206/apps/compose/app-js" style="background-image: url(&quot;https://uploads.zulipusercontent.net/04b112c130d0e88f1fe44a4d8433ab6e0c43a0c2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363962353935323633306539383331633465383235353565656234343237393432363033343364396361663033326333653237376132343764396130646331352f64657669676e65642f7761736d2d7061636b73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/devigned/wasm-packs/tree/3a82b341e3b9ba43bc3844f59102c0e432217206/apps/compose/app-js" title="wasm-packs/apps/compose/app-js at 3a82b341e3b9ba43bc3844f59102c0e432217206 · devigned/wasm-packs">wasm-packs/apps/compose/app-js at 3a82b341e3b9ba43bc3844f59102c0e432217206 · devigned/wasm-packs</a></div><div class="message_embed_description">Contribute to devigned/wasm-packs development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/ComponentizeJS/issues/183" style="background-image: url(&quot;https://uploads.zulipusercontent.net/58825f5042d2a836947d3efd192f390524ea4d02/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f343831663461356537366431663561643764333264396337633036373063316335333365356236303431613137633861663138393831356238613261346138332f62797465636f6465616c6c69616e63652f436f6d706f6e656e74697a654a532f6973737565732f313833&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/ComponentizeJS/issues/183" title="Can non-function types be imported to JS? · Issue #183 · bytecodealliance/ComponentizeJS">Can non-function types be imported to JS? · Issue #183 · bytecodealliance/ComponentizeJS</a></div><div class="message_embed_description">Hi! I've started to use ComponentizeJS for a small project and I'm rather excited at the possibility of allowing javascript as a way for wasm plugins in my program. I have a WIT file where I declar...</div></div></div>



<a name="508560180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508560180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Guy Bedford <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508560180">(Mar 27 2025 at 16:07)</a>:</h4>
<p><span class="user-mention" data-user-id="474281">@David Justice</span> haven't looked into this too thoroughly, but perhaps the domain WIT package needs to explicitly export the types interface as it only imports it currently?</p>



<a name="508561017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508561017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508561017">(Mar 27 2025 at 16:09)</a>:</h4>
<p>Hey <span class="user-mention" data-user-id="474281">@David Justice</span> would you mind sharing the commands you're running?</p>
<p>When I pull your repo, <code>jco types</code> actually works fine:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="err">➜</span><span class="w"> </span><span class="n">npx</span><span class="w"> </span><span class="n">jco</span><span class="w"> </span><span class="n">types</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">generated</span><span class="w"> </span><span class="n">wit</span>

<span class="w">  </span><span class="n">Generated</span><span class="w"> </span><span class="n">Type</span><span class="w"> </span><span class="n">Files</span><span class="p">:</span>

<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">example</span><span class="o">-</span><span class="n">domain</span><span class="o">-</span><span class="n">adder</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">          </span><span class="mf">0.1</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">clocks</span><span class="o">-</span><span class="n">monotonic</span><span class="o">-</span><span class="n">clock</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">  </span><span class="mf">0.37</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">incoming</span><span class="o">-</span><span class="n">handler</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">   </span><span class="mf">0.85</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">http</span><span class="o">-</span><span class="n">types</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">              </span><span class="mf">25.1</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">io</span><span class="o">-</span><span class="n">error</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">                </span><span class="mf">0.18</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">io</span><span class="o">-</span><span class="n">poll</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">                 </span><span class="mf">0.25</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">interfaces</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">io</span><span class="o">-</span><span class="n">streams</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">              </span><span class="mf">1.14</span><span class="w"> </span><span class="n">KiB</span>
<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">generated</span><span class="o">/</span><span class="n">wit</span><span class="p">.</span><span class="n">d</span><span class="p">.</span><span class="n">ts</span><span class="w">                                     </span><span class="mf">0.81</span><span class="w"> </span><span class="n">KiB</span>
</code></pre></div>
<p>Of course your <code>build</code> target also works fine for me as well</p>



<a name="508561306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508561306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508561306">(Mar 27 2025 at 16:10)</a>:</h4>
<p>Note that <code>npx jco transpile</code> <em>also</em> works just fine for me -- I do wonder what you could be running into</p>



<a name="508579924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508579924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508579924">(Mar 27 2025 at 17:28)</a>:</h4>
<p>Yeah, <code>jco types </code> works like a charm. I had the same result and thought about just going down the jco path. However, I looked and saw an open issue in componentize-js without a repro, so thought I'd bring it up and see if we could sort it out.</p>
<p>The build is basically <a href="https://github.com/devigned/wasm-packs/blob/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js/package.json#L14">https://github.com/devigned/wasm-packs/blob/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js/package.json#L14</a>. </p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="w">  </span><span class="nt">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">"build:rollup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rollup -c"</span><span class="p">,</span>
<span class="w">    </span><span class="nt">"build"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wkg wit fetch &amp;&amp; npm run build:rollup  &amp;&amp; node componentize.js"</span>
<span class="w">  </span><span class="p">},</span>
</code></pre></div>
<p>And a really simple componentize.js script (almost the same as the example).</p>
<div class="codehilite" data-code-language="JavaScript"><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">readFile</span><span class="p">,</span><span class="w"> </span><span class="nx">writeFile</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"node:fs/promises"</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">resolve</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"node:path"</span><span class="p">;</span>

<span class="k">import</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">componentize</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s2">"@bytecodealliance/componentize-js"</span><span class="p">;</span>

<span class="c1">// AoT compilation makes use of weval (https://github.com/bytecodealliance/weval)</span>
<span class="kd">const</span><span class="w"> </span><span class="nx">enableAot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">ENABLE_AOT</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"1"</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">jsSource</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">readFile</span><span class="p">(</span><span class="s2">"./dist/index.js"</span><span class="p">,</span><span class="w"> </span><span class="s2">"utf8"</span><span class="p">);</span>

<span class="kd">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nx">component</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">componentize</span><span class="p">(</span><span class="nx">jsSource</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nx">witPath</span><span class="o">:</span><span class="w"> </span><span class="nx">resolve</span><span class="p">(</span><span class="s2">"wit"</span><span class="p">),</span>
<span class="w">  </span><span class="nx">debug</span><span class="o">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">  </span><span class="nx">enableAot</span><span class="p">,</span>
<span class="p">});</span>

<span class="kd">let</span><span class="w"> </span><span class="nx">componentName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">COMPONENT_NAME</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="s2">"server.component.wasm"</span><span class="p">;</span>
<span class="k">await</span><span class="w"> </span><span class="nx">writeFile</span><span class="p">(</span><span class="nx">componentName</span><span class="p">,</span><span class="w"> </span><span class="nx">component</span><span class="p">);</span>
</code></pre></div>
<p><a href="https://github.com/devigned/wasm-packs/blob/main/apps/compose/app-js/componentize.js">https://github.com/devigned/wasm-packs/blob/main/apps/compose/app-js/componentize.js</a></p>
<p>I tried to breaking up the wit files for example:domain. I tried to copy the same format at the WASI wit specs. I tried multiple combinations of import and use. Eventually, I gave up after seeing <code>jco</code> produce the expected output.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/devigned/wasm-packs/blob/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js/package.json#L14" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ac6a16c7c7cf05dcedd81fe9ae451f1eabab5a55/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f396466326161326163623964383066376234613433656335353735326331323138356539366532626366343038353933396131643339343133366130373666642f64657669676e65642f7761736d2d7061636b73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/devigned/wasm-packs/blob/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js/package.json#L14" title="wasm-packs/apps/compose/app-js/package.json at a42b6f4d67bcd916e4180181fac5f8330c9e0ea3 · devigned/wasm-packs">wasm-packs/apps/compose/app-js/package.json at a42b6f4d67bcd916e4180181fac5f8330c9e0ea3 · devigned/wasm-packs</a></div><div class="message_embed_description">Contribute to devigned/wasm-packs development by creating an account on GitHub.</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/devigned/wasm-packs/blob/main/apps/compose/app-js/componentize.js" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ac6a16c7c7cf05dcedd81fe9ae451f1eabab5a55/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f396466326161326163623964383066376234613433656335353735326331323138356539366532626366343038353933396131643339343133366130373666642f64657669676e65642f7761736d2d7061636b73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/devigned/wasm-packs/blob/main/apps/compose/app-js/componentize.js" title="wasm-packs/apps/compose/app-js/componentize.js at main · devigned/wasm-packs">wasm-packs/apps/compose/app-js/componentize.js at main · devigned/wasm-packs</a></div><div class="message_embed_description">Contribute to devigned/wasm-packs development by creating an account on GitHub.</div></div></div>



<a name="508604761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508604761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508604761">(Mar 27 2025 at 19:43)</a>:</h4>
<p>Ah sorry I'm a little confused (that <code>rollup</code> command is new to me -- that wasn't there when I ran the code in your repo before), but does that mean things worked?</p>
<p>Are you seeing this error:</p>
<blockquote>
<p>Error: Import 'example:domain/types@0.3.1' is not defined by the WIT world. Available imports are: 'example:domain/adder@0.3.1', 'example:domain/chat@0.3.1', 'wasi:clocks/monotonic-clock@0.2.3', 'wasi:http/types@0.2.3', 'wasi:io/error@0.2.3', 'wasi:io/poll@0.2.3', 'wasi:io/streams@0.2.3'.</p>
</blockquote>
<p>Anymore? If you are, what command are you running? Or is this happening when you're <em>running</em> the component somewhere else?</p>



<a name="508606131"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508606131" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508606131">(Mar 27 2025 at 19:52)</a>:</h4>
<p>The code in main works, but was super hacky. I ended up creating a JS object in the shape of what the <code>chat</code> function needed without using the generated types. Surprisingly, that worked! </p>
<p>This link is a perma-link to the project when I was getting the error: <a href="https://github.com/devigned/wasm-packs/tree/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js">https://github.com/devigned/wasm-packs/tree/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js</a>. If you add the line <code>import { ChatRequest } from "example:domain/types@0.3.0";</code> to line 10 of <code>./src/server.js</code>, the error is reproduced when running <code>npm run build</code>. (probably should have pushed it with the line in there, but...)</p>
<p>Rollup is used for bundling js deps together. I introduced a router to the incoming-handler to make dev feel more like a regular JS web experience.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/devigned/wasm-packs/tree/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ac6a16c7c7cf05dcedd81fe9ae451f1eabab5a55/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f396466326161326163623964383066376234613433656335353735326331323138356539366532626366343038353933396131643339343133366130373666642f64657669676e65642f7761736d2d7061636b73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/devigned/wasm-packs/tree/a42b6f4d67bcd916e4180181fac5f8330c9e0ea3/apps/compose/app-js" title="wasm-packs/apps/compose/app-js at a42b6f4d67bcd916e4180181fac5f8330c9e0ea3 · devigned/wasm-packs">wasm-packs/apps/compose/app-js at a42b6f4d67bcd916e4180181fac5f8330c9e0ea3 · devigned/wasm-packs</a></div><div class="message_embed_description">Contribute to devigned/wasm-packs development by creating an account on GitHub.</div></div></div>



<a name="508632339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508632339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Milan (rajsite) <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508632339">(Mar 27 2025 at 22:51)</a>:</h4>
<p>I didn't fully try your build but betting you need to configure externals in your rollup config for any wit imports so rollup doesn't try to resolve them, i.e. <code>external: /wasi:.*/,</code>  and also for your custom <code>example:</code> imports</p>



<a name="508741118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508741118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508741118">(Mar 28 2025 at 12:19)</a>:</h4>
<p>Rollup complains a bit, but there is no issue with other function definitions in the same wit package (example:domain). The problem is only with type definitions in the <code>example:domain</code> wit package. Due to that, I believe that the error has very little to do with rollup and more to do with how the type definitions in the wit interface are handled when producing the wasm component.</p>



<a name="508741955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/508741955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#508741955">(Mar 28 2025 at 12:24)</a>:</h4>
<p>Related, but not germane to this issue, would folks be interested in an example for componentize-js demonstrating how to bundle js dependencies? I feel like the hello world example doesn't really hit the mainstream developer whom is likely to want to build something more akin to a HTTP API using an off the shelf router. WDYT?</p>



<a name="509261434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/509261434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#509261434">(Mar 31 2025 at 17:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="474281">David Justice</span> <a href="#narrow/channel/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183/near/508741955">said</a>:</p>
<blockquote>
<p>Related, but not germane to this issue, would folks be interested in an example for componentize-js demonstrating how to bundle js dependencies? I feel like the hello world example doesn't really hit the mainstream developer whom is likely to want to build something more akin to a HTTP API using an off the shelf router. WDYT?</p>
</blockquote>
<p>We'd definitely love to have that as an example! Would be happy to field such a PR :)</p>



<a name="511379061"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/511379061" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#511379061">(Apr 10 2025 at 11:19)</a>:</h4>
<p>Ok, based on chatting with <span class="user-mention" data-user-id="234973">@Till Schneidereit</span>, currently, JS types will not be generated for type definitions. I believe the project is working as expected. However, that just means that JS type generation is a feature rather than a bug.</p>
<p>Till also had mentioned the implementation would be non-trivial. I'm not entirely sure how non-trivial at this point, but I'll hack a bit at it and see if I can make progress.</p>
<p>I believe a passing test for this should look something like this: <a href="https://github.com/bytecodealliance/ComponentizeJS/compare/main...devigned:ComponentizeJS:js-type-gen?expand=1">https://github.com/bytecodealliance/ComponentizeJS/compare/main...devigned:ComponentizeJS:js-type-gen?expand=1</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/ComponentizeJS/compare/main...devigned:ComponentizeJS:js-type-gen?expand=1" style="background-image: url(&quot;https://uploads.zulipusercontent.net/d1d9ee2631416860a44c80656e123928ca44c493/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f306437613730343435366231333861653665656361373339383863353063343239343636623431363233356365626231356331636237346335376335323536382f62797465636f6465616c6c69616e63652f436f6d706f6e656e74697a654a53&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/ComponentizeJS/compare/main...devigned:ComponentizeJS:js-type-gen?expand=1" title="Comparing bytecodealliance:main...devigned:js-type-gen · bytecodealliance/ComponentizeJS">Comparing bytecodealliance:main...devigned:js-type-gen · bytecodealliance/ComponentizeJS</a></div><div class="message_embed_description">JS -&gt; WebAssembly Component. Contribute to bytecodealliance/ComponentizeJS development by creating an account on GitHub.</div></div></div>



<a name="511380072"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/511380072" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> David Justice <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#511380072">(Apr 10 2025 at 11:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="598440">Victor Adossi</span> <a href="#narrow/channel/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183/near/509261434">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="474281">David Justice</span> <a href="#narrow/channel/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183/near/508741955">said</a>:</p>
<blockquote>
<p>Related, but not germane to this issue, would folks be interested in an example for componentize-js demonstrating how to bundle js dependencies? I feel like the hello world example doesn't really hit the mainstream developer whom is likely to want to build something more akin to a HTTP API using an off the shelf router. WDYT?</p>
</blockquote>
<p>We'd definitely love to have that as an example! Would be happy to field such a PR :)</p>
</blockquote>
<p><span class="user-mention" data-user-id="763150">@Tomasz Andrzejak</span> and I discussed this yesterday. He ran with it and has a clean implementation that should be pretty easy to follow. </p>
<p>Would the example be best as a GitHub template repository or as an example in a directory in componentize-js? <span class="user-mention" data-user-id="344849">@Yosh Wuyts</span>, do you have any opinions on template repos vs examples?</p>



<a name="511397416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/511397416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tomasz Andrzejak <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#511397416">(Apr 10 2025 at 12:35)</a>:</h4>
<p>Here, I created a repo (similar to Rust sample that we already have in <code>bytecodealliance</code>) that demonstrates creating a router application:</p>
<p><a href="https://github.com/andreiltd/sample-wasi-http-js">https://github.com/andreiltd/sample-wasi-http-js</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/andreiltd/sample-wasi-http-js" style="background-image: url(&quot;https://uploads.zulipusercontent.net/204642cfbecf02b5d2ed84f066738a8843505492/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f373961396332636639383562623032623536326439353531353861383430643538393363383733386261613535613661653535323235643462643661323262662f616e647265696c74642f73616d706c652d776173692d687474702d6a73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/andreiltd/sample-wasi-http-js" title="GitHub - andreiltd/sample-wasi-http-js: An example `wasi:http` server component written in JavaScript">GitHub - andreiltd/sample-wasi-http-js: An example `wasi:http` server component written in JavaScript</a></div><div class="message_embed_description">An example `wasi:http` server component written in JavaScript - andreiltd/sample-wasi-http-js</div></div></div>



<a name="511416000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/511416000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#511416000">(Apr 10 2025 at 13:47)</a>:</h4>
<p><a href="/user_uploads/15107/wfOuhajNLCh08A6OvMlkaZOo/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/wfOuhajNLCh08A6OvMlkaZOo/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="1572x862" src="/user_uploads/thumbnail/15107/wfOuhajNLCh08A6OvMlkaZOo/image.png/840x560.webp"></a></div>



<a name="511416036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/511416036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#511416036">(Apr 10 2025 at 13:47)</a>:</h4>
<p>seems to work</p>



<a name="511416055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/387620-ComponentizeJS/topic/Can%20non-function%20types%20be%20imported%20to%20JS%3F%20%23183/near/511416055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ralph <a href="https://bytecodealliance.github.io/zulip-archive/stream/387620-ComponentizeJS/topic/Can.20non-function.20types.20be.20imported.20to.20JS.3F.20.23183.html#511416055">(Apr 10 2025 at 13:47)</a>:</h4>
<p>:-)</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>