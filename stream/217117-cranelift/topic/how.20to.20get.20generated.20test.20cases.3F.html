<html>
<head><meta charset="utf-8"><title>how to get generated test cases? · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html">how to get generated test cases?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="524464886"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524464886" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524464886">(Jun 17 2025 at 14:19)</a>:</h4>
<p>Hi, I'm trying to fuzz cranelift using <code>cargo fuzz run cranelift-fuzzgen</code>, but it gets stuck after printing:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="nc">Running</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">entropic</span><span class="w"> </span><span class="n">power</span><span class="w"> </span><span class="n">schedule</span><span class="w"> </span><span class="p">(</span><span class="mh">0xFF</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">).</span>
<span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="nc">Seed</span><span class="p">:</span><span class="w"> </span><span class="mi">155173815</span>
<span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="nc">Loaded</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">modules</span><span class="w">   </span><span class="p">(</span><span class="mi">1799139</span><span class="w"> </span><span class="n">inline</span><span class="w"> </span><span class="mi">8</span><span class="o">-</span><span class="n">bit</span><span class="w"> </span><span class="n">counters</span><span class="p">):</span><span class="w"> </span><span class="mi">1799139</span><span class="w"> </span><span class="p">[</span><span class="mh">0x55c390b711b0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x55c390d28593</span><span class="p">),</span>
<span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="nc">Loaded</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">PC</span><span class="w"> </span><span class="n">tables</span><span class="w"> </span><span class="p">(</span><span class="mi">1799139</span><span class="w"> </span><span class="n">PCs</span><span class="p">):</span><span class="w"> </span><span class="mi">1799139</span><span class="w"> </span><span class="p">[</span><span class="mh">0x55c390d28598</span><span class="p">,</span><span class="mh">0x55c39289c3c8</span><span class="p">),</span>
<span class="n">INFO</span><span class="p">:</span><span class="w">        </span><span class="mi">0</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">obfuscator</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="o">/</span><span class="n">corpus</span><span class="o">/</span><span class="n">cranelift</span><span class="o">-</span><span class="n">fuzzgen</span>
<span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="n">max_len</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">provided</span><span class="p">;</span><span class="w"> </span><span class="n">libFuzzer</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">generate</span><span class="w"> </span><span class="n">inputs</span><span class="w"> </span><span class="n">larger</span><span class="w"> </span><span class="n">than</span><span class="w"> </span><span class="mi">4096</span><span class="w"> </span><span class="n">bytes</span>
<span class="n">INFO</span><span class="p">:</span><span class="w"> </span><span class="nc">A</span><span class="w"> </span><span class="n">corpus</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">provided</span><span class="p">,</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="n">corpus</span>
<span class="p">#</span><span class="mi">2</span><span class="w">      </span><span class="n">INITED</span><span class="w"> </span><span class="n">exec</span><span class="o">/</span><span class="n">s</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">rss</span><span class="p">:</span><span class="w"> </span><span class="mi">126</span><span class="n">Mb</span>
<span class="n">WARNING</span><span class="p">:</span><span class="w"> </span><span class="nc">no</span><span class="w"> </span><span class="n">interesting</span><span class="w"> </span><span class="n">inputs</span><span class="w"> </span><span class="n">were</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">far</span><span class="p">.</span><span class="w"> </span><span class="n">Is</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">instrumented</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">coverage</span><span class="o">?</span>
<span class="n">This</span><span class="w"> </span><span class="n">may</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">happen</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">rejected</span><span class="w"> </span><span class="n">all</span><span class="w"> </span><span class="n">inputs</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">tried</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">far</span>
</code></pre></div>
<p>I want to collect all generated test cases like in <a href="">wasmtime/#10583</a>. How can I:</p>
<ol>
<li>
<p>Make the fuzzer actually generate and save test cases?</p>
</li>
<li>
<p>Find where the test cases are stored?</p>
</li>
</ol>
<p>The command just hangs after that warning with no visible progress. Any help would be appreciated!</p>



<a name="524468356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524468356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524468356">(Jun 17 2025 at 14:34)</a>:</h4>
<p>The  general documentation for fuzzing in Rust is found <a href="https://rust-fuzz.github.io/book/cargo-fuzz.html">here</a> which might be good to peruse, that goes over folder structure and such of where artifacts are located. By default <code>cargo fuzz run cranelift-fuzzgen</code> will run the fuzzer infinitely until a crash happens, and the crash is recorded in the <code>fuzz/*</code> directory inside there</p>



<a name="524470676"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524470676" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524470676">(Jun 17 2025 at 14:46)</a>:</h4>
<p>I added an <code>unreachable!()</code> statement at <a href="https://github.com/bytecodealliance/wasmtime/blob/9c2e6f17c782bb37634dde77866cd69610a00cbc/fuzz/fuzz_targets/cranelift-fuzzgen.rs#L383">this location</a>, then ran: <code>cargo fuzz run cranelift-fuzzgen</code>. And I get the same output as before with no panic. Does this mean the fuzz target's code isn't being executed at all?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/9c2e6f17c782bb37634dde77866cd69610a00cbc/fuzz/fuzz_targets/cranelift-fuzzgen.rs#L383" style="background-image: url(&quot;https://uploads.zulipusercontent.net/f28d5190c0e2dee0ea476383310316c56fd2d15c/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f623363646463643735316434653564613765356263613964346337393365333866663361623036313133313463326133303338393232303835623437343663642f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/9c2e6f17c782bb37634dde77866cd69610a00cbc/fuzz/fuzz_targets/cranelift-fuzzgen.rs#L383" title="wasmtime/fuzz/fuzz_targets/cranelift-fuzzgen.rs at 9c2e6f17c782bb37634dde77866cd69610a00cbc · bytecodealliance/wasmtime">wasmtime/fuzz/fuzz_targets/cranelift-fuzzgen.rs at 9c2e6f17c782bb37634dde77866cd69610a00cbc · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>



<a name="524472747"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524472747" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524472747">(Jun 17 2025 at 14:56)</a>:</h4>
<p>yeah that definitely looks like something funky is going on, I'm testing out that myself and seeing what happens.</p>
<p>In the meantime, what is <code>cargo fuzz --version</code> and what version of Rust are you using?</p>



<a name="524472838"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524472838" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524472838">(Jun 17 2025 at 14:57)</a>:</h4>
<p>for me it's <code>cargo-fuzz 0.12.0</code> and <code>rustc 1.89.0-nightly (ccf3198de 2025-06-05)</code></p>



<a name="524472993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524472993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524472993">(Jun 17 2025 at 14:57)</a>:</h4>
<p><code>cargo-fuzz 0.12.0</code> and  <code>rustc 1.89.0-nightly (4d08223c0 2025-05-31)</code></p>



<a name="524473328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524473328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524473328">(Jun 17 2025 at 14:59)</a>:</h4>
<p>hm ok yeah I'm making no progress on my end either</p>



<a name="524473944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524473944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524473944">(Jun 17 2025 at 15:02)</a>:</h4>
<p>(digging in)</p>



<a name="524474074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524474074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524474074">(Jun 17 2025 at 15:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F/near/524473944">said</a>:</p>
<blockquote>
<p>(digging in)</p>
</blockquote>
<p>Thank you for investigating this. I'd be truly grateful if this could be prioritized for a fix.</p>



<a name="524474934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524474934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524474934">(Jun 17 2025 at 15:07)</a>:</h4>
<p>Fixed at <a href="https://github.com/bytecodealliance/wasmtime/pull/11062">https://github.com/bytecodealliance/wasmtime/pull/11062</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/11062" style="background-image: url(&quot;https://uploads.zulipusercontent.net/981896fa7590f7ee49cf0ad649bc2cbc8e62a5a2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f636365633066626366326632393739303261363864333865613261653634343863373365316431663231666238666338616162336361613932333363353730382f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f3131303632&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/11062" title="Fix Cranelift-native fuzzers by alexcrichton · Pull Request #11062 · bytecodealliance/wasmtime">Fix Cranelift-native fuzzers by alexcrichton · Pull Request #11062 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This commit fixes a typo mistake from #10588 where the option specified there was actually invalid. This error got covered up by accident when generating the fuzz test case, however, meaning that t...</div></div></div>



<a name="524475225"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524475225" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524475225">(Jun 17 2025 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F/near/524474934">said</a>:</p>
<blockquote>
<p>Fixed at <a href="https://github.com/bytecodealliance/wasmtime/pull/11062">https://github.com/bytecodealliance/wasmtime/pull/11062</a></p>
</blockquote>
<p>Thank you for the quick fix! Really appreciate your help.</p>



<a name="524475684"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524475684" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524475684">(Jun 17 2025 at 15:10)</a>:</h4>
<p>FWIW I'd recommend fuzzing with <code>--sanitizer none</code> as it makes fuzzing go much faster and we don't get too much benefit from the default ASAN integration</p>



<a name="524475954"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524475954" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524475954">(Jun 17 2025 at 15:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F/near/524475684">said</a>:</p>
<blockquote>
<p>FWIW I'd recommend fuzzing with <code>--sanitizer none</code> as it makes fuzzing go much faster and we don't get too much benefit from the default ASAN integration</p>
</blockquote>
<p>Thanks for your advice <span aria-label="smiley" class="emoji emoji-1f603" role="img" title="smiley">:smiley:</span></p>



<a name="524987356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/524987356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#524987356">(Jun 20 2025 at 07:00)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span>  Hi, I’ve saved the generated test cases, but I noticed an issue: most of them contain functions similar to the following pattern:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">function</span><span class="w"> </span><span class="n">u1</span><span class="p">:</span><span class="mi">0</span><span class="p">()</span><span class="w"> </span><span class="n">fast</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">ss0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">explicit_slot</span><span class="w"> </span><span class="mi">58</span><span class="p">,</span><span class="w"> </span><span class="n">align</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">32</span>
<span class="w">    </span><span class="n">ss1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">explicit_slot</span><span class="w"> </span><span class="mi">18</span>
<span class="w">    </span><span class="n">ss2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">explicit_slot</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">sig0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">i16x8</span><span class="p">,</span><span class="w"> </span><span class="kt">i128</span><span class="w"> </span><span class="n">sext</span><span class="p">,</span><span class="w"> </span><span class="n">i16x8</span><span class="p">,</span><span class="w"> </span><span class="n">i16x8</span><span class="p">,</span><span class="w"> </span><span class="n">i64x2</span><span class="p">,</span><span class="w"> </span><span class="kt">f64</span><span class="p">,</span><span class="w"> </span><span class="kt">i8</span><span class="w"> </span><span class="n">sext</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">i16x8</span><span class="w"> </span><span class="n">system_v</span>
<span class="w">    </span><span class="n">sig1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="nc">system_v</span>
<span class="w">    </span><span class="n">sig2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="nc">system_v</span>
<span class="w">    </span><span class="n">sig3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="nc">system_v</span>
<span class="w">    </span><span class="n">sig4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="nc">system_v</span>
<span class="w">    </span><span class="n">sig5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">f32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="nc">system_v</span>
<span class="w">    </span><span class="n">sig6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">f64</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="nc">system_v</span>
<span class="w">    </span><span class="n">fn0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">u1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="n">sig0</span>
<span class="w">    </span><span class="n">fn1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">%</span><span class="n">CeilF32</span><span class="w"> </span><span class="n">sig1</span>
<span class="w">    </span><span class="n">fn2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">%</span><span class="n">CeilF64</span><span class="w"> </span><span class="n">sig2</span>
<span class="w">    </span><span class="n">fn3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colocated</span><span class="w"> </span><span class="o">%</span><span class="n">FloorF32</span><span class="w"> </span><span class="n">sig3</span>
<span class="w">    </span><span class="n">fn4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">colocated</span><span class="w"> </span><span class="o">%</span><span class="n">FloorF64</span><span class="w"> </span><span class="n">sig4</span>
<span class="w">    </span><span class="n">fn5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">%</span><span class="n">TruncF32</span><span class="w"> </span><span class="n">sig5</span>
<span class="w">    </span><span class="n">fn6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">%</span><span class="n">TruncF64</span><span class="w"> </span><span class="n">sig6</span>

<span class="n">block0</span><span class="p">:</span>
<span class="w">    </span><span class="nc">v0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i8</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i16</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v4</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">uextend</span><span class="p">.</span><span class="kt">i128</span><span class="w"> </span><span class="n">v3</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v5</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss1</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v5</span>
<span class="w">    </span><span class="n">v6</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss1</span><span class="o">+</span><span class="mi">16</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v6</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v7</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss0</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v7</span>
<span class="w">    </span><span class="n">v8</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss0</span><span class="o">+</span><span class="mi">16</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v8</span>
<span class="w">    </span><span class="n">v9</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss0</span><span class="o">+</span><span class="mi">32</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">v4</span><span class="p">,</span><span class="w"> </span><span class="n">v9</span>
<span class="w">    </span><span class="n">v10</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss0</span><span class="o">+</span><span class="mi">48</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">v3</span><span class="p">,</span><span class="w"> </span><span class="n">v10</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v11</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stack_addr</span><span class="p">.</span><span class="kt">i64</span><span class="w"> </span><span class="n">ss0</span><span class="o">+</span><span class="mi">56</span>
<span class="w">    </span><span class="n">store</span><span class="w"> </span><span class="n">notrap</span><span class="w"> </span><span class="n">heap</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v11</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span>
<span class="p">}</span>
</code></pre></div>
<ol>
<li>Is this intentional? Does Cranelift-Fuzzgen primarily focus on triggering compiler crashes rather than validating execution results?</li>
<li>Are there parameters to generate test cases with meaningful outputs for runtime verification?</li>
</ol>



<a name="525049091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/525049091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#525049091">(Jun 20 2025 at 14:06)</a>:</h4>
<p>Ah sorry I'm not too familar with cranelift-fuzzgen's implementation. I do believe we test some cases against the host but it's not necessarily engineered to ensure all results are compatible against the hosts. As a fuzz-generated program some are probably more amenable to detecting differences than others</p>



<a name="525050112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/525050112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#525050112">(Jun 20 2025 at 14:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F/near/525049091">said</a>:</p>
<blockquote>
<p>Ah sorry I'm not too familar with cranelift-fuzzgen's implementation. I do believe we test some cases against the host but it's not necessarily engineered to ensure all results are compatible against the hosts. As a fuzz-generated program some are probably more amenable to detecting differences than others</p>
</blockquote>
<p>OK, thank you for your response. I've gone through it again and it seems that there might be some issues with my operation. Now the generated IR test cases are a bit more complex.</p>



<a name="525083951"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/525083951" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Afonso Bordado <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#525083951">(Jun 20 2025 at 18:08)</a>:</h4>
<ol>
<li>Is this intentional? Does Cranelift-Fuzzgen primarily focus on triggering compiler crashes rather than validating execution results?</li>
</ol>
<p>Not really, It's just that it's really simple to generate an function that contains no input or output parameters, and produces no real instructions that use those.</p>
<p>That function essentially just sets up the stack area for use by the function, and exists, it's one of the simplest functions possible.</p>
<ol start="2">
<li>Are there parameters to generate test cases with meaningful outputs for runtime verification?</li>
</ol>
<p>IIRC we have a few knobs you can tweak. The first one is the number of input / output arguments. Due to the way the fuzzer is built, the more variables it has available, the easier it is to pick an instruction that does something. The second one is that you can force it to always produce at least 1 "real" instruction</p>
<p>I don't remember off the top of my head what these parameters were, but they were there.</p>



<a name="525084146"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/how%20to%20get%20generated%20test%20cases%3F/near/525084146" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Afonso Bordado <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/how.20to.20get.20generated.20test.20cases.3F.html#525084146">(Jun 20 2025 at 18:09)</a>:</h4>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/a7d9f3e114fc74889000aeb2c136e9dfd5c374be/cranelift/fuzzgen/src/config.rs#L79-L81">https://github.com/bytecodealliance/wasmtime/blob/a7d9f3e114fc74889000aeb2c136e9dfd5c374be/cranelift/fuzzgen/src/config.rs#L79-L81</a></p>
<p>Here they are. You can tweak those 3 parameters and it should produce slightly larger functions</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/a7d9f3e114fc74889000aeb2c136e9dfd5c374be/cranelift/fuzzgen/src/config.rs#L79-L81" style="background-image: url(&quot;https://uploads.zulipusercontent.net/4e8ccce330592eabbf34ed28c8a10db2dbbd5a0f/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f376463376333316633653730323534636466666633626231333961336131313932313832366438323238356463616137656634386562626366303863376630342f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/a7d9f3e114fc74889000aeb2c136e9dfd5c374be/cranelift/fuzzgen/src/config.rs#L79-L81" title="wasmtime/cranelift/fuzzgen/src/config.rs at a7d9f3e114fc74889000aeb2c136e9dfd5c374be · bytecodealliance/wasmtime">wasmtime/cranelift/fuzzgen/src/config.rs at a7d9f3e114fc74889000aeb2c136e9dfd5c374be · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>