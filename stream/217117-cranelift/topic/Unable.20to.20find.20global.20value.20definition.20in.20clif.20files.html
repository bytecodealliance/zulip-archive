<html>
<head><meta charset="utf-8"><title>Unable to find global value definition in clif files · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Unable.20to.20find.20global.20value.20definition.20in.20clif.20files.html">Unable to find global value definition in clif files</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="543389726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Unable%20to%20find%20global%20value%20definition%20in%20clif%20files/near/543389726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Zz <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Unable.20to.20find.20global.20value.20definition.20in.20clif.20files.html#543389726">(Oct 06 2025 at 19:04)</a>:</h4>
<p>Hey guys! I am trying to load some pre-compiled cranelift IR snippets emitted from rustc with cranelift-reader. My ultimate goal is to add those pre-compiled functions to JITModule. The problem i have now is some of those functions contain reference to external global value, like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">gv0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">symbol</span><span class="w"> </span><span class="n">colocated</span><span class="w"> </span><span class="n">userextname0</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">alloc3</span>
<span class="w">    </span><span class="n">gv1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">symbol</span><span class="w"> </span><span class="n">colocated</span><span class="w"> </span><span class="n">userextname2</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="n">alloc10</span>
</code></pre></div>
<p>but i can't find the actual definition of them in any of the emitted clif files. Is there any workaround for this?</p>



<a name="543396466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Unable%20to%20find%20global%20value%20definition%20in%20clif%20files/near/543396466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Unable.20to.20find.20global.20value.20definition.20in.20clif.20files.html#543396466">(Oct 06 2025 at 19:48)</a>:</h4>
<p>One thing that's potentially surprising about Cranelift, coming from a compiler like LLVM, is that the IR is mostly function-centric. The core compiler library (<code>cranelift-codegen</code>) is entirely built around functions, and knows only that and opaque references to "the rest of the world" (the <code>UserExternalName</code> you're seeing). <code>cranelift-jit</code>, <code>cranelift-module</code>, etc. form a second layer of software that does start to aggregate functions into modules, but we don't have a textual representation for that. We'd need such a textual representation if you wanted to serialize a whole module and load it back in.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>