<html>
<head><meta charset="utf-8"><title>Missed Optimization Opportunity · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Missed.20Optimization.20Opportunity.html">Missed Optimization Opportunity</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="501732473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Missed%20Optimization%20Opportunity/near/501732473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bongjun Jang <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Missed.20Optimization.20Opportunity.html#501732473">(Feb 25 2025 at 07:46)</a>:</h4>
<p>Hi I'm looking for missed optimization opportunities in Cranelift's mid-end.</p>
<p>I'm considering the correctness of (possible) new optimization (simplifying) rules.<br>
AFAIK, <code>crocus</code> will be a good toolkit to reason about correctness.</p>
<p>But I also want to listen about other perspectives that I might be missing such as performance, cost model, etc,<br>
as I'm not aware of any tools/methodologies for them in Cranelift.<br>
So far, I've read the doc so I know some rules stated there, such as using <code>subsume</code> or so.</p>
<p>Just small suggestions or comments will be appreciated.</p>
<p>Thanks!</p>



<a name="502100630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Missed%20Optimization%20Opportunity/near/502100630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fitzgen (he/him) <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Missed.20Optimization.20Opportunity.html#502100630">(Feb 26 2025 at 17:12)</a>:</h4>
<p>we can also run the souper synthesizer on clif, that could be good to investigate some more:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/issues/5783">https://github.com/bytecodealliance/wasmtime/issues/5783</a></li>
<li><a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/run-souper.sh">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/run-souper.sh</a></li>
</ul>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/5783" style="background-image: url(&quot;https://uploads.zulipusercontent.net/ccdaab11be09dacf808a4f07e71ed29a0e5df3d2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f313638653365643933366433363334396161373064643739313739626662646365636265366335633465353266393961646530646438666338316336343733642f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f35373833&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/5783" title="Souper-synthesized optimizations that we should investigate generalizing and adding to the mid-end · Issue #5783 · bytecodealliance/wasmtime">Souper-synthesized optimizations that we should investigate generalizing and adding to the mid-end · Issue #5783 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Here are some synthesized optimizations for CLIF harvested from spidermonkey.wasm with explicit bounds checks enabled. I won't have time to investigate, generalize, or implement them before I go on...</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/run-souper.sh" style="background-image: url(&quot;https://uploads.zulipusercontent.net/3171b6d8855c7fdfea531d2c0dc89259cb756871/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f643765653335626135653334363565333036303134666466363533653530653536623530353730336164366430616539303333336161343332646163643539362f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/run-souper.sh" title="wasmtime/cranelift/run-souper.sh at main · bytecodealliance/wasmtime">wasmtime/cranelift/run-souper.sh at main · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>



<a name="502744794"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Missed%20Optimization%20Opportunity/near/502744794" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bongjun Jang <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Missed.20Optimization.20Opportunity.html#502744794">(Mar 01 2025 at 13:09)</a>:</h4>
<p>Thanks you for the comment. I think that is the good place to start.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>