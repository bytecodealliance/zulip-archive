<html>
<head><meta charset="utf-8"><title>Support ARM Cortex-M ISA · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA.html">Support ARM Cortex-M ISA</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="565297518"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Support%20ARM%20Cortex-M%20ISA/near/565297518" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA.html#565297518">(Dec 24 2025 at 16:08)</a>:</h4>
<p>Hello there &amp; happy holidays <span aria-label="palm tree" class="emoji emoji-1f334" role="img" title="palm tree">:palm_tree:</span> <br>
a while ago I was looking into adding Cortex-M support to cranelift, but I couldn't find any documentation for writing a new ISA layer. Reading existing source provided me with a rough idea, though not enough to get going. Is there anything I have missed? Also: is C-M even a feasible target? It's a 32bit embedded architecture and typical RAM size is around 64-128kb</p>



<a name="565313730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Support%20ARM%20Cortex-M%20ISA/near/565313730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA.html#565313730">(Dec 24 2025 at 19:54)</a>:</h4>
<p><a href="https://github.com/bytecodealliance/wasmtime/issues/1173">https://github.com/bytecodealliance/wasmtime/issues/1173</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/1173" style="background-image: url(&quot;https://uploads.zulipusercontent.net/9d7bc9c6088ede2a203012cf17979d403ed03996/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323834623838303132653339316266346235616638303762373838623334323136333964613265343363626466623666356165336662613164656361633937662f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f31313733&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/1173" title="Cranelift: arm32 support · Issue #1173 · bytecodealliance/wasmtime">Cranelift: arm32 support · Issue #1173 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">What is the feature or code improvement you would like to do in Cranelift? I would like to add ARM support by implementing ARM (not Thumb) encodings/recipes and abi. I am especially interested in a...</div></div></div>



<a name="565313765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Support%20ARM%20Cortex-M%20ISA/near/565313765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA.html#565313765">(Dec 24 2025 at 19:55)</a>:</h4>
<p>I don't think there is any documentation. You could probably start by copying the existing arm64 backend and adapt it.</p>



<a name="565313796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Support%20ARM%20Cortex-M%20ISA/near/565313796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA.html#565313796">(Dec 24 2025 at 19:55)</a>:</h4>
<p>Do you want thumb mode or arm mode by the way?</p>



<a name="565367889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/Support%20ARM%20Cortex-M%20ISA/near/565367889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anatol Ulrich <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA.html#565367889">(Dec 25 2025 at 12:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264278">bjorn3</span> <a href="#narrow/channel/217117-cranelift/topic/Support.20ARM.20Cortex-M.20ISA/near/565313730">said</a>:</p>
<blockquote>
<p><a href="https://github.com/bytecodealliance/wasmtime/issues/1173">https://github.com/bytecodealliance/wasmtime/issues/1173</a></p>
</blockquote>
<p>oops, missed that one, thanks!</p>
<blockquote>
<p>no docs</p>
</blockquote>
<p>ok, so I guess asking here when I'm stuck is my best bet? (I kinda sorta know my way around things but I'm by no means a compiler or assembly pro, most of my professional developer life has been high level)</p>
<blockquote>
<p>thumb vs arm</p>
</blockquote>
<p>the simple answer is thumb - what exactly that means for codegen is probably going to be fun though, judging from the <a href="https://en.wikipedia.org/wiki/ARM_Cortex-M#Instruction_sets">support matrix</a> x <a href="https://stackoverflow.com/a/28670713">this SO explainer</a> <span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>
<div class="message_embed"><a class="message_embed_image" href="https://en.wikipedia.org/wiki/ARM_Cortex-M#Instruction_sets" style="background-image: url(&quot;https://uploads.zulipusercontent.net/5b1b1afd0a66188fb6772adda8a7d9a341d5bcfe/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f7468756d622f362f36372f53544d33324631303043345436422d48442e6a70672f3130393770782d53544d33324631303043345436422d48442e6a7067&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://en.wikipedia.org/wiki/ARM_Cortex-M#Instruction_sets" title="ARM Cortex-M - Wikipedia">ARM Cortex-M - Wikipedia</a></div><div class="message_embed_description">The ARM Cortex-M is a group of 32-bit RISC ARM processor cores licensed by ARM Limited.  These cores are optimized for low-cost and energy-efficient integrated circuits, which have been embedded in tens of billions of consumer devices.[1]  Though they are most often the main component of microcontroller chips, sometimes they are embedded inside other types of chips too.  The Cortex-M family consists of Cortex-M0,[2] Cortex-M0+,[3] Cortex-M1,[4] Cortex-M3,[5] Cortex-M4,[6] Cortex-M7,[7] Cortex-M23,[8] Cortex-M33,[9] Cortex-M35P,[10] Cortex-M52,[11] Cortex-M55,[12] Cortex-M85.[13]  A floating-point unit (FPU) option is available for Cortex-M4 / M7 / M33 / M35P / M52 / M55 / M85 cores, and when included in the silicon these cores are sometimes known as "Cortex-MxF", where 'x' is the core variant.
</div></div></div><div class="message_embed"><a class="message_embed_image" href="https://stackoverflow.com/a/28670713" style="background-image: url(&quot;https://uploads.zulipusercontent.net/9419a60589efc19958afcbad177ac0377c872cd6/68747470733a2f2f737461636b6f766572666c6f772e636f6d2f436f6e74656e742f53697465732f737461636b6f766572666c6f772f496d672f6170706c652d746f7563682d69636f6e40322e706e673f763d373364373961383962646564&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://stackoverflow.com/a/28670713" title="What is the difference between the ARM, Thumb and Thumb 2 instruction encodings?">What is the difference between the ARM, Thumb and Thumb 2 instruction encodings?</a></div><div class="message_embed_description">I am a bit confused about instruction sets. There are Thumb, ARM and Thumb 2. From what I have read Thumb instructions are all 16-bit but inside the ARMv7M user manual (page vi) there are Thumb 16-...</div></div></div>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>