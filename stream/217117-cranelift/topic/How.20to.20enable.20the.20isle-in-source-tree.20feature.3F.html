<html>
<head><meta charset="utf-8"><title>How to enable the isle-in-source-tree feature? · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/How.20to.20enable.20the.20isle-in-source-tree.20feature.3F.html">How to enable the isle-in-source-tree feature?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="508028830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/How%20to%20enable%20the%20isle-in-source-tree%20feature%3F/near/508028830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/How.20to.20enable.20the.20isle-in-source-tree.20feature.3F.html#508028830">(Mar 25 2025 at 13:53)</a>:</h4>
<p>I'm trying to debug ISLE-generated code by enabling the <code>isle-in-source-tree</code> feature for <code>cranelift-codegen</code>, as mentioned in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/docs/isle-integration.md#how-does-isle-integrate-with-the-build-system">the documentation</a>. However, when running it, I encounter the following error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">the</span><span class="w"> </span><span class="n">package</span><span class="w"> </span><span class="o">'</span><span class="na">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">'</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">contain</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">feature</span><span class="p">:</span><span class="w"> </span><span class="nc">isle</span><span class="o">-</span><span class="k">in</span><span class="o">-</span><span class="n">source</span><span class="o">-</span><span class="n">tree</span>
</code></pre></div>
<p>After searching through the project, I couldn't find any feature named <code>isle-in-source-tree</code> in the codebase.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/docs/isle-integration.md#how-does-isle-integrate-with-the-build-system" style="background-image: url(&quot;https://uploads.zulipusercontent.net/0129978905432fe2ef8325776a637f96dde249a7/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f326431376339666535313231326566303831383339656536343764626531306436616133386431616434383864623766383039343432633732646564646332352f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/docs/isle-integration.md#how-does-isle-integrate-with-the-build-system" title="wasmtime/cranelift/docs/isle-integration.md at main · bytecodealliance/wasmtime">wasmtime/cranelift/docs/isle-integration.md at main · bytecodealliance/wasmtime</a></div><div class="message_embed_description">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>



<a name="508038006"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/How%20to%20enable%20the%20isle-in-source-tree%20feature%3F/near/508038006" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/How.20to.20enable.20the.20isle-in-source-tree.20feature.3F.html#508038006">(Mar 25 2025 at 14:25)</a>:</h4>
<p>That flag was removed in <a href="https://github.com/bytecodealliance/wasmtime/pull/9633">https://github.com/bytecodealliance/wasmtime/pull/9633</a>. Instead you can set the <code>ISLE_SOURCE_DIR</code> env var to some location where you want the generated code to be written to when compiling cranelift-codegen.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/9633" style="background-image: url(&quot;https://uploads.zulipusercontent.net/930e0bc0547364e49b0e0fc55e95ea861b3379c3/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f386633643261656133613036396633393964353339323665616666633765626361623837623837306134366262393638393562613462393133626163303366632f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f39363333&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/9633" title="Cranelift: rework isle-in-source-tree functionality. by cfallin · Pull Request #9633 · bytecodealliance/wasmtime">Cranelift: rework isle-in-source-tree functionality. by cfallin · Pull Request #9633 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Per #9625 and #9588, a downstream user of Cranelift was misusing the isle-in-source-tree feature, enabling it indiscriminately even in published crates (wasmerio/wasmer#5202). This went against the...</div></div></div>



<a name="508064452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/How%20to%20enable%20the%20isle-in-source-tree%20feature%3F/near/508064452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Chris Fallin <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/How.20to.20enable.20the.20isle-in-source-tree.20feature.3F.html#508064452">(Mar 25 2025 at 16:00)</a>:</h4>
<p>Posted <a href="https://github.com/bytecodealliance/wasmtime/pull/10466">https://github.com/bytecodealliance/wasmtime/pull/10466</a> just now to update the docs. Sorry about the confusion <span class="user-mention" data-user-id="597032">@ping ping</span> !</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/pull/10466" style="background-image: url(&quot;https://uploads.zulipusercontent.net/e4ea753b46b398bb72c10228fcf4952b1df1967a/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f353430383965613438303237663964343064653565303039356238613562313435666536626564656135623038363132303733333563616466373235636235352f62797465636f6465616c6c69616e63652f7761736d74696d652f70756c6c2f3130343636&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/pull/10466" title="Cranelift: tweak the ISLE-source-dir build script functionality. by cfallin · Pull Request #10466 · bytecodealliance/wasmtime">Cranelift: tweak the ISLE-source-dir build script functionality. by cfallin · Pull Request #10466 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">Add a cargo:rerun-if-env-changed clause for the ISLE_SOURCE_DIR environment variable to properly rebuild if the config changes.
Update docs to point to the new env-var-based approach rather than th...</div></div></div>



<a name="508219253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/How%20to%20enable%20the%20isle-in-source-tree%20feature%3F/near/508219253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> ping ping <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/How.20to.20enable.20the.20isle-in-source-tree.20feature.3F.html#508219253">(Mar 26 2025 at 09:22)</a>:</h4>
<p><span class="user-mention" data-user-id="254389">@Chris Fallin</span> <span class="user-mention" data-user-id="264278">@bjorn3</span> Thanks for the quick fix! Really appreciate the documentation update and your help clarifying this.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>