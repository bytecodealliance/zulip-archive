<html>
<head><meta charset="utf-8"><title>selinux-fix drawbacks? · cranelift · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/index.html">cranelift</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html">selinux-fix drawbacks?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="564720993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/selinux-fix%20drawbacks%3F/near/564720993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Terts Diepraam <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html#564720993">(Dec 19 2025 at 15:23)</a>:</h4>
<p>Hi! I was wondering what the reason is that the <code>selinux-fix</code> feature flag of <code>cranelift-jit</code> is not enabled by default. Does it not work for all platforms or is there a performance penalty?</p>



<a name="564722261"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/selinux-fix%20drawbacks%3F/near/564722261" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Terts Diepraam <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html#564722261">(Dec 19 2025 at 15:28)</a>:</h4>
<p>I found this issue about it, but maybe you've found more reasons in the meantime? <a href="https://github.com/bytecodealliance/wasmtime/issues/4986">https://github.com/bytecodealliance/wasmtime/issues/4986</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasmtime/issues/4986" style="background-image: url(&quot;https://uploads.zulipusercontent.net/2a796dddf8a8a9fa2b62a75933ae4dec1b0f14ee/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f396163613032346463323630373038346436333630373363333334376566383265623062386332663630646235636332636635313834613134613539306562622f62797465636f6465616c6c69616e63652f7761736d74696d652f6973737565732f34393836&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasmtime/issues/4986" title="Always use mmap instead of posix_memalign in cranelift-jit · Issue #4986 · bytecodealliance/wasmtime">Always use mmap instead of posix_memalign in cranelift-jit · Issue #4986 · bytecodealliance/wasmtime</a></div><div class="message_embed_description">This currently behind the selinux-fix feature flag. SELinux doesn't allow making parts of the heap executable. In addition it seems that there is an issue in multithreaded environments causing perm...</div></div></div>



<a name="566168982"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/selinux-fix%20drawbacks%3F/near/566168982" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html#566168982">(Jan 03 2026 at 18:50)</a>:</h4>
<p>I'm not aware on any other reasons than that.</p>



<a name="566168990"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/selinux-fix%20drawbacks%3F/near/566168990" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html#566168990">(Jan 03 2026 at 18:50)</a>:</h4>
<p>I'm personally still in favor of always using mmap.</p>



<a name="566171302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/selinux-fix%20drawbacks%3F/near/566171302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html#566171302">(Jan 03 2026 at 19:35)</a>:</h4>
<p>I've personally used <a href="https://lib.rs/crates/talc"><code>talc</code></a> on top of <code>mmap</code> to make an allocator for executable code, it works well enough.</p>
<div class="message_embed"><a class="message_embed_image" href="https://lib.rs/crates/talc" style="background-image: url(&quot;https://uploads.zulipusercontent.net/22eb744fc11c84b94801a3128b00638f4e5063e4/68747470733a2f2f6c69622e72732f6f672f632f74616c632e706e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://lib.rs/crates/talc" title="talc">talc</a></div><div class="message_embed_description">A fast and flexible allocator for no_std and WebAssembly</div></div></div>



<a name="566251143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/217117-cranelift/topic/selinux-fix%20drawbacks%3F/near/566251143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Terts Diepraam <a href="https://bytecodealliance.github.io/zulip-archive/stream/217117-cranelift/topic/selinux-fix.20drawbacks.3F.html#566251143">(Jan 04 2026 at 21:20)</a>:</h4>
<p>Alright, thank you! I'll try enabling it by default for Roto then.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>