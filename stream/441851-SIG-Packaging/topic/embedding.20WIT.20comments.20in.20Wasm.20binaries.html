<html>
<head><meta charset="utf-8"><title>embedding WIT comments in Wasm binaries · SIG-Packaging · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/index.html">SIG-Packaging</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html">embedding WIT comments in Wasm binaries</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="525931902"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525931902" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525931902">(Jun 26 2025 at 15:32)</a>:</h4>
<p><span class="user-mention" data-user-id="480579">@Lann Martin</span> did you have a scheme for how to embed WIT documents with comments and all in Wasm binaries? I think Luke mentioned that you'd been looking at this a while ago?</p>



<a name="525932192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525932192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525932192">(Jun 26 2025 at 15:34)</a>:</h4>
<p>At MS we're interested in storing all of this info in Wasm binaries so we can use that for post-processsing later on. I wanted to check if there was prior art for this already.</p>



<a name="525932534"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525932534" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525932534">(Jun 26 2025 at 15:36)</a>:</h4>
<p>This is already done in wasm-tools</p>



<a name="525932744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525932744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525932744">(Jun 26 2025 at 15:37)</a>:</h4>
<p>(implementation <a href="https://github.com/bytecodealliance/wasm-tools/blob/main/crates/wit-parser/src/metadata.rs">here</a>, and it's where stability is encoded too)</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/blob/main/crates/wit-parser/src/metadata.rs" style="background-image: url(&quot;https://uploads.zulipusercontent.net/8c828e2d3afdb21a397623368aabe72d8cfc389b/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f346564363736373135333365333337383538306563316234393433396439353231323934636266373738656364346566336336313637636363393162306162652f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/blob/main/crates/wit-parser/src/metadata.rs" title="wasm-tools/crates/wit-parser/src/metadata.rs at main · bytecodealliance/wasm-tools">wasm-tools/crates/wit-parser/src/metadata.rs at main · bytecodealliance/wasm-tools</a></div><div class="message_embed_description"> CLI and Rust libraries for low-level manipulation of WebAssembly modules  - bytecodealliance/wasm-tools</div></div></div>



<a name="525932787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525932787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525932787">(Jun 26 2025 at 15:37)</a>:</h4>
<p>ohhhh!</p>



<a name="525933228"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933228" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933228">(Jun 26 2025 at 15:40)</a>:</h4>
<p>cc/ <span class="user-mention" data-user-id="487764">@Mossaka (Joe)</span> this should cover what we need, right? ^</p>



<a name="525933333"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933333" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933333">(Jun 26 2025 at 15:40)</a>:</h4>
<p>No wonder I haven't been able to find that code! <span class="user-mention" data-user-id="253994">@Alex Crichton</span> moved it!</p>



<a name="525933356"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933356" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933356">(Jun 26 2025 at 15:40)</a>:</h4>
<p>hahaha</p>



<a name="525933466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933466">(Jun 26 2025 at 15:41)</a>:</h4>
<p>"Where did <code>PackageDocs</code> go? Was it all a dream?"</p>



<a name="525933482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933482">(Jun 26 2025 at 15:41)</a>:</h4>
<p>are we already populating this data from e.g. <code>cargo-component</code> too?</p>



<a name="525933591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933591">(Jun 26 2025 at 15:42)</a>:</h4>
<p>If you aren't parsing WIT yourself you should be populating it</p>



<a name="525933592"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933592" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933592">(Jun 26 2025 at 15:42)</a>:</h4>
<p>most likely not I think, this only affects WIT packages encoded as wasm, actual components don't use this custom section at all</p>



<a name="525933632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933632">(Jun 26 2025 at 15:42)</a>:</h4>
<p>ohh in non-WIT components, yeah not by default</p>



<a name="525933700"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933700" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933700">(Jun 26 2025 at 15:42)</a>:</h4>
<p>agreed though if you're talking about wit-encoded-as-wasm or parsing wit-encoded-as-wasm then yeah that should all be supported by default</p>



<a name="525933897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933897">(Jun 26 2025 at 15:43)</a>:</h4>
<p>heh, yeah no this would be for actual components encoded as wasm - to make them self-describing in a way that other tools can post-process them</p>



<a name="525933987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525933987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525933987">(Jun 26 2025 at 15:44)</a>:</h4>
<p>ah ok, yeah for that this isn't implemented at this time (no docs/stability custom section)</p>



<a name="525934047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934047">(Jun 26 2025 at 15:44)</a>:</h4>
<p>wait, to check:</p>



<a name="525934085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934085">(Jun 26 2025 at 15:44)</a>:</h4>
<p>This is the only (?) place it gets binary encoded: <a href="https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-component/src/encoding/wit.rs#L59-L63">https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-component/src/encoding/wit.rs#L59-L63</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-component/src/encoding/wit.rs#L59-L63" style="background-image: url(&quot;https://uploads.zulipusercontent.net/8c828e2d3afdb21a397623368aabe72d8cfc389b/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f346564363736373135333365333337383538306563316234393433396439353231323934636266373738656364346566336336313637636363393162306162652f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-component/src/encoding/wit.rs#L59-L63" title="wasm-tools/crates/wit-component/src/encoding/wit.rs at bc0a78578a764b3f43489e210066bc7ea2449ac5 · bytecodealliance/wasm-tools">wasm-tools/crates/wit-component/src/encoding/wit.rs at bc0a78578a764b3f43489e210066bc7ea2449ac5 · bytecodealliance/wasm-tools</a></div><div class="message_embed_description"> CLI and Rust libraries for low-level manipulation of WebAssembly modules  - bytecodealliance/wasm-tools</div></div></div>



<a name="525934137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934137">(Jun 26 2025 at 15:45)</a>:</h4>
<p>that means we <em>can</em> use this custom section for that, but it <em>isn't</em> yet integrated in e.g. <code>cargo-component</code>?</p>



<a name="525934341"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934341" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934341">(Jun 26 2025 at 15:46)</a>:</h4>
<p>sort of, and sort of yes. In theory this custom section could be used for docs and it almost certainly isn't integrated in cargo-component right now. That being said if it were emitted nothing would actually use such custom section as the custom section is only decoded as part of a wit-encoded-as-wasm blob</p>



<a name="525934504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934504">(Jun 26 2025 at 15:47)</a>:</h4>
<p>making it work for a component itself would likely not actually involve cargo-component but instead <code>wit-component</code> which cargo-component uses, and it  might not be too too hard to emit but I haven't looked much into this</p>



<a name="525934578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934578">(Jun 26 2025 at 15:47)</a>:</h4>
<p>decoding here: <a href="https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-parser/src/decoding.rs#L118-L123">https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-parser/src/decoding.rs#L118-L123</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-parser/src/decoding.rs#L118-L123" style="background-image: url(&quot;https://uploads.zulipusercontent.net/8c828e2d3afdb21a397623368aabe72d8cfc389b/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f346564363736373135333365333337383538306563316234393433396439353231323934636266373738656364346566336336313637636363393162306162652f62797465636f6465616c6c69616e63652f7761736d2d746f6f6c73&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasm-tools/blob/bc0a78578a764b3f43489e210066bc7ea2449ac5/crates/wit-parser/src/decoding.rs#L118-L123" title="wasm-tools/crates/wit-parser/src/decoding.rs at bc0a78578a764b3f43489e210066bc7ea2449ac5 · bytecodealliance/wasm-tools">wasm-tools/crates/wit-parser/src/decoding.rs at bc0a78578a764b3f43489e210066bc7ea2449ac5 · bytecodealliance/wasm-tools</a></div><div class="message_embed_description"> CLI and Rust libraries for low-level manipulation of WebAssembly modules  - bytecodealliance/wasm-tools</div></div></div>



<a name="525934637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934637">(Jun 26 2025 at 15:47)</a>:</h4>
<p>that all makes sense!</p>



<a name="525934734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934734">(Jun 26 2025 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="253994">@Alex Crichton</span> how are you feeling about the format stabilitiy? Still "fine pre-1.0 but hopefully changed eventually"?</p>



<a name="525934786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934786">(Jun 26 2025 at 15:48)</a>:</h4>
<p>are there any objections if we took it that route? e.g. actually populate the <code>package-docs</code> custom section for components as well?</p>



<a name="525934973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525934973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525934973">(Jun 26 2025 at 15:49)</a>:</h4>
<p>that's a tough one... on one hand if it's not changed now it's probably never going to change as it'll always be easiest to just stick with it as-is, but on the other hand iunno if there's really that strong of a motivation to change it</p>



<a name="525935047"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935047" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935047">(Jun 26 2025 at 15:49)</a>:</h4>
<p>For context, the doc comments at least are encoded in a somewhat ad-hoc JSON format that isn't very "wasm-y"</p>



<a name="525935119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935119">(Jun 26 2025 at 15:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="480579">Lann Martin</span> <a href="#narrow/channel/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries/near/525935047">said</a>:</p>
<blockquote>
<p>For context, the doc comments at least are encoded in a somewhat ad-hoc JSON format that isn't very "wasm-y"</p>
</blockquote>
<p>ohh, I see</p>



<a name="525935165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935165">(Jun 26 2025 at 15:50)</a>:</h4>
<p>I don't have any problem emitting this in components myself, but I'd have to double-check to see if the format is suitable for describing components as it is wit documents</p>



<a name="525935267"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935267" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935267">(Jun 26 2025 at 15:51)</a>:</h4>
<p>by the way, there's no time pressure on this from our end</p>



<a name="525935308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935308">(Jun 26 2025 at 15:51)</a>:</h4>
<p>for our flow we can do post-processing in other ways</p>



<a name="525935332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935332">(Jun 26 2025 at 15:51)</a>:</h4>
<p>but they are a little hacky</p>



<a name="525935405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/525935405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yosh Wuyts <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#525935405">(Jun 26 2025 at 15:51)</a>:</h4>
<p>so it would be good to eventually arrive at a canonical/standard way to include doc info for components</p>



<a name="526461744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/526461744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mossaka (Joe) <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#526461744">(Jun 30 2025 at 18:29)</a>:</h4>
<p>Ah great thanks for the discussion. yeah we are looking for non-wit components having WIT docstrings embedded so that the WIT extracted from the component does preserve the comments.</p>



<a name="526472009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/526472009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#526472009">(Jun 30 2025 at 19:20)</a>:</h4>
<p>I thought about this a little last week but I don't have enough component encoding details in my head to have a clear idea of how this would work. If you already have a <code>world</code> matching your component then I think the custom section used for binary WIT should match the component. If you don't already have a WIT world then I believe you could construct one from the component and then merge with the original WIT to get what you need, but I haven't actually tried.</p>



<a name="534792243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/534792243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mossaka (Joe) <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#534792243">(Aug 17 2025 at 00:44)</a>:</h4>
<p>Got it working<br>
<a href="/user_uploads/15107/re2sNesQlwgHHlfvpXSaEuQW/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/15107/re2sNesQlwgHHlfvpXSaEuQW/image.png" title="image.png"><img data-original-content-type="image/png" data-original-dimensions="2816x1148" src="/user_uploads/thumbnail/15107/re2sNesQlwgHHlfvpXSaEuQW/image.png/840x560.webp"></a></div>



<a name="534792337"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/534792337" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mossaka (Joe) <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#534792337">(Aug 17 2025 at 00:47)</a>:</h4>
<p>I think it's okay in terms of UX that there is an extra post-step to inject docs into the Component, but what do you think about having a <code>wasm-tools</code> subcommand that can do this? </p>
<p>Like <code>wasm-tools component wit --inject-docs ./wit -o output.wasm input.wasm</code></p>



<a name="534944834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/441851-SIG-Packaging/topic/embedding%20WIT%20comments%20in%20Wasm%20binaries/near/534944834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/441851-SIG-Packaging/topic/embedding.20WIT.20comments.20in.20Wasm.20binaries.html#534944834">(Aug 18 2025 at 12:48)</a>:</h4>
<p>I'd probably make it a new subcommand e.g. <code>wasm-tools component docs</code> which is just for manipulating that custom section.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>