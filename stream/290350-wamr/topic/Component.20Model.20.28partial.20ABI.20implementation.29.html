<html>
<head><meta charset="utf-8"><title>Component Model (partial ABI implementation) · wamr · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/index.html">wamr</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html">Component Model (partial ABI implementation)</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="516495926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/516495926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#516495926">(May 06 2025 at 17:14)</a>:</h4>
<p>If anyone is lurking, I now have this slimmed down to the following pattern:</p>
<div class="codehilite" data-code-language="C++"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">call_and</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">func_t</span><span class="o">&lt;</span><span class="n">bool_t</span><span class="p">(</span><span class="n">bool_t</span><span class="p">,</span><span class="w"> </span><span class="n">bool_t</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/booleans#and"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(false, false): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(false, true): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(true, false): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(true, true): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">func_t</span><span class="o">&lt;</span><span class="n">float64_t</span><span class="p">(</span><span class="n">float64_t</span><span class="p">,</span><span class="w"> </span><span class="n">float64_t</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/floats#add"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_add(3.1, 0.2): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_add</span><span class="p">(</span><span class="mf">3.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_add(1.5, 2.5): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_add</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">func_t</span><span class="o">&lt;</span><span class="n">string_t</span><span class="p">(</span><span class="n">string_t</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/strings#reverse"</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_reverse</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_reverse(</span><span class="se">\"</span><span class="s">Hello World!</span><span class="se">\"</span><span class="s">): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_reverse_result</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_reverse(call_reverse(</span><span class="se">\"</span><span class="s">Hello World!</span><span class="se">\"</span><span class="s">)): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_reverse</span><span class="p">(</span><span class="n">call_reverse_result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_lots</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">func_t</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="p">(</span>
<span class="w">    </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span>
<span class="w">    </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/strings#lots"</span><span class="p">);</span>

<span class="c1">// Example call with 33 string_t arguments</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_lots_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_lots</span><span class="p">(</span>
<span class="w">    </span><span class="s">"p1"</span><span class="p">,</span><span class="w"> </span><span class="s">"p2"</span><span class="p">,</span><span class="w"> </span><span class="s">"p3"</span><span class="p">,</span><span class="w"> </span><span class="s">"p4"</span><span class="p">,</span><span class="w"> </span><span class="s">"p5"</span><span class="p">,</span><span class="w"> </span><span class="s">"p6"</span><span class="p">,</span><span class="w"> </span><span class="s">"p7"</span><span class="p">,</span><span class="w"> </span><span class="s">"p8"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"p9"</span><span class="p">,</span><span class="w"> </span><span class="s">"p10"</span><span class="p">,</span><span class="w"> </span><span class="s">"p11"</span><span class="p">,</span><span class="w"> </span><span class="s">"p12"</span><span class="p">,</span><span class="w"> </span><span class="s">"p13"</span><span class="p">,</span><span class="w"> </span><span class="s">"p14"</span><span class="p">,</span><span class="w"> </span><span class="s">"p15"</span><span class="p">,</span><span class="w"> </span><span class="s">"p16"</span><span class="p">,</span><span class="w"> </span><span class="s">"p17"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_lots result: "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_lots_result</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">using</span><span class="w"> </span><span class="n">reverse_tuple_func_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">func_t</span><span class="o">&lt;</span><span class="n">tuple_t</span><span class="o">&lt;</span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">bool_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">tuple_t</span><span class="o">&lt;</span><span class="n">bool_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="o">&gt;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse_tuple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">reverse_tuple_func_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/tuples#reverse"</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse_tuple_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_reverse_tuple</span><span class="p">({</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="s">"Hello World!"</span><span class="p">});</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_reverse_tuple({false, </span><span class="se">\"</span><span class="s">Hello World!</span><span class="se">\"</span><span class="s">}): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">call_reverse_tuple_result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">", "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">call_reverse_tuple_result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_list_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">func_t</span><span class="o">&lt;</span><span class="n">list_t</span><span class="o">&lt;</span><span class="n">string_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">list_t</span><span class="o">&lt;</span><span class="n">variant_t</span><span class="o">&lt;</span><span class="n">bool_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="o">&gt;&gt;</span><span class="p">)</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/lists#filter-bool"</span><span class="p">);</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_list_filter_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_list_filter</span><span class="p">({{</span><span class="nb">false</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s">"Hello World!"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s">"Another String"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nb">true</span><span class="p">}});</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_list_filter result: "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_list_filter_result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div>



<a name="516496328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/516496328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#516496328">(May 06 2025 at 17:17)</a>:</h4>
<p>Next step is to remove the need for the <code>func_t</code></p>



<a name="516501693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/516501693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#516501693">(May 06 2025 at 17:47)</a>:</h4>
<div class="codehilite" data-code-language="C++"><pre><span></span><code><span class="k">auto</span><span class="w"> </span><span class="n">call_and</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">bool_t</span><span class="p">(</span><span class="n">bool_t</span><span class="p">,</span><span class="w"> </span><span class="n">bool_t</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/booleans#and"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(false, false): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(false, true): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(true, false): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">false</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_and(true, true): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_and</span><span class="p">(</span><span class="nb">true</span><span class="p">,</span><span class="w"> </span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">float64_t</span><span class="p">(</span><span class="n">float64_t</span><span class="p">,</span><span class="w"> </span><span class="n">float64_t</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/floats#add"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_add(3.1, 0.2): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_add</span><span class="p">(</span><span class="mf">3.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_add(1.5, 2.5): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_add</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span><span class="w"> </span><span class="mf">2.5</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">string_t</span><span class="p">(</span><span class="n">string_t</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/strings#reverse"</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_reverse</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_reverse(</span><span class="se">\"</span><span class="s">Hello World!</span><span class="se">\"</span><span class="s">): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_reverse_result</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_reverse(call_reverse(</span><span class="se">\"</span><span class="s">Hello World!</span><span class="se">\"</span><span class="s">)): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_reverse</span><span class="p">(</span><span class="n">call_reverse_result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_lots</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="kt">uint32_t</span><span class="p">(</span>
<span class="w">    </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span>
<span class="w">    </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/strings#lots"</span><span class="p">);</span>

<span class="c1">// Example call with 33 string_t arguments</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_lots_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_lots</span><span class="p">(</span>
<span class="w">    </span><span class="s">"p1"</span><span class="p">,</span><span class="w"> </span><span class="s">"p2"</span><span class="p">,</span><span class="w"> </span><span class="s">"p3"</span><span class="p">,</span><span class="w"> </span><span class="s">"p4"</span><span class="p">,</span><span class="w"> </span><span class="s">"p5"</span><span class="p">,</span><span class="w"> </span><span class="s">"p6"</span><span class="p">,</span><span class="w"> </span><span class="s">"p7"</span><span class="p">,</span><span class="w"> </span><span class="s">"p8"</span><span class="p">,</span>
<span class="w">    </span><span class="s">"p9"</span><span class="p">,</span><span class="w"> </span><span class="s">"p10"</span><span class="p">,</span><span class="w"> </span><span class="s">"p11"</span><span class="p">,</span><span class="w"> </span><span class="s">"p12"</span><span class="p">,</span><span class="w"> </span><span class="s">"p13"</span><span class="p">,</span><span class="w"> </span><span class="s">"p14"</span><span class="p">,</span><span class="w"> </span><span class="s">"p15"</span><span class="p">,</span><span class="w"> </span><span class="s">"p16"</span><span class="p">,</span><span class="w"> </span><span class="s">"p17"</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_lots result: "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_lots_result</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">using</span><span class="w"> </span><span class="n">reverse_tuple_func_t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tuple_t</span><span class="o">&lt;</span><span class="n">string_t</span><span class="p">,</span><span class="w"> </span><span class="n">bool_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">tuple_t</span><span class="o">&lt;</span><span class="n">bool_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="o">&gt;</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse_tuple</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">reverse_tuple_func_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/tuples#reverse"</span><span class="p">);</span>
<span class="k">auto</span><span class="w"> </span><span class="n">call_reverse_tuple_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_reverse_tuple</span><span class="p">({</span><span class="nb">false</span><span class="p">,</span><span class="w"> </span><span class="s">"Hello World!"</span><span class="p">});</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_reverse_tuple({false, </span><span class="se">\"</span><span class="s">Hello World!</span><span class="se">\"</span><span class="s">}): "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">call_reverse_tuple_result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">", "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">call_reverse_tuple_result</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_list_filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">attach</span><span class="o">&lt;</span><span class="n">list_t</span><span class="o">&lt;</span><span class="n">string_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">list_t</span><span class="o">&lt;</span><span class="n">variant_t</span><span class="o">&lt;</span><span class="n">bool_t</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="o">&gt;&gt;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">(</span><span class="n">module_inst</span><span class="p">,</span><span class="w"> </span><span class="n">exec_env</span><span class="p">,</span><span class="w"> </span><span class="n">liftLowerContext</span><span class="p">,</span><span class="w"> </span><span class="s">"example:sample/lists#filter-bool"</span><span class="p">);</span>

<span class="k">auto</span><span class="w"> </span><span class="n">call_list_filter_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">call_list_filter</span><span class="p">({{</span><span class="nb">false</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s">"Hello World!"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s">"Another String"</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="nb">true</span><span class="p">}});</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"call_list_filter result: "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">call_list_filter_result</span><span class="p">.</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div>



<a name="520661802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/520661802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#520661802">(May 27 2025 at 12:56)</a>:</h4>
<p>...First draft of host functions, now working:</p>
<div class="codehilite" data-code-language="C++"><pre><span></span><code><span class="n">string_t</span><span class="w"> </span><span class="nf">reverse</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">transform</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">(),</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="o">::</span><span class="n">toupper</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">lots</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p2</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p3</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p4</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p5</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p6</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p7</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p8</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p9</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p10</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p11</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p12</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p13</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p14</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p15</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p16</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="o">&amp;</span><span class="n">p17</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p3</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p4</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p5</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p6</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p7</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p8</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p9</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p10</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p11</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p12</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p13</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p14</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p15</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p16</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">p17</span><span class="p">.</span><span class="n">length</span><span class="p">();</span>
<span class="p">}</span>
<span class="n">NativeSymbol</span><span class="w"> </span><span class="n">strings_symbol</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">host_function</span><span class="p">(</span><span class="s">"reverse"</span><span class="p">,</span><span class="w"> </span><span class="n">reverse</span><span class="p">),</span>
<span class="w">    </span><span class="n">host_function</span><span class="p">(</span><span class="s">"lots"</span><span class="p">,</span><span class="w"> </span><span class="n">lots</span><span class="p">),</span>
<span class="p">};</span>

<span class="n">void_t</span><span class="w"> </span><span class="nf">log_u32</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">string_t</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">"wasm-log:  "</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">NativeSymbol</span><span class="w"> </span><span class="n">logging_symbol</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">host_function</span><span class="p">(</span><span class="s">"log-u32"</span><span class="p">,</span><span class="w"> </span><span class="n">log_u32</span><span class="p">),</span>
<span class="p">};</span>

<span class="p">...</span>

<span class="w">    </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_runtime_register_natives_raw</span><span class="p">(</span><span class="s">"example:sample/strings"</span><span class="p">,</span><span class="w"> </span><span class="n">strings_symbol</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">strings_symbol</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">NativeSymbol</span><span class="p">));</span>
<span class="w">    </span><span class="n">success</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">wasm_runtime_register_natives_raw</span><span class="p">(</span><span class="s">"example:sample/logging"</span><span class="p">,</span><span class="w"> </span><span class="n">logging_symbol</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">logging_symbol</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">NativeSymbol</span><span class="p">));</span>
</code></pre></div>



<a name="544249192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/544249192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#544249192">(Oct 10 2025 at 21:18)</a>:</h4>
<p>Getting close to a complete implementation!  See <a href="https://github.com/GordonSmith/component-model-cpp/tree/WIT-CODEGEN/samples">https://github.com/GordonSmith/component-model-cpp/tree/WIT-CODEGEN/samples</a> for details, now includes generated stubs from wit definitions...</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/GordonSmith/component-model-cpp/tree/WIT-CODEGEN/samples" style="background-image: url(&quot;https://uploads.zulipusercontent.net/1831a88faca232e79468d2eeecaaab6285b454e4/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f333739356236373934373235643063393736383133623931303262303463373065396636646339303366383663343232346134323934326335656361396230342f476f72646f6e536d6974682f636f6d706f6e656e742d6d6f64656c2d637070&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/GordonSmith/component-model-cpp/tree/WIT-CODEGEN/samples" title="component-model-cpp/samples at WIT-CODEGEN · GordonSmith/component-model-cpp">component-model-cpp/samples at WIT-CODEGEN · GordonSmith/component-model-cpp</a></div><div class="message_embed_description">C++ ABI implementation of the WebAssembly Component Model - GordonSmith/component-model-cpp</div></div></div>



<a name="545366555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/545366555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#545366555">(Oct 16 2025 at 15:16)</a>:</h4>
<p>v0.2.2 successfully generates host stubs + wamr bindings for the entire wit-bindgen test suite.<br>
...and they compile cleanly on windows and nix.  (would need host implementations of wasi to actually test them, but they compiled!!!)</p>



<a name="545367742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/545367742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#545367742">(Oct 16 2025 at 15:19)</a>:</h4>
<div class="codehilite" data-code-language="Text only"><pre><span></span><code>$ ./wit-codegen.exe --help
wit-codegen - WebAssembly Interface Types (WIT) Code Generator

USAGE:
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe &lt;wit-file-or-dir&gt; [output-prefix]
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe --help
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe -h

ARGUMENTS:
  &lt;wit-file-or-dir&gt; Path to WIT file or directory with WIT package
  [output-prefix]   Optional output file prefix (default: derived from package name)

OPTIONS:
  -h, --help        Show this help message and exit

DESCRIPTION:
  Generates C++ host function bindings from WebAssembly Interface Types (WIT)
  files. The tool parses WIT syntax and generates type-safe C++ code for
  interfacing with WebAssembly components.

  Supports multi-file WIT packages with deps/ folder dependencies.

GENERATED FILES:
  &lt;prefix&gt;.hpp          - C++ header with type definitions and declarations
  &lt;prefix&gt;_wamr.hpp     - WAMR runtime integration header
  &lt;prefix&gt;_wamr.cpp     - WAMR binding implementation with NativeSymbol arrays

FEATURES:
  - Supports all Component Model types (primitives, strings, lists, records,
    variants, enums, options, results, flags)
  - Generates bidirectional bindings (imports and exports)
  - Type-safe C++ wrappers using cmcpp canonical ABI
  - WAMR native function registration helpers
  - Automatic memory management for complex types
  - Multi-file package support with deps/ folder resolution

EXAMPLES:
  # Generate bindings from single WIT file
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe example.wit

  # Generate bindings from WIT package directory
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe wit/

  # Generate bindings with custom prefix
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe example.wit my_bindings

  # Show help message
  C:\Users\gordon\Downloads\cmcpp-0.1.0-win64\cmcpp-0.1.0-win64\bin\wit-codegen.exe --help

For more information, see: https://github.com/GordonSmith/component-model-cpp
</code></pre></div>



<a name="545368777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/290350-wamr/topic/Component%20Model%20%28partial%20ABI%20implementation%29/near/545368777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gordon Smith <a href="https://bytecodealliance.github.io/zulip-archive/stream/290350-wamr/topic/Component.20Model.20.28partial.20ABI.20implementation.29.html#545368777">(Oct 16 2025 at 15:22)</a>:</h4>
<p><a href="https://github.com/GordonSmith/component-model-cpp/releases">https://github.com/GordonSmith/component-model-cpp/releases</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/GordonSmith/component-model-cpp/releases" style="background-image: url(&quot;https://uploads.zulipusercontent.net/9c7a46e7c9413bf1e11718cfd470811390efb853/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f386339383066323630653833353833373062653163363861393634353666616339626562636362616162626235623464333539386264373065353261643939642f476f72646f6e536d6974682f636f6d706f6e656e742d6d6f64656c2d637070&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/GordonSmith/component-model-cpp/releases" title="Releases · GordonSmith/component-model-cpp">Releases · GordonSmith/component-model-cpp</a></div><div class="message_embed_description">C++ ABI implementation of the WebAssembly Component Model - GordonSmith/component-model-cpp</div></div></div>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>