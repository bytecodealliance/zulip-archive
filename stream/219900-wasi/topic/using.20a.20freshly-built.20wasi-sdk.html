<html>
<head><meta charset="utf-8"><title>using a freshly-built wasi-sdk · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html">using a freshly-built wasi-sdk</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="534253699"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534253699" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Wingo <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534253699">(Aug 13 2025 at 15:21)</a>:</h4>
<p>Good day!  Question, can one use a freshly-built wasi-sdk from its local build/install dir, without merging the sysroot and toolchain?  I try running <code>WASI_SDK_PATH=~/src/wasip3/wasi-sdk/build/install cc --sysroot=$WASI_SDK_PATH/share/wasi-sysroot -resource-dir $WASI_SDK_PATH</code> but there is always some kind of path problem.  Any tips are welcome <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="534255561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534255561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534255561">(Aug 13 2025 at 15:31)</a>:</h4>
<p>I haven't build the latest version of wasi-sdk, but earlier versions put an <code>opt/wasi-sdk</code> directory under <code>build/install</code>, in which case you'd use e.g. <code>WASI_SDK_PATH=~/src/wasip3/wasi-sdk/build/install/opt/wasi-sdk</code>.  What do you see under the <code>build/install</code> directory?</p>



<a name="534256403"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534256403" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534256403">(Aug 13 2025 at 15:36)</a>:</h4>
<p>(That may have changed since Alex switched from <code>make</code> to <code>cmake</code> for building.  I'm building the <code>main</code> branch locally now to see what's different.)</p>



<a name="534261255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534261255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joel Dice <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534261255">(Aug 13 2025 at 16:03)</a>:</h4>
<p>Ok, looks like the <code>cmake</code>-based build uses a different directory structure, with the toolchain and sysroot using separate build steps and directories.  I think you'll need to follow all the instructions in the <code>Build</code> section of the <code>README.md</code> -- up to and including the <code>./ci/merge-artifacts.sh</code>step  -- and then untar the resulting tarball and use that.  <span class="user-mention" data-user-id="253994">@Alex Crichton</span> might know if there are any shortcuts.</p>



<a name="534275163"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534275163" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534275163">(Aug 13 2025 at 17:38)</a>:</h4>
<p>I think what you'll want to do is specify <code>-DCMAKE_INSTALL_PREFIX=...</code> and use <code>make install</code> (or the equivalent) to produce a working toolchain -- the installation step can be anywhere on your system but otherwise it'll be a bit painful as you've seen trying to use the artifacts from where they reside in the build directory</p>



<a name="534275250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534275250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534275250">(Aug 13 2025 at 17:39)</a>:</h4>
<p>I'll admit though I haven't tested this and I'm probably forgetting something</p>



<a name="534275425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/using%20a%20freshly-built%20wasi-sdk/near/534275425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/using.20a.20freshly-built.20wasi-sdk.html#534275425">(Aug 13 2025 at 17:41)</a>:</h4>
<p>Ok sort of paging this back in, I think if you install the toolchain/sysroot to the same location that's the "merge" operation. Would that work well enough for what you're doing? (I realize running the <code>./ci/merge-*</code> script is funky, but the "install both" is in theory a simpler merge)</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>