<html>
<head><meta charset="utf-8"><title>wasi-io spec ambiguity · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-io.20spec.20ambiguity.html">wasi-io spec ambiguity</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="517531821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-io%20spec%20ambiguity/near/517531821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-io.20spec.20ambiguity.html#517531821">(May 12 2025 at 12:43)</a>:</h4>
<p>Anyone who has worked on implementing a wasi-io host or guest may be interested in this discussion: <a href="https://github.com/WebAssembly/wasi-io/issues/109">https://github.com/WebAssembly/wasi-io/issues/109</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-io/issues/109" style="background-image: url(&quot;https://uploads.zulipusercontent.net/fdb629fcec2cf9f1d32079a9ac3b128b3be25d19/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f356333313036623533373862323833373833656239643762386432386164313437366636663663306638313739623766633936393663313330336639626139332f576562417373656d626c792f776173692d696f2f6973737565732f313039&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-io/issues/109" title="Clarify semantics around `stream-error::closed` · Issue #109 · WebAssembly/wasi-io">Clarify semantics around `stream-error::closed` · Issue #109 · WebAssembly/wasi-io</a></div><div class="message_embed_description">We ran into this while working on a guest SDK where we were surprised to see a closed result from an apparently successful blocking-write-and-flush with wasmtime-wasi-http. My understanding is that...</div></div></div>



<a name="517532192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-io%20spec%20ambiguity/near/517532192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-io.20spec.20ambiguity.html#517532192">(May 12 2025 at 12:44)</a>:</h4>
<p>tl;dr there seems to be some ambiguity in error handling between the <code>flush</code> and final <code>check-write</code> of <code>blocking-write-and-flush</code></p>



<a name="517532413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/wasi-io%20spec%20ambiguity/near/517532413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lann Martin <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/wasi-io.20spec.20ambiguity.html#517532413">(May 12 2025 at 12:45)</a>:</h4>
<p>This isn't (entirely) theoretical; it came out of a debugging session. There may be other similar ambiguities; I plan on looking more closely once we've nailed down this one.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>