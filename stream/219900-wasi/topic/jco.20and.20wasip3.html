<html>
<head><meta charset="utf-8"><title>jco and wasip3 · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/jco.20and.20wasip3.html">jco and wasip3</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="541414999"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/jco%20and%20wasip3/near/541414999" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andy Wingo <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/jco.20and.20wasip3.html#541414999">(Sep 25 2025 at 09:46)</a>:</h4>
<p>Hey, how do I get jco to work with wasip3 ?</p>
<p>I just checked out jco:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">git</span><span class="w"> </span><span class="n">clone</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//github.com/bytecodealliance/jco</span>
<span class="n">cd</span><span class="w"> </span><span class="n">jco</span>
<span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">typescript</span>
<span class="n">npm</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">build</span>
</code></pre></div>
<p>Then from another dir I am trying:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">npx</span><span class="w"> </span><span class="o">--</span><span class="n">prefix</span><span class="o">=~/</span><span class="n">src</span><span class="o">/</span><span class="n">wasip3</span><span class="o">/</span><span class="n">jco</span><span class="w"> </span><span class="n">jco</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="err">\</span>
<span class="w">  </span><span class="n">wasi</span><span class="o">-</span><span class="n">testsuite</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">rust</span><span class="o">/</span><span class="n">testsuite</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip3</span><span class="o">/</span><span class="n">multi</span><span class="o">-</span><span class="n">clock</span><span class="o">-</span><span class="n">wait</span><span class="p">.</span><span class="n">wasm</span>
</code></pre></div>
<p>You can get that file here: <a href="https://github.com/WebAssembly/wasi-testsuite/blob/prod/testsuite-base/tests/rust/testsuite/wasm32-wasip3/multi-clock-wait.wasm">https://github.com/WebAssembly/wasi-testsuite/blob/prod/testsuite-base/tests/rust/testsuite/wasm32-wasip3/multi-clock-wait.wasm</a></p>
<p>Anyway, the result is a backtrace:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">js</span><span class="o">-</span><span class="n">component</span><span class="o">-</span><span class="n">bindgen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">transpile_bindgen</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">2388</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span>
<span class="nc">not</span><span class="w"> </span><span class="n">yet</span><span class="w"> </span><span class="n">implemented</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">lower_import</span><span class="p">()]</span><span class="w"> </span><span class="n">FunctionKind</span><span class="p">::</span><span class="n">AsyncFreeStanding</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="p">(</span><span class="n">jco</span><span class="w"> </span><span class="n">run</span><span class="p">)</span><span class="w"> </span><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">Unable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">transpile</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">execution</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">runComponent</span><span class="w"> </span><span class="p">(</span><span class="n">file</span><span class="p">:</span><span class="sd">///home/wingo/src/wasip3/jco/packages/jco/src/cmd/run.js:101:19)</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">file</span><span class="p">:</span><span class="sd">///home/wingo/src/wasip3/jco/packages/jco/src/jco.js:485:17 {</span>
<span class="w">  </span><span class="p">[</span><span class="n">cause</span><span class="p">]:</span><span class="w"> </span><span class="nc">RuntimeError</span><span class="p">:</span><span class="w"> </span><span class="nc">unreachable</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">abort</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66816]:0x16cdd59)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_ZN3std3sys3pal4wasi7helpers14abort_internal17ha5c7c7f137dfd2a7E</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66680]:0x16c1e45)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_ZN3std7process5abort17h1f0c5bda232b5244E</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66617]:0x16bc5df)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_RNvCsj4CZ6flxxfE_7___rustc12___rust_abort</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66616]:0x16bc5d5)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_RNvCsj4CZ6flxxfE_7___rustc18___rust_start_panic</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66567]:0x16bb105)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_RNvCsj4CZ6flxxfE_7___rustc10rust_panic</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66713]:0x16c376d)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_ZN3std9panicking20rust_panic_with_hook17h0680752b21c39de3E</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66709]:0x16c3634)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_ZN3std9panicking19begin_panic_handler28_</span><span class="cp">$u7b$$u7b$closure$u7d$$u7d$</span><span class="mi">17</span><span class="n">hd0cc751148985cc7E</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66689]:0x16c2462)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_ZN3std3sys9backtrace26__rust_end_short_backtrace17h8dfda85cca241a2aE</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66688]:0x16c239c)</span>
<span class="w">      </span><span class="n">at</span><span class="w"> </span><span class="n">js_component_bindgen_component</span><span class="p">.</span><span class="n">wasm</span><span class="p">.</span><span class="n">_RNvCsj4CZ6flxxfE_7___rustc17rust_begin_unwind</span><span class="w"> </span><span class="p">(</span><span class="n">wasm</span><span class="p">:</span><span class="c1">//wasm/js_component_bindgen_component.wasm-2157550e:wasm-function[66701]:0x16c301b)</span>
<span class="p">}</span>
</code></pre></div>
<p>Any ideas?  <span class="user-mention" data-user-id="598440">@Victor Adossi</span> are you the jco wizard? :)</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-testsuite/blob/prod/testsuite-base/tests/rust/testsuite/wasm32-wasip3/multi-clock-wait.wasm" style="background-image: url(&quot;https://uploads.zulipusercontent.net/e31b1d9b492d1cb76966ee933549dfa70f90a67b/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663466643437663764373337373937643339653261613633653838383530323866646538316565343739363430666261323136313661363433336632323236652f576562417373656d626c792f776173692d746573747375697465&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-testsuite/blob/prod/testsuite-base/tests/rust/testsuite/wasm32-wasip3/multi-clock-wait.wasm" title="wasi-testsuite/tests/rust/testsuite/wasm32-wasip3/multi-clock-wait.wasm at prod/testsuite-base · WebAssembly/wasi-testsuite">wasi-testsuite/tests/rust/testsuite/wasm32-wasip3/multi-clock-wait.wasm at prod/testsuite-base · WebAssembly/wasi-testsuite</a></div><div class="message_embed_description">WASI Testsuite. Contribute to WebAssembly/wasi-testsuite development by creating an account on GitHub.</div></div></div>



<a name="541428244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/jco%20and%20wasip3/near/541428244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/jco.20and.20wasip3.html#541428244">(Sep 25 2025 at 10:57)</a>:</h4>
<p>Hey so unfortunately Jco is not yet ready for use with P3 eyt! I'm working on it <span aria-label="bow" class="emoji emoji-1f647" role="img" title="bow">:bow:</span></p>



<a name="541428381"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/jco%20and%20wasip3/near/541428381" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Victor Adossi <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/jco.20and.20wasip3.html#541428381">(Sep 25 2025 at 10:58)</a>:</h4>
<p>we have some components that work right now, but not all the functionality is implemented just yet</p>
<blockquote>
<p><code>not yet implemented: [lower_import()] FunctionKind::AsyncFreeStanding</code></p>
</blockquote>
<p>Yeah that bit right there</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>