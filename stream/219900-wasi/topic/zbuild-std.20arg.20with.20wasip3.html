<html>
<head><meta charset="utf-8"><title>zbuild-std arg with wasip3 · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html">zbuild-std arg with wasip3</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="567461768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567461768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ludea <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567461768">(Jan 12 2026 at 08:18)</a>:</h4>
<p>Hi,<br>
For now wasip3 crate doesn't support this arg with cargo.<br>
Where can I track (repo / issue / PR) the work on this? (if work already started)</p>



<a name="567488790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567488790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567488790">(Jan 12 2026 at 10:19)</a>:</h4>
<p><code>-Zbuild-std</code> should work for any target provided that you have the required linker and system libraries available. What is the error you get?</p>



<a name="567489326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567489326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ludea <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567489326">(Jan 12 2026 at 10:22)</a>:</h4>
<p><a href="https://github.com/rust-random/getrandom/actions/runs/20799036693/job/59739722173#step:6:99">https://github.com/rust-random/getrandom/actions/runs/20799036693/job/59739722173#step:6:99</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/rust-random/getrandom/actions/runs/20799036693/job/59739722173#step:6:99" style="background-image: url(&quot;https://uploads.zulipusercontent.net/8c3070063381468e2f55c3cf2d17c836d3b5ddbf/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f643838623230633538656433356366666362383563316138306264326536656565636336613462313866613464316262356336666330383931376465343837612f727573742d72616e646f6d2f67657472616e646f6d&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/rust-random/getrandom/actions/runs/20799036693/job/59739722173#step:6:99" title="Add WASIp3 support · rust-random/getrandom@c1f81ff">Add WASIp3 support · rust-random/getrandom@c1f81ff</a></div><div class="message_embed_description">A small cross-platform library for retrieving random data from (operating) system source - Add WASIp3 support · rust-random/getrandom@c1f81ff</div></div></div>



<a name="567502180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567502180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567502180">(Jan 12 2026 at 11:10)</a>:</h4>
<p>That is missing wasi-libc. For wasip2 the rustup component should ship with wasi-libc, but because we don't ship a wasip3 target, you need to manually point rustc to the clang in wasi-sdk with <code>RUSTFLAGS="-Clinker=/path/to/wasi/clang"</code>: <a href="https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-29">https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-29</a></p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-29" style="background-image: url(&quot;https://uploads.zulipusercontent.net/310b0e021f55b65aabe79bb9fe13a9845552e4cf/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f636264356666306664383531616338663334633165633738663837396663323532656261333866633236316166303836613363393531336465373438633637642f576562417373656d626c792f776173692d73646b2f72656c65617365732f7461672f776173692d73646b2d3239&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-sdk/releases/tag/wasi-sdk-29" title="Release wasi-sdk-29 · WebAssembly/wasi-sdk">Release wasi-sdk-29 · WebAssembly/wasi-sdk</a></div><div class="message_embed_description">What's Changed

Lower linux glibc requirement from 2.31 to 2.28 by @alexcrichton in #575
Update wasi-libc by @alexcrichton in #576
Update wasm-component-ld to 0.5.19 by @alexcrichton in #577

Full ...</div></div></div>



<a name="567545056"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567545056" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ludea <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567545056">(Jan 12 2026 at 14:14)</a>:</h4>
<p>There is an accepted PR which start to add target <a href="https://github.com/WebAssembly/wasi-libc/pull/700">https://github.com/WebAssembly/wasi-libc/pull/700</a>.<br>
So will wait until wasi-sdk bump with that work.</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/WebAssembly/wasi-libc/pull/700" style="background-image: url(&quot;https://uploads.zulipusercontent.net/c8b55d3a14988c3d871ca36ed0146eb0420825eb/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f626431356563373034626466613739333435316132646437383137373863653030366463366237613766393761623162643835626466356431383062383661612f576562417373656d626c792f776173692d6c6962632f70756c6c2f373030&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/WebAssembly/wasi-libc/pull/700" title=" Add a wasm32-wasip3 target  by alexcrichton · Pull Request #700 · WebAssembly/wasi-libc"> Add a wasm32-wasip3 target  by alexcrichton · Pull Request #700 · WebAssembly/wasi-libc</a></div><div class="message_embed_description">Almost all functions are stubbed out to return errors. This is all done
in preparation for eventually filling out these functions, but the goal
of this commit is to lay down the scaffolding of the ...</div></div></div>



<a name="567567761"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567567761" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567567761">(Jan 12 2026 at 15:32)</a>:</h4>
<p>For the time being you can use clang with the <code>wasm32-wasip2</code> target, for example <code>/path/to/wasm32-wasip2-clang</code> as the <code>-Clinker</code>. Otherwise though the wasip3 target isn't ready in Rust for prime time yet</p>



<a name="567567929"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567567929" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567567929">(Jan 12 2026 at 15:33)</a>:</h4>
<p>I'll note that I do not plan on adding a wasip3 target to wasi-sdk just yet,  leaving it test-only/build-from-source only in wasi-libc</p>



<a name="567567993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567567993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567567993">(Jan 12 2026 at 15:33)</a>:</h4>
<p>We need to sort out ABI things before providing a precompiled binary</p>



<a name="567569925"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567569925" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ludea <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567569925">(Jan 12 2026 at 15:39)</a>:</h4>
<p>I can wait, I don't need it for now.</p>



<a name="567571968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/zbuild-std%20arg%20with%20wasip3/near/567571968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/zbuild-std.20arg.20with.20wasip3.html#567571968">(Jan 12 2026 at 15:46)</a>:</h4>
<p>If that's ok, that's what I'd recommend yeah. I think it's reasonable to add <code>#[cfg]</code>'d code for wasip3, to clarify, but testing it is going to be manual for now</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>