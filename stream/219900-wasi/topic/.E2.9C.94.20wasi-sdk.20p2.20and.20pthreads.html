<html>
<head><meta charset="utf-8"><title>✔ wasi-sdk p2 and pthreads · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html">✔ wasi-sdk p2 and pthreads</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="508024878"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20wasi-sdk%20p2%20and%20pthreads/near/508024878" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html#508024878">(Mar 25 2025 at 13:38)</a>:</h4>
<p>ok, but lets say i just wanted to compile with pthreads and not actually use any.  Would that work with p2 perhaps?</p>



<a name="508025192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20wasi-sdk%20p2%20and%20pthreads/near/508025192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html#508025192">(Mar 25 2025 at 13:39)</a>:</h4>
<p>Maybe i should just create my own cmake file and try some things, it wouldn't go in to the wasi-sdk anyway.  Thanks for the links</p>



<a name="508025793"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20wasi-sdk%20p2%20and%20pthreads/near/508025793" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html#508025793">(Mar 25 2025 at 13:41)</a>:</h4>
<p>You mean just having dummy shims for all pthread methods? Those should already exist on the non-thread targets I believe. You just need to add <code>-D_WASI_EMULATED_PTHREAD</code> when compiling the C code and <code>-lwasi-emulated-pthread</code> when linking.</p>



<a name="508027810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20wasi-sdk%20p2%20and%20pthreads/near/508027810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html#508027810">(Mar 25 2025 at 13:49)</a>:</h4>
<p>Interesting, will try that first.  THanks</p>



<a name="508027840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20wasi-sdk%20p2%20and%20pthreads/near/508027840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html#508027840">(Mar 25 2025 at 13:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="395878">Scott Waye</span> has marked this topic as resolved.</p>



<a name="508340178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20wasi-sdk%20p2%20and%20pthreads/near/508340178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Scott Waye <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads.html#508340178">(Mar 26 2025 at 17:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="264278">bjorn3</span> <a href="#narrow/channel/219900-wasi/topic/.E2.9C.94.20wasi-sdk.20p2.20and.20pthreads/near/508025793">said</a>:</p>
<blockquote>
<p>-lwasi-emulated-pthread</p>
</blockquote>
<p>Worked thanks, I was able to build zlib-ng with the wasi-sdk and these settings.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>