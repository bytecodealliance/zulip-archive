<html>
<head><meta charset="utf-8"><title>✔ Is the wasip3 http implementation incomplete? · wasi · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/index.html">wasi</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Is.20the.20wasip3.20http.20implementation.20incomplete.3F.html">✔ Is the wasip3 http implementation incomplete?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="522614650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Is%20the%20wasip3%20http%20implementation%20incomplete%3F/near/522614650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Roman Volosatovs <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Is.20the.20wasip3.20http.20implementation.20incomplete.3F.html#522614650">(Jun 05 2025 at 15:06)</a>:</h4>
<p>We do actually have tests for wasip3 outgoing HTTP, so I'd expect it to work, here's how we set them up <a href="https://github.com/bytecodealliance/wasip3-prototyping/blob/a759b5c37fdd3a7b5110a33fa24b624c2baee5d4/crates/wasi-http/tests/all/p3/outgoing.rs#L28-L35">https://github.com/bytecodealliance/wasip3-prototyping/blob/a759b5c37fdd3a7b5110a33fa24b624c2baee5d4/crates/wasi-http/tests/all/p3/outgoing.rs#L28-L35</a></p>
<p>could you share the code you use to configure WASI?</p>
<div class="message_embed"><a class="message_embed_image" href="https://github.com/bytecodealliance/wasip3-prototyping/blob/a759b5c37fdd3a7b5110a33fa24b624c2baee5d4/crates/wasi-http/tests/all/p3/outgoing.rs#L28-L35" style="background-image: url(&quot;https://uploads.zulipusercontent.net/430f72054ed16b83f3e3faf5b5fd59d9d61981b8/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f643130643936393866343361393562353430373065303864326336303461663936613632343863373262633063636538373462613832663838303966383662642f62797465636f6465616c6c69616e63652f7761736970332d70726f746f747970696e67&quot;)"></a><div class="data-container"><div class="message_embed_title"><a href="https://github.com/bytecodealliance/wasip3-prototyping/blob/a759b5c37fdd3a7b5110a33fa24b624c2baee5d4/crates/wasi-http/tests/all/p3/outgoing.rs#L28-L35" title="wasip3-prototyping/crates/wasi-http/tests/all/p3/outgoing.rs at a759b5c37fdd3a7b5110a33fa24b624c2baee5d4 · bytecodealliance/wasip3-prototyping">wasip3-prototyping/crates/wasi-http/tests/all/p3/outgoing.rs at a759b5c37fdd3a7b5110a33fa24b624c2baee5d4 · bytecodealliance/wasip3-prototyping</a></div><div class="message_embed_description">Fork of wasmtime for protoyping WASIp3 work and coordination, not intended for any production use case, purely for development - bytecodealliance/wasip3-prototyping</div></div></div>



<a name="522620195"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Is%20the%20wasip3%20http%20implementation%20incomplete%3F/near/522620195" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Is.20the.20wasip3.20http.20implementation.20incomplete.3F.html#522620195">(Jun 05 2025 at 15:33)</a>:</h4>
<p>You might be running into a mismatch where Wasmtime is using a fork of the WIT files with the <code>async</code> keyword which we haven't yet upstreamed to the <code>wasi-http</code> repository (that's on me)</p>



<a name="522620251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Is%20the%20wasip3%20http%20implementation%20incomplete%3F/near/522620251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Is.20the.20wasip3.20http.20implementation.20incomplete.3F.html#522620251">(Jun 05 2025 at 15:33)</a>:</h4>
<p>so this might be a WIT-sync-ing problem</p>



<a name="522621995"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Is%20the%20wasip3%20http%20implementation%20incomplete%3F/near/522621995" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mainrs <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Is.20the.20wasip3.20http.20implementation.20incomplete.3F.html#522621995">(Jun 05 2025 at 15:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="253994">Alex Crichton</span> <a href="#narrow/channel/219900-wasi/topic/Is.20the.20wasip3.20http.20implementation.20incomplete.3F/near/522620195">said</a>:</p>
<blockquote>
<p>You might be running into a mismatch where Wasmtime is using a fork of the WIT files with the <code>async</code> keyword which we haven't yet upstreamed to the <code>wasi-http</code> repository (that's on me)</p>
</blockquote>
<p>I did not notice the additional <code>async</code> keyword, thank you! I think that was the issue that caused the error message. It now instantiates and links properly after adding the keyword locally.</p>
<p>I'm hitting other issues now: as soon as my WASI function contains an <code>await</code>, the VM panics with an unreachable. Time to dig into wasmtime source code again :D</p>



<a name="522622013"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/219900-wasi/topic/%E2%9C%94%20Is%20the%20wasip3%20http%20implementation%20incomplete%3F/near/522622013" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/219900-wasi/topic/.E2.9C.94.20Is.20the.20wasip3.20http.20implementation.20incomplete.3F.html#522622013">(Jun 05 2025 at 15:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="681848">mainrs</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>