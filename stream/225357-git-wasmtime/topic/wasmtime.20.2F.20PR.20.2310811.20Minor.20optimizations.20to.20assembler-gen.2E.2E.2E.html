<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10811 Minor optimizations to assembler-gen... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html">wasmtime / PR #10811 Minor optimizations to assembler-gen...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="519230732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519230732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519230732">(May 19 2025 at 21:42)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a>.</p>



<a name="519230734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519230734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519230734">(May 19 2025 at 21:42)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a> from <code>alexcrichton:shrink-some-generated-code</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This is a few minor changes in the hopes of optimizing the compile-time of the generated code itself for the x64 assembler crate, including:</p>
<ul>
<li>Add <code>derive(Copy)</code> to all instructions to benefit from a specialized implementation of <code>derive(Clone)</code> when a <code>Copy</code> implementation is also present (e.g. it's <code>*foo</code> instead of a structural <code>clone</code>-each-field).</li>
<li>Don't use <code>write!</code> in <code>Display for Inst</code> and instead delegate directly with methods to avoid formatting machinery.</li>
<li>Use helper methods in <code>RegisterVisitor</code> trait to have register allocation be a method-per-operand and shrink the methods a bit.</li>
</ul>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="519230736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519230736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519230736">(May 19 2025 at 21:42)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a>.</p>



<a name="519230819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519230819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519230819">(May 19 2025 at 21:43)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10811#issuecomment-2892362695">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a>:</p>
<blockquote>
<p>This doesn't have a big impact on compile-time right now, nor am I confident that it'll have an impact long-term, so @abrown if you'd prefer I'm also ok to just close this and/or drop parts of it.</p>
</blockquote>



<a name="519250992"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519250992" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519250992">(May 19 2025 at 23:54)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10811#pullrequestreview-2852198173">PR review</a>:</p>
<blockquote>
<p>Makes sense to me. My sense is that, with all this generated code, any clarity improvements are worth their weight in gold due to easier debugging, regardless of the performance improvement.</p>
</blockquote>



<a name="519369394"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519369394" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519369394">(May 20 2025 at 12:15)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a>.</p>



<a name="519369551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519369551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519369551">(May 20 2025 at 12:16)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a>.</p>



<a name="519376546"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310811%20Minor%20optimizations%20to%20assembler-gen.../near/519376546" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310811.20Minor.20optimizations.20to.20assembler-gen.2E.2E.2E.html#519376546">(May 20 2025 at 12:50)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10811">PR #10811</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>