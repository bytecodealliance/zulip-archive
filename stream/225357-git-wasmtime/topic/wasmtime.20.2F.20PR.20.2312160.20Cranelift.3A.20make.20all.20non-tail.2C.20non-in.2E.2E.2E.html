<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12160 Cranelift: make all non-tail, non-in... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html">wasmtime / PR #12160 Cranelift: make all non-tail, non-in...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="563438781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563438781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563438781">(Dec 12 2025 at 10:21)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563438824"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563438824" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563438824">(Dec 12 2025 at 10:21)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563443533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563443533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563443533">(Dec 12 2025 at 10:44)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563454862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563454862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563454862">(Dec 12 2025 at 11:45)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/12160#issuecomment-3646156774">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:aarch64", "cranelift:meta", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="563558917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563558917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563558917">(Dec 12 2025 at 20:50)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563558956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563558956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563558956">(Dec 12 2025 at 20:50)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>:</p>
<blockquote>
<p>As discussed in this week's Cranelift meeting, we've discovered a need to generalize the <code>patchable_call</code> mechanism and corresponding <code>patchable</code> ABI slightly. In particular, we will need patchable <code>try_call</code> callsites as well in order to allow breakpoint handlers to throw exceptions (desirable functionality eventually) and have this work in the presence of inlining. Also, it's just a nice generalization to say that patchability is an orthogonal dimension to the call ABI and the other restrictions we initially imposed, and works as long as the basic requirement (no return values) is met.</p>
<p>This also renames the <code>patchable</code> ABI to <code>preserve_all</code>, to make it clear that its purpose is actually orthogonal, and it can be used independently of patchable callsites. It also deletes the <code>cold</code> ABI, which never actually did anything and is misleading in the presence of an actual cold-ish (subzero temperature, actually) ABI like <code>preserve_all</code>.</p>
</blockquote>



<a name="563573959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563573959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563573959">(Dec 12 2025 at 23:00)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563574082"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563574082" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563574082">(Dec 12 2025 at 23:01)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563906102"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563906102" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563906102">(Dec 15 2025 at 19:19)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12160#pullrequestreview-3579747418">PR review</a>:</p>
<blockquote>
<p>LGTM, thanks for cleaning this up!</p>
</blockquote>



<a name="563906103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563906103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563906103">(Dec 15 2025 at 19:19)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12160#discussion_r2620542104">PR review comment</a>:</p>
<blockquote>
<p>Maybe a little cleaner (and more future proof, due to exhaustive matching?) to do destructuring here instead of repeated index+field access.</p>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>        let ir::ExtFuncData { patchable, colocated, signature, name: _ } = self.func.dfg.ext_funcs[func_ref];
</code></pre></div><br>
</p>
</blockquote>



<a name="563941137"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563941137" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563941137">(Dec 15 2025 at 23:06)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563941175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563941175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563941175">(Dec 15 2025 at 23:06)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12160#pullrequestreview-3580519338">PR review</a>.</p>



<a name="563941176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563941176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563941176">(Dec 15 2025 at 23:06)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12160#discussion_r2621140583">PR review comment</a>:</p>
<blockquote>
<p>Ah, of course, great point -- done in 4dc84bb7f7.</p>
</blockquote>



<a name="563941204"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563941204" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563941204">(Dec 15 2025 at 23:07)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<a name="563945020"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312160%20Cranelift%3A%20make%20all%20non-tail%2C%20non-in.../near/563945020" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312160.20Cranelift.3A.20make.20all.20non-tail.2C.20non-in.2E.2E.2E.html#563945020">(Dec 15 2025 at 23:53)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12160">PR #12160</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>