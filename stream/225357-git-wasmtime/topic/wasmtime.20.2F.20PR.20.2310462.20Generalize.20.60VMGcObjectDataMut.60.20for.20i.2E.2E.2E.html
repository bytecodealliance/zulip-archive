<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10462 Generalize `VMGcObjectDataMut` for i... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html">wasmtime / PR #10462 Generalize `VMGcObjectDataMut` for i...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="507890191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507890191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507890191">(Mar 24 2025 at 22:50)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<a name="507890192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507890192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507890192">(Mar 24 2025 at 22:50)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<a name="507890193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507890193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507890193">(Mar 24 2025 at 22:50)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a> from <code>fitzgen:generalize-vm-gc-object-data</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Depends on <a href="https://github.com/bytecodealliance/wasmtime/pull/10461">https://github.com/bytecodealliance/wasmtime/pull/10461</a></p>
<p>This makes it generic over a <code>T</code> and then shared+immutable accesses are bound by<br>
<code>T: AsRef&lt;[u8]&gt;</code> and exclusive+mutable accesses are bound by <code>T: AsMut&lt;[u8]&gt;</code>.</p>
<p>This allows reusing these accessors in more places in the future, and means<br>
there are fewer places to bounds check accesses and remember to do little-endian<br>
conversion and all that.</p>
</blockquote>



<a name="507894351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507894351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507894351">(Mar 24 2025 at 23:26)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<a name="507895543"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507895543" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507895543">(Mar 24 2025 at 23:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#pullrequestreview-2711896478">PR review</a>.</p>



<a name="507895544"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507895544" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507895544">(Mar 24 2025 at 23:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#discussion_r2011059720">PR review comment</a>:</p>
<blockquote>
<p>Style nit: <code>&amp;'_ T</code> I think can always be rewritten as <code>&amp;T</code></p>
</blockquote>



<a name="507895545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507895545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507895545">(Mar 24 2025 at 23:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#discussion_r2011062096">PR review comment</a>:</p>
<blockquote>
<p>If you want to get really fancy one option is to define this as <code>VmGcObjectData([u8])</code> to avoid needing generics here at all.</p>
</blockquote>



<a name="507896244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896244">(Mar 24 2025 at 23:44)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#pullrequestreview-2711908902">PR review</a>.</p>



<a name="507896245"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896245" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896245">(Mar 24 2025 at 23:44)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#discussion_r2011068646">PR review comment</a>:</p>
<blockquote>
<p>Then we need unsafe code to construct it tho, because we can't use the unbox feature, right?</p>
</blockquote>



<a name="507896282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896282">(Mar 24 2025 at 23:45)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#pullrequestreview-2711909243">PR review</a>.</p>



<a name="507896284"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896284" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896284">(Mar 24 2025 at 23:45)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#discussion_r2011068902">PR review comment</a>:</p>
<blockquote>
<p>I thought that underscores were preferred for elided return lifetimes these days?</p>
</blockquote>



<a name="507896563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896563">(Mar 24 2025 at 23:47)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#pullrequestreview-2711911445">PR review</a>.</p>



<a name="507896564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896564">(Mar 24 2025 at 23:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#discussion_r2011070570">PR review comment</a>:</p>
<blockquote>
<p>I think that's advice for lifetime parameters because <code>Foo</code> is equivalent to <code>Foo&lt;'_&gt;</code>, but with <code>Foo</code> it's easy to forget there's a lifetime in there. With <code>&amp;T</code> vs <code>&amp;'_ T</code> though it's mostly just visual noise</p>
</blockquote>



<a name="507896624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896624">(Mar 24 2025 at 23:47)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#pullrequestreview-2711911861">PR review</a>.</p>



<a name="507896625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507896625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507896625">(Mar 24 2025 at 23:47)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10462#discussion_r2011070809">PR review comment</a>:</p>
<blockquote>
<p>Right yeah, we'd have to have a transmute for that (but IMO is reasonable, nothing compared to the other unsafe bits we have)</p>
</blockquote>



<a name="507899252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507899252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507899252">(Mar 25 2025 at 00:11)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<a name="507900562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507900562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507900562">(Mar 25 2025 at 00:23)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<a name="507900582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507900582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507900582">(Mar 25 2025 at 00:23)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<a name="507904320"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310462%20Generalize%20%60VMGcObjectDataMut%60%20for%20i.../near/507904320" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310462.20Generalize.20.60VMGcObjectDataMut.60.20for.20i.2E.2E.2E.html#507904320">(Mar 25 2025 at 01:00)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10462">PR #10462</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>