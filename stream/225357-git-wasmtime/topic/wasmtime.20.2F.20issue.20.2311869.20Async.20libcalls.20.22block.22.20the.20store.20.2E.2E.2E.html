<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11869 Async libcalls &quot;block&quot; the store ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311869.20Async.20libcalls.20.22block.22.20the.20store.20.2E.2E.2E.html">wasmtime / issue #11869 Async libcalls &quot;block&quot; the store ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="545132224"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311869%20Async%20libcalls%20%22block%22%20the%20store%20.../near/545132224" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311869.20Async.20libcalls.20.22block.22.20the.20store.20.2E.2E.2E.html#545132224">(Oct 15 2025 at 21:45)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11869">issue #11869</a>:</p>
<blockquote>
<p>At this time the implementation of async libcalls in Wasmtime all use the <code>block_on</code> helper internally in the implementation. This has the property, though, that the store is "locked" while the libcall is waiting on the result meaning that in a component-model-async world it's not possible to make progress on anything else in the store while this is happening. This notably affects <code>Store::run_concurrent</code> as well where any select-ed async computation won't make progress because the wasm is locking up everything.</p>
<p>To fix this it will require async libcalls to be refactored/reimplemented to not close over the store for the duration of their execution. Instead something like <code>Accessor</code> will be required where mutable access to a store can be temporarily granted but otherwise it's not held across <code>await</code> points. In implementing this it'll fix <code>run_concurrent</code> to correctly and actually run various computations in the provided closure concurrently. This will also enable other concurrent tasks within the store to make progress while a libcall is blocked.</p>
</blockquote>



<a name="545132227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311869%20Async%20libcalls%20%22block%22%20the%20store%20.../near/545132227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311869.20Async.20libcalls.20.22block.22.20the.20store.20.2E.2E.2E.html#545132227">(Oct 15 2025 at 21:45)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasm-proposal:component-model-async label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11869">Issue #11869</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>