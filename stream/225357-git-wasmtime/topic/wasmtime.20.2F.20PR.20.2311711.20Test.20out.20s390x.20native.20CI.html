<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11711 Test out s390x native CI · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html">wasmtime / PR #11711 Test out s390x native CI</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="540316477"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540316477" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540316477">(Sep 18 2025 at 20:41)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a> from <code>alexcrichton:test-s390x</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Follow-up to <a href="https://github.com/IBM/actionspz/issues/19">https://github.com/IBM/actionspz/issues/19</a></p>
</blockquote>



<a name="540316480"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540316480" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540316480">(Sep 18 2025 at 20:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540316481"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540316481" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540316481">(Sep 18 2025 at 20:41)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540322923"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540322923" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540322923">(Sep 18 2025 at 21:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540322980"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540322980" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540322980">(Sep 18 2025 at 21:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540323517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540323517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540323517">(Sep 18 2025 at 21:31)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540323856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540323856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540323856">(Sep 18 2025 at 21:34)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540324009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540324009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540324009">(Sep 18 2025 at 21:36)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540324222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540324222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540324222">(Sep 18 2025 at 21:38)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540324800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540324800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540324800">(Sep 18 2025 at 21:42)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540327484"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540327484" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540327484">(Sep 18 2025 at 21:59)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540329948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540329948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540329948">(Sep 18 2025 at 22:14)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540335015"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540335015" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540335015">(Sep 18 2025 at 22:33)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11711#issuecomment-3309907537">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>:</p>
<blockquote>
<p>The UI isn't great, but timings are:</p>
<table>
<thead>
<tr>
<th>job</th>
<th>[qemu]</th>
<th>[native]</th>
</tr>
</thead>
<tbody>
<tr>
<td>misc bucket 1</td>
<td>14m23s</td>
<td>9m40s</td>
</tr>
<tr>
<td>misc bucket 2</td>
<td>8m38s</td>
<td>7m3s</td>
</tr>
<tr>
<td>misc bucket 3</td>
<td>15m51s</td>
<td>13m18s</td>
</tr>
<tr>
<td>wasmtime</td>
<td>7m17s</td>
<td>4m16s</td>
</tr>
<tr>
<td>wasmtime-cli</td>
<td>21m51s</td>
<td>13m26s</td>
</tr>
<tr>
<td>wasmtime-wasi</td>
<td>9m54s</td>
<td>8m58s</td>
</tr>
</tbody>
</table>
<p>[qemu]: <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/17840492728/job/50728482380">https://github.com/bytecodealliance/wasmtime/actions/runs/17840492728/job/50728482380</a><br>
[native]: <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/17842722261/job/50735874566">https://github.com/bytecodealliance/wasmtime/actions/runs/17842722261/job/50735874566</a></p>
<p>Consequences:</p>
<ul>
<li>Need to install <code>rustup</code> on the s390x runner</li>
<li>Need to duplicate the <code>ci/run-tests.py</code> step for s390x since it doesn't have <code>pwsh</code> installed (kind of the fault of Windows, not necessarily s390x...)</li>
<li>Looks like IPv6 is disabled so trying to get tests to pass by requesting they don't test ipv6</li>
</ul>
<hr>
<p>The s390x wasmtime-cli job is the <a href="https://github.com/bytecodealliance/wasmtime/actions/metrics/performance?tab=jobs&amp;filters=workflow_file_name%3Amain.yml">second slowest on average for our CI</a> with the slowest being the Windows C API build which shouldn't be too hard to speed up with sharding further or something like that. This unfortunately won't really bring a ton of benefit though because our next two slowest jobs are riscv64 and armv7 emulation of the wasmtime-cli job as well, and they're neck-and-neck with s390x at this time.</p>
<p>So while this isn't really a slam dunk for performance it does help get QEMU out of the picture and is definitely faster for s390x. Given that I'd say let's give it a whirl and see how reliable the hardware ends up being. If we have issues it's pretty easy to swap back to QEMU-based emulation.</p>
</blockquote>



<a name="540335849"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540335849" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540335849">(Sep 18 2025 at 22:36)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540335890"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540335890" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540335890">(Sep 18 2025 at 22:36)</a>:</h4>
<p><strong>alexcrichton</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a> as ready for review.</p>



<a name="540335900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540335900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540335900">(Sep 18 2025 at 22:36)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers">wasmtime-wasi-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="540335901"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/540335901" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#540335901">(Sep 18 2025 at 22:36)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="541058957"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/541058957" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#541058957">(Sep 23 2025 at 16:43)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11711#pullrequestreview-3258851814">PR review</a>.</p>



<a name="541095866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/541095866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#541095866">(Sep 23 2025 at 20:40)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>.</p>



<a name="541271684"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/541271684" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#541271684">(Sep 24 2025 at 16:17)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/pull/11711#issuecomment-3329741784">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>:</p>
<blockquote>
<p>Hi @alexcrichton , thanks for trying out our runners!</p>
<p>As to these issues:</p>
<blockquote>
<ul>
<li>Need to install <code>rustup</code> on the s390x runner</li>
<li>Looks like IPv6 is disabled so trying to get tests to pass by requesting they don't test ipv6</li>
</ul>
</blockquote>
<p>I think we might want to fix those on our side to make the environment more similar to the default one.  Would you mind opening issues for these in the <a href="https://github.com/IBM/actionspz/issues">https://github.com/IBM/actionspz/issues</a>  repo?</p>
<p>Not sure if there's anything we can do about the <code>pwsh</code> issue - how does this even work on the other Linux runners?<br>
</p>
</blockquote>



<a name="541273764"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311711%20Test%20out%20s390x%20native%20CI/near/541273764" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311711.20Test.20out.20s390x.20native.20CI.html#541273764">(Sep 24 2025 at 16:25)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11711#issuecomment-3329767797">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11711">PR #11711</a>:</p>
<blockquote>
<p>Sure! I filed <a href="https://github.com/IBM/actionspz/issues/45">https://github.com/IBM/actionspz/issues/45</a> for rustup and <a href="https://github.com/IBM/actionspz/issues/46">https://github.com/IBM/actionspz/issues/46</a> for ipv6. For <code>pwsh</code> I think that's fine to ignore. I think it works on Linux since it's distinct from <code>powershell</code> which, as far as I know, is Windows-only. The reason we're using <code>pwsh</code> though has everything to do with mingw though and nothing to do with other platforms. It's just some really minor duplication in the CI config. (I don't actually know what <code>pwsh</code> vs <code>powershell</code> is myself, it just happened to work when I was fixing mingw awhile back)</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>