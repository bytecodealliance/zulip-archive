<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11812 Make Config::wasm_feature public. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html">wasmtime / PR #11812 Make Config::wasm_feature public.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="543676145"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543676145" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543676145">(Oct 08 2025 at 07:25)</a>:</h4>
<p>graydon opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a> from <code>graydon:surface-wasm-feature</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>I wanted to disable (and in some cases explicitly enable) <code>WasmFeatures</code> that are not currently surfaced with specific methods on <code>Config</code>. It seems like the simplest path is just to expose this existing helper function publicly.</p>
</blockquote>



<a name="543676147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543676147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543676147">(Oct 08 2025 at 07:25)</a>:</h4>
<p><strong>graydon</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<a name="543676148"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543676148" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543676148">(Oct 08 2025 at 07:25)</a>:</h4>
<p><strong>graydon</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<a name="543691855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543691855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543691855">(Oct 08 2025 at 08:48)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#issuecomment-3380462682">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>:</p>
<blockquote>
<h4>Label Messager: wasmtime:config</h4>
<p>It looks like you are changing Wasmtime's configuration options. Make sure to<br>
complete this check list:</p>
<ul>
<li>
<p>[ ] If you added a new <code>Config</code> method, you wrote extensive documentation for<br>
      it.</p>
<p>&lt;details&gt;</p>
<p>Our documentation should be of the following form:</p>
<p>```text<br>
Short, simple summary sentence.</p>
<p>More details. These details can be multiple paragraphs. There should be<br>
information about not just the method, but its parameters and results as<br>
well.</p>
<p>Is this method fallible? If so, when can it return an error?</p>
<p>Can this method panic? If so, when does it panic?</p>
<h1>Example</h1>
<p>Optional example here.<br>
```</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you added a new <code>Config</code> method, or modified an existing one, you<br>
  ensured that this configuration is exercised by the fuzz targets.</p>
<p>&lt;details&gt;</p>
<p>For example, if you expose a new strategy for allocating the next instance<br>
slot inside the pooling allocator, you should ensure that at least one of our<br>
fuzz targets exercises that new strategy.</p>
<p>Often, all that is required of you is to ensure that there is a knob for this<br>
configuration option in [<code>wasmtime_fuzzing::Config</code>][fuzzing-config] (or one<br>
of its nested <code>struct</code>s).</p>
<p>Rarely, this may require authoring a new fuzz target to specifically test this<br>
configuration. See [our docs on fuzzing][fuzzing-docs] for more details.</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you are enabling a configuration option by default, make sure that it<br>
  has been fuzzed for at least two weeks before turning it on by default.</p>
</li>
</ul>
<p>[fuzzing-config]: <a href="https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194">https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194</a><br>
[fuzzing-docs]: <a href="https://docs.wasmtime.dev/contributing-fuzzing.html">https://docs.wasmtime.dev/contributing-fuzzing.html</a></p>
<hr>
<p>&lt;details&gt;</p>
<p>To modify this label's message, edit the &lt;code&gt;.github/label-messager/wasmtime-config.md&lt;/code&gt; file.</p>
<p>To add new label messages or remove existing label messages, edit the<br>
&lt;code&gt;.github/label-messager.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/label-messager-action">Learn more.</a></p>
<p>&lt;/details&gt;</p>
</blockquote>



<a name="543768033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543768033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543768033">(Oct 08 2025 at 14:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#pullrequestreview-3315202722">PR review</a>:</p>
<blockquote>
<p>Thanks! While deceptively simple as a PR I think we'll want to flesh this out a bit more before exposing it for general usage given how low-level it is. I'm happy to do some of these changes as well, but some things I can think of are:</p>
<ul>
<li>The <code>wasmtime</code> crate should reexport the <code>WasmFeatures</code> flag so users have a way to reasonably use the right version (vs depending on <code>wasmparser</code> themselves)</li>
<li>This method may want to be renamed to <code>wasm_features</code> since it can be used to set mutliple features at once.</li>
<li>For the documentation I think it'd be worth calling out that it's always possible for <code>Config</code> to return an error when creating an <code>Engine</code> if the feature configuration isn't supported. For example if gc is enabled at runtime but was disabled at compile time that'll cause <code>Engine</code> creation to fail.</li>
<li>I'm a bit worried about possible unsafety/unsoundness/panics/etc related to features that wasm-tools supports that Wasmtime doesn't support. Most of the time Wasmtime would probably panic at the compilation phase of a module which isn't the end of the world, but panicking at runtime is a possibility and would be much worse. To sole this the <code>Config::compiler_panicking_wasm_features</code> method I think should be updated to have a known set of "anything outside this set will panic". Basically an allow-list of the set of proposals Wasmtime understands well enough to not egregriously panic on. That way if <code>wasmparser</code> adds a new feature and there's no support in Wasmtime that's fine, it'll just return a first-class error during <code>Engine</code> creation saying "we don't support that".</li>
</ul>
<p>That's what I can think of at least to make sure we've crossed our t's and dotted the i's here. I realize that's probably more than you wanted to take on with this PR though. Would you be ok applying some of these updates? Or would you prefer to hand it off?</p>
</blockquote>



<a name="543841243"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543841243" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543841243">(Oct 08 2025 at 22:01)</a>:</h4>
<p>graydon <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#issuecomment-3383390978">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>:</p>
<blockquote>
<blockquote>
<p>Would you be ok applying some of these updates? Or would you prefer to hand it off?</p>
</blockquote>
<p>I'll see what I can do!</p>
</blockquote>



<a name="543844572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543844572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543844572">(Oct 08 2025 at 22:37)</a>:</h4>
<p>graydon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<a name="543844733"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543844733" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543844733">(Oct 08 2025 at 22:39)</a>:</h4>
<p>graydon <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#issuecomment-3383461552">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>:</p>
<blockquote>
<p>@alexcrichton I've added what I _think_ ought to dot those i's and cross those t's though I am uncertain that I picked the list of "known to wasmtime at all" flags correctly; I don't know exactly what wasmtime knows implicitly or explicitly. So I just put in "every feature currently in wasmparser at the time of writing". I can pare it down a little if you can spot any "oh no we definitely don't support that one" entries in the list.</p>
</blockquote>



<a name="543988961"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543988961" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543988961">(Oct 09 2025 at 15:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#discussion_r2417056770">PR review comment</a>:</p>
<blockquote>
<p>One way to organize this might be, at the top, to have <code>let mut unsupported = !features_known_to_wasmtime;</code> and then this <code>match</code> conditionally adds more features into the set, then after the <code>match</code> the <code>unsupported</code> set is returned. That way we don't have to worry about or-ing in the set on each branch.</p>
</blockquote>



<a name="543989025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543989025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543989025">(Oct 09 2025 at 15:21)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#discussion_r2417054693">PR review comment</a>:</p>
<blockquote>
<p>Thanks for listing these out! For ones that we can remove, I'd drop: <code>MEMORY_CONTROL</code>,  <code>LEGACY_EXCEPTIONS</code>, <code>CM_VALUES</code>, <code>CM_NESTED_NAMES</code>, and <code>CM_FIXED_SIZE_LIST</code>. Everything else should be reasonable enough to keep, however.</p>
</blockquote>



<a name="543989227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/543989227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#543989227">(Oct 09 2025 at 15:22)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11812#pullrequestreview-3319366119">PR review</a>:</p>
<blockquote>
<p>Thanks again for this!</p>
</blockquote>



<a name="544017066"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/544017066" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#544017066">(Oct 09 2025 at 17:38)</a>:</h4>
<p>graydon updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<a name="544038899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/544038899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#544038899">(Oct 09 2025 at 20:05)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<a name="544038937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/544038937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#544038937">(Oct 09 2025 at 20:06)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<a name="544049677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311812%20Make%20Config%3A%3Awasm_feature%20public./near/544049677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311812.20Make.20Config.3A.3Awasm_feature.20public.2E.html#544049677">(Oct 09 2025 at 21:26)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11812">PR #11812</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>