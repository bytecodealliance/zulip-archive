<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12222 Support for no_std in cranelift_codegen · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html">wasmtime / PR #12222 Support for no_std in cranelift_codegen</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="566000273"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566000273" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566000273">(Jan 01 2026 at 21:21)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566000585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566000585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566000585">(Jan 01 2026 at 21:29)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (this one), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[ ] FxHashMap and OnceLock</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566004399"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566004399" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566004399">(Jan 01 2026 at 23:05)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (todo), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[ ] FxHashMap and OnceLock</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566004868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566004868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566004868">(Jan 01 2026 at 23:16)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566004918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566004918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566004918">(Jan 01 2026 at 23:18)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566006168"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566006168" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566006168">(Jan 01 2026 at 23:55)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[ ] FxHashMap and OnceLock</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566024569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566024569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566024569">(Jan 02 2026 at 06:43)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[ ] FxHashMap and OnceLock</li>
<li>[ ] test for codegen compilation, with std, but without unwind</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566025318"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566025318" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566025318">(Jan 02 2026 at 06:57)</a>:</h4>
<p>the-ssd <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3704629595">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>I found something that might be useful.</p>
<p><a href="https://rust-lang.github.io/rust-clippy/master/#std_instead_of_core">https://rust-lang.github.io/rust-clippy/master/#std_instead_of_core</a><br>
<a href="https://rust-lang.github.io/rust-clippy/master/#alloc_instead_of_core">https://rust-lang.github.io/rust-clippy/master/#alloc_instead_of_core</a><br>
<a href="https://rust-lang.github.io/rust-clippy/master/#std_instead_of_alloc">https://rust-lang.github.io/rust-clippy/master/#std_instead_of_alloc</a></p>
<p><a href="https://gist.github.com/tdelabro/b2d1f2a0f94ceba72b718b92f9a7ad7b">source</a><br>
</p>
</blockquote>



<a name="566027306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566027306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566027306">(Jan 02 2026 at 07:28)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566027343"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566027343" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566027343">(Jan 02 2026 at 07:28)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[ ] test for codegen compilation, with std, but without unwind</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566029194"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566029194" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566029194">(Jan 02 2026 at 07:56)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566029308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566029308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566029308">(Jan 02 2026 at 07:58)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566033875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566033875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566033875">(Jan 02 2026 at 08:47)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566035408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566035408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566035408">(Jan 02 2026 at 09:05)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[ ] test for codegen compilation, with std, but without unwind</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566036238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566036238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566036238">(Jan 02 2026 at 09:15)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566037624"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566037624" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566037624">(Jan 02 2026 at 09:30)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[ ] floating point issues</li>
<li>[ ] test for codegen compilation, with std, but without unwind</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566037633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566037633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566037633">(Jan 02 2026 at 09:30)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[ ] test for codegen compilation, with std, but without unwind</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566037647"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566037647" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566037647">(Jan 02 2026 at 09:30)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[ ] test for codegen compilation, with std, but without unwind</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566044755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566044755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566044755">(Jan 02 2026 at 10:52)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3622920077">PR review</a>.</p>



<a name="566044757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566044757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566044757">(Jan 02 2026 at 10:52)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2657508254">PR review comment</a>:</p>
<blockquote>
<p>When <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a> is merged, feature <code>unstable-public-internals</code> can be removed, and this changed to <code>Libm::&lt;$float_ty&gt;::roundeven</code></p>
</blockquote>



<a name="566046760"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566046760" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566046760">(Jan 02 2026 at 11:16)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566047032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566047032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566047032">(Jan 02 2026 at 11:19)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566049002"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566049002" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566049002">(Jan 02 2026 at 11:44)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566049212"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566049212" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566049212">(Jan 02 2026 at 11:47)</a>:</h4>
<p>the-ssd <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3705162304">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>I've removed OnceLock, but MachineEnv is now recomputed each time. </p>
</blockquote>



<a name="566049313"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566049313" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566049313">(Jan 02 2026 at 11:48)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[x] test for codegen compilation, with std, but without unwind</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566049327"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566049327" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566049327">(Jan 02 2026 at 11:48)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[x] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
<p>For codegen I also added a prelude file, with all imports, because it was easier this way for now. I put preludes at the bottom, because at the top, some file would break because of <code>///!</code> doc comments. Should I redo it, and move them to the top, or avoid prelude fully?</p>
<p>Edit: prelude can be added by replacing first use of <code>use</code> with <code>use crate::prelude::*;\n use</code> instead of putting it at the bottom<br>
</p>
</blockquote>



<a name="566049393"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566049393" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566049393">(Jan 02 2026 at 11:49)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock</li>
<li>[x] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
</blockquote>



<a name="566049642"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566049642" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566049642">(Jan 02 2026 at 11:53)</a>:</h4>
<p>the-ssd <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3705171969">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p><code>core</code> feature can be removed</p>
</blockquote>



<a name="566130382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566130382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566130382">(Jan 03 2026 at 07:06)</a>:</h4>
<p><strong>the-ssd</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a> as ready for review.</p>



<a name="566130383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566130383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566130383">(Jan 03 2026 at 07:06)</a>:</h4>
<p><strong>the-ssd</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566130384"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566130384" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566130384">(Jan 03 2026 at 07:06)</a>:</h4>
<p><strong>the-ssd</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566130385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566130385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566130385">(Jan 03 2026 at 07:06)</a>:</h4>
<p><strong>the-ssd</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566130407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566130407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566130407">(Jan 03 2026 at 07:06)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[x] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used</li>
</ul>
</blockquote>



<a name="566131427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566131427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566131427">(Jan 03 2026 at 07:28)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566141606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566141606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566141606">(Jan 03 2026 at 11:01)</a>:</h4>
<p>the-ssd <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3706975841">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Diff is a bit weird, it thinks there are more changes than there should be, should I squash the commits myself?</p>
</blockquote>



<a name="566145588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566145588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566145588">(Jan 03 2026 at 12:17)</a>:</h4>
<p>the-ssd <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3707017146">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p><a href="https://github.com/gimli-rs/gimli/pull/855">https://github.com/gimli-rs/gimli/pull/855</a><br>
maybe even <code>unwind</code> can be supported on no_std.</p>
</blockquote>



<a name="566394748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566394748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566394748">(Jan 05 2026 at 16:32)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[x] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="566401584"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566401584" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566401584">(Jan 05 2026 at 17:05)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566443161"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443161" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443161">(Jan 05 2026 at 21:42)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628494014">PR review</a>:</p>
<blockquote>
<p>Ah I just indeed saw this was merged. Feel free to rebase this as well @the-ssd since when we merge PRs it's always a squash-and-push strategy so it'll all become one commit anyway.</p>
</blockquote>



<a name="566443162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443162">(Jan 05 2026 at 21:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662870689">PR review comment</a>:</p>
<blockquote>
<p>This is a pretty small prelude module so ideally we wouldn't need it. I think that a <code>#[macro_use]</code> on the <code>extern crate alloc</code> in this crate might remove the need for these?</p>
</blockquote>



<a name="566443163"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443163" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443163">(Jan 05 2026 at 21:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662883623">PR review comment</a>:</p>
<blockquote>
<p>Given the name of this feature, this doesn't seem like something we should be relying on?</p>
</blockquote>



<a name="566443164"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443164" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443164">(Jan 05 2026 at 21:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662879771">PR review comment</a>:</p>
<blockquote>
<p>Would you be ok splitting this out to a separate PR? For example landing everything else in this PR except the CI changes + this <code>get_machine_env</code> change? This is something we'll need to fix one way or another I believe since IIRC historical benchmarking showed that is needs to be not-created-every-time-on-use.</p>
</blockquote>



<a name="566443165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443165">(Jan 05 2026 at 21:42)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662865155">PR review comment</a>:</p>
<blockquote>
<p>Mind backing out formatting-related changes in this file to make it easier to see what's actually changing?</p>
</blockquote>



<a name="566443504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443504">(Jan 05 2026 at 21:45)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628523810">PR review</a>.</p>



<a name="566443505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443505">(Jan 05 2026 at 21:45)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662892339">PR review comment</a>:</p>
<blockquote>
<p>Yes, it's temporary, until next version of libm is released. Because of a typo a function is call roundeven for f32 and roundevem for f64. I wasn't sure how to work around it with the macro without changing inputs. PR that fixes the typo was already merged</p>
</blockquote>



<a name="566443633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443633">(Jan 05 2026 at 21:46)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628526015">PR review</a>.</p>



<a name="566443634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566443634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566443634">(Jan 05 2026 at 21:46)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662894443">PR review comment</a>:</p>
<blockquote>
<p>Oh, ok let me check</p>
</blockquote>



<a name="566444260"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566444260" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566444260">(Jan 05 2026 at 21:51)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628538373">PR review</a>.</p>



<a name="566444263"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566444263" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566444263">(Jan 05 2026 at 21:51)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662905590">PR review comment</a>:</p>
<blockquote>
<p>I actually only started it becase of this <a href="https://github.com/bytecodealliance/wasmtime/pull/8489#issuecomment-2105129901">https://github.com/bytecodealliance/wasmtime/pull/8489#issuecomment-2105129901</a>. Either way moving it to a separate PR makes sense</p>
</blockquote>



<a name="566445815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566445815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566445815">(Jan 05 2026 at 22:04)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628570051">PR review</a>.</p>



<a name="566445816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566445816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566445816">(Jan 05 2026 at 22:04)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662932201">PR review comment</a>:</p>
<blockquote>
<p>While we're waiting for that to merge, could Cranelift be updated to avoid using the <code>Libm</code> trait? That would enable being able to land this and use it sooner</p>
</blockquote>



<a name="566445853"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566445853" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566445853">(Jan 05 2026 at 22:05)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566446382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566446382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566446382">(Jan 05 2026 at 22:09)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566446458"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566446458" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566446458">(Jan 05 2026 at 22:10)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566448648"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566448648" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566448648">(Jan 05 2026 at 22:29)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566448915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566448915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566448915">(Jan 05 2026 at 22:32)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566449036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449036">(Jan 05 2026 at 22:33)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566449186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449186">(Jan 05 2026 at 22:35)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628632282">PR review</a>.</p>



<a name="566449189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449189">(Jan 05 2026 at 22:35)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662990005">PR review comment</a>:</p>
<blockquote>
<p>Unsure if this is correct</p>
</blockquote>



<a name="566449257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449257">(Jan 05 2026 at 22:35)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628633200">PR review</a>.</p>



<a name="566449258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449258">(Jan 05 2026 at 22:35)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662990746">PR review comment</a>:</p>
<blockquote>
<p>Done</p>
</blockquote>



<a name="566449919"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449919" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449919">(Jan 05 2026 at 22:41)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628644792">PR review</a>.</p>



<a name="566449920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449920">(Jan 05 2026 at 22:41)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663001799">PR review comment</a>:</p>
<blockquote>
<p><code>Libm</code> trait is stable, and it simplifies it, because libm has separate functions for f32, and f64.<br>
Since it is already merged, git version can be used, or round_ties_even can be left unchanged, and fixed in a later PR, when new libm version is published.</p>
<p>Basically <code>unstable-public-internals</code> is only needed for round_ties_even</p>
</blockquote>



<a name="566449958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566449958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566449958">(Jan 05 2026 at 22:42)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2662990005">PR review comment</a>.</p>



<a name="566450213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566450213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566450213">(Jan 05 2026 at 22:44)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566450944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566450944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566450944">(Jan 05 2026 at 22:51)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566451080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566451080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566451080">(Jan 05 2026 at 22:52)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628665709">PR review</a>.</p>



<a name="566451086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566451086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566451086">(Jan 05 2026 at 22:52)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663021484">PR review comment</a>:</p>
<blockquote>
<p>reverted</p>
</blockquote>



<a name="566451740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566451740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566451740">(Jan 05 2026 at 22:58)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566451858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566451858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566451858">(Jan 05 2026 at 22:59)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628677236">PR review</a>.</p>



<a name="566451859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Support%20for%20no_std%20in%20cranelift_codegen/near/566451859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Support.20for.20no_std.20in.20cranelift_codegen.html#566451859">(Jan 05 2026 at 22:59)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663032716">PR review comment</a>:</p>
<blockquote>
<p>I updated it and added a comment explaining why it wasn't changed</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>