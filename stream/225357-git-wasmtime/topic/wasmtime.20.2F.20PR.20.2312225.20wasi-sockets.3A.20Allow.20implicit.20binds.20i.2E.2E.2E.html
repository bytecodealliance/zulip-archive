<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12225 wasi-sockets: Allow implicit binds i... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html">wasmtime / PR #12225 wasi-sockets: Allow implicit binds i...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="565596969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/565596969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#565596969">(Dec 28 2025 at 21:48)</a>:</h4>
<p>badeend opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a> from <code>badeend:implicit-binds</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>In 0.2, implicit binds were explicitly forbidden, because that would bypass the concept of network handles.<br>
0.3 doesn't have network handles and sockets are allowed to perform implicit binds again. This affects:</p>
<ul>
<li><code>tcp-socket::listen</code> (documented <a href="https://github.com/WebAssembly/WASI/blob/b7ef60b50d95f9a56ee02f3f4c096a3f902d7a17/proposals/sockets/wit-0.3.0-draft/types.wit#L229-L230">here</a>)</li>
<li><code>udp-socket::connect</code> (documented <a href="https://github.com/WebAssembly/WASI/blob/b7ef60b50d95f9a56ee02f3f4c096a3f902d7a17/proposals/sockets/wit-0.3.0-draft/types.wit#L542-L544">here</a>)</li>
<li><code>udp-socket::send</code></li>
</ul>
<p>Eventually, this will also allow us to remove the double bookkeeping <a href="https://github.com/WebAssembly/wasi-libc/blob/98f9a6adf3bfbf5090e6042283a6a42f13c734af/libc-bottom-half/sources/wasip2_udp.c#L266-L272">like this</a> from wasi-libc.</p>
</blockquote>



<a name="565596970"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/565596970" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#565596970">(Dec 28 2025 at 21:48)</a>:</h4>
<p><strong>badeend</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers">wasmtime-wasi-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<a name="565596971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/565596971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#565596971">(Dec 28 2025 at 21:48)</a>:</h4>
<p><strong>badeend</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<a name="565596973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/565596973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#565596973">(Dec 28 2025 at 21:48)</a>:</h4>
<p><strong>badeend</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<a name="565597191"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/565597191" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#565597191">(Dec 28 2025 at 21:54)</a>:</h4>
<p>badeend updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<a name="566378521"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/566378521" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#566378521">(Jan 05 2026 at 15:22)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12225#pullrequestreview-3627283576">PR review</a>:</p>
<blockquote>
<p>Thanks for the comprehensive tests and the implementation here, much appreciated!</p>
</blockquote>



<a name="566437379"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/566437379" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#566437379">(Jan 05 2026 at 20:57)</a>:</h4>
<p>badeend updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<a name="566437784"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/566437784" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#566437784">(Jan 05 2026 at 21:00)</a>:</h4>
<p>badeend updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<a name="566440151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/566440151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#566440151">(Jan 05 2026 at 21:18)</a>:</h4>
<p>badeend <a href="https://github.com/bytecodealliance/wasmtime/pull/12225#issuecomment-3712120298">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>:</p>
<blockquote>
<p>Interesting. I was under the impression that implicit bind was a well-known universal behavior, but after some more research it appears to be a bit more nuanced than I thought. I've added a comment in the code with my findings.</p>
<p>But practically, <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/20720044828/job/59481090812">Linux</a> &amp; <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/20720044828/job/59481090855">MacOS</a> both successfully ran to completion with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="n">p3</span><span class="p">::</span><span class="n">p3_sockets_tcp_listen</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
</code></pre></div>
<p>So they perform an implicit bind as expected (but not clearly documented). I assume this behavior extrapolates to other *BSD flavors.</p>
<p>But apparently, Windows _requires_ <code>bind</code> to be called before <code>listen</code>. To take away any potential platform-specific differences, I've updated the code to always perform the "implicit" bind ourselves in case the socket wasn't explicitly bound by the guest.</p>
<p>Assuming this actually fixes the CI problems, I'll open a PR for a spec change to add a clarification on the <code>listen</code> method.</p>
<p>@alexcrichton Could you review <a href="https://github.com/bytecodealliance/wasmtime/pull/12225/commits/b9668c6c7be2184f584aa26ae960ae389bd5e658">the changes I just added</a>?</p>
</blockquote>



<a name="566441594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/566441594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#566441594">(Jan 05 2026 at 21:29)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/12225#issuecomment-3712151211">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>:</p>
<blockquote>
<p>Sounds right to me yeah, and thanks for investigating!</p>
</blockquote>



<a name="566444351"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312225%20wasi-sockets%3A%20Allow%20implicit%20binds%20i.../near/566444351" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312225.20wasi-sockets.3A.20Allow.20implicit.20binds.20i.2E.2E.2E.html#566444351">(Jan 05 2026 at 21:52)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12225">PR #12225</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>