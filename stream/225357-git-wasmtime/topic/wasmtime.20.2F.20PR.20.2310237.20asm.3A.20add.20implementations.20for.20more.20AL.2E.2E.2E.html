<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10237 asm: add implementations for more AL... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html">wasmtime / PR #10237 asm: add implementations for more AL...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="499836975"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499836975" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499836975">(Feb 14 2025 at 21:50)</a>:</h4>
<p>abrown opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a> from <code>abrown:assembler-alurmir-again</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This adds DSL definitions in the assembler _and_ uses the new instructions for ISLE lowering for the following instructions:</p>
<ul>
<li><code>add</code></li>
<li><code>adc</code></li>
<li><code>or</code></li>
<li><code>sub</code></li>
<li><code>sbb</code></li>
<li><code>xor</code></li>
</ul>
<p>The original <code>AluRmiROpcode</code> variants are not yet gone; perhaps in a future pass.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="499836979"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499836979" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499836979">(Feb 14 2025 at 21:50)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499836980"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499836980" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499836980">(Feb 14 2025 at 21:50)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499837186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499837186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499837186">(Feb 14 2025 at 21:51)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499839252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499839252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499839252">(Feb 14 2025 at 22:04)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#pullrequestreview-2618888417">PR review</a>:</p>
<blockquote>
<p>Looks good, thanks!</p>
</blockquote>



<a name="499839255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499839255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499839255">(Feb 14 2025 at 22:04)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#discussion_r1956767745">PR review comment</a>:</p>
<blockquote>
<p>Should we <code>assert_eq!(rex.digit, None)</code> here?</p>
</blockquote>



<a name="499841706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499841706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499841706">(Feb 14 2025 at 22:22)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#pullrequestreview-2618909215">PR review</a>.</p>



<a name="499841719"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499841719" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499841719">(Feb 14 2025 at 22:22)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#discussion_r1956780909">PR review comment</a>:</p>
<blockquote>
<p>Yeah, good point.</p>
</blockquote>



<a name="499842067"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499842067" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499842067">(Feb 14 2025 at 22:24)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499845257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499845257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499845257">(Feb 14 2025 at 22:48)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499845259"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499845259" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499845259">(Feb 14 2025 at 22:48)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499845260"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499845260" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499845260">(Feb 14 2025 at 22:48)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499845731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499845731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499845731">(Feb 14 2025 at 22:52)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#issuecomment-2660424918">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>:</p>
<blockquote>
<p>@cfallin, you might want to take another glance at 9b8aecb; it looks like we're emitting a slightly longer encoding somewhere? Not sure if that's ok...</p>
</blockquote>



<a name="499845777"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499845777" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499845777">(Feb 14 2025 at 22:52)</a>:</h4>
<p><strong>abrown</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499853305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499853305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499853305">(Feb 14 2025 at 23:52)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<a name="499853550"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499853550" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499853550">(Feb 14 2025 at 23:54)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#issuecomment-2660527774">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>:</p>
<blockquote>
<p>Ok, looking into this more, we had some extra 8-bit lowering rules up in <code>cranelift-codegen</code> that I hadn't ported to the new assembler--no new instructions needed, just some extra ISLE rules. This undoes any extra bytes added in prior disassembly tests and should match what we had in <code>cranelift-codegen</code> previously.</p>
</blockquote>



<a name="499853924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499853924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499853924">(Feb 14 2025 at 23:57)</a>:</h4>
<p>abrown edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#issuecomment-2660527774">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>:</p>
<blockquote>
<p>Ok, looking into this more, we had some extra 8-bit lowering rules up in <code>cranelift-codegen</code> that I hadn't ported to the new assembler--no new instructions needed, just some extra ISLE rules. aec34e1 undoes any extra bytes added in prior disassembly tests and should match what we had in <code>cranelift-codegen</code> previously.</p>
</blockquote>



<a name="499868080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499868080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499868080">(Feb 15 2025 at 02:18)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/10237#issuecomment-2660637431">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>:</p>
<blockquote>
<p>Updates look good -- thanks for tracking down that divergence!</p>
</blockquote>



<a name="499870079"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310237%20asm%3A%20add%20implementations%20for%20more%20AL.../near/499870079" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310237.20asm.3A.20add.20implementations.20for.20more.20AL.2E.2E.2E.html#499870079">(Feb 15 2025 at 02:39)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10237">PR #10237</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>