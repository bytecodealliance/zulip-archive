<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12222 Partial support for no_std in cranel... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html">wasmtime / PR #12222 Partial support for no_std in cranel...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="566451918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566451918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566451918">(Jan 05 2026 at 23:00)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566452022"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452022" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452022">(Jan 05 2026 at 23:00)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663034546">PR review comment</a>:</p>
<blockquote>
<p><a href="https://github.com/rust-lang/compiler-builtins/pull/935">https://github.com/rust-lang/compiler-builtins/pull/935</a></p>
</blockquote>



<a name="566452023"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452023" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452023">(Jan 05 2026 at 23:00)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628679030">PR review</a>.</p>



<a name="566452044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452044">(Jan 05 2026 at 23:01)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663034546">PR review comment</a>.</p>



<a name="566452078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452078">(Jan 05 2026 at 23:01)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[ ] floating point issues</li>
<li>[x] FxHashMap</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[x] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="566452086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452086">(Jan 05 2026 at 23:01)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[ ] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[x] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="566452092"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452092" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452092">(Jan 05 2026 at 23:01)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Closes #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[ ] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[ ] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="566452584"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566452584" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566452584">(Jan 05 2026 at 23:04)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Used to close #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[ ] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[ ] CI</li>
<li>[ ] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="566455334"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566455334" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566455334">(Jan 05 2026 at 23:31)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628736789">PR review</a>.</p>



<a name="566455335"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566455335" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566455335">(Jan 05 2026 at 23:31)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663083186">PR review comment</a>:</p>
<blockquote>
<p>As a heads up, I've sent <a href="https://github.com/bytecodealliance/regalloc2/pull/250">https://github.com/bytecodealliance/regalloc2/pull/250</a> which would obsolete this, but this is fine to leave as-is in the meantime.</p>
</blockquote>



<a name="566455382"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566455382" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566455382">(Jan 05 2026 at 23:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628747962">PR review</a>.</p>



<a name="566455383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566455383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566455383">(Jan 05 2026 at 23:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663093681">PR review comment</a>:</p>
<blockquote>
<p>cc @cfallin should this perhaps <code>continue</code> to skip this value? Or <code>panic!</code> since this should be unreachable? Or is 0 ok to leave in?</p>
</blockquote>



<a name="566455483"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566455483" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566455483">(Jan 05 2026 at 23:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3628749877">PR review</a>.</p>



<a name="566455485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566455485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566455485">(Jan 05 2026 at 23:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663095874">PR review comment</a>:</p>
<blockquote>
<p>We unfortunately can't use git deps in Wasmtime for published crates, and we can't land dependencies on internal features, even if temporary, in case that ends up accidentally making its way to a release branch. Leaving as-is is ok for now, but it might be possible to do some macro/float trickery to avoid blocking on a compiler-builtins update for this</p>
</blockquote>



<a name="566541241"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566541241" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566541241">(Jan 06 2026 at 13:14)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3630851994">PR review</a>.</p>



<a name="566541242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566541242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566541242">(Jan 06 2026 at 13:14)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2664887046">PR review comment</a>:</p>
<blockquote>
<p>Yes, if we don't have <code>unwind</code> then we don't have the appropriate metadata to allow a native debugger to interpret frames anyway, so we should <code>continue</code>. I'm a bit curious how this built in a non-<code>unwind</code> build before -- or was that broken because <code>std</code> always enabled <code>unwind</code>?</p>
</blockquote>



<a name="566541430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566541430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566541430">(Jan 06 2026 at 13:15)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3630855353">PR review</a>.</p>



<a name="566541431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566541431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566541431">(Jan 06 2026 at 13:15)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2664890038">PR review comment</a>:</p>
<blockquote>
<p>It was broken</p>
</blockquote>



<a name="566693834"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566693834" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566693834">(Jan 07 2026 at 09:39)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3634060984">PR review</a>.</p>



<a name="566693836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566693836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566693836">(Jan 07 2026 at 09:39)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2667718117">PR review comment</a>:</p>
<blockquote>
<p>@the-ssd Updating to <code>version = "0.13.4"</code> should now pull in Alex's change.</p>
</blockquote>



<a name="566693898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566693898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566693898">(Jan 07 2026 at 09:40)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2667719464">PR review comment</a>:</p>
<blockquote>
<p>@the-ssd OK, yep, let's do a <code>continue</code> in this case.</p>
</blockquote>



<a name="566693900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566693900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566693900">(Jan 07 2026 at 09:40)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3634062291">PR review</a>.</p>



<a name="566695876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566695876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566695876">(Jan 07 2026 at 09:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3634103822">PR review</a>.</p>



<a name="566695877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566695877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566695877">(Jan 07 2026 at 09:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2667757407">PR review comment</a>:</p>
<blockquote>
<p>@the-ssd if you're willing to do a little more hacking, <a href="https://github.com/bytecodealliance/wasmtime/pull/8489#issuecomment-2106379885">jameysharp's idea here</a> is probably the best way to remove the need to cache the <code>MachineEnv</code> at all (in a separate set of PRs of course). It would involve a change to RA2's API then an update to Cranelift to use statically-defined <code>MachineEnv</code>s. I have specific ideas on how to consume a <code>PRegSet</code> for the register iterator on the RA2 side if you're interested -- I'll file an issue over there.</p>
</blockquote>



<a name="566697749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566697749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566697749">(Jan 07 2026 at 10:00)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3634138614">PR review</a>.</p>



<a name="566697751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566697751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566697751">(Jan 07 2026 at 10:00)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2667789886">PR review comment</a>:</p>
<blockquote>
<p>I wrote up <a href="https://github.com/bytecodealliance/regalloc2/issues/252">bytecodealliance/regalloc2#252</a> for this.</p>
</blockquote>



<a name="566740077"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566740077" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566740077">(Jan 07 2026 at 14:00)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2663034546">PR review comment</a>.</p>



<a name="566740788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566740788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566740788">(Jan 07 2026 at 14:03)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566740805"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566740805" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566740805">(Jan 07 2026 at 14:03)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3635052342">PR review</a>.</p>



<a name="566740806"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566740806" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566740806">(Jan 07 2026 at 14:03)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2668590275">PR review comment</a>:</p>
<blockquote>
<p>updated</p>
</blockquote>



<a name="566741337"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566741337" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566741337">(Jan 07 2026 at 14:06)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3635061979">PR review</a>.</p>



<a name="566741338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566741338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566741338">(Jan 07 2026 at 14:06)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2668598476">PR review comment</a>:</p>
<blockquote>
<p>I've removed that feature and instead wrote this</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// TODO: when libm v0.2.16 is published line below can be used instead</span>
<span class="c1">// Self::with_float(Libm::&lt;$float_ty&gt;::roundeven(self.$as_float()))</span>
<span class="bp">Self</span><span class="p">::</span><span class="n">with_float</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="cp">$as_float</span><span class="p">().</span><span class="n">round_ties_even</span><span class="p">())</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="566741393"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566741393" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566741393">(Jan 07 2026 at 14:06)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566743019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566743019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566743019">(Jan 07 2026 at 14:14)</a>:</h4>
<p>the-ssd updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566744364"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566744364" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566744364">(Jan 07 2026 at 14:21)</a>:</h4>
<p>the-ssd submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3635123635">PR review</a>.</p>



<a name="566744366"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566744366" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566744366">(Jan 07 2026 at 14:21)</a>:</h4>
<p>the-ssd created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2668649142">PR review comment</a>:</p>
<blockquote>
<p>Can you check if I did it correctly?<br>
It just looks a bit wrong, like there has to be a better solution</p>
</blockquote>



<a name="566772513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566772513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566772513">(Jan 07 2026 at 16:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566772556"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566772556" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566772556">(Jan 07 2026 at 16:26)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#discussion_r2669136680">PR review comment</a>:</p>
<blockquote>
<p>Looks good to me!</p>
</blockquote>



<a name="566772557"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566772557" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566772557">(Jan 07 2026 at 16:26)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#pullrequestreview-3635695560">PR review</a>.</p>



<a name="566772598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566772598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566772598">(Jan 07 2026 at 16:26)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="566780926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/566780926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#566780926">(Jan 07 2026 at 17:03)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>.</p>



<a name="569845438"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/569845438" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#569845438">(Jan 24 2026 at 07:46)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Used to close #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[x] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[ ] CI</li>
<li>[x] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="569845439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/569845439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#569845439">(Jan 24 2026 at 07:46)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Used to close #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[x] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[ ] CI</li>
<li>[x] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="569845443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/569845443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#569845443">(Jan 24 2026 at 07:46)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Used to close #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[x] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[ ] CI</li>
<li>[x] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="569845445"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/569845445" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#569845445">(Jan 24 2026 at 07:46)</a>:</h4>
<p>the-ssd edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<p>Used to close #1158, allows for cranelift to be used in a no_std environment, like a kernel.</p>
<p>There is already #9007, which stalled.</p>
<p>And I am at a point I think it makes sense to ask someone what do you want to be done about FxHashMap and OnceLock. There are alternative crates that implement it, like <a href="https://github.com/phil-opp/once_cell_no_std">this one (also has a comparison chart)</a>.</p>
<p>What is left to do:</p>
<ul>
<li>[x] isle codegen generates code that depends on no_std, solved in the previous PR (<a href="https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94">https://github.com/bytecodealliance/wasmtime/pull/9007/files#diff-0496ab91e0634653bd3d4295c7aa90e3f06b0c5f462332db0997a22f294cbf94</a>)</li>
<li>[x] separate PRs for: cranelift_assembler_x86 (#12235), moving large parts to core and alloc (#12237), and isle (#12236)</li>
<li>[x] FxHashMap</li>
<li>[x] floating point issues</li>
<li>[ ]  OnceLock (sort of)</li>
<li>[ ] CI</li>
<li>[x] libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">https://github.com/rust-lang/compiler-builtins/pull/1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>



<a name="571157848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/571157848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#571157848">(Jan 31 2026 at 03:19)</a>:</h4>
<p>tgross35 <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3827326662">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<blockquote>
<ul>
<li></li>
<li>
<p>[x]  libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">Fix a typo in <code>libm::Libm::roundeven</code> rust-lang/compiler-builtins#1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></p>
</li>
</ul>
</blockquote>
<p>FYI since I noticed the crosslink, this was released in <a href="https://github.com/rust-lang/compiler-builtins/releases/tag/libm-v0.2.16">https://github.com/rust-lang/compiler-builtins/releases/tag/libm-v0.2.16</a></p>
</blockquote>



<a name="571157857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312222%20Partial%20support%20for%20no_std%20in%20cranel.../near/571157857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312222.20Partial.20support.20for.20no_std.20in.20cranel.2E.2E.2E.html#571157857">(Jan 31 2026 at 03:19)</a>:</h4>
<p>tgross35 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12222#issuecomment-3827326662">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12222">PR #12222</a>:</p>
<blockquote>
<blockquote>
<ul>
<li>[x]  libm: roundeven has a typo in it's implementation <a href="https://github.com/rust-lang/compiler-builtins/pull/1053">Fix a typo in <code>libm::Libm::roundeven</code> rust-lang/compiler-builtins#1053</a>, so a hack is used, waiting for libm to be published to <a href="http://crates.io">crates.io</a></li>
</ul>
</blockquote>
<p>FYI since I noticed the crosslink, this was released in <a href="https://github.com/rust-lang/compiler-builtins/releases/tag/libm-v0.2.16">https://github.com/rust-lang/compiler-builtins/releases/tag/libm-v0.2.16</a></p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>