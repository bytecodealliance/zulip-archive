<html>
<head><meta charset="utf-8"><title>wasmtime / issue #10279 musl-c-api Version of Library Not... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html">wasmtime / issue #10279 musl-c-api Version of Library Not...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="501411174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310279%20musl-c-api%20Version%20of%20Library%20Not.../near/501411174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html#501411174">(Feb 23 2025 at 21:19)</a>:</h4>
<p><a href="https://github.com/cernydav">cernydav</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10279">Issue #10279</a>.</p>



<a name="501411175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310279%20musl-c-api%20Version%20of%20Library%20Not.../near/501411175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html#501411175">(Feb 23 2025 at 21:19)</a>:</h4>
<p>cernydav opened <a href="https://github.com/bytecodealliance/wasmtime/issues/10279">issue #10279</a>:</p>
<blockquote>
<p>TL;DR<br>
Starting with Wasmtime version 27.0.0, the musl-c-api build fails on Alpine Linux, causing a memory panic error. The last known working version is 26.0.1.</p>
<p><strong>Steps to Reproduce</strong><br>
Install Wasmtime using Alpine's edge testing repository:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">FROM</span><span class="w">  </span><span class="n">mcr</span><span class="p">.</span><span class="n">microsoft</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dotnet</span><span class="o">/</span><span class="n">aspnet</span><span class="p">:</span><span class="mf">8.0</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">base</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">apk</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">--</span><span class="n">update</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="o">--</span><span class="n">repository</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="c1">//dl-cdn.alpinelinux.org/alpine/edge/testing/ libwasmtime #not working V30</span>
</code></pre></div>
<p>Invoke Wasmtime from your code: For instance, use the dotnet-opa-wasm library sample (see <a href="https://github.com/christophwille/dotnet-opa-wasm/blob/master/src/Opa.Wasm.ConsoleSample/Program.cs">dotnet-opa-wasm sample</a>).</p>
<p>Encounter the error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">types</span><span class="o">/</span><span class="n">memory</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">89</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span>
<span class="nc">called</span><span class="w"> </span><span class="err">`</span><span class="nb">Result</span><span class="p">::</span><span class="n">unwrap</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="nb">Err</span><span class="err">`</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">shared</span><span class="w"> </span><span class="n">memories</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">size</span>
</code></pre></div>
<h3>Test Case</h3>
<p>The musl-c-api build of the Wasmtime library, when deployed on Alpine Linux distributions, begins to fail starting with version 27.0.0. The last version that worked correctly is 26.0.1. This issue likely stems from a breaking change in newer versions that the musl environment on Alpine cannot handle.</p>
<h4>Key Observations:</h4>
<p><strong>Alpine Linux vs. Debian:</strong></p>
<ul>
<li>
<p>Alpine Linux: Requires a statically linked musl version of the library, which fails from version 27.0.0 onward.</p>
</li>
<li>
<p>Debian-based distributions: Work normally with the latest version because they use the dynamically linked version of Wasmtime.</p>
</li>
</ul>
<p><strong>Memory Panic Error:</strong></p>
<ul>
<li>The application crashes with an error indicating that "shared memories must have a maximum size" due to an unhandled Err value when unwrap() is called.</li>
</ul>
<p><strong>Configuration Settings Failure:</strong></p>
<ul>
<li>Attempts to set memory limits via code (e.g., using the opa-wasm library) also fail. For example, invoking wasmtime_config_static_memory_maximum_size_set results in:</li>
</ul>
<p><code>System.EntryPointNotFoundException: Unable to find an entry point named 'wasmtime_config_static_memory_maximum_size_set' in shared library 'wasmtime'.
</code></p>
<p><strong>Edge Repository Issue:</strong></p>
<ul>
<li>The version available from Alpine’s edge testing repository (e.g., version 30) exhibits this issue, reinforcing the need to revert to a previously working version.</li>
</ul>
<h3>Expected Results</h3>
<p>The application should run without crashing, with Wasmtime functioning as expected.</p>
<h3>Actual Results</h3>
<p>Error Stack Trace (Version 29.0.0)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">422</span><span class="w">    </span><span class="n">Loaded</span><span class="w"> </span><span class="o">'/</span><span class="n">app</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">Debug</span><span class="o">/</span><span class="n">net8</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="n">Opa</span><span class="p">.</span><span class="n">Wasm</span><span class="p">.</span><span class="n">dll</span><span class="o">'</span><span class="p">.</span><span class="w"> </span><span class="n">Skipped</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="n">symbols</span><span class="p">.</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">optimized</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">debugger</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="o">'</span><span class="na">Just</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="n">Code</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">types</span><span class="o">/</span><span class="n">memory</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">89</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">called</span><span class="w"> </span><span class="err">`</span><span class="nb">Result</span><span class="p">::</span><span class="n">unwrap</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="nb">Err</span><span class="err">`</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">shared</span><span class="w"> </span><span class="n">memories</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">size</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">Stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="p">::</span><span class="n">msg</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">0</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a5a0a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">BacktraceLock</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">DisplayBacktrace</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">Display</span><span class="o">&gt;</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">h4e2ed00da9626c89</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">1</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9cac33</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">write</span><span class="p">::</span><span class="n">h1e2817ad6effb3a8</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">2</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a2233</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">io</span><span class="p">::</span><span class="n">Write</span><span class="p">::</span><span class="n">write_fmt</span><span class="p">::</span><span class="n">h2248a88e59fb6993</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">3</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a5852</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">BacktraceLock</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">he72565f9e0b2846f</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">4</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a6887</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">default_hook</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">hd88bc1072bff8016</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">5</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a66cd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">default_hook</span><span class="p">::</span><span class="n">h2975aaf8fe1bdbb2</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">6</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a6e57</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">rust_panic_with_hook</span><span class="p">::</span><span class="n">h54f358af0528b0ac</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">7</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a6cea</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">begin_panic_handler</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h8022c92830c406a8</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">8</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a5ee9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">__rust_end_short_backtrace</span><span class="p">::</span><span class="n">h4b072f3484fb4e42</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">9</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a697c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">rust_begin_unwind</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">10</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e0622f0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">panic_fmt</span><span class="p">::</span><span class="n">h8143c7df49e27964</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">11</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e062736</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="n">unwrap_failed</span><span class="p">::</span><span class="n">h77d9a525433959c1</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">12</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e090d6e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_memorytype_new</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">13</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f89f181d699</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">267</span><span class="w">    </span><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">'</span><span class="na">dotnet</span><span class="o">'</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="mh">0x0</span><span class="p">).</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<ul>
<li>Any newer musl-c-api newer from 26.0.0</li>
<li><a href="http://mcr.microsoft.com/dotnet/aspnet:8.0-alpine">mcr.microsoft.com/dotnet/aspnet:8.0-alpine</a></li>
</ul>
<h3>Extra Info</h3>
<p>Installing and testing other versions can be done by following definition </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">#</span><span class="w"> </span><span class="n">RUN</span><span class="w"> </span><span class="n">apk</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">--</span><span class="n">update</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="o">--</span><span class="n">repository</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="c1">//dl-cdn.alpinelinux.org/alpine/edge/testing/ libwasmtime  # Not working: V30</span>
<span class="p">#</span><span class="w"> </span><span class="n">ARG</span><span class="w"> </span><span class="n">WASMTIME_VERSION</span><span class="o">=</span><span class="mf">30.0.1</span>
<span class="p">#</span><span class="w"> </span><span class="n">ARG</span><span class="w"> </span><span class="n">WASMTIME_VERSION</span><span class="o">=</span><span class="mf">27.0.0</span>
<span class="n">ARG</span><span class="w"> </span><span class="n">WASMTIME_VERSION</span><span class="o">=</span><span class="mf">26.0.1</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="n">Last</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">version</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//github.com/bytecodealliance/wasmtime/releases/download/v${WASMTIME_VERSION}/wasmtime-v${WASMTIME_VERSION}-x86_64-musl-c-api.tar.xz</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xJvf</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">v</span><span class="cp">$</span><span class="p">{</span><span class="n">WASMTIME_VERSION</span><span class="p">}</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">musl</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">xz</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">v</span><span class="cp">$</span><span class="p">{</span><span class="n">WASMTIME_VERSION</span><span class="p">}</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">musl</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="p">.</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">v</span><span class="cp">$</span><span class="p">{</span><span class="n">WASMTIME_VERSION</span><span class="p">}</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">musl</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="p">.</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span>
</code></pre></div>
</blockquote>



<a name="501581560"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310279%20musl-c-api%20Version%20of%20Library%20Not.../near/501581560" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html#501581560">(Feb 24 2025 at 15:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10279#issuecomment-2678917231">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10279">issue #10279</a>:</p>
<blockquote>
<p>Would you be able to clarify how you're using the Wasmtime C API? Is it through <code>wasmtime-dotnet</code> for example? If so, that repository looks like it hasn't been updated past 22.0.0 and I believe C API signatures have changed in the meantime which might be why you're seeing this. If you're not using <code>wasmtime-dotnet</code> this may mean that the ABI signatures are being mismatched though?</p>
</blockquote>



<a name="501645197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310279%20musl-c-api%20Version%20of%20Library%20Not.../near/501645197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html#501645197">(Feb 24 2025 at 20:49)</a>:</h4>
<p>cernydav <a href="https://github.com/bytecodealliance/wasmtime/issues/10279#issuecomment-2679613303">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10279">issue #10279</a>:</p>
<blockquote>
<p>Yes, that is correct. I’m using it through Opa.Wasm, which depends on wasmtime-dotnet. I believe the proper solution is to first fix this library so that it allows setting the required memory limits. I’m reporting this issue for two reasons. First, there appears to be a breaking change in the behavior of the current version of the wasmtime library; and second, this issue might need to be escalated further up the dependency chain, possibly even to the Opa.Wasm documentation.</p>
<p>![Image](<a href="https://github.com/user-attachments/assets/b7d7d97c-2d79-4386-928f-ce987a098c2b">https://github.com/user-attachments/assets/b7d7d97c-2d79-4386-928f-ce987a098c2b</a>)</p>
</blockquote>



<a name="501648562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310279%20musl-c-api%20Version%20of%20Library%20Not.../near/501648562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html#501648562">(Feb 24 2025 at 21:07)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/10279">issue #10279</a>:</p>
<blockquote>
<p>TL;DR<br>
Starting with Wasmtime version 27.0.0, the musl-c-api build fails on Alpine Linux, causing a memory panic error. The last known working version is 26.0.1.</p>
<p><strong>Steps to Reproduce</strong><br>
Install Wasmtime using Alpine's edge testing repository:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">FROM</span><span class="w">  </span><span class="n">mcr</span><span class="p">.</span><span class="n">microsoft</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">dotnet</span><span class="o">/</span><span class="n">aspnet</span><span class="p">:</span><span class="mf">8.0</span><span class="o">-</span><span class="n">alpine</span><span class="w"> </span><span class="n">AS</span><span class="w"> </span><span class="n">base</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">apk</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">--</span><span class="n">update</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="o">--</span><span class="n">repository</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="c1">//dl-cdn.alpinelinux.org/alpine/edge/testing/ libwasmtime #not working V30</span>
</code></pre></div>
<p>Invoke Wasmtime from your code: For instance, use the dotnet-opa-wasm library sample (see <a href="https://github.com/christophwille/dotnet-opa-wasm/blob/master/src/Opa.Wasm.ConsoleSample/Program.cs">dotnet-opa-wasm sample</a>).</p>
<p>Encounter the error:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">types</span><span class="o">/</span><span class="n">memory</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">89</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span>
<span class="nc">called</span><span class="w"> </span><span class="err">`</span><span class="nb">Result</span><span class="p">::</span><span class="n">unwrap</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="nb">Err</span><span class="err">`</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">shared</span><span class="w"> </span><span class="n">memories</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">size</span>
</code></pre></div>
<h3>Test Case</h3>
<p>The musl-c-api build of the Wasmtime library, when deployed on Alpine Linux distributions, begins to fail starting with version 27.0.0. The last version that worked correctly is 26.0.1. This issue likely stems from a breaking change in newer versions that the musl environment on Alpine cannot handle.</p>
<h4>Key Observations:</h4>
<p><strong>Alpine Linux vs. Debian:</strong></p>
<ul>
<li>
<p>Alpine Linux: Requires a statically linked musl version of the library, which fails from version 27.0.0 onward.</p>
</li>
<li>
<p>Debian-based distributions: Work normally with the latest version because they use the dynamically linked version of Wasmtime.</p>
</li>
</ul>
<p><strong>Memory Panic Error:</strong></p>
<ul>
<li>The application crashes with an error indicating that "shared memories must have a maximum size" due to an unhandled Err value when unwrap() is called.</li>
</ul>
<p><strong>Configuration Settings Failure:</strong></p>
<ul>
<li>Attempts to set memory limits via code (e.g., using the opa-wasm library) also fail. For example, invoking wasmtime_config_static_memory_maximum_size_set results in:</li>
</ul>
<p><code>System.EntryPointNotFoundException: Unable to find an entry point named 'wasmtime_config_static_memory_maximum_size_set' in shared library 'wasmtime'.
</code></p>
<p><strong>Edge Repository Issue:</strong></p>
<ul>
<li>The version available from Alpine’s edge testing repository (e.g., version 30) exhibits this issue, reinforcing the need to revert to a previously working version.</li>
</ul>
<h3>Expected Results</h3>
<p>The application should run without crashing, with Wasmtime functioning as expected.</p>
<h3>Actual Results</h3>
<p>Error Stack Trace (Version 29.0.0)</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">422</span><span class="w">    </span><span class="n">Loaded</span><span class="w"> </span><span class="o">'/</span><span class="n">app</span><span class="o">/</span><span class="n">bin</span><span class="o">/</span><span class="n">Debug</span><span class="o">/</span><span class="n">net8</span><span class="p">.</span><span class="mi">0</span><span class="o">/</span><span class="n">Opa</span><span class="p">.</span><span class="n">Wasm</span><span class="p">.</span><span class="n">dll</span><span class="o">'</span><span class="p">.</span><span class="w"> </span><span class="n">Skipped</span><span class="w"> </span><span class="n">loading</span><span class="w"> </span><span class="n">symbols</span><span class="p">.</span><span class="w"> </span><span class="n">Module</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">optimized</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">debugger</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="o">'</span><span class="na">Just</span><span class="w"> </span><span class="n">My</span><span class="w"> </span><span class="n">Code</span><span class="o">'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">enabled</span><span class="p">.</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">thread</span><span class="w"> </span><span class="o">'&lt;</span><span class="n">unnamed</span><span class="o">&gt;'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">types</span><span class="o">/</span><span class="n">memory</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">89</span><span class="p">:</span><span class="mi">14</span><span class="p">:</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">called</span><span class="w"> </span><span class="err">`</span><span class="nb">Result</span><span class="p">::</span><span class="n">unwrap</span><span class="p">()</span><span class="err">`</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="err">`</span><span class="nb">Err</span><span class="err">`</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="nc">shared</span><span class="w"> </span><span class="n">memories</span><span class="w"> </span><span class="n">must</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">maximum</span><span class="w"> </span><span class="n">size</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">Stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">anyhow</span><span class="p">::</span><span class="n">error</span><span class="p">::</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">anyhow</span><span class="p">::</span><span class="n">Error</span><span class="o">&gt;</span><span class="p">::</span><span class="n">msg</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">    </span><span class="n">stack</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">0</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a5a0a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">BacktraceLock</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">DisplayBacktrace</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">Display</span><span class="o">&gt;</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">h4e2ed00da9626c89</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">1</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9cac33</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">write</span><span class="p">::</span><span class="n">h1e2817ad6effb3a8</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">2</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a2233</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">io</span><span class="p">::</span><span class="n">Write</span><span class="p">::</span><span class="n">write_fmt</span><span class="p">::</span><span class="n">h2248a88e59fb6993</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">3</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a5852</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">BacktraceLock</span><span class="p">::</span><span class="n">print</span><span class="p">::</span><span class="n">he72565f9e0b2846f</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">4</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a6887</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">default_hook</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">hd88bc1072bff8016</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">5</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a66cd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">default_hook</span><span class="p">::</span><span class="n">h2975aaf8fe1bdbb2</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">6</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a6e57</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">rust_panic_with_hook</span><span class="p">::</span><span class="n">h54f358af0528b0ac</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">7</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a6cea</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">begin_panic_handler</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h8022c92830c406a8</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">8</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a5ee9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">__rust_end_short_backtrace</span><span class="p">::</span><span class="n">h4b072f3484fb4e42</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">       </span><span class="mi">9</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e9a697c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">rust_begin_unwind</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">10</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e0622f0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">panicking</span><span class="p">::</span><span class="n">panic_fmt</span><span class="p">::</span><span class="n">h8143c7df49e27964</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">11</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e062736</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="n">unwrap_failed</span><span class="p">::</span><span class="n">h77d9a525433959c1</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">12</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f494e090d6e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_memorytype_new</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">55</span><span class="p">:</span><span class="mi">673</span><span class="w">      </span><span class="mi">13</span><span class="p">:</span><span class="w">     </span><span class="mh">0x7f89f181d699</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;</span>
<span class="mi">09</span><span class="p">:</span><span class="mi">52</span><span class="p">:</span><span class="mi">56</span><span class="p">:</span><span class="mi">267</span><span class="w">    </span><span class="n">The</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="o">'</span><span class="na">dotnet</span><span class="o">'</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="mh">0x0</span><span class="p">).</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<ul>
<li>Any newer musl-c-api newer from 26.0.0</li>
<li><a href="http://mcr.microsoft.com/dotnet/aspnet:8.0-alpine">mcr.microsoft.com/dotnet/aspnet:8.0-alpine</a></li>
</ul>
<h3>Extra Info</h3>
<p>Installing and testing other versions can be done by following definition </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">#</span><span class="w"> </span><span class="n">RUN</span><span class="w"> </span><span class="n">apk</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="o">--</span><span class="n">update</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">cache</span><span class="w"> </span><span class="o">--</span><span class="n">repository</span><span class="o">=</span><span class="n">http</span><span class="p">:</span><span class="c1">//dl-cdn.alpinelinux.org/alpine/edge/testing/ libwasmtime  # Not working: V30</span>
<span class="p">#</span><span class="w"> </span><span class="n">ARG</span><span class="w"> </span><span class="n">WASMTIME_VERSION</span><span class="o">=</span><span class="mf">30.0.1</span>
<span class="p">#</span><span class="w"> </span><span class="n">ARG</span><span class="w"> </span><span class="n">WASMTIME_VERSION</span><span class="o">=</span><span class="mf">27.0.0</span>
<span class="n">ARG</span><span class="w"> </span><span class="n">WASMTIME_VERSION</span><span class="o">=</span><span class="mf">26.0.1</span><span class="w">  </span><span class="p">#</span><span class="w"> </span><span class="n">Last</span><span class="w"> </span><span class="n">working</span><span class="w"> </span><span class="n">version</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">wget</span><span class="w"> </span><span class="n">https</span><span class="p">:</span><span class="c1">//github.com/bytecodealliance/wasmtime/releases/download/v${WASMTIME_VERSION}/wasmtime-v${WASMTIME_VERSION}-x86_64-musl-c-api.tar.xz</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">tar</span><span class="w"> </span><span class="o">-</span><span class="n">xJvf</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">v</span><span class="cp">$</span><span class="p">{</span><span class="n">WASMTIME_VERSION</span><span class="p">}</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">musl</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">xz</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">v</span><span class="cp">$</span><span class="p">{</span><span class="n">WASMTIME_VERSION</span><span class="p">}</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">musl</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">include</span><span class="o">/</span><span class="p">.</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">include</span>
<span class="n">RUN</span><span class="w"> </span><span class="n">cp</span><span class="w"> </span><span class="o">-</span><span class="n">r</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">v</span><span class="cp">$</span><span class="p">{</span><span class="n">WASMTIME_VERSION</span><span class="p">}</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">musl</span><span class="o">-</span><span class="n">c</span><span class="o">-</span><span class="n">api</span><span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="p">.</span><span class="w"> </span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">lib</span>
</code></pre></div>
</blockquote>



<a name="501648570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310279%20musl-c-api%20Version%20of%20Library%20Not.../near/501648570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310279.20musl-c-api.20Version.20of.20Library.20Not.2E.2E.2E.html#501648570">(Feb 24 2025 at 21:08)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10279#issuecomment-2679651454">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10279">issue #10279</a>:</p>
<blockquote>
<p>Ok in that case I think that this is probably best to open on the wasmtime-dotnet repository. I don't think there's anything to do in this repository of Wasmtime itself, and <a href="https://github.com/bytecodealliance/wasmtime-dotnet">wasmtime-dotnet</a> has all the integration bindings I believe you're using.</p>
<p>I'm not familiar enough with wasmtime-dotnet to say what the best fix is myself, if you open an issue on wasmtime-dotnet I suspect folks over there will know better.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>