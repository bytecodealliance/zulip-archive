<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11481  Remove unsoundness of widening stor... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html">wasmtime / PR #11481  Remove unsoundness of widening stor...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="535394239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535394239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535394239">(Aug 20 2025 at 21:47)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a> from <code>alexcrichton:remove-unsound-widening-borrows</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit removes preexisting unsoundness in Wasmtime where a<br>
<code>&amp;mut StoreOpaque</code> borrow was "widened" into encompassing the limiter on<br>
the <code>T</code> in <code>StoreInner&lt;T&gt;</code>, for example, by using the self-pointer<br>
located in an instance or the store. This fix is done by threading<br>
<code>&amp;mut StoreOpaque</code> as a parameter separately from a<br>
<code>StoreResourceLimiter</code>. This means that various callers now take a new<br>
<code>Option&lt;&amp;mut StoreResourceLimiter&lt;'_&gt;&gt;</code> parameter in various locations.</p>
<p>Closes <a href="https://github.com/bytecodealliance/wasmtime/issues/11409">https://github.com/bytecodealliance/wasmtime/issues/11409</a></p>
</blockquote>



<a name="535394241"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535394241" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535394241">(Aug 20 2025 at 21:47)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a>.</p>



<a name="535394242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535394242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535394242">(Aug 20 2025 at 21:47)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a>.</p>



<a name="535394280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535394280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535394280">(Aug 20 2025 at 21:47)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11481#issuecomment-3208181271">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a>:</p>
<blockquote>
<p>Currently built on <a href="https://github.com/bytecodealliance/wasmtime/pull/11480">https://github.com/bytecodealliance/wasmtime/pull/11480</a>, which is in turn built on <a href="https://github.com/bytecodealliance/wasmtime/pull/11470">https://github.com/bytecodealliance/wasmtime/pull/11470</a>, so the first three commits aren't part of this PR</p>
</blockquote>



<a name="535395920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535395920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535395920">(Aug 20 2025 at 22:02)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11481#pullrequestreview-3138373640">PR review</a>.</p>



<a name="535395921"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535395921" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535395921">(Aug 20 2025 at 22:02)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11481#discussion_r2289385420">PR review comment</a>:</p>
<blockquote>
<p>Why do we not need an <code>assert!(store.0.async_support())</code> here anymore?</p>
</blockquote>



<a name="535397338"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535397338" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535397338">(Aug 20 2025 at 22:13)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11481#pullrequestreview-3138424849">PR review</a>.</p>



<a name="535397339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535397339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535397339">(Aug 20 2025 at 22:13)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11481#discussion_r2289419004">PR review comment</a>:</p>
<blockquote>
<p>A good question! That's part of the previous commits and Nick was also curious <a href="https://github.com/bytecodealliance/wasmtime/pull/11470#discussion_r2288971332">here</a>, with some rationale in my response over there</p>
</blockquote>



<a name="535403040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535403040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535403040">(Aug 20 2025 at 23:15)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11481#pullrequestreview-3138513712">PR review</a>:</p>
<blockquote>
<p>Nice!</p>
</blockquote>



<a name="535411742"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535411742" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535411742">(Aug 21 2025 at 01:11)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a>.</p>



<a name="535411769"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535411769" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535411769">(Aug 21 2025 at 01:11)</a>:</h4>
<p>alexcrichton has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a>.</p>



<a name="535414306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311481%20%20Remove%20unsoundness%20of%20widening%20stor.../near/535414306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311481.20.20Remove.20unsoundness.20of.20widening.20stor.2E.2E.2E.html#535414306">(Aug 21 2025 at 01:45)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11481">PR #11481</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>