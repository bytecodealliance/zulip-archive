<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11850 Segfault with exceptions + single... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html">wasmtime / issue #11850 Segfault with exceptions + single...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="544766237"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/544766237" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#544766237">(Oct 14 2025 at 14:33)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Using Wasmtime 37.0.2 I get:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">exception_table</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span>
<span class="nc">Wasmtime</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">unwind</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">contexts</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">IOT</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>using <code>main</code> I get: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>My guess is that this is related to the single-pass register allocator, so cc @d-sonuga</p>
</blockquote>



<a name="544766239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/544766239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#544766239">(Oct 14 2025 at 14:33)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the fuzz-bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">Issue #11850</a>.</p>



<a name="544766240"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/544766240" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#544766240">(Oct 14 2025 at 14:33)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the cranelift:area:regalloc label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">Issue #11850</a>.</p>



<a name="544766242"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/544766242" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#544766242">(Oct 14 2025 at 14:33)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasm-proposal:exceptions label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">Issue #11850</a>.</p>



<a name="545006542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/545006542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#545006542">(Oct 15 2025 at 16:01)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3407201471">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Another example is:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oopt</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="p">,</span><span class="n">function</span><span class="o">-</span><span class="n">references</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">try_table</span><span class="p">.</span><span class="n">wast</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>When <code>-Oopt-level=0</code> is removed this yields:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="p">,</span><span class="n">function</span><span class="o">-</span><span class="n">references</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">try_table</span><span class="p">.</span><span class="n">wast</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">script</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">try_table</span><span class="p">.</span><span class="n">wast</span><span class="o">'</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">directive</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">try_table</span><span class="p">.</span><span class="n">wast</span><span class="p">:</span><span class="mi">302</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">result</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="k">match</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">expected</span><span class="w">                  </span><span class="mi">5</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mh">0x0000000000000005</span>
<span class="w">       </span><span class="n">actual</span><span class="w">                    </span><span class="mi">0</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mh">0x0000000000000000</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="553930564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553930564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553930564">(Nov 05 2025 at 18:11)</a>:</h4>
<p>d-sonuga <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3492666884">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Hey @alexcrichton, how do I run the fuzzer on macOS. I tried <code>cargo +nightly fuzz run wast_tests</code> but I get this OCaml-related build error: <code>failed to run custom build command for </code>wasm-spec-interpreter<code> and </code>Failed to build the OCaml library using 'make'.`<br>
Is there any OCaml-specific setup I need to do first?<br>
</p>
</blockquote>



<a name="553935746"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553935746" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553935746">(Nov 05 2025 at 18:36)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3492754449">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>That command's the one yeah. To disable the need for ocaml you can pass <code>--no-default-features</code> and I would also recommend passing <code>--sanitizer none</code> as it speeds up fuzzing by a fair bit too (and compilation!)</p>
</blockquote>



<a name="553956355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553956355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553956355">(Nov 05 2025 at 20:28)</a>:</h4>
<p>d-sonuga <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3493237271">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Thanks!<br>
But there's another issue: after running for a few seconds, it fails, but when I try to rerun the failed input, it passes, and I don't think this has anything to do with the allocator.<br>
</p>
</blockquote>



<a name="553956460"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553956460" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553956460">(Nov 05 2025 at 20:28)</a>:</h4>
<p>d-sonuga edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3493237271">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Thanks!<br>
But there's another issue: after running for a few seconds, it fails, but when I try to rerun the failed input, it passes, and I don't think this particular failure has anything to do with the allocator.<br>
</p>
</blockquote>



<a name="553957073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553957073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553957073">(Nov 05 2025 at 20:32)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3493260679">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Could you paste an example of what the failure looks like? For <code>wast_tests</code> I'm not aware of any failures like that. For <code>differential</code> I know of one esoteric failure (possibly), but I'm not sure if you're running into that</p>
</blockquote>



<a name="553959185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553959185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553959185">(Nov 05 2025 at 20:45)</a>:</h4>
<p>d-sonuga <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3493334622">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Here's one:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">==</span><span class="mi">30721</span><span class="o">==</span><span class="w"> </span><span class="n">ERROR</span><span class="p">:</span><span class="w"> </span><span class="nc">libFuzzer</span><span class="p">:</span><span class="w"> </span><span class="nc">deadly</span><span class="w"> </span><span class="n">signal</span>
<span class="n">NOTE</span><span class="p">:</span><span class="w"> </span><span class="nc">libFuzzer</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">rudimentary</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">handlers</span><span class="p">.</span>
<span class="w">      </span><span class="n">Combine</span><span class="w"> </span><span class="n">libFuzzer</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">AddressSanitizer</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">similar</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">better</span><span class="w"> </span><span class="n">crash</span><span class="w"> </span><span class="n">reports</span><span class="p">.</span>
<span class="n">SUMMARY</span><span class="p">:</span><span class="w"> </span><span class="nc">libFuzzer</span><span class="p">:</span><span class="w"> </span><span class="nc">deadly</span><span class="w"> </span><span class="n">signal</span>
<span class="n">MS</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">CrossOver</span><span class="o">-</span><span class="n">CopyPart</span><span class="o">-</span><span class="p">;</span><span class="w"> </span><span class="n">base</span><span class="w"> </span><span class="n">unit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="n">fca8986ed075873381dbb53bd351e47403b848b</span>
<span class="mh">0x0</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x1</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x3e</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x80</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0x81</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0xd7</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0xff</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x26</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x5a</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x5d</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x58</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span><span class="mh">0x0</span><span class="p">,</span>
<span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">377</span><span class="err">\</span><span class="mi">377</span><span class="err">\</span><span class="mi">001</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="n">XXXXXXXX</span><span class="o">&gt;</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">200</span><span class="n">XXXXXXXXXX</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">377</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">201</span><span class="err">\</span><span class="mi">377</span><span class="n">XXXXXXXXXXXXXXXXXX</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">327</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">377</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="o">&amp;</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="n">XXXXXX</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="n">XXXZXXXXXXXXXX</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span><span class="n">XXXXXXXXXX</span><span class="p">]</span><span class="n">XX</span><span class="err">\</span><span class="mi">000</span><span class="err">\</span><span class="mi">000</span>
<span class="n">artifact_prefix</span><span class="o">='/</span><span class="n">Users</span><span class="o">/</span><span class="n">d</span><span class="o">-</span><span class="n">sonuga</span><span class="o">/</span><span class="n">repos</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="o">/</span><span class="n">artifacts</span><span class="o">/</span><span class="n">wast_tests</span><span class="o">/'</span><span class="p">;</span><span class="w"> </span><span class="n">Test</span><span class="w"> </span><span class="n">unit</span><span class="w"> </span><span class="n">written</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">d</span><span class="o">-</span><span class="n">sonuga</span><span class="o">/</span><span class="n">repos</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">fuzz</span><span class="o">/</span><span class="n">artifacts</span><span class="o">/</span><span class="n">wast_tests</span><span class="o">/</span><span class="n">crash</span><span class="o">-</span><span class="mi">2571966</span><span class="n">bf9ef0f84826111ad1295349fc069e71f</span>
<span class="n">Base64</span><span class="p">:</span><span class="w"> </span><span class="nc">AP</span><span class="c1">//AQAAAAAAAAAAAFhYWFhYWFhYPgAAAAAAAACAWFhYWFhYWFhYWIGBgYGBgYH/gYGBgf9YWFhYWFhYWFhYWFhYWFhYWFjX19fX19fX1wD/AAAAAAAmAABYWFhYWFgAAAAAAAAAAABYWFhaWFhYWFhYWFhYWAAAWFhYWFhYWFhYWF1YWAAA</span>

<span class="err">────────────────────────────────────────────────────────────────────────────────</span>

<span class="n">Failing</span><span class="w"> </span><span class="n">input</span><span class="p">:</span>

<span class="w">    </span><span class="nc">fuzz</span><span class="o">/</span><span class="n">artifacts</span><span class="o">/</span><span class="n">wast_tests</span><span class="o">/</span><span class="n">crash</span><span class="o">-</span><span class="mi">2571966</span><span class="n">bf9ef0f84826111ad1295349fc069e71f</span>

<span class="n">Output</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="err">`</span><span class="n">std</span><span class="p">::</span><span class="n">fmt</span><span class="p">::</span><span class="n">Debug</span><span class="err">`</span><span class="p">:</span>

<span class="w">    </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">62</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">128</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">129</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">215</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">255</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">38</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">90</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">93</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">88</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">]</span>

<span class="n">Reproduce</span><span class="w"> </span><span class="n">with</span><span class="p">:</span>

<span class="w">    </span><span class="nc">cargo</span><span class="w"> </span><span class="n">fuzz</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">features</span><span class="w"> </span><span class="o">--</span><span class="n">sanitizer</span><span class="o">=</span><span class="n">none</span><span class="w"> </span><span class="n">wast_tests</span><span class="w"> </span><span class="n">fuzz</span><span class="o">/</span><span class="n">artifacts</span><span class="o">/</span><span class="n">wast_tests</span><span class="o">/</span><span class="n">crash</span><span class="o">-</span><span class="mi">2571966</span><span class="n">bf9ef0f84826111ad1295349fc069e71f</span>

<span class="n">Minimize</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">with</span><span class="p">:</span>

<span class="w">    </span><span class="nc">cargo</span><span class="w"> </span><span class="n">fuzz</span><span class="w"> </span><span class="n">tmin</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">default</span><span class="o">-</span><span class="n">features</span><span class="w"> </span><span class="o">--</span><span class="n">sanitizer</span><span class="o">=</span><span class="n">none</span><span class="w"> </span><span class="n">wast_tests</span><span class="w"> </span><span class="n">fuzz</span><span class="o">/</span><span class="n">artifacts</span><span class="o">/</span><span class="n">wast_tests</span><span class="o">/</span><span class="n">crash</span><span class="o">-</span><span class="mi">2571966</span><span class="n">bf9ef0f84826111ad1295349fc069e71f</span>

<span class="err">────────────────────────────────────────────────────────────────────────────────</span>

<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">Fuzz</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="mi">77</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="553973660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/553973660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#553973660">(Nov 05 2025 at 22:26)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3493844275">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Hm ok that I'm not sure about. I'll run locally and see if I can reproduce as well. </p>
<p>Using <code>RUST_LOG=wasmtime_fuzzing</code> it looks like that test is executing a threads-related test, so it might have something to do with that? Not that that's helpful alas :(</p>
</blockquote>



<a name="554134444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554134444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554134444">(Nov 06 2025 at 16:21)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3498171722">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Well I can reproduce locally on macOS. Adding some debugging it looks like signals are just bypassing our handler entirely. I... don't have any idea why that's happening unfortunately. I've attempted a workaround at <a href="https://github.com/bytecodealliance/wasmtime/pull/11990">https://github.com/bytecodealliance/wasmtime/pull/11990</a> which should get fuzzing to continue better.</p>
</blockquote>



<a name="554537409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554537409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554537409">(Nov 09 2025 at 06:00)</a>:</h4>
<p>kayabaNerve <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3507558121">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>I have a segfault _somewhere_ after upgrading a large codebase from wasmtime 36 to wasmtime 38 (and a variety of other _updates_ (not upgrades) to our tree). I have yet to do any analysis, so I cannot confirm it's from wasmtime or even directly related to this issue, but:</p>
<p>1) wasmtime is my second largest dependency and apparently has an observed segfault in the most recent versions<br>
2) My first largest dependency doesn't have any tracking issues for introduced segfaults<br>
3) I don't personally have any <code>unsafe</code> code here, so it is a problem within a dependency<br>
4) I've had other issues since upgrading*.</p>
<p>The reason I comment here is I don't set the regalloc algorithm and the default IS NOT single-pass regalloc (at least according to the documentation). That means, if my segfault is this segfault, that's a red-herring.</p>
<hr>
<p>*I had proof-carrying code enabled. It worked with wasmtime 36, yet with wasmtime 38 (and any side-effects from the updates within semver that I performed), wasmtime started yielding unsupported instruction errors and failing to instantiate its runtime. I didn't bother analyzing and opening a proper issue due to <a href="https://github.com/bytecodealliance/wasmtime/issues/8380#issuecomment-2059976165">this comment</a>. After I disabled proof-carrying code, I now have a segfault _somewhere_.</p>
<p>Apologies for how messy this comment is. I do plan to do further analysis as this is now my problem to deal with. I just wanted to put my initial notes down in case it ends up helpful.</p>
</blockquote>



<a name="554537957"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554537957" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554537957">(Nov 09 2025 at 06:09)</a>:</h4>
<p>kayabaNerve edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3507558121">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>I have a segfault _somewhere_ after upgrading a large codebase from wasmtime 36 to wasmtime 38 (and a variety of other _updates_ (not upgrades) to our tree). I have yet to do any analysis, so I cannot confirm it's from wasmtime or even directly related to this issue, but:</p>
<p>1) wasmtime is my second largest dependency and apparently has an observed segfault in the most recent versions<br>
2) My first largest dependency doesn't have any tracking issues for introduced segfaults<br>
3) I don't personally have any <code>unsafe</code> code here, so it is a problem within a dependency<br>
4) I've had other issues since upgrading*.</p>
<p>The reason I comment here is I don't set the regalloc algorithm and the default IS NOT single-pass regalloc (at least according to the documentation). That means, if my segfault is this segfault, that's a red-herring.</p>
<hr>
<p>*I had proof-carrying code enabled. It worked with wasmtime 36, yet with wasmtime 38 (and any side-effects from the updates within semver that I performed), wasmtime started yielding unsupported instruction errors and failing to instantiate its runtime. I didn't bother analyzing and opening a proper issue due to <a href="https://github.com/bytecodealliance/wasmtime/issues/8380#issuecomment-2059976165">this comment</a>. After I disabled proof-carrying code, I now have a segfault _somewhere_.</p>
<p>Apologies for how messy this comment is. I do plan to do further analysis as this is now my problem to deal with. I just wanted to put my initial notes down in case it ends up helpful (for anyone investigating this or for anyone with the same issues or for myself).</p>
</blockquote>



<a name="554577731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554577731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554577731">(Nov 09 2025 at 17:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3508537317">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>@kayabaNerve thanks for the comment! If you're not specifically enabling an alternative regalloc algorithm then it's not this issue and is possibly something else. This issue is for a non-default setting of Wasmtime.</p>
<p>That being said if you think that the segfault is in Wasmtime that would likely make the issue <a href="https://docs.wasmtime.dev/security-what-is-considered-a-security-vulnerability.html">a security bug</a>. If you'd like you can open <a href="https://github.com/bytecodealliance/wasmtime/security/advisories/new">a draft security issue on Wasmtime</a> and we can discuss further there. </p>
</blockquote>



<a name="554578926"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554578926" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554578926">(Nov 09 2025 at 17:33)</a>:</h4>
<p>kayabaNerve <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3508553479">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Will do if I identify it as within <code>wasmtime</code> and not one of a thousand other crates <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> Apologies for the noise here. I didn't know if it was definitely tracked to single-pass regalloc due to "My guess is that this is related to the single-pass register allocator", hence why I wanted to chime in.</p>
</blockquote>



<a name="554579561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554579561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554579561">(Nov 09 2025 at 17:45)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3508562019">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>No worries! If you're comfortable sharing a gdb stack trace or similar (and are able to capture it) in a private issue we can try to help poke at it a bit</p>
</blockquote>



<a name="554593406"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554593406" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554593406">(Nov 09 2025 at 21:37)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3508859636">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>@kayabaNerve I don't see it explicitly stated either way in your comments above, so it might help to clarify: are you enabling the single-pass register allocator in your configuration?</p>
<p>(This is useful not just to help us help you, but to help us get an urgency signal for ourselves too)</p>
</blockquote>



<a name="554625116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554625116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554625116">(Nov 10 2025 at 05:53)</a>:</h4>
<p>kayabaNerve <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3509538394">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Hello,</p>
<p>I'm incredibly sorry for all the concern and potentially violating any intended disclosure policies. I only commented here as I had an anecdote I thought may become relevant.</p>
<p>I did sit back down with this today and took the immediate step of reverting to <code>wasmtime 36</code>, for which I can confirm the segfault is still present, meaning the <code>wasmtime</code> upgrade is almost certainly not what's at fault and I have some other idiocy in a very large stack.</p>
<p>I apologize again for the noise and want to note my utmost respect for how amazingly attentive you were to a potential security issue.</p>
</blockquote>



<a name="554736188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/554736188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#554736188">(Nov 10 2025 at 15:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3512569736">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>No worries! Best of luck tracking it down nonetheless, I imagine it's going to be either a fun one or a very much not fun one...</p>
</blockquote>



<a name="555438944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/555438944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#555438944">(Nov 13 2025 at 19:17)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Using Wasmtime 37.0.2 I get:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">exception_table</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span>
<span class="nc">Wasmtime</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">unwind</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">contexts</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">IOT</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>using <code>main</code> I get: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>My guess is that this is related to the single-pass register allocator, so cc @d-sonuga</p>
</blockquote>



<a name="555439570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/555439570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#555439570">(Nov 13 2025 at 19:20)</a>:</h4>
<p>cfallin reopened <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Using Wasmtime 37.0.2 I get:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">exception_table</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span>
<span class="nc">Wasmtime</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">unwind</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">contexts</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">IOT</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>using <code>main</code> I get: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>My guess is that this is related to the single-pass register allocator, so cc @d-sonuga</p>
</blockquote>



<a name="555439572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/555439572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#555439572">(Nov 13 2025 at 19:20)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3529347716">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>GitHub parsed the commit message in regalloc2#246, but this is still open until we release (regalloc2#248) and upgrade to that release here.</p>
</blockquote>



<a name="555439637"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/555439637" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#555439637">(Nov 13 2025 at 19:21)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11850#issuecomment-3529347716">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>GitHub parsed the commit message in <a href="https://github.com/bytecodealliance/regalloc2/issues/246">bytecodealliance/regalloc2#246</a>, but this is still open until we release (<a href="https://github.com/bytecodealliance/regalloc2/issues/248">bytecodealliance/regalloc2#248</a>) and upgrade to that release here.</p>
</blockquote>



<a name="555456233"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311850%20Segfault%20with%20exceptions%20%2B%20single.../near/555456233" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311850.20Segfault.20with.20exceptions.20.2B.20single.2E.2E.2E.html#555456233">(Nov 13 2025 at 20:54)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11850">issue #11850</a>:</p>
<blockquote>
<p>Using Wasmtime 37.0.2 I get:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>

<span class="n">thread</span><span class="w"> </span><span class="o">'</span><span class="na">main</span><span class="o">'</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">exception_table</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">168</span><span class="p">:</span><span class="mi">25</span><span class="p">:</span>
<span class="nc">Wasmtime</span><span class="w"> </span><span class="n">exception</span><span class="w"> </span><span class="n">unwind</span><span class="w"> </span><span class="n">info</span><span class="w"> </span><span class="n">only</span><span class="w"> </span><span class="n">supports</span><span class="w"> </span><span class="n">dynamic</span><span class="w"> </span><span class="n">contexts</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">stack</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="err">`</span><span class="n">RUST_BACKTRACE</span><span class="o">=</span><span class="mi">1</span><span class="err">`</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">display</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">backtrace</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">IOT</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>using <code>main</code> I get: </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span><span class="w"> </span><span class="o">-</span><span class="n">Oregalloc</span><span class="o">-</span><span class="n">algorithm</span><span class="o">=</span><span class="n">single</span><span class="o">-</span><span class="n">pass</span><span class="w"> </span><span class="o">-</span><span class="n">Wexceptions</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="n">tests</span><span class="o">/</span><span class="n">spec_testsuite</span><span class="o">/</span><span class="n">proposals</span><span class="o">/</span><span class="n">wasm</span><span class="o">-</span><span class="mf">3.0</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">wast</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">wast</span><span class="w"> </span><span class="o">-</span><span class="n">Cinlining</span><span class="o">=</span><span class="n">y</span><span class="w"> </span><span class="o">-</span><span class="n">Ccranelift</span><span class="o">-</span><span class="n">wasmtime_inlining_intra_module</span><span class="o">=</span><span class="n">yes</span>
</code></pre></div>
<p>My guess is that this is related to the single-pass register allocator, so cc @d-sonuga</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>