<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10054 wasmtime-cli: support `run --invoke`... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html">wasmtime / PR #10054 wasmtime-cli: support `run --invoke`...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="494905884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/494905884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#494905884">(Jan 20 2025 at 20:20)</a>:</h4>
<p>pchickey opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a> from <code>bytecodealliance:pch/invoke_wave</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="494906535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/494906535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#494906535">(Jan 20 2025 at 20:24)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="494906838"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/494906838" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#494906838">(Jan 20 2025 at 20:26)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="501963836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/501963836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#501963836">(Feb 26 2025 at 05:08)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2683908359">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Tried this locally and got the following:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">cd /Users/tpmccallum</span>
<span class="go">git clone https://github.com/bytecodealliance/wasmtime.git</span>
<span class="go">cd wasmtime</span>
<span class="go">git checkout main</span>
<span class="go">git pull origin main</span>
<span class="go">git checkout pch/invoke_wave</span>
<span class="go">git merge main</span>
<span class="go">cargo clean</span>
<span class="go">cargo build --release</span>
</code></pre></div>
<p>Repo I used for testing is at <a href="https://github.com/tpmccallum/testing_components/tree/main">https://github.com/tpmccallum/testing_components/tree/main</a> (specifically the <code>compress</code> component):</p>
<p><div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp">tpmccallum@192-168-1-17 compress % </span>/Users/tpmccallum/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>target/wasm32-wasip1/debug/compress.wasm

<span class="go">Error: failed to run main module `target/wasm32-wasip1/debug/compress.wasm`</span>

<span class="go">Caused by:</span>
<span class="go">    0: parsing invoke "compress"</span>
<span class="go">    1: unexpected end of input at 8..8</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="502102009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/502102009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#502102009">(Feb 26 2025 at 17:19)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2685711520">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>The wave syntax requires functions to be invoked with parens, so <code>--invoke "compress()"</code> should hopefully work. one of the big things missing is better error messages...</p>
</blockquote>



<a name="502459848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/502459848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#502459848">(Feb 27 2025 at 23:20)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2689329742">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Thanks for the response @pchickey <br>
That makes sense. Thank you, and I will try that next and report back here.</p>
</blockquote>



<a name="502938123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/502938123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#502938123">(Mar 03 2025 at 04:27)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2693247368">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey <br>
Thanks for the additional info. I got this working - and wrote an article &lt; <a href="https://medium.com/wasm/wasm-component-model-seamless-compression-c-rust-and-wasm-3b8d52ed8b31">https://medium.com/wasm/wasm-component-model-seamless-compression-c-rust-and-wasm-3b8d52ed8b31</a> &gt;<br>
Thanks again!<br>
Let me know if you need/want me to do any further testing on this. Super happy to assist.</p>
</blockquote>



<a name="509369492"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509369492" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509369492">(Apr 01 2025 at 06:35)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768318470">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey, <br>
I have implemented the error message, please see information below.</p>
<h2><a href="http://Run.rs">Run.rs</a></h2>
<h3><strong>Original/Before</strong></h3>
<p>An example of a user typing `--invoke "compress" (with quotes).</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p>An example of a user typing <code>--invoke compress</code> (no quotes):</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3><strong>After</strong></h3>
<p>An example of a user typing `--invoke "compress" (with quotes).</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p>An example of a user typing <code>--invoke compress</code> (no quotes):</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3>With Arguments</h3>
<p>I also updated the Rust function to accept a string argument and then tested that the proper escaping of the string argument worked:</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress(\"hello\")"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="o">[</span><span class="m">40</span>,<span class="w"> </span><span class="m">181</span>,<span class="w"> </span><span class="m">47</span>,<span class="w"> </span><span class="m">253</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">88</span>,<span class="w"> </span><span class="m">41</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">104</span>,<span class="w"> </span><span class="m">101</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">111</span><span class="o">]</span>
</code></pre></div>
<h2>Cli-options.md</h2>
<p>I also went ahead and updated the documentation that talks about <code>--invoke</code> with all of the above information (quotes, parenthesis, etc.).</p>
</blockquote>



<a name="509370380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509370380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509370380">(Apr 01 2025 at 06:41)</a>:</h4>
<p>tpmccallum edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768318470">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey, <br>
I have implemented the error message, please see information below.</p>
<h2><a href="http://Run.rs">Run.rs</a></h2>
<h3><strong>Original/Before</strong> (Testing error message output)</h3>
<p>An example of a user typing `--invoke "compress" (with quotes).</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p>An example of a user typing <code>--invoke compress</code> (no quotes):</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3><strong>After</strong> (Testing error message output)</h3>
<p>An example of a user typing `--invoke "compress" (with quotes).</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p>An example of a user typing <code>--invoke compress</code> (no quotes):</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3>With Arguments (Testing functionality of invoking a function with arguments)</h3>
<p>I also updated the Rust function to accept a string argument and then tested that the proper escaping of the string argument worked:</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress(\"hello\")"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="o">[</span><span class="m">40</span>,<span class="w"> </span><span class="m">181</span>,<span class="w"> </span><span class="m">47</span>,<span class="w"> </span><span class="m">253</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">88</span>,<span class="w"> </span><span class="m">41</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">104</span>,<span class="w"> </span><span class="m">101</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">111</span><span class="o">]</span>
</code></pre></div>
<h2>Cli-options.md</h2>
<p>I also went ahead and updated the documentation that talks about <code>--invoke</code> with all of the above information (quotes, parenthesis, etc.).</p>
<hr>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">status</span>
<span class="w">    </span><span class="n">modified</span><span class="p">:</span><span class="w">   </span><span class="nc">docs</span><span class="o">/</span><span class="n">cli</span><span class="o">-</span><span class="n">options</span><span class="p">.</span><span class="n">md</span>
<span class="w">    </span><span class="n">modified</span><span class="p">:</span><span class="w">   </span><span class="nc">src</span><span class="o">/</span><span class="n">commands</span><span class="o">/</span><span class="n">run</span><span class="p">.</span><span class="n">rs</span>
<span class="cp">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="s">"Finalized enhancements for --invoke: error messages"</span>
<span class="w">        </span><span class="p">[</span><span class="n">invoke_wave_enhancements</span><span class="w"> </span><span class="mi">4</span><span class="n">a93050af</span><span class="p">]</span><span class="w"> </span><span class="n">Finalized</span><span class="w"> </span><span class="n">enhancements</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">--</span><span class="n">invoke</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="n">messages</span>
<span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">37</span><span class="w"> </span><span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="cp">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">invoke_wave_enhancements</span>
<span class="w">        </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">invoke_wave_enhancements</span>
<span class="w">        </span><span class="n">Enumerating</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Counting</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">13</span><span class="o">/</span><span class="mi">13</span><span class="p">),</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Delta</span><span class="w"> </span><span class="n">compression</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="n">threads</span>
<span class="w">        </span><span class="n">Compressing</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">7</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Writing</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">7</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="w"> </span><span class="mf">1.84</span><span class="w"> </span><span class="n">KiB</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">1.84</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Total</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="mi">6</span><span class="p">),</span><span class="w"> </span><span class="n">reused</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">pack</span><span class="o">-</span><span class="n">reused</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">remote</span><span class="p">:</span><span class="w"> </span><span class="nc">Resolving</span><span class="w"> </span><span class="n">deltas</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span><span class="w"> </span><span class="n">completed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">objects</span><span class="p">.</span>
<span class="w">        </span><span class="n">remote</span><span class="p">:</span>
<span class="w">        </span><span class="nc">remote</span><span class="p">:</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">'</span><span class="na">invoke_wave_enhancements</span><span class="o">'</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">GitHub</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">visiting</span><span class="p">:</span>
<span class="w">        </span><span class="nc">remote</span><span class="p">:</span><span class="w">      </span><span class="nc">https</span><span class="p">:</span><span class="c1">//github.com/tpmccallum/wasmtime/pull/new/invoke_wave_enhancements</span>
<span class="w">        </span><span class="n">remote</span><span class="p">:</span>
<span class="w">        </span><span class="nc">To</span><span class="w"> </span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">:</span><span class="nc">tpmccallum</span><span class="o">/</span><span class="n">wasmtime</span><span class="p">.</span><span class="n">git</span>
<span class="w">         </span><span class="o">*</span><span class="w"> </span><span class="p">[</span><span class="n">new</span><span class="w"> </span><span class="n">branch</span><span class="p">]</span><span class="w">          </span><span class="n">invoke_wave_enhancements</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">invoke_wave_enhancements</span>
</code></pre></div>
</blockquote>



<a name="509372994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509372994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509372994">(Apr 01 2025 at 06:59)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768374083">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey <br>
When creating the PR, the base repository is set to <code>pchickey/wasmtime</code>, but the drop-down for the base branch does not have a <code>pch/invoke_wave</code> option?<br>
Not sure if you want/need to push <code>pch/invoke_wave</code> to your fork so I can set it as the base? <br>
At this stage, I used <code>main</code> as the base because the changed files look relevant to the --invoke work specifically. So perhaps all is fine and you will see my changes.</p>
<p>The PR is at <code>[tpmccallum/wasmtime:invoke_wave_enhancements](https://github.com/pchickey/wasmtime/pull/1)</code>. <br>
I did not get to the CI errors today, only the CLI output messages and the documentation. <br>
Please let me know your thoughts, and I can get the CI done tomorrow.<br>
Chat soon<br>
Thanks!</p>
</blockquote>



<a name="509373488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509373488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509373488">(Apr 01 2025 at 07:02)</a>:</h4>
<p>tpmccallum edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768374083">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey <br>
When creating the PR, the base repository is set to <code>pchickey/wasmtime</code>, but the drop-down for the base branch does not have a <code>pch/invoke_wave</code> option?<br>
Not sure if you want/need to push <code>pch/invoke_wave</code> to your fork so I can set it as the base? <br>
At this stage, I used <code>main</code> as the base because the changed files look relevant to the --invoke work specifically. So perhaps all is fine and you will see my changes.</p>
<p>The PR is at <code>[tpmccallum/wasmtime:invoke_wave_enhancements](https://github.com/pchickey/wasmtime/pull/1)</code>. <br>
I did not get to the CI errors today, only the CLI output messages and the documentation. </p>
<p>Please let me know your thoughts, and I can get the CI done tomorrow. On that note, I was wondering if you wanted to rebase and bring the PR up to date with the current code base. Happy to be guided by you.  </p>
<p>Chat soon<br>
Thanks!</p>
</blockquote>



<a name="509373688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509373688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509373688">(Apr 01 2025 at 07:03)</a>:</h4>
<p>tpmccallum deleted a <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768374083">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey <br>
When creating the PR, the base repository is set to <code>pchickey/wasmtime</code>, but the drop-down for the base branch does not have a <code>pch/invoke_wave</code> option?<br>
Not sure if you want/need to push <code>pch/invoke_wave</code> to your fork so I can set it as the base? <br>
At this stage, I used <code>main</code> as the base because the changed files look relevant to the --invoke work specifically. So perhaps all is fine and you will see my changes.</p>
<p>The PR is at <code>[tpmccallum/wasmtime:invoke_wave_enhancements](https://github.com/pchickey/wasmtime/pull/1)</code>. <br>
I did not get to the CI errors today, only the CLI output messages and the documentation. </p>
<p>Please let me know your thoughts, and I can get the CI done tomorrow. On that note, I was wondering if you wanted to rebase and bring the PR up to date with the current code base. Happy to be guided by you.  </p>
<p>Chat soon<br>
Thanks!</p>
</blockquote>



<a name="509373807"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509373807" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509373807">(Apr 01 2025 at 07:04)</a>:</h4>
<p>tpmccallum edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768318470">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey, <br>
I have implemented the error message, tested out a bunch of scenarios and also updated the documentation.<br>
Please see the details below.</p>
<h2><a href="http://Run.rs">Run.rs</a></h2>
<h3><strong>Original/Before</strong> (Testing error message output)</h3>
<p>An example of a user typing `--invoke "compress" (with quotes).</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p>An example of a user typing <code>--invoke compress</code> (no quotes):</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3><strong>After</strong> (Testing error message output)</h3>
<p>An example of a user typing `--invoke "compress" (with quotes).</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p>An example of a user typing <code>--invoke compress</code> (no quotes):</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3>With Arguments (Testing functionality of invoking a function with arguments)</h3>
<p>I also updated the Rust function to accept a string argument and then tested that the proper escaping of the string argument worked:</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress(\"hello\")"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="o">[</span><span class="m">40</span>,<span class="w"> </span><span class="m">181</span>,<span class="w"> </span><span class="m">47</span>,<span class="w"> </span><span class="m">253</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">88</span>,<span class="w"> </span><span class="m">41</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">104</span>,<span class="w"> </span><span class="m">101</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">111</span><span class="o">]</span>
</code></pre></div>
<h2>Cli-options.md</h2>
<p>I also went ahead and updated the documentation that talks about <code>--invoke</code> with all of the above information (quotes, parenthesis, etc.).</p>
<hr>
<p>How I pushed my changes ...</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">status</span>
<span class="w">    </span><span class="n">modified</span><span class="p">:</span><span class="w">   </span><span class="nc">docs</span><span class="o">/</span><span class="n">cli</span><span class="o">-</span><span class="n">options</span><span class="p">.</span><span class="n">md</span>
<span class="w">    </span><span class="n">modified</span><span class="p">:</span><span class="w">   </span><span class="nc">src</span><span class="o">/</span><span class="n">commands</span><span class="o">/</span><span class="n">run</span><span class="p">.</span><span class="n">rs</span>
<span class="cp">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">commit</span><span class="w"> </span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="s">"Finalized enhancements for --invoke: error messages"</span>
<span class="w">        </span><span class="p">[</span><span class="n">invoke_wave_enhancements</span><span class="w"> </span><span class="mi">4</span><span class="n">a93050af</span><span class="p">]</span><span class="w"> </span><span class="n">Finalized</span><span class="w"> </span><span class="n">enhancements</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">--</span><span class="n">invoke</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="n">messages</span>
<span class="w">        </span><span class="mi">2</span><span class="w"> </span><span class="n">files</span><span class="w"> </span><span class="n">changed</span><span class="p">,</span><span class="w"> </span><span class="mi">37</span><span class="w"> </span><span class="n">insertions</span><span class="p">(</span><span class="o">+</span><span class="p">),</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="n">deletions</span><span class="p">(</span><span class="o">-</span><span class="p">)</span>
<span class="cp">$</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">invoke_wave_enhancements</span>
<span class="w">        </span><span class="n">git</span><span class="w"> </span><span class="n">push</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">invoke_wave_enhancements</span>
<span class="w">        </span><span class="n">Enumerating</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Counting</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">13</span><span class="o">/</span><span class="mi">13</span><span class="p">),</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Delta</span><span class="w"> </span><span class="n">compression</span><span class="w"> </span><span class="n">using</span><span class="w"> </span><span class="n">up</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="n">threads</span>
<span class="w">        </span><span class="n">Compressing</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">7</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Writing</span><span class="w"> </span><span class="n">objects</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">7</span><span class="o">/</span><span class="mi">7</span><span class="p">),</span><span class="w"> </span><span class="mf">1.84</span><span class="w"> </span><span class="n">KiB</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mf">1.84</span><span class="w"> </span><span class="n">MiB</span><span class="o">/</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="n">done</span><span class="p">.</span>
<span class="w">        </span><span class="n">Total</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="mi">6</span><span class="p">),</span><span class="w"> </span><span class="n">reused</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="n">delta</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">pack</span><span class="o">-</span><span class="n">reused</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">remote</span><span class="p">:</span><span class="w"> </span><span class="nc">Resolving</span><span class="w"> </span><span class="n">deltas</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="o">%</span><span class="w"> </span><span class="p">(</span><span class="mi">6</span><span class="o">/</span><span class="mi">6</span><span class="p">),</span><span class="w"> </span><span class="n">completed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="n">local</span><span class="w"> </span><span class="n">objects</span><span class="p">.</span>
<span class="w">        </span><span class="n">remote</span><span class="p">:</span>
<span class="w">        </span><span class="nc">remote</span><span class="p">:</span><span class="w"> </span><span class="nc">Create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">pull</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">'</span><span class="na">invoke_wave_enhancements</span><span class="o">'</span><span class="w"> </span><span class="n">on</span><span class="w"> </span><span class="n">GitHub</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">visiting</span><span class="p">:</span>
<span class="w">        </span><span class="nc">remote</span><span class="p">:</span><span class="w">      </span><span class="nc">https</span><span class="p">:</span><span class="c1">//github.com/tpmccallum/wasmtime/pull/new/invoke_wave_enhancements</span>
<span class="w">        </span><span class="n">remote</span><span class="p">:</span>
<span class="w">        </span><span class="nc">To</span><span class="w"> </span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="p">:</span><span class="nc">tpmccallum</span><span class="o">/</span><span class="n">wasmtime</span><span class="p">.</span><span class="n">git</span>
<span class="w">         </span><span class="o">*</span><span class="w"> </span><span class="p">[</span><span class="n">new</span><span class="w"> </span><span class="n">branch</span><span class="p">]</span><span class="w">          </span><span class="n">invoke_wave_enhancements</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">invoke_wave_enhancements</span>
</code></pre></div>
<p>When creating the PR in the GitHub UI, the base repository is set to <code>pchickey/wasmtime</code>, but the drop-down for the base branch does not have a <code>pch/invoke_wave</code> option. Not sure if you want/need to push pch/invoke_wave to your fork so I can set it as the base?</p>
<p>At this stage, I used main as the base because the changed files look relevant to the --invoke work specifically. So perhaps all is fine and you will see my changes.</p>
<p>The PR is at <a href="https://github.com/pchickey/wasmtime/pull/1">tpmccallum/wasmtime:invoke_wave_enhancements</a>.<br>
I did not get to the CI errors today, only the CLI output messages and the documentation.</p>
<p>Please let me know your thoughts, and I can get the CI done tomorrow. On that note, I was wondering if you wanted to rebase and bring the PR up to date with the current code base. Happy to be guided by you.</p>
<p>Chat soon<br>
Thanks!</p>
</blockquote>



<a name="509417294"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509417294" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509417294">(Apr 01 2025 at 10:45)</a>:</h4>
<p>tpmccallum edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2768318470">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey, <br>
I have implemented the error message, tested out a bunch of scenarios and also updated the documentation.<br>
Please see the details below.</p>
<h2><a href="http://Run.rs">Run.rs</a></h2>
<h3><strong>Original/Before</strong> (Original error message)</h3>
<p><strong>An example of a user typing <code>--invoke "compress"</code> </strong>(with quotes)<strong>.</strong></p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p><strong>An example of a user typing <code>--invoke compress</code> </strong>(no quotes)<strong>:</strong></p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>parsing<span class="w"> </span>invoke<span class="w"> </span><span class="s2">"compress"</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3><strong>After</strong> (Confirming new error message that provides advice about quotes and parentheses)</h3>
<p><strong>An example of a user typing `--invoke "compress" </strong>(with quotes)<strong>.</strong></p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<p><strong>An example of a user typing <code>--invoke compress</code> </strong>(no quotes)<strong>:</strong></p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span>compress<span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>Error:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>run<span class="w"> </span>main<span class="w"> </span>module<span class="w"> </span><span class="sb">`</span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm<span class="sb">`</span>

Caused<span class="w"> </span>by:
<span class="w">    </span><span class="m">0</span>:<span class="w"> </span>failed<span class="w"> </span>to<span class="w"> </span>parse<span class="w"> </span>invoke<span class="w"> </span><span class="s1">'compress'</span>:<span class="w"> </span>invoked<span class="w"> </span><span class="k">function</span><span class="w"> </span>calls<span class="w"> </span>must<span class="w"> </span>include<span class="w"> </span>parentheses<span class="w"> </span>after<span class="w"> </span>the<span class="w"> </span><span class="k">function</span><span class="w"> </span>name<span class="w"> </span><span class="k">in</span><span class="w"> </span>quoted<span class="w"> </span>wave<span class="w"> </span>syntax<span class="w"> </span><span class="o">(</span>e.g.,<span class="w"> </span><span class="s2">"compress()"</span><span class="o">)</span>
<span class="w">    </span><span class="m">1</span>:<span class="w"> </span>unexpected<span class="w"> </span>end<span class="w"> </span>of<span class="w"> </span>input<span class="w"> </span>at<span class="w"> </span><span class="m">8</span>..8
</code></pre></div>
<h3><strong>After</strong> (Testing functionality of invoking a function with arguments inside the parentheses)</h3>
<p>I also updated the Rust function to accept a string argument and then tested that the proper escaping of the string argument worked:</p>
<p>Command:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>/Users/tpmccallum/test_wasmtime/wasmtime/target/release/wasmtime<span class="w"> </span>run<span class="w"> </span>--invoke<span class="w"> </span><span class="s2">"compress(\"hello\")"</span><span class="w"> </span>/Users/tpmccallum/testing_components/compress/target/wasm32-wasip1/debug/compress.wasm
</code></pre></div>
<p>Output:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="o">[</span><span class="m">40</span>,<span class="w"> </span><span class="m">181</span>,<span class="w"> </span><span class="m">47</span>,<span class="w"> </span><span class="m">253</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">88</span>,<span class="w"> </span><span class="m">41</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="m">104</span>,<span class="w"> </span><span class="m">101</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">108</span>,<span class="w"> </span><span class="m">111</span><span class="o">]</span>
</code></pre></div>
<h2>Documentation (<code>docs/cli-options.md</code>)</h2>
<p>I also went ahead and updated the documentation that talks about <code>--invoke</code> with all of the above information (quotes, parenthesis, etc.).</p>
<h2>Workflow</h2>
<p>Below is how I pushed my changes. I hope this is what you were after, if not, please let me know.</p>
<p>Created a new branch called <code>invoke_wave_enhancements</code>.</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>$<span class="w"> </span>git<span class="w"> </span>branch
<span class="w">          </span>invoke_wave
<span class="w">        </span>*<span class="w"> </span>invoke_wave_enhancements
<span class="w">          </span>main

$<span class="w"> </span>git<span class="w"> </span>status
<span class="w">    </span>modified:<span class="w">   </span>docs/cli-options.md
<span class="w">    </span>modified:<span class="w">   </span>src/commands/run.rs

$<span class="w"> </span>git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">"Finalized enhancements for --invoke: error messages"</span>
<span class="w">        </span><span class="o">[</span>invoke_wave_enhancements<span class="w"> </span>4a93050af<span class="o">]</span><span class="w"> </span>Finalized<span class="w"> </span>enhancements<span class="w"> </span><span class="k">for</span><span class="w"> </span>--invoke:<span class="w"> </span>error<span class="w"> </span>messages
<span class="w">        </span><span class="m">2</span><span class="w"> </span>files<span class="w"> </span>changed,<span class="w"> </span><span class="m">37</span><span class="w"> </span>insertions<span class="o">(</span>+<span class="o">)</span>,<span class="w"> </span><span class="m">5</span><span class="w"> </span>deletions<span class="o">(</span>-<span class="o">)</span>

$<span class="w"> </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>invoke_wave_enhancements
<span class="w">        </span>git<span class="w"> </span>push<span class="w"> </span>origin<span class="w"> </span>invoke_wave_enhancements
<span class="w">        </span>Enumerating<span class="w"> </span>objects:<span class="w"> </span><span class="m">13</span>,<span class="w"> </span><span class="k">done</span>.
<span class="w">        </span>Counting<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">13</span>/13<span class="o">)</span>,<span class="w"> </span><span class="k">done</span>.
<span class="w">        </span>Delta<span class="w"> </span>compression<span class="w"> </span>using<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span><span class="m">16</span><span class="w"> </span>threads
<span class="w">        </span>Compressing<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">7</span>/7<span class="o">)</span>,<span class="w"> </span><span class="k">done</span>.
<span class="w">        </span>Writing<span class="w"> </span>objects:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">7</span>/7<span class="o">)</span>,<span class="w"> </span><span class="m">1</span>.84<span class="w"> </span>KiB<span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="m">1</span>.84<span class="w"> </span>MiB/s,<span class="w"> </span><span class="k">done</span>.
<span class="w">        </span>Total<span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">(</span>delta<span class="w"> </span><span class="m">6</span><span class="o">)</span>,<span class="w"> </span>reused<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">(</span>delta<span class="w"> </span><span class="m">0</span><span class="o">)</span>,<span class="w"> </span>pack-reused<span class="w"> </span><span class="m">0</span>
<span class="w">        </span>remote:<span class="w"> </span>Resolving<span class="w"> </span>deltas:<span class="w"> </span><span class="m">100</span>%<span class="w"> </span><span class="o">(</span><span class="m">6</span>/6<span class="o">)</span>,<span class="w"> </span>completed<span class="w"> </span>with<span class="w"> </span><span class="m">6</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>objects.
<span class="w">        </span>remote:
<span class="w">        </span>remote:<span class="w"> </span>Create<span class="w"> </span>a<span class="w"> </span>pull<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="s1">'invoke_wave_enhancements'</span><span class="w"> </span>on<span class="w"> </span>GitHub<span class="w"> </span>by<span class="w"> </span>visiting:
<span class="w">        </span>remote:<span class="w">      </span>https://github.com/tpmccallum/wasmtime/pull/new/invoke_wave_enhancements
<span class="w">        </span>remote:
<span class="w">        </span>To<span class="w"> </span>github.com:tpmccallum/wasmtime.git
<span class="w">         </span>*<span class="w"> </span><span class="o">[</span>new<span class="w"> </span>branch<span class="o">]</span><span class="w">          </span>invoke_wave_enhancements<span class="w"> </span>-&gt;<span class="w"> </span>invoke_wave_enhancements
</code></pre></div>
<p>When creating the PR in the GitHub UI, the base repository is set to <code>pchickey/wasmtime</code>, but the drop-down for the base branch does not have a <code>pch/invoke_wave</code> option. Not sure if you want/need to push <code>pch/invoke_wave</code> to your fork so I can set it in the drop-down for the base?</p>
<p>At this stage, I used main as the base because the changed files look relevant to the <code>--invoke</code> work specifically. So perhaps all is fine and you will see my changes.</p>
<p>The PR is at <a href="https://github.com/pchickey/wasmtime/pull/1">tpmccallum/wasmtime:invoke_wave_enhancements</a>.<br>
I did not get to fixing the CI errors today, only the CLI output messages and the documentation.</p>
<p>Please let me know your thoughts, and I can get the CI done tomorrow. On that note, I was wondering if you wanted to rebase and bring the PR up to date with the current code base. Happy to be guided by you.</p>
<p>Chat soon<br>
Thanks!</p>
</blockquote>



<a name="509634307"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509634307" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509634307">(Apr 02 2025 at 08:35)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2771817012">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Update at <a href="https://github.com/bytecodealliance/wasmtime/pull/10511">https://github.com/bytecodealliance/wasmtime/pull/10511</a></p>
</blockquote>



<a name="509716339"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/509716339" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#509716339">(Apr 02 2025 at 14:39)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510237712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510237712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510237712">(Apr 04 2025 at 15:58)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510302776"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510302776" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510302776">(Apr 04 2025 at 22:44)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510302855"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510302855" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510302855">(Apr 04 2025 at 22:45)</a>:</h4>
<p><strong>pchickey</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a> as ready for review.</p>



<a name="510302859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510302859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510302859">(Apr 04 2025 at 22:45)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510302860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510302860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510302860">(Apr 04 2025 at 22:45)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510302862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510302862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510302862">(Apr 04 2025 at 22:45)</a>:</h4>
<p><strong>pchickey</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510303770"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510303770" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510303770">(Apr 04 2025 at 22:54)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>This PR does two things:</p>
<ul>
<li>
<p>adds the methods <code>exports</code> and <code>exports_rec</code> to Wasmtime's <code>Component</code> type. These expose iterators for the exported <code>ComponentItem</code>, as well as their string and <code>ComponentExportIndex</code> names, of the top level of a component, and recursively in all of the exports of a component, respectively. These methods are motivated by needing to search for export functions with a given suffix.</p>
</li>
<li>
<p>adds support for <code>wasmtime run --invoke &lt;wave-function-call&gt; component.wasm</code> to wasmtime-cli. In the existing invoke for modules, the user provides a bare function name, and only functions that do not take arguments are supported. For components, the argument to invoke is parsed into component vals using the existing wasm-wave parsing introduced in <a href="https://github.com/bytecodealliance/wasmtime/pull/8872">https://github.com/bytecodealliance/wasmtime/pull/8872</a>.  We make some effort to provide useful error messages when   we can't parse the wave function call.</p>
</li>
</ul>
</blockquote>



<a name="510312114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312114">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2744335730">PR review</a>:</p>
<blockquote>
<p>There was an <a href="https://github.com/bytecodealliance/bytecodealliance.org/pull/126/files#r2029019335">excellent suggestion to use single quotes</a> posted on the article about Invoke.<br>
Using single quotes to surround the whole function call negates the need to escape double quotes around string arguments.</p>
</blockquote>



<a name="510312115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312115">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577341">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>$ wasmtime run --invoke 'initialize()' foo.wasm
</code></pre></div><br>
</p>
</blockquote>



<a name="510312116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312116">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577702">PR review comment</a>:</p>



<a name="510312117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312117">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577808">PR review comment</a>:</p>



<a name="510312118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312118">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577505">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>The exported function's name and exported function's parentheses must both be enclosed in one set of single quotes, i.e. `'initialize()'`.
</code></pre></div><br>
</p>
</blockquote>



<a name="510312119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312119">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577661">PR review comment</a>:</p>



<a name="510312120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312120">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577864">PR review comment</a>:</p>



<a name="510312121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312121">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029578060">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>$ wasmtime run --invoke 'initialize("Pi", 3.14)' foo.wasm
</code></pre></div><br>
</p>
</blockquote>



<a name="510312122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312122">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029578183">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>$ wasmtime run --invoke 'add(1, 2)' foo.wasm
</code></pre></div><br>
</p>
</blockquote>



<a name="510312123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312123">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577918">PR review comment</a>:</p>



<a name="510312124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312124">(Apr 05 2025 at 00:28)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029578353">PR review comment</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>**Please note:** If you enclose your function call using double quotes, your string argument will require its double quotes to be escaped (escaping quotes is more complicated and harder to read and therefore not ideal). For example:

```bash
wasmtime run - invoke "initialize(\"hello\")" foo.wasm
</code></pre></div>
<h2><code>serve</code></h2>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="o">~~~</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="510312578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312578">(Apr 05 2025 at 00:35)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2744345692">PR review</a>.</p>



<a name="510312579"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312579" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312579">(Apr 05 2025 at 00:35)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029581782">PR review comment</a>:</p>
<blockquote>
<p>I would like to revisit this logic (and will take some help if possible).<br>
I discussed why Rust is not able to actually check for outer quotes in <a href="https://github.com/bytecodealliance/wasmtime/pull/10511#issuecomment-2774552109">this comment </a>.<br>
But now that I realize we can use single quotes to surround the whole function there might be another way to attempt to detect the absence of surrounding quotes (that are passed, to Rust, from the CLI). I will try and get back to this in a few hours and do some local testing.</p>
</blockquote>



<a name="510312916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312916">(Apr 05 2025 at 00:40)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2744352605">PR review</a>.</p>



<a name="510312917"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510312917" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510312917">(Apr 05 2025 at 00:40)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029584011">PR review comment</a>:</p>
<blockquote>
<p>Just some inline updates that promote the use of <code>'</code> instead of <code>"</code>.</p>
</blockquote>



<a name="510324519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510324519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510324519">(Apr 05 2025 at 03:03)</a>:</h4>
<p>tpmccallum edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2693247368">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey <br>
Thanks for the additional info. I got this working - and wrote <a href="https://github.com/bytecodealliance/bytecodealliance.org/pull/126">an article</a>.<br>
Thanks again!<br>
Let me know if you need/want me to do any further testing on this. Super happy to assist.</p>
</blockquote>



<a name="510324836"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510324836" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510324836">(Apr 05 2025 at 03:07)</a>:</h4>
<p>tpmccallum edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029581782">PR review comment</a>.</p>



<a name="510570473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570473">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029578353">PR review comment</a>.</p>



<a name="510570482"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570482" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570482">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029578183">PR review comment</a>.</p>



<a name="510570487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570487">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029578060">PR review comment</a>.</p>



<a name="510570496"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570496" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570496">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577918">PR review comment</a>.</p>



<a name="510570505"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570505" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570505">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577864">PR review comment</a>.</p>



<a name="510570517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570517">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577808">PR review comment</a>.</p>



<a name="510570528"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570528" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570528">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577702">PR review comment</a>.</p>



<a name="510570536"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570536" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570536">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577661">PR review comment</a>.</p>



<a name="510570545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570545">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577505">PR review comment</a>.</p>



<a name="510570552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510570552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510570552">(Apr 07 2025 at 06:23)</a>:</h4>
<p>tpmccallum deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2029577341">PR review comment</a>.</p>



<a name="510581517"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510581517" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510581517">(Apr 07 2025 at 07:27)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2745770891">PR review</a>.</p>



<a name="510581519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510581519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510581519">(Apr 07 2025 at 07:27)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2030612746">PR review comment</a>:</p>
<blockquote>
<p>Updates are ready at<br>
<a href="https://github.com/bytecodealliance/wasmtime/pull/10533">https://github.com/bytecodealliance/wasmtime/pull/10533</a></p>
</blockquote>



<a name="510581944"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510581944" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510581944">(Apr 07 2025 at 07:29)</a>:</h4>
<p>tpmccallum <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2782288982">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>Hi @pchickey and @alexcrichton <br>
Thanks for your patience. I have gotten around to some additional new work on a branch that handles the invoke quotes/parentheses and also takes care of the documentation about <code>invoke</code>'s quotes and parentheses, etc.<br>
<a href="https://github.com/bytecodealliance/wasmtime/pull/10533">https://github.com/bytecodealliance/wasmtime/pull/10533</a><br>
Thanks so much. <br>
Tim</p>
</blockquote>



<a name="510582074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510582074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510582074">(Apr 07 2025 at 07:30)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2745777611">PR review</a>.</p>



<a name="510582075"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510582075" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510582075">(Apr 07 2025 at 07:30)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2030617200">PR review comment</a>:</p>
<blockquote>
<p>Updates at <a href="https://github.com/bytecodealliance/wasmtime/pull/10533">https://github.com/bytecodealliance/wasmtime/pull/10533</a></p>
</blockquote>



<a name="510582114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510582114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510582114">(Apr 07 2025 at 07:30)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2745778128">PR review</a>.</p>



<a name="510582116"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510582116" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510582116">(Apr 07 2025 at 07:30)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2030617518">PR review comment</a>:</p>
<blockquote>
<p>Updates at <a href="https://github.com/bytecodealliance/wasmtime/pull/10533">https://github.com/bytecodealliance/wasmtime/pull/10533</a></p>
</blockquote>



<a name="510719945"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510719945" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510719945">(Apr 07 2025 at 16:41)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="510765251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510765251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510765251">(Apr 07 2025 at 20:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2748057907">PR review</a>.</p>



<a name="510765252"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510765252" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510765252">(Apr 07 2025 at 20:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2031975424">PR review comment</a>:</p>
<blockquote>
<p>I'm personally a bit hesitant to add too many flavors of accessors for exports, but would it be possible to use <a href="https://docs.rs/wasmtime/latest/wasmtime/component/types/struct.Component.html#method.exports"><code>types::Component::exports</code></a> here instead of adding these iterators?</p>
</blockquote>



<a name="510765253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510765253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510765253">(Apr 07 2025 at 20:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2031976441">PR review comment</a>:</p>
<blockquote>
<p>Is this still necessary? This currently compiles on CI so the ignoring the warning may not be necessary.</p>
</blockquote>



<a name="510765254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510765254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510765254">(Apr 07 2025 at 20:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2031977529">PR review comment</a>:</p>
<blockquote>
<p>Mind updating the docs here to clarify that this information related to <code>--invoke</code> is component-specific? For example the module/component <code>--invoke</code> arguments behave pretty differently</p>
</blockquote>



<a name="510765255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510765255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510765255">(Apr 07 2025 at 20:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2031996092">PR review comment</a>:</p>
<blockquote>
<p>FWIW I think the long string above is causing rustfmt to bail out here.</p>
</blockquote>



<a name="510765257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510765257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510765257">(Apr 07 2025 at 20:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2031995609">PR review comment</a>:</p>
<blockquote>
<p>Personally I'm a bit wary to eagerly include help text like this without more detection around what was being done. Could this perhaps instead link to the wave syntax document for now as an intro to what syntax is expected?</p>
</blockquote>



<a name="510792353"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510792353" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510792353">(Apr 08 2025 at 00:44)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2748407748">PR review</a>.</p>



<a name="510792354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510792354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510792354">(Apr 08 2025 at 00:44)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2032207909">PR review comment</a>:</p>
<blockquote>
<p>I believe it is still necessary, yes.<br>
For example, if I remove that line and then run the following:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">rustfmt --edition 2021 crates/wasmtime/src/runtime/wave/core.rs</span>
<span class="go">export CARGO_INCREMENTAL=0</span>
<span class="go">export CARGO_PROFILE_DEV_DEBUG=0</span>
<span class="go">export CARGO_PROFILE_TEST_DEBUG=0</span>
<span class="go">export RUSTFLAGS="-D warnings"</span>
<span class="go">export WIT_REQUIRE_SEMICOLONS=1</span>
<span class="go">cargo clippy --workspace --all-targets</span>
</code></pre></div>
<p>An error appears:</p>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="go">error: casting `u128` to `i64` may truncate the value</span>
<span class="go">   --&gt; crates/wasmtime/src/runtime/wave/core.rs:103:19</span>
<span class="go">    |</span>
<span class="go">103 |         let low = v as i64;</span>
<span class="go">    |                   ^^^^^^^^</span>
<span class="go">    |</span>
<span class="go">    = help: if this is intentional allow the lint with `#[allow(clippy::cast_possible_truncation)]` ...</span>
<span class="go">    = help: for further information visit https://rust-lang.github.io/rust-clippy/master/index.html#cast_possible_truncation</span>
<span class="go">    = note: `-D clippy::cast-possible-truncation` implied by `-D warnings`</span>
<span class="go">    = help: to override `-D warnings` add `#[allow(clippy::cast_possible_truncation)]`</span>
<span class="go">help: ... or use `try_from` and handle the error accordingly</span>
<span class="go">    |</span>
<span class="go">103 -         let low = v as i64;</span>
<span class="go">103 +         let low = i64::try_from(v);</span>
<span class="go">    |</span>

<span class="go">error: could not compile `wasmtime` (lib) due to 1 previous error</span>
</code></pre></div>
<p>If I add the <code>#[allow(clippy::cast_possible_truncation)]</code> back on line <code>100</code> the error goes away.<br>
I originally noticed the issue in the GitHub UI. Please see screen capture below:</p>
<p>![Screenshot 2025-04-08 at 10 42 38](<a href="https://github.com/user-attachments/assets/ee17b4b8-fe79-4c98-accb-ebdb4e426bdb">https://github.com/user-attachments/assets/ee17b4b8-fe79-4c98-accb-ebdb4e426bdb</a>)</p>
</blockquote>



<a name="510832799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510832799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510832799">(Apr 08 2025 at 04:08)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2748597048">PR review</a>.</p>



<a name="510832800"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510832800" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510832800">(Apr 08 2025 at 04:08)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2032344196">PR review comment</a>:</p>
<blockquote>
<p>Sure thing Alex. Good point. I have updated and will have a new branch with all of these changes for you soon.</p>
</blockquote>



<a name="510833237"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510833237" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510833237">(Apr 08 2025 at 04:12)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2748601549">PR review</a>.</p>



<a name="510833238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510833238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510833238">(Apr 08 2025 at 04:12)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2032346799">PR review comment</a>:</p>
<blockquote>
<p>Sure thing, I will add a link in the message and take these examples out of the CLI's response.<br>
Changes will also be on the new branch soon.</p>
</blockquote>



<a name="510838127"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510838127" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510838127">(Apr 08 2025 at 05:02)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2748657728">PR review</a>.</p>



<a name="510838128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510838128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510838128">(Apr 08 2025 at 05:02)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2032385318">PR review comment</a>:</p>
<blockquote>
<p>Updates at <a href="https://github.com/bytecodealliance/wasmtime/pull/10544/files">https://github.com/bytecodealliance/wasmtime/pull/10544/files</a></p>
</blockquote>



<a name="510838143"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510838143" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510838143">(Apr 08 2025 at 05:02)</a>:</h4>
<p>tpmccallum submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2748657943">PR review</a>.</p>



<a name="510838144"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/510838144" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#510838144">(Apr 08 2025 at 05:02)</a>:</h4>
<p>tpmccallum created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2032385437">PR review comment</a>:</p>
<blockquote>
<p>Updates at <a href="https://github.com/bytecodealliance/wasmtime/pull/10544/files">https://github.com/bytecodealliance/wasmtime/pull/10544/files</a></p>
</blockquote>



<a name="511023651"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511023651" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511023651">(Apr 08 2025 at 20:52)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="511452585"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511452585" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511452585">(Apr 10 2025 at 16:10)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2757423193">PR review</a>.</p>



<a name="511452587"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511452587" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511452587">(Apr 10 2025 at 16:10)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#discussion_r2037773426">PR review comment</a>:</p>
<blockquote>
<p>Ah ok makes sense, I think it's because the wave feature must not be enabled on the clippy run which would explain this a well</p>
</blockquote>



<a name="511708882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511708882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511708882">(Apr 11 2025 at 18:11)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="511709151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511709151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511709151">(Apr 11 2025 at 18:13)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<a name="511709802"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511709802" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511709802">(Apr 11 2025 at 18:17)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>This PR adds support for <code>wasmtime run --invoke &lt;wave-function-call&gt; component.wasm</code> to wasmtime-cli. In the existing invoke for modules, the user provides a bare function name, and only functions that do not take arguments are supported. For components, the argument to invoke is parsed into component vals using the existing wasm-wave parsing introduced in <a href="https://github.com/bytecodealliance/wasmtime/pull/8872">https://github.com/bytecodealliance/wasmtime/pull/8872</a>.  We make some effort to provide useful error messages when   we can't parse the wave function call.</p>
</blockquote>



<a name="511709937"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511709937" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511709937">(Apr 11 2025 at 18:18)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#issuecomment-2797713490">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>:</p>
<blockquote>
<p>@alexcrichton I rewrote the search for component exports to live in the wasmtime-cli and be much dumber/simpler than the borrowing version that was a method on Component.</p>
</blockquote>



<a name="511724713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511724713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511724713">(Apr 11 2025 at 19:57)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10054#pullrequestreview-2761461882">PR review</a>.</p>



<a name="511743924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310054%20wasmtime-cli%3A%20support%20%60run%20--invoke%60.../near/511743924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310054.20wasmtime-cli.3A.20support.20.60run.20--invoke.60.2E.2E.2E.html#511743924">(Apr 11 2025 at 22:22)</a>:</h4>
<p>pchickey merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10054">PR #10054</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>