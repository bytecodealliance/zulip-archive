<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11985 [wit-bindgen] Regression: previou... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311985.20.5Bwit-bindgen.5D.20Regression.3A.20previou.2E.2E.2E.html">wasmtime / issue #11985 [wit-bindgen] Regression: previou...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="553909164"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311985%20%5Bwit-bindgen%5D%20Regression%3A%20previou.../near/553909164" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311985.20.5Bwit-bindgen.5D.20Regression.3A.20previou.2E.2E.2E.html#553909164">(Nov 05 2025 at 16:44)</a>:</h4>
<p>anlavandier opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11985">issue #11985</a>:</p>
<blockquote>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"38"</span><span class="p">,</span><span class="w"> </span><span class="n">default-features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"runtime"</span><span class="p">,</span><span class="w"> </span><span class="s2">"component-model"</span><span class="p">,</span><span class="w"> </span><span class="s2">"async"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="p">;</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"bar"</span><span class="p">,</span>
<span class="w">    </span><span class="n">inline</span><span class="p">:</span><span class="w"> </span><span class="s">"</span>
<span class="s">    package example:example;</span>

<span class="s">    interface api {</span>
<span class="s">        foo: func();</span>
<span class="s">    }</span>

<span class="s">    world bar {</span>
<span class="s">        import api;</span>
<span class="s">    }</span>
<span class="s">    "</span><span class="p">,</span>
<span class="w">    </span><span class="n">imports</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"example:example/api/foo"</span><span class="p">:</span><span class="w"> </span><span class="nc">async</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>


<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</code></pre></div>
<p>This code compiles with the latest released version of wasmtime (38.0.3) but doesn't when using <code>main</code>, (29f2a1ca66c849a2d2e533a2df87c221daa8e2de at time of testing). The error is:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>error:<span class="w"> </span>unused<span class="w"> </span><span class="sb">`</span>imports<span class="sb">`</span><span class="w"> </span>rules<span class="w"> </span>found:<span class="w"> </span><span class="o">[</span><span class="s2">"\"example:example/api/foo\": FunctionFlags(ASYNC)"</span><span class="o">]</span>
<span class="w">  </span>--&gt;<span class="w"> </span>src/main.rs:3:1
<span class="w">   </span><span class="p">|</span>
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>/<span class="w"> </span>bindgen!<span class="o">({</span>
<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w">     </span>world:<span class="w"> </span><span class="s2">"bar"</span>,
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w">     </span>inline:<span class="w"> </span><span class="s2">"</span>
<span class="s2"> 6 | |     package example:example;</span>
<span class="s2">...  |</span>
<span class="s2">19 | | });</span>
<span class="s2">   | |__^</span>
<span class="s2">   |</span>
<span class="s2">   = note: this error originates in the macro `bindgen` (in Nightly builds, run with -Z macro-backtrace for more info)</span>
</code></pre></div>
</blockquote>



<a name="553909167"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311985%20%5Bwit-bindgen%5D%20Regression%3A%20previou.../near/553909167" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311985.20.5Bwit-bindgen.5D.20Regression.3A.20previou.2E.2E.2E.html#553909167">(Nov 05 2025 at 16:44)</a>:</h4>
<p><a href="https://github.com/anlavandier">anlavandier</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11985">Issue #11985</a>.</p>



<a name="553909256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311985%20%5Bwit-bindgen%5D%20Regression%3A%20previou.../near/553909256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311985.20.5Bwit-bindgen.5D.20Regression.3A.20previou.2E.2E.2E.html#553909256">(Nov 05 2025 at 16:44)</a>:</h4>
<p>anlavandier edited <a href="https://github.com/bytecodealliance/wasmtime/issues/11985">issue #11985</a>:</p>
<blockquote>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"38"</span><span class="p">,</span><span class="w"> </span><span class="n">default-features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"runtime"</span><span class="p">,</span><span class="w"> </span><span class="s2">"component-model"</span><span class="p">,</span><span class="w"> </span><span class="s2">"async"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="p">;</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"bar"</span><span class="p">,</span>
<span class="w">    </span><span class="n">inline</span><span class="p">:</span><span class="w"> </span><span class="s">"</span>
<span class="s">    package example:example;</span>

<span class="s">    interface api {</span>
<span class="s">        foo: func();</span>
<span class="s">    }</span>

<span class="s">    world bar {</span>
<span class="s">        import api;</span>
<span class="s">    }</span>
<span class="s">    "</span><span class="p">,</span>
<span class="w">    </span><span class="n">imports</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"example:example/api/foo"</span><span class="p">:</span><span class="w"> </span><span class="nc">async</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>


<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</code></pre></div>
<p>This code compiles with the latest released version of wasmtime (38.0.3) but doesn't when using <code>main</code>, (29f2a1ca66c849a2d2e533a2df87c221daa8e2de at time of testing). The error is:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>error:<span class="w"> </span>unused<span class="w"> </span><span class="sb">`</span>imports<span class="sb">`</span><span class="w"> </span>rules<span class="w"> </span>found:<span class="w"> </span><span class="o">[</span><span class="s2">"\"example:example/api/foo\": FunctionFlags(ASYNC)"</span><span class="o">]</span>
<span class="w">  </span>--&gt;<span class="w"> </span>src/main.rs:3:1
<span class="w">   </span><span class="p">|</span>
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>/<span class="w"> </span>bindgen!<span class="o">({</span>
<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w">     </span>world:<span class="w"> </span><span class="s2">"bar"</span>,
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w">     </span>inline:<span class="w"> </span><span class="s2">"</span>
<span class="s2"> 6 | |     package example:example;</span>
<span class="s2">...  |</span>
<span class="s2">19 | | });</span>
<span class="s2">   | |__^</span>
<span class="s2">   |</span>
<span class="s2">   = note: this error originates in the macro `bindgen` (in Nightly builds, run with -Z macro-backtrace for more info)</span>
</code></pre></div>
</blockquote>



<a name="553935209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311985%20%5Bwit-bindgen%5D%20Regression%3A%20previou.../near/553935209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311985.20.5Bwit-bindgen.5D.20Regression.3A.20previou.2E.2E.2E.html#553935209">(Nov 05 2025 at 18:33)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11985">issue #11985</a>:</p>
<blockquote>
<h3>Test Case</h3>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="n">wasmtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">version</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">"38"</span><span class="p">,</span><span class="w"> </span><span class="n">default-features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">"runtime"</span><span class="p">,</span><span class="w"> </span><span class="s2">"component-model"</span><span class="p">,</span><span class="w"> </span><span class="s2">"async"</span><span class="p">]</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">use</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="p">;</span>

<span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="w">    </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"bar"</span><span class="p">,</span>
<span class="w">    </span><span class="n">inline</span><span class="p">:</span><span class="w"> </span><span class="s">"</span>
<span class="s">    package example:example;</span>

<span class="s">    interface api {</span>
<span class="s">        foo: func();</span>
<span class="s">    }</span>

<span class="s">    world bar {</span>
<span class="s">        import api;</span>
<span class="s">    }</span>
<span class="s">    "</span><span class="p">,</span>
<span class="w">    </span><span class="n">imports</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="s">"example:example/api/foo"</span><span class="p">:</span><span class="w"> </span><span class="nc">async</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">});</span>


<span class="k">fn</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="p">}</span>
</code></pre></div>
<p>This code compiles with the latest released version of wasmtime (38.0.3) but doesn't when using <code>main</code>, (29f2a1ca66c849a2d2e533a2df87c221daa8e2de at time of testing). The error is:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>error:<span class="w"> </span>unused<span class="w"> </span><span class="sb">`</span>imports<span class="sb">`</span><span class="w"> </span>rules<span class="w"> </span>found:<span class="w"> </span><span class="o">[</span><span class="s2">"\"example:example/api/foo\": FunctionFlags(ASYNC)"</span><span class="o">]</span>
<span class="w">  </span>--&gt;<span class="w"> </span>src/main.rs:3:1
<span class="w">   </span><span class="p">|</span>
<span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>/<span class="w"> </span>bindgen!<span class="o">({</span>
<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w">     </span>world:<span class="w"> </span><span class="s2">"bar"</span>,
<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="p">|</span><span class="w"> </span><span class="p">|</span><span class="w">     </span>inline:<span class="w"> </span><span class="s2">"</span>
<span class="s2"> 6 | |     package example:example;</span>
<span class="s2">...  |</span>
<span class="s2">19 | | });</span>
<span class="s2">   | |__^</span>
<span class="s2">   |</span>
<span class="s2">   = note: this error originates in the macro `bindgen` (in Nightly builds, run with -Z macro-backtrace for more info)</span>
</code></pre></div>
</blockquote>



<a name="553935211"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311985%20%5Bwit-bindgen%5D%20Regression%3A%20previou.../near/553935211" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311985.20.5Bwit-bindgen.5D.20Regression.3A.20previou.2E.2E.2E.html#553935211">(Nov 05 2025 at 18:33)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11985#issuecomment-3492744545">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11985">issue #11985</a>:</p>
<blockquote>
<p>Thanks for the report! I believe you're seeing the impact of <a href="https://github.com/bytecodealliance/wasmtime/pull/11947">https://github.com/bytecodealliance/wasmtime/pull/11947</a>, which is an intentional change, so I'm going to close this. We'll be sure to call this out in the release notes for 39.0.0, however.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>