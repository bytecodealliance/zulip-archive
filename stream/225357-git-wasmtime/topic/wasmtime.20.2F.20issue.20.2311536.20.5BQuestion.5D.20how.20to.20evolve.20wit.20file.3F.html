<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11536 [Question] how to evolve wit file? · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html">wasmtime / issue #11536 [Question] how to evolve wit file?</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="536098368"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311536%20%5BQuestion%5D%20how%20to%20evolve%20wit%20file%3F/near/536098368" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html#536098368">(Aug 25 2025 at 20:01)</a>:</h4>
<p>Froidoh opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11536">issue #11536</a>:</p>
<blockquote>
<p>Hello!</p>
<p>I have a working prototype of using wit and wasmtime for some plugin functionality in a commercial app.</p>
<p>Now one major problem I see is how I can evolve the wit file without breaking all the plugins all the time.</p>
<p>If a plugin is done and tested it should not be touched until new functionality is actually required. It should just work.</p>
<p>But when I change the wit file for new plugins and adapt the host accordingly the existing compiled plugins wouldn't be able to be instantiated.</p>
<p>Any ideas?</p>
<p>Should I, or can I even go with multiple wit files and implement all of them on a plugin?</p>
<p>Any idea appreciated.</p>
<p>On another note: how to share .wit files between host and plugins?</p>
<p>I have the wit file in a shared rust lib for now that has no src folder and no rust code, but I just reference it from the plugins.</p>
<p>For now that's good enough, but in the future I would likw to change that and make it more robust.</p>
<p>Anyway, thanks for any kind of input and thanks a lot for wasmtime!</p>
</blockquote>



<a name="536104557"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311536%20%5BQuestion%5D%20how%20to%20evolve%20wit%20file%3F/near/536104557" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html#536104557">(Aug 25 2025 at 20:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11536#issuecomment-3221675725">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11536">issue #11536</a>:</p>
<blockquote>
<p>Good question! I'd recommend following the WASI precedent here which is to:</p>
<ul>
<li>Ensure all packages have a version.</li>
<li>Once a package is "published" (aka consumable by your plugins) then nothing about its types/functions can change.</li>
<li>Addition of new functions/types/interfaces, however, is possible in point release versions.</li>
<li>Your runtime and guests naturally use the latest version of WITs they had at the time of building, and those continue to work indefinitely.</li>
</ul>
<p>Does that work for your use case?</p>
<p>For sharing WITs I'd recommend <code>wkg</code> from <a href="https://github.com/bytecodealliance/wasm-pkg-tools">here</a></p>
</blockquote>



<a name="536107453"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311536%20%5BQuestion%5D%20how%20to%20evolve%20wit%20file%3F/near/536107453" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html#536107453">(Aug 25 2025 at 20:57)</a>:</h4>
<p>Froidoh <a href="https://github.com/bytecodealliance/wasmtime/issues/11536#issuecomment-3221721818">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11536">issue #11536</a>:</p>
<blockquote>
<p>Wow, thanks for the quick answer!</p>
<p>Well, I think it depends:</p>
<blockquote>
<p>Addition of new functions/types/interfaces, however, is possible in point release versions.</p>
</blockquote>
<p>What I want to avoid is: a new version of the .wit file is made with changes and now I have to touch every plugin.</p>
<p>Did I understand you correctly that if the wit file changes by just adding new functionality to the host functions and/or plugin functions, an existing compiled plugin .wasm file (without these functions) will still be able to be instantiated?</p>
<p>If so, that's perfectly fine.</p>
<p>If we change an existing signature, that's a breaking change and of course all the plugins need to be adapted to work with it.</p>
<p>Thanks for wkg!</p>
<p>And another request: If, at some point, you could improve the documentation about how to import existing wasi components like wasi-http etc. and how to use them. That would be super helpful!</p>
<p>I am not too deep in the topic yet and last year I implemented my own http-types because back then I couldn't find wasi-http and today I wouldn't know how to "ship" it.</p>
<p>Like, how to even start. Do I vendor it? Is there something like <code>cargo add wasi-http</code> etc.</p>
<p>There is a lot of information, but it's hard to find it.</p>
<p>But please don't get me wrong: I am super thankful for your hard work. wasmtime is an amazing project. Thank you for it!</p>
</blockquote>



<a name="536109749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311536%20%5BQuestion%5D%20how%20to%20evolve%20wit%20file%3F/near/536109749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html#536109749">(Aug 25 2025 at 21:10)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/11536#issuecomment-3221755712">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11536">issue #11536</a>:</p>
<blockquote>
<blockquote>
<p>What I want to avoid is: a new version of the .wit file is made with changes and now I have to touch every plugin.<br>
Did I understand you correctly that if the wit file changes by just adding new functionality to the host functions and/or plugin functions, an existing compiled plugin .wasm file (without these functions) will still be able to be instantiated?<br>
If so, that's perfectly fine.<br>
If we change an existing signature, that's a breaking change and of course all the plugins need to be adapted to work with it.</p>
</blockquote>
<p>Correct. If for example you release a wit at 0.1.0, then when you release 0.1.1, with only additions and no breaking changes, two things will be the case:</p>
<ol>
<li>if you update your wasmtime to use 0.1.1, all components created with wit 0.1.0 will still link to wasmtime's defiitions of those host functions.</li>
<li>if you leave your wasmtime at 0.1.0, components created with 0.1.1 will work so long as they don't include any of the new functionality created in 0.1.1. Put another way, if all you do is upgrade the version in a wit and not add anything, it will still be compatible.</li>
</ol>
<p>If you make a breaking change in semver by changing the version to 0.2.0, there will be no more compatibility. Components created on the 0.1.x series will not work in a wasmtime that only provides 0.2.0, and components created with 0.2.0 will not work in a wasmtime that provides 0.1.x. You can, however, build a wasmtime that supports both 0.1 and 0.2, you will just have to define both with their own wasmtime::component::bindgen! and make both sets available in a wasmtime::component::Linker by using the add_to_linker funcs from each.</p>
<blockquote>
<p>And another request: If, at some point, you could improve the documentation about how to import existing wasi components like wasi-http etc. and how to use them. That would be super helpful!<br>
I am not too deep in the topic yet and last year I implemented my own http-types because back then I couldn't find wasi-http and today I wouldn't know how to "ship" it.<br>
Like, how to even start. Do I vendor it? Is there something like cargo add wasi-http etc.</p>
</blockquote>
<p>Yes, you vendor it. wkg is the tool with which you vendor things, at the moment. If you would prefer, you can copy the file tree of wits out of <a href="https://github.com/WebAssembly/wasi-http/tree/main/wit">https://github.com/WebAssembly/wasi-http/tree/main/wit</a>.</p>
<blockquote>
<p>There is a lot of information, but it's hard to find it.<br>
But please don't get me wrong: I am super thankful for your hard work. wasmtime is an amazing project. Thank you for it!</p>
</blockquote>
<p>Thanks, we know that documentation isnt perfect right now. One of our best sources of information is <a href="http://component-model.bytecodealliance.org">component-model.bytecodealliance.org</a> . If you can't find something there, you can ask on this issue tracker if it has something to do with wasmtime, or you can file a bug on <a href="https://github.com/bytecodealliance/component-docs/">https://github.com/bytecodealliance/component-docs/</a> that the docs dont cover something. You can also get help on <a href="https://bytecodealliance.zulipchat.com/">https://bytecodealliance.zulipchat.com/</a>.</p>
</blockquote>



<a name="536110203"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311536%20%5BQuestion%5D%20how%20to%20evolve%20wit%20file%3F/near/536110203" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html#536110203">(Aug 25 2025 at 21:13)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11536#issuecomment-3221755712">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11536">issue #11536</a>:</p>
<blockquote>
<blockquote>
<p>What I want to avoid is: a new version of the .wit file is made with changes and now I have to touch every plugin.<br>
Did I understand you correctly that if the wit file changes by just adding new functionality to the host functions and/or plugin functions, an existing compiled plugin .wasm file (without these functions) will still be able to be instantiated?<br>
If so, that's perfectly fine.<br>
If we change an existing signature, that's a breaking change and of course all the plugins need to be adapted to work with it.</p>
</blockquote>
<p>Correct. If for example you release a wit at 0.1.0, then when you release 0.1.1, with only additions and no breaking changes, two things will be the case:</p>
<ol>
<li>if you update your wasmtime to use 0.1.1, all components created with wit 0.1.0 will still link to wasmtime's defiitions of those host functions.</li>
<li>if you leave your wasmtime at 0.1.0, components created with 0.1.1 will work so long as they don't include any of the new functionality created in 0.1.1. Put another way, if all you do is upgrade the version in a wit and not add anything, it will still be compatible.</li>
</ol>
<p>If you make a breaking change in semver by changing the version to 0.2.0, there will be no more compatibility. Components created on the 0.1.x series will not work in a wasmtime that only provides 0.2.0, and components created with 0.2.0 will not work in a wasmtime that provides 0.1.x. You can, however, build a wasmtime that supports both 0.1 and 0.2, you will just have to define both with their own wasmtime::component::bindgen! and make both sets available in a wasmtime::component::Linker by using the add_to_linker funcs from each.</p>
<blockquote>
<p>And another request: If, at some point, you could improve the documentation about how to import existing wasi components like wasi-http etc. and how to use them. That would be super helpful!<br>
I am not too deep in the topic yet and last year I implemented my own http-types because back then I couldn't find wasi-http and today I wouldn't know how to "ship" it.<br>
Like, how to even start. Do I vendor it? Is there something like cargo add wasi-http etc.</p>
</blockquote>
<p>Yes, you can vendor. wkg is the tool with which you vendor things, at the moment. If you would prefer, you can copy the file tree of wits out of <a href="https://github.com/WebAssembly/wasi-http/tree/main/wit">https://github.com/WebAssembly/wasi-http/tree/main/wit</a>.</p>
<p>If you are writing guest components in Rust and they only use the wasi interfaces, rather than vendoring wit, you can use the <code>wasi</code> crate, which just provides the definitions as created by <code>wit-bindgen</code> from a vendored set of wits, and does nothing else.</p>
<p>If you are writing guests in Rust from your own sets of wits, you can create a crate of your own like <code>wasi</code> that exposes all of the raw bindings that all of your other guests can consume, so you don't have to duplicate the vendoring everywhere.</p>
<p>If you are writing guest components which use wasi interfaces and you want to use async Rust, you can consider using the <code>wstd</code> crate, which provides a higher level interface than the raw bindings exposed by <code>wasi</code>.</p>
<blockquote>
<p>There is a lot of information, but it's hard to find it.<br>
But please don't get me wrong: I am super thankful for your hard work. wasmtime is an amazing project. Thank you for it!</p>
</blockquote>
<p>Thanks, we know that documentation isnt perfect right now. One of our best sources of information is <a href="http://component-model.bytecodealliance.org">component-model.bytecodealliance.org</a> . If you can't find something there, you can ask on this issue tracker if it has something to do with wasmtime, or you can file a bug on <a href="https://github.com/bytecodealliance/component-docs/">https://github.com/bytecodealliance/component-docs/</a> that the docs dont cover something. You can also get help on <a href="https://bytecodealliance.zulipchat.com/">https://bytecodealliance.zulipchat.com/</a>.</p>
</blockquote>



<a name="536115693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311536%20%5BQuestion%5D%20how%20to%20evolve%20wit%20file%3F/near/536115693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311536.20.5BQuestion.5D.20how.20to.20evolve.20wit.20file.3F.html#536115693">(Aug 25 2025 at 21:57)</a>:</h4>
<p>Froidoh closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11536">issue #11536</a>:</p>
<blockquote>
<p>Hello!</p>
<p>I have a working prototype of using wit and wasmtime for some plugin functionality in a commercial app.</p>
<p>Now one major problem I see is how I can evolve the wit file without breaking all the plugins all the time.</p>
<p>If a plugin is done and tested it should not be touched until new functionality is actually required. It should just work.</p>
<p>But when I change the wit file for new plugins and adapt the host accordingly the existing compiled plugins wouldn't be able to be instantiated.</p>
<p>Any ideas?</p>
<p>Should I, or can I even go with multiple wit files and implement all of them on a plugin?</p>
<p>Any idea appreciated.</p>
<p>On another note: how to share .wit files between host and plugins?</p>
<p>I have the wit file in a shared rust lib for now that has no src folder and no rust code, but I just reference it from the plugins.</p>
<p>For now that's good enough, but in the future I would likw to change that and make it more robust.</p>
<p>Anyway, thanks for any kind of input and thanks a lot for wasmtime!</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>