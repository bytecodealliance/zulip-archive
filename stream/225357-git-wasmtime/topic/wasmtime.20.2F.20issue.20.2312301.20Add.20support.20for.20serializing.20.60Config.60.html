<html>
<head><meta charset="utf-8"><title>wasmtime / issue #12301 Add support for serializing `Config` · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html">wasmtime / issue #12301 Add support for serializing `Config`</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="567071841"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567071841" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567071841">(Jan 09 2026 at 04:33)</a>:</h4>
<p>gpace1 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Add serialization or some other form of line-wire data type to support transferring <code>wasmtime::Config</code> between devices.</p>
<h4>Benefit</h4>
<p>(Unless I'm misunderstanding something) In order to cross precompile right now, the <code>wasmtime</code> engine must know the target's configuration of its <code>wasmtime</code> Engine. By providing serialization to <code>Config</code> the compiling device can query the target for their <code>Config</code> and create an <code>Engine</code> using what it received.</p>
<p>In a simple scenario:</p>
<ul>
<li>Device <code>A </code>is the compiler</li>
<li>Device <code>B</code> is the target</li>
</ul>
<p>1) <code>A</code> and <code>B</code> connect but otherwise <code>A</code> knows nothing about <code>B</code> except that it's has <code>wasmtime</code><br>
2) <code>B</code> sends its configuration to <code>A</code><br>
3) <code>A</code> creates an Engine from <code>B</code>'s config and precompiles a component for <code>B</code><br>
4) <code>A</code> sends the precompiled component to <code>B</code></p>
<p>Without step 2 device <code>A</code> wouldn't know how to configure it's <code>Engine</code> for <code>B</code>. Even when knowing the target for <code>B</code> it seems it still wouldn't fully be aware of everything (not) supported by <code>B</code> (e.g. GC).</p>
<h4>Implementation</h4>
<p>The simplest would be to derive <code>serde</code> for <code>Config</code> and all inner types.</p>
</blockquote>



<a name="567175009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567175009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567175009">(Jan 09 2026 at 16:03)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12301#issuecomment-3729545203">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<p>For this we've historically been hesitant to do this for <code>Config</code> directly due to its unstable-representation-nature, but what we do support is <a href="https://docs.rs/wasmtime-cli-flags/latest/wasmtime_cli_flags/struct.CommonOptions.html"><code>wasmtime_cli_flags::CommonOptions</code></a> supports serde and can be used to create a <code>Config</code>. That means that you can at least deserialize configuration into a <code>Config</code>. Not everything in <code>Config</code>, however, can be represented with Serde.</p>
<p>Would that work for your use case? Or perhaps something built on and/or adjacent to that would work?</p>
</blockquote>



<a name="567197650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567197650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567197650">(Jan 09 2026 at 17:46)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/12301#issuecomment-3729953194">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<blockquote>
<p>due to its unstable-representation-nature</p>
</blockquote>
<p>FWIW, if the <code>wasmtime_cli_flags::CommonOptions</code> approach is not possible, I could potentially be convinced of adding serialization/deserialization to <code>wasmtime::Config</code> itself, with the understanding that it would only be binary compatible with that _exact_ <code>wasmtime</code> version (not something we would make promises about across patch releases) and we would presumably add the version to the encoding and check it on decoding.</p>
</blockquote>



<a name="567237324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567237324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567237324">(Jan 09 2026 at 18:23)</a>:</h4>
<p>gpace1 <a href="https://github.com/bytecodealliance/wasmtime/issues/12301#issuecomment-3730069673">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<p>I'm in no rush to have what I requested supported, as for now I've got control over devices A &amp; B in my scenario.</p>
<p>The issue is in the future I would like to support B being from an "infinity-pool" of third-party devices. The vast majority of which will probably be embedded, so I'm predicting there to be quite the variety of configurations.</p>
<p>Running into versioning problems is always going to be an issue, let alone <code>wasmtime</code> what I'm doing has its own issues. Device A will support multiple different versions of <code>wasmtime</code>, and it's perfectly fine for device A to reject B if it doesn't support the version of its configuration.</p>
</blockquote>



<a name="567259071"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567259071" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567259071">(Jan 09 2026 at 20:39)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12301#issuecomment-3730500017">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<p>My hunch is what you'll want is <code>wasmtime_cli_flags::CommonOptions</code> and that should work for your approach. That way you can have a configuration file per-configuration/device which is sent to the central server which dispatches based on wasmtime version which then further loads the configuration for the compilation.</p>
</blockquote>



<a name="567270198"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567270198" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567270198">(Jan 09 2026 at 22:11)</a>:</h4>
<p>gpace1 closed <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Add serialization or some other form of line-wire data type to support transferring <code>wasmtime::Config</code> between devices.</p>
<h4>Benefit</h4>
<p>(Unless I'm misunderstanding something) In order to cross precompile right now, the <code>wasmtime</code> engine must know the target's configuration of its <code>wasmtime</code> Engine. By providing serialization to <code>Config</code> the compiling device can query the target for their <code>Config</code> and create an <code>Engine</code> using what it received.</p>
<p>In a simple scenario:</p>
<ul>
<li>Device <code>A </code>is the compiler</li>
<li>Device <code>B</code> is the target</li>
</ul>
<p>1) <code>A</code> and <code>B</code> connect but otherwise <code>A</code> knows nothing about <code>B</code> except that it's has <code>wasmtime</code><br>
2) <code>B</code> sends its configuration to <code>A</code><br>
3) <code>A</code> creates an Engine from <code>B</code>'s config and precompiles a component for <code>B</code><br>
4) <code>A</code> sends the precompiled component to <code>B</code></p>
<p>Without step 2 device <code>A</code> wouldn't know how to configure it's <code>Engine</code> for <code>B</code>. Even when knowing the target for <code>B</code> it seems it still wouldn't fully be aware of everything (not) supported by <code>B</code> (e.g. GC).</p>
<h4>Implementation</h4>
<p>The simplest would be to derive <code>serde</code> for <code>Config</code> and all inner types.</p>
</blockquote>



<a name="567270199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312301%20Add%20support%20for%20serializing%20%60Config%60/near/567270199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312301.20Add.20support.20for.20serializing.20.60Config.60.html#567270199">(Jan 09 2026 at 22:11)</a>:</h4>
<p>gpace1 <a href="https://github.com/bytecodealliance/wasmtime/issues/12301#issuecomment-3730739613">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12301">issue #12301</a>:</p>
<blockquote>
<p>I think you're right and <code>CommonOptions</code> will work for what I want to do.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>