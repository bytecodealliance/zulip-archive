<html>
<head><meta charset="utf-8"><title>wasmtime / issue #12173 macos wasi: ln -s &quot;&quot; &quot;foo&quot; succeeds · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html">wasmtime / issue #12173 macos wasi: ln -s &quot;&quot; &quot;foo&quot; succeeds</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="564053545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564053545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564053545">(Dec 16 2025 at 14:22)</a>:</h4>
<p>wingo opened <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">issue #12173</a>:</p>
<blockquote>
<p>On <a href="https://github.com/WebAssembly/wasi-testsuite/pull/139">https://github.com/WebAssembly/wasi-testsuite/pull/139</a>, there is a test that <code>ln_s("".to_string(), "whatever".to_string())</code> fails.  However it succeeds on MacOS for some reason.</p>
<p>Wasmtime should filter out <code>""</code> as a symlink target, if the OS is unwilling to do so.  </p>
<p>(Does <code>touch ""</code> work on (any filesystem from) MacOS?  I would hope not; if so, perhaps that means we have to allow for <code>ln_s</code> targetting <code>""</code>.)</p>
</blockquote>



<a name="564053548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564053548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564053548">(Dec 16 2025 at 14:22)</a>:</h4>
<p><a href="https://github.com/wingo">wingo</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">Issue #12173</a>.</p>



<a name="564055429"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564055429" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564055429">(Dec 16 2025 at 14:30)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/12173#issuecomment-3660849268">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">issue #12173</a>:</p>
<blockquote>
<p><code>touch ""</code> doesn't work on macOS, but you are allowed to make a symlink with an empty filename as target.</p>
</blockquote>



<a name="564056078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564056078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564056078">(Dec 16 2025 at 14:33)</a>:</h4>
<p>wingo edited <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">issue #12173</a>:</p>
<blockquote>
<p>On <a href="https://github.com/WebAssembly/wasi-testsuite/pull/139">https://github.com/WebAssembly/wasi-testsuite/pull/139</a>, there is a test that <code>ln_s("".to_string(), "whatever".to_string())</code> fails.  However it succeeds on MacOS for some reason.</p>
<p>Should wasmtime filter out <code>""</code> as a symlink target, if the OS is unwilling to do so?</p>
<p>(Does <code>touch ""</code> work on (any filesystem from) MacOS?  I would hope not; if so, perhaps that means we have to allow for <code>ln_s</code> targetting <code>""</code>.)</p>
</blockquote>



<a name="564515035"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564515035" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564515035">(Dec 18 2025 at 17:07)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasi:impl label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">Issue #12173</a>.</p>



<a name="564515036"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564515036" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564515036">(Dec 18 2025 at 17:07)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasi:tests label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">Issue #12173</a>.</p>



<a name="564515037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564515037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564515037">(Dec 18 2025 at 17:07)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasi label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">Issue #12173</a>.</p>



<a name="564536324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564536324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564536324">(Dec 18 2025 at 18:50)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12173#issuecomment-3671734311">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">issue #12173</a>:</p>
<blockquote>
<p>Similar to <a href="https://github.com/bytecodealliance/wasmtime/issues/12178#issuecomment-3671670651">https://github.com/bytecodealliance/wasmtime/issues/12178#issuecomment-3671670651</a> I personally think this is something that's not clear whether we should filter out or handle. This is easier than others, but it's not clear to me. </p>
<p>@wingo these issues might be best for the WASI repository as spec questions perhaps? Here as an implementation we currently forward to whatever the closest platform equivalent for a function is which is more-or-less what I'd expect all other implementations to do. Divergence from that and codifying it one way or another to me is more of a spec question than an implementation question.</p>
</blockquote>



<a name="564715540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564715540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564715540">(Dec 19 2025 at 15:00)</a>:</h4>
<p>wingo <a href="https://github.com/bytecodealliance/wasmtime/issues/12173#issuecomment-3675388812">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">issue #12173</a>:</p>
<blockquote>
<p>Well... besides wasmtime being the only wasip3 implementation that I know of at the moment (I still haven't gotten jco to pass any of the wasi-testsuite), if it were just up to the spec then one would specify a single behavior -- except that's not how it works, we need to implement something that is feasible to implement on Windows and Mac, and to that extent "what Wasmtime is willing to do" is a key part of the spec-defining process :)  Also there is not really anyone "there" on the WASI side at the moment AFAICT.</p>
<p>In this <em>specific</em> instance... gosh I would just prevent the user from making new symlinks to <code>""</code>.  Reduce the state space.  WDYT?  Happy to do either but the buck stops here; I think we get to decide what the right thing is :)  Will document it either way.</p>
</blockquote>



<a name="564756432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312173%20macos%20wasi%3A%20ln%20-s%20%22%22%20%22foo%22%20succeeds/near/564756432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312173.20macos.20wasi.3A.20ln.20-s.20.22.22.20.22foo.22.20succeeds.html#564756432">(Dec 19 2025 at 18:36)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12173#issuecomment-3676109231">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12173">issue #12173</a>:</p>
<blockquote>
<p>I won't claim to be a filesystem expert by any means but outright rejecting empty names seems reasonable to me. If someone has a use case for that we can handle it later at that point?</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>