<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11176 Cranelift: Generate an `InstructionD... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html">wasmtime / PR #11176 Cranelift: Generate an `InstructionD...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="527051119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527051119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527051119">(Jul 03 2025 at 18:11)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a> from <code>fitzgen:instruction-data-map</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This allows you to map some functions, described by the given <code>InstructionMapper</code>, over each of the entitities in an instruction, producing a new <code>InstructionData</code>.</p>
<p>I intend to use this as part of an inliner API for Cranelift that I am developing as part of prototyping <a href="https://github.com/bytecodealliance/rfcs/pull/43">Wasmtime's compile-time builtins</a>.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="527051122"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527051122" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527051122">(Jul 03 2025 at 18:11)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>.</p>



<a name="527051123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527051123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527051123">(Jul 03 2025 at 18:11)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/abrown">abrown</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>.</p>



<a name="527051124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527051124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527051124">(Jul 03 2025 at 18:11)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>.</p>



<a name="527064949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527064949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527064949">(Jul 03 2025 at 19:58)</a>:</h4>
<p>abrown <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#issuecomment-3033452178">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>:</p>
<blockquote>
<p>I'll take an in-depth look at this after the weekend?</p>
</blockquote>



<a name="527525321"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527525321" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527525321">(Jul 07 2025 at 17:27)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#discussion_r2190676994">PR review comment</a>:</p>
<blockquote>
<p>It's weird that this missing space didn't trigger a formatting error during CI prior to this; is it possible this crate isn't being checked?</p>
</blockquote>



<a name="527525322"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527525322" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527525322">(Jul 07 2025 at 17:27)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#pullrequestreview-2994761870">PR review</a>:</p>
<blockquote>
<p>Makes sense!</p>
</blockquote>



<a name="527788619"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527788619" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527788619">(Jul 09 2025 at 00:14)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#pullrequestreview-2999412220">PR review</a>.</p>



<a name="527788620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527788620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527788620">(Jul 09 2025 at 00:14)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#discussion_r2193656024">PR review comment</a>:</p>
<blockquote>
<p>I think the whole crate disabled <code>rustfmt</code> or something, but I haven't looked into it yet.</p>
</blockquote>



<a name="527795677"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527795677" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527795677">(Jul 09 2025 at 01:49)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>.</p>



<a name="527795690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527795690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527795690">(Jul 09 2025 at 01:49)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>.</p>



<a name="527797935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527797935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527797935">(Jul 09 2025 at 02:26)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11176">PR #11176</a>.</p>



<a name="527835770"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527835770" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527835770">(Jul 09 2025 at 08:37)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#pullrequestreview-3000587129">PR review</a>.</p>



<a name="527835774"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527835774" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527835774">(Jul 09 2025 at 08:37)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#discussion_r2194416143">PR review comment</a>:</p>
<blockquote>
<p>Was it necessary to pull in a new dependency for a single function?</p>
</blockquote>



<a name="527913498"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527913498" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527913498">(Jul 09 2025 at 15:25)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#pullrequestreview-3002012827">PR review</a>.</p>



<a name="527913500"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/527913500" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#527913500">(Jul 09 2025 at 15:25)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#discussion_r2195315481">PR review comment</a>:</p>
<blockquote>
<p>It's already in the workspace and vetted, so it didn't seem like a big deal.</p>
</blockquote>



<a name="528080579"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/528080579" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#528080579">(Jul 10 2025 at 13:20)</a>:</h4>
<p>bjorn3 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#pullrequestreview-3005675351">PR review</a>.</p>



<a name="528080582"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/528080582" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#528080582">(Jul 10 2025 at 13:20)</a>:</h4>
<p>bjorn3 created <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#discussion_r2197722090">PR review comment</a>:</p>
<blockquote>
<p>It was previously not a Cranelift dependency. Cranelift is slowly getting more and more dependencies.</p>
</blockquote>



<a name="528120726"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/528120726" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#528120726">(Jul 10 2025 at 16:30)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#pullrequestreview-3006471194">PR review</a>.</p>



<a name="528120730"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311176%20Cranelift%3A%20Generate%20an%20%60InstructionD.../near/528120730" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311176.20Cranelift.3A.20Generate.20an.20.60InstructionD.2E.2E.2E.html#528120730">(Jul 10 2025 at 16:30)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11176#discussion_r2198198254">PR review comment</a>:</p>
<blockquote>
<p>Sharing common code via dependencies is not bad in and of itself IMO, and is actually generally good, especially when it is already vetted and relied upon in sibling projects.</p>
<p>Of course, there is the potential downside of from-scratch compile times getting a little worse. I'm happy to review a PR replacing the dependency with the hand-rolled equivalent function if you measure a from-scratch compile time regression and want to send such a PR, but I don't personally have the cycles to investigate all that myself at the moment.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>