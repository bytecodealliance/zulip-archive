<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12319 S390x: emit new instructions added i... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html">wasmtime / PR #12319 S390x: emit new instructions added i...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="567574846"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567574846" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567574846">(Jan 12 2026 at 15:57)</a>:</h4>
<p>theotherjimmy opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a> from <code>theotherjimmy:s390x-z17</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Z17 (arch15) includes some instructions that allow us to encode some more complicated operations in fewer instructions. This PR adds support to cranelift-codegen to emit these newer instructions when appropriate.</p>
<p>Further, Z17 includes a VBLEND instruction that mimics the same instruction on x64. Since this is no longer an x64-exclusive instruction type, I've renamed the appropriate stuff within cranelift codegen to reflect that this is not ISA-specific anymore.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="567574847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567574847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567574847">(Jan 12 2026 at 15:57)</a>:</h4>
<p><strong>theotherjimmy</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="567574848"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567574848" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567574848">(Jan 12 2026 at 15:57)</a>:</h4>
<p><strong>theotherjimmy</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="567576238"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567576238" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567576238">(Jan 12 2026 at 16:02)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="567581323"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567581323" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567581323">(Jan 12 2026 at 16:20)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="567582935"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567582935" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567582935">(Jan 12 2026 at 16:26)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="567603576"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567603576" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567603576">(Jan 12 2026 at 17:47)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#issuecomment-3739746878">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @cfallin, @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "cranelift", "cranelift:area:aarch64", "cranelift:area:x64", "cranelift:meta", "isle"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>cfallin: isle</li>
<li>fitzgen: isle</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="567642103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567642103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567642103">(Jan 12 2026 at 20:58)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#issuecomment-3740463910">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>:</p>
<blockquote>
<p>I'm going to shift review of this over to @uweigand </p>
</blockquote>



<a name="567642197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567642197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567642197">(Jan 12 2026 at 20:59)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#issuecomment-3740465339">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>:</p>
<blockquote>
<p>or,  well, I can't officially do that, but @uweigand I'm happy to rubber-stamp once you've approved</p>
</blockquote>



<a name="567790703"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567790703" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567790703">(Jan 13 2026 at 15:16)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3656251933">PR review</a>:</p>
<blockquote>
<p>Looks mostly good to me, but see inline comments.</p>
<p>In addition to what is implemented here, we now <em>could</em> implement vector integer division for 32-bit and 64-bit integer vectors - but there is currently no ISLE to even express this.</p>
</blockquote>



<a name="567790705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567790705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567790705">(Jan 13 2026 at 15:16)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686844858">PR review comment</a>:</p>
<blockquote>
<p>Not sure what if any canonicalization is done at the ISLE level here, but these four don't cover all possible combinations.  E.g. <code>(band x (band (bnot y) z))</code> is not covered.</p>
<p>I guess a more fundamental question is which combinations we should be covering.  For example, why cover and-not with three inputs but not or-not?</p>
</blockquote>



<a name="567790706"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567790706" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567790706">(Jan 13 2026 at 15:16)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686781612">PR review comment</a>:</p>
<blockquote>
<p>We should also test the encoding for VBLEND and VEVAL here.</p>
</blockquote>



<a name="567790707"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567790707" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567790707">(Jan 13 2026 at 15:16)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686857829">PR review comment</a>:</p>
<blockquote>
<p>We should also add z17 insns to the disassembler, but that is of course a different patch.</p>
</blockquote>



<a name="567790708"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567790708" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567790708">(Jan 13 2026 at 15:16)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686792533">PR review comment</a>:</p>
<blockquote>
<p>I think we need to fix this before committing.   (Also, there probably should be run-time test validating the correct behaviour like for other divison operations.)</p>
</blockquote>



<a name="567790709"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567790709" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567790709">(Jan 13 2026 at 15:16)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686860437">PR review comment</a>:</p>
<blockquote>
<p>Should this function also be renamed to lose the <code>x86</code> then?</p>
</blockquote>



<a name="567805854"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567805854" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567805854">(Jan 13 2026 at 16:15)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3656661833">PR review</a>.</p>



<a name="567805856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567805856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567805856">(Jan 13 2026 at 16:15)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2687109358">PR review comment</a>:</p>
<blockquote>
<p>I stopped because I realized this would add hundreds of rules to get correct, and ran out of steam pretty quickly. I think it's an open question: what should we encode? what 3-input binary operations are actually used?</p>
</blockquote>



<a name="567833305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567833305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567833305">(Jan 13 2026 at 18:26)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="567833361"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567833361" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567833361">(Jan 13 2026 at 18:26)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3657228369">PR review</a>.</p>



<a name="567833364"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567833364" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567833364">(Jan 13 2026 at 18:26)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2687579761">PR review comment</a>:</p>
<blockquote>
<p>Done.</p>
</blockquote>



<a name="567833424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567833424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567833424">(Jan 13 2026 at 18:27)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3657229402">PR review</a>.</p>



<a name="567833425"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/567833425" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#567833425">(Jan 13 2026 at 18:27)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2687580773">PR review comment</a>:</p>
<blockquote>
<p>Added tests.</p>
</blockquote>



<a name="569587757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569587757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569587757">(Jan 22 2026 at 21:00)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="569588372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569588372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569588372">(Jan 22 2026 at 21:04)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3694588051">PR review</a>.</p>



<a name="569588373"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569588373" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569588373">(Jan 22 2026 at 21:04)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2718626800">PR review comment</a>:</p>
<blockquote>
<p>I made a python script to handle this, and committed the results. My thinking is this:</p>
<ul>
<li>This only has to happen once</li>
<li>It would be better to have the results interspersed in the file near their 2-input counterparts for better</li>
</ul>
</blockquote>



<a name="569588510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569588510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569588510">(Jan 22 2026 at 21:05)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3694590587">PR review</a>.</p>



<a name="569588511"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569588511" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569588511">(Jan 22 2026 at 21:05)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2718629131">PR review comment</a>:</p>
<blockquote>
<p>Is the integer overflow we're checking for diving <code>INTMIN</code> by <code>-1</code>?</p>
</blockquote>



<a name="569594261"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569594261" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569594261">(Jan 22 2026 at 21:45)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3694735206">PR review</a>.</p>



<a name="569594262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569594262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569594262">(Jan 22 2026 at 21:45)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2718752503">PR review comment</a>:</p>
<blockquote>
<p>That's a yes. I missed that bit of the instruction description.</p>
</blockquote>



<a name="569752862"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569752862" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569752862">(Jan 23 2026 at 16:10)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="569753025"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569753025" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569753025">(Jan 23 2026 at 16:11)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3698340362">PR review</a>.</p>



<a name="569753027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/569753027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#569753027">(Jan 23 2026 at 16:11)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2721872164">PR review comment</a>:</p>
<blockquote>
<p>Fixed.</p>
</blockquote>



<a name="570579265"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/570579265" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#570579265">(Jan 28 2026 at 14:52)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3717140171">PR review</a>:</p>
<blockquote>
<p>This looks all good to me now, except for the <code>srem</code> implementation - see inline comment.</p>
</blockquote>



<a name="570579268"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/570579268" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#570579268">(Jan 28 2026 at 14:52)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2737010061">PR review comment</a>:</p>
<blockquote>
<p>The <code>sdiv</code> case looks good now, but the <code>srem</code> case is wrong - in the case of division of INT_MIN by -1, only the quotient overflows, not the remainder.  The remainder in this case is simply zero, just as with any division by -1.  See the comment above and the <code>maybe_avoid_srem_overflow</code> helper.  I think this can be implemented following the same logic for $I128 as well.</p>
</blockquote>



<a name="570853010"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/570853010" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#570853010">(Jan 29 2026 at 17:15)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="570853111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/570853111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#570853111">(Jan 29 2026 at 17:15)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3724042454">PR review</a>.</p>



<a name="570853114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/570853114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#570853114">(Jan 29 2026 at 17:15)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2742700604">PR review comment</a>:</p>
<blockquote>
<p>I missed that. Fixed in the just-pushed series.</p>
</blockquote>



<a name="571735827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/571735827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#571735827">(Feb 03 2026 at 18:40)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3746960200">PR review</a>:</p>
<blockquote>
<p>Thanks, this version LGTM now!</p>
</blockquote>



<a name="571737644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/571737644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#571737644">(Feb 03 2026 at 18:50)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3747008120">PR review</a>:</p>
<blockquote>
<p>Rubber-stamping based on Ulrich's review -- thanks!</p>
</blockquote>



<a name="571737692"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/571737692" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#571737692">(Feb 03 2026 at 18:51)</a>:</h4>
<p>cfallin added <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319 S390x: emit new instructions added in z17</a> to the merge queue.</p>



<a name="571742393"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/571742393" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#571742393">(Feb 03 2026 at 19:15)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319</a>.</p>



<a name="571742396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312319%20S390x%3A%20emit%20new%20instructions%20added%20i.../near/571742396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312319.20S390x.3A.20emit.20new.20instructions.20added.20i.2E.2E.2E.html#571742396">(Feb 03 2026 at 19:15)</a>:</h4>
<p>cfallin removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12319">PR #12319 S390x: emit new instructions added in z17</a> from the merge queue.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>