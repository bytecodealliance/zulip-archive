<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11326 WebAssembly exception-handling support. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html">wasmtime / PR #11326 WebAssembly exception-handling support.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="535211771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535211771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535211771">(Aug 19 2025 at 22:31)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535211949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535211949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535211949">(Aug 19 2025 at 22:33)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3202473912">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>I've now rebased (twice -- #11461 created more conflicts -- hopefully this lands soon!) and marked as ready. This PR is stacked on top of #11467. All spec-tests should be passing (will watch CI to make sure it goes green here). Thanks for the feedback so far!</p>
</blockquote>



<a name="535213715"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535213715" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535213715">(Aug 19 2025 at 22:59)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>This PR introduces support for the [Wasm exception-handling proposal], which introduces a conventional try/catch mechanism to WebAssembly. The PR supports modules that use <code>try_table</code> to register handlers for a lexical scope; and provides <code>throw</code> and <code>throw_ref</code> that allocate (in the first case) and throw exception objects.</p>
<p>This PR builds on top of the work in #10510 for Cranelift-level exception support, #10919 for an unwinder, and #11230 for exception objects built on top of GC, in addition a bunch of smaller fix and enabling PRs around those.</p>
<p>[Wasm exception-handling proposal]: <a href="https://github.com/WebAssembly/exception-handling/">https://github.com/WebAssembly/exception-handling/</a></p>
</blockquote>



<a name="535221296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221296">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286664059">PR review comment</a>:</p>
<blockquote>
<p>Similar to above, could this use <code>if cfg!(debug_assertions) { ... }</code> to avoid needing a conditional import on <code>ExceptionTable</code>? (this'll show up in CI for release builds I think which aren't enabled by default on PRs)</p>
</blockquote>



<a name="535221297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221297">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286671165">PR review comment</a>:</p>
<blockquote>
<p>You can use <code>?</code> after <code>self.take_pending_exception()</code> to avoid indentation if you'd like</p>
</blockquote>



<a name="535221298"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221298" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221298">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286664785">PR review comment</a>:</p>
<blockquote>
<p>Personally I'd be in favor of "thrown wasm exception" or something like that as opposed to the generic <code>ThrownException</code> this'll otherwise print</p>
</blockquote>



<a name="535221299"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221299" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221299">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286661845">PR review comment</a>:</p>
<blockquote>
<p>This should test <code>features</code>-the-local-variable since that represents the calculation of wasm features after enabled/disabled/defaults/etc.</p>
<p>Also mind folding the <code>#[cfg]</code> into the boolean expression with <code>!cfg!(feature = "gc")</code>? I personally prefer to favor <code>cfg!</code> where possible since it avoids dead code warnings and such (not that such motivations are applicable here)</p>
</blockquote>



<a name="535221300"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221300" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221300">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3134335811">PR review</a>:</p>
<blockquote>
<p>Mind updating a few bits and pieces of documentation as well with this? The ones I can think of are:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-wasm-proposals.md#wasm-proposals">The wasm proposals table</a></li>
<li><a href="https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-tiers.md#x86_64">The architecture table for supported wasm proposals</a></li>
</ul>
<p>Also, apart from Pulley and fuzzing possibly, are there other known entities to record in issues before landing? E.g. anything like an open question about performance, API, etc.</p>
<p>I should also clarify that I so far haven't looked at the wasmtime-cranelift side of things at all, I figured I'd defer to @fitzgen for that, but Nick if you'd like I'm happy to review it here too.</p>
</blockquote>



<a name="535221301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221301">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286672060">PR review comment</a>:</p>
<blockquote>
<p>Is <code>clone</code> the right operation to call here? I would have expected we just thread through the <code>VMGcRef</code> as-is because we're effectively moving ownership into the return value</p>
</blockquote>



<a name="535221302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221302">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286670083">PR review comment</a>:</p>
<blockquote>
<p>Given that we need to in theory replicate these methods on <code>StoreContextMut</code>, <code>Store</code>, <code>Caller</code>, and other things that implement <code>AsContextMut</code>, and given that in theory we also need to eventually add <code>catch_async</code> in addition to <code>catch</code>, I'd subjectively say this is probably fine to relegate to examples or documentation but otherwise not live here as a first-class function.</p>
</blockquote>



<a name="535221303"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221303" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221303">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286706457">PR review comment</a>:</p>
<blockquote>
<p>Reading this over, the semantics of <code>set_pending_exception</code> are such that it panics if the exception is already set, right? Would that mean that if an embedder forgot to call <code>take_pending_exception</code> and then reentered wasm after an exception, would that panic on another exception?</p>
<p>If not, yay! If so, I might say we should instead allow <code>set_pending_exception</code> with whatever and it just overwrites whatever was there previously.</p>
</blockquote>



<a name="535221304"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221304" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221304">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286678303">PR review comment</a>:</p>
<blockquote>
<p>FWIW this is an example of where in my subjective opinion <code>#[cfg]</code> is overkill. For example if we have <code>ThrownException</code>, a unit struct, in the public API when the <code>gc</code> feature is disabled that seems fine to me and worth it to avoid growing more <code>#[cfg]</code></p>
</blockquote>



<a name="535221305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221305">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286693288">PR review comment</a>:</p>
<blockquote>
<p>With the changes here and to the <code>match</code> below, could you run the <code>call.rs</code> benchmark before/after this PR with the <code>^sync.*no-hook.*host-to-wasm.* typed - nop$</code> regex? If there's no real change, yay! If there's a regression, mind spot-checking to see if anything jumps out?</p>
</blockquote>



<a name="535221306"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535221306" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535221306">(Aug 20 2025 at 00:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2286699441">PR review comment</a>:</p>
<blockquote>
<p>Would it be possible to change this to <code>Option&lt;usize&gt;</code> representing the payload? That way <code>UnwindToHost</code> would assert it's <code>None</code> and <code>UnwindToWasm</code> would assert it's <code>Some</code>. </p>
</blockquote>



<a name="535375010"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535375010" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535375010">(Aug 20 2025 at 19:10)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535377865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535377865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535377865">(Aug 20 2025 at 19:29)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137967699">PR review</a>.</p>



<a name="535377868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535377868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535377868">(Aug 20 2025 at 19:29)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289101177">PR review comment</a>:</p>
<blockquote>
<p>Hmm, I pulled on this thread a bit, and adding a <code>ThrownException</code> unit struct (or uninhabitable enum) allows this to clean up, but then starts pulling a bunch of other things out of <code>gc</code>-only config as well (<code>TrapReason</code>, more unwind code depending on where we want to draw the boundary...) and honestly it seems cleaner to me to take the sharp line of types-and-enum-arms-don't-exist-for-exceptions in a GC-disabled build? Otherwise there are a bunch of dynamically unreachable failure points, which seems awkward in its own way...</p>
</blockquote>



<a name="535378657"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378657" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378657">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535378660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378660">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137982036">PR review</a>.</p>



<a name="535378662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378662">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289111376">PR review comment</a>:</p>
<blockquote>
<p>We did indeed have "panic on re-setting pending exception", due to <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2279374762">your review comment here</a> suggesting that we <code>debug_assert</code> to ensure no prior exception. That said, now that we have the "pending exception slot" API, this is user-exposed and clearly a different tradeoff, so I've removed that assert.</p>
</blockquote>



<a name="535378678"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378678" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378678">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137982349">PR review</a>.</p>



<a name="535378680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378680">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289111574">PR review comment</a>:</p>
<blockquote>
<p>Definitely not, it turns out! I was playing Type Tetris with the APIs and this was the best I had found, but it turns out <code>Rooted::new</code> is exactly what I wanted to root an existing raw ref. Updated.</p>
</blockquote>



<a name="535378695"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378695" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378695">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137982591">PR review</a>.</p>



<a name="535378696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378696">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289111723">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="535378704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378704">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137982796">PR review</a>.</p>



<a name="535378705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378705">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289111863">PR review comment</a>:</p>
<blockquote>
<p>Sure, removed for now -- always possible to add later if it turns out to be a real ergonomic need...</p>
</blockquote>



<a name="535378713"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378713" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378713">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137982996">PR review</a>.</p>



<a name="535378714"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378714" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378714">(Aug 20 2025 at 19:34)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289111999">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="535378734"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378734" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378734">(Aug 20 2025 at 19:35)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137983388">PR review</a>.</p>



<a name="535378735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378735">(Aug 20 2025 at 19:35)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289112275">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="535378744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378744">(Aug 20 2025 at 19:35)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137983757">PR review</a>.</p>



<a name="535378745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535378745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535378745">(Aug 20 2025 at 19:35)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289112461">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="535380817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535380817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535380817">(Aug 20 2025 at 19:50)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138033200">PR review</a>.</p>



<a name="535380818"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535380818" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535380818">(Aug 20 2025 at 19:50)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289148716">PR review comment</a>:</p>
<blockquote>
<p>I see a ~10% regression (10.8ns -&gt; 12.1ns) on core Wasm host-to-Wasm calls, and an in-the-noise / "0.4% speedup" on component host-to-Wasm calls. I don't see any obvious reason that would cause this for non-trapping/throwing calls, but given a little more plumbing in general I'm also not too surprised. Happy to try digging in further if needed...</p>
</blockquote>



<a name="535381275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535381275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535381275">(Aug 20 2025 at 19:53)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138043301">PR review</a>.</p>



<a name="535381276"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535381276" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535381276">(Aug 20 2025 at 19:53)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289157121">PR review comment</a>:</p>
<blockquote>
<p>This is slightly tricky as it would then imply the caller of <code>unwind</code> knows when to provide the payload -- the protocol is that the pending exception remains on the <code>Store</code> if we're <code>UnwindToHost</code>'ing, and not if we're <code>UnwindToWasm</code>'ing. IMHO I'd rather keep the knowledge of <code>self.unwind</code> enum arms local to this file, but open to other ideas if you have any.</p>
</blockquote>



<a name="535381982"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535381982" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535381982">(Aug 20 2025 at 20:00)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535382048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382048">(Aug 20 2025 at 20:00)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3137966615">PR review</a>:</p>
<blockquote>
<p>r=me with the offsets and stack map stuff addressed, thanks!</p>
</blockquote>



<a name="535382049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382049">(Aug 20 2025 at 20:00)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289107828">PR review comment</a>:</p>
<blockquote>
<p>I think we will want to have both the existing <code>GcLayouts::exception_tag_offset</code> method and a new <code>GcLayouts::exception_instance_idx_offset</code> method, and then use those things here (or the collector-specific constants that those things are implemented with here).</p>
</blockquote>



<a name="535382050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382050">(Aug 20 2025 at 20:00)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289100481">PR review comment</a>:</p>
<blockquote>
<p>It is pretty funky and potentially footgun-y that we have <code>tag_offset</code> as the offset of the instance id and then do <code>tag_offset + 4</code> to get the tag offset. Can we use proper constants and/or <code>VMOffsets</code> methods for everything here (and also have tests asserting that they are correct, if we are missing them).</p>
</blockquote>



<a name="535382051"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382051" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382051">(Aug 20 2025 at 20:00)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289108662">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>    log::trace!("translate_exn_unbox({tag_index:?}, {exn_ref:?})");
</code></pre></div><br>
</p>
</blockquote>



<a name="535382052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382052">(Aug 20 2025 at 20:00)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289132260">PR review comment</a>:</p>
<blockquote>
<p>I think this should be on the maybe-<code>ireduce</code>d value, not the direct payload. Don't have a link to the code off-hand but I am pretty sure we assert somewhere that we only have stack maps for <code>i32</code> types.</p>
</blockquote>



<a name="535382053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382053">(Aug 20 2025 at 20:00)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289137390">PR review comment</a>:</p>
<blockquote>
<p>Yeah:</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/blob/c645077df15584651f115ae9c909072cd699ef28/crates/cranelift/src/compiler.rs#L1314-L1329">https://github.com/bytecodealliance/wasmtime/blob/c645077df15584651f115ae9c909072cd699ef28/crates/cranelift/src/compiler.rs#L1314-L1329</a></p>
</blockquote>



<a name="535382133"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535382133" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535382133">(Aug 20 2025 at 20:01)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3207907433">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<blockquote>
<p>Mind updating a few bits and pieces of documentation as well with this? The ones I can think of are:</p>
<div class="codehilite"><pre><span></span><code>* [The wasm proposals table](https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-wasm-proposals.md#wasm-proposals)

* [The architecture table for supported wasm proposals](https://github.com/bytecodealliance/wasmtime/blob/main/docs/stability-tiers.md#x86_64)
</code></pre></div>

<p>Also, apart from Pulley and fuzzing possibly, are there other known entities to record in issues before landing? E.g. anything like an open question about performance, API, etc.</p>
</blockquote>
<p>Docs updated!</p>
<p>The two major remaining bits are Pulley support and ensuring exception support is fuzzed. I'll work on at least the latter, and I'll file issues for both once this merges.</p>
<p>All comments addressed modulo those still open above -- thanks!</p>
</blockquote>



<a name="535385396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385396">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535385405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385405">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138140165">PR review</a>.</p>



<a name="535385407"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385407" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385407">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289226836">PR review comment</a>:</p>
<blockquote>
<p>Fixed!</p>
</blockquote>



<a name="535385415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385415">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138140413">PR review</a>.</p>



<a name="535385416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385416">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289227048">PR review comment</a>:</p>
<blockquote>
<p>Done!</p>
</blockquote>



<a name="535385429"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385429" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385429">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138140596">PR review</a>.</p>



<a name="535385430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385430">(Aug 20 2025 at 20:29)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289227206">PR review comment</a>:</p>
<blockquote>
<p>Good point -- fixed!</p>
</blockquote>



<a name="535385503"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535385503" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535385503">(Aug 20 2025 at 20:30)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3207998343">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>@alexcrichton I think this is ready for you again on the three open threads above; and a final LGTM or any other issues you see on the runtime side. Thanks!</p>
</blockquote>



<a name="535386253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386253">(Aug 20 2025 at 20:35)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138154872">PR review</a>.</p>



<a name="535386254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386254">(Aug 20 2025 at 20:35)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289237935">PR review comment</a>:</p>
<blockquote>
<p>No I agree that we should avoid <code>unreachable!()</code>-behind-cfg or things like that as agreed it gets tough to reason about "why again isn't this dynamically reachable?" In that sense I agree that <code>TrapReason::Exception</code> should stay #[cfg]'d away.</p>
<p>In retrospect I don't think I fully thought this through. My main reaction was duplication of the function signature and fallback to <code>TrapReason::User</code>. This could be "solved" with something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span><span class="w"> </span><span class="nf">from</span><span class="p">(</span><span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Error</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cp">#[cfg(feature = </span><span class="s">"gc"</span><span class="cp">)]</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="cm">/* test for `ThrownException` and return it */</span><span class="w"> </span><span class="p">}</span>

<span class="w">    </span><span class="n">TrapReason</span><span class="p">::</span><span class="n">user</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
<p>which avoids duplicating the function signature and keeps the gc code "on the side". Not perfect in the sense of it still has #[cfg], but this is all quite minor and not as actionable as I originally thought it was, so I'd say let's conclude "just ignore alex here"</p>
</blockquote>



<a name="535386396"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386396" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386396">(Aug 20 2025 at 20:36)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138157651">PR review</a>.</p>



<a name="535386398"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386398" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386398">(Aug 20 2025 at 20:36)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289240130">PR review comment</a>:</p>
<blockquote>
<p>That's reasonable enough for now IMO. I suspect we might be able to recover that by shuffling around things, maybe adding <code>#[cold]</code>, tweaking slow paths, etc. That being said it's still solidly in the realm of "this shouldn't matter and it's still fast", so I think it's fine to defer such theoretical tweaks to a future point in time.</p>
</blockquote>



<a name="535386515"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386515" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386515">(Aug 20 2025 at 20:37)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138159673">PR review</a>.</p>



<a name="535386519"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386519" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386519">(Aug 20 2025 at 20:37)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289241659">PR review comment</a>:</p>
<blockquote>
<p>Nah that seems reasonable, this is a feeble attempt by me to future-proof Pulley support a bit more. Let's just defer and deal with it in total later.</p>
</blockquote>



<a name="535386839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535386839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535386839">(Aug 20 2025 at 20:40)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138165961">PR review</a>:</p>
<blockquote>
<p>All sounds reasonable to me!</p>
<p>I suspect this is likely going to bounce on CI at least once, and for that I'd recommend adding <code>prtest:full</code> to the commit messsage to get full CI here on the PR as that should give a much faster cycle time than going through the merge queue. Although that's all moot if it sails through the merge queue on the first try.</p>
</blockquote>



<a name="535388085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535388085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535388085">(Aug 20 2025 at 20:50)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535388110"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535388110" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535388110">(Aug 20 2025 at 20:50)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#pullrequestreview-3138197319">PR review</a>.</p>



<a name="535388111"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535388111" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535388111">(Aug 20 2025 at 20:50)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#discussion_r2289267226">PR review comment</a>:</p>
<blockquote>
<p>Ah, cool, the cfg-inside-the-function is at least a little bit cleaner -- switched to that. Thanks!</p>
</blockquote>



<a name="535388746"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535388746" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535388746">(Aug 20 2025 at 20:56)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535390163"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535390163" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535390163">(Aug 20 2025 at 21:08)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208094520">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>Could you address CI failures in separate commits instead of squashing all back into one? That makes it a bit easier to review after this has merged (and it all gets squashed in the merge queue anyway)</p>
</blockquote>



<a name="535396165"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535396165" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535396165">(Aug 20 2025 at 22:04)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208213859">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>Ah, sorry about that! Bad habit trying to keep a clean commit history. Last diff was</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">diff</span><span class="w"> </span><span class="o">--</span><span class="n">git</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="n">b</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span>
<span class="n">index</span><span class="w"> </span><span class="n">de80727fa9</span><span class="o">..</span><span class="mi">19</span><span class="n">a18af8ea</span><span class="w"> </span><span class="mi">100644</span>
<span class="o">---</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span>
<span class="o">+++</span><span class="w"> </span><span class="n">b</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span>
<span class="o">@@</span><span class="w"> </span><span class="o">-</span><span class="mi">1612</span><span class="p">,</span><span class="mi">7</span><span class="w"> </span><span class="o">+</span><span class="mi">1612</span><span class="p">,</span><span class="mi">10</span><span class="w"> </span><span class="o">@@</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">raise</span><span class="p">(</span><span class="n">store</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="k">dyn</span><span class="w"> </span><span class="n">VMStore</span><span class="p">,</span><span class="w"> </span><span class="n">_instance</span><span class="p">:</span><span class="w"> </span><span class="nc">Pin</span><span class="o">&lt;&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">Instance</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="c1">// When Cranelift isn't in use then this is an unused libcall for Pulley, so</span>
<span class="w">     </span><span class="c1">// just insert a stub to catch bugs if it's accidentally called.</span>
<span class="w">     </span><span class="cp">#[cfg(not(has_host_compiler_backend))]</span>

<span class="o">-</span><span class="w">    </span><span class="fm">unreachable!</span><span class="p">()</span>
<span class="o">+</span><span class="w">    </span><span class="p">{</span>
<span class="o">+</span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">store</span><span class="p">;</span>
<span class="o">+</span><span class="w">        </span><span class="fm">unreachable!</span><span class="p">()</span>
<span class="o">+</span><span class="w">    </span><span class="p">}</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="c1">// Builtins for continuations. These are thin wrappers around the</span>
<span class="n">diff</span><span class="w"> </span><span class="o">--</span><span class="n">git</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="n">b</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span>
<span class="n">index</span><span class="w"> </span><span class="mi">2</span><span class="n">cf28c5caa</span><span class="o">..</span><span class="n">a6cf333a94</span><span class="w"> </span><span class="mi">100644</span>
<span class="o">---</span><span class="w"> </span><span class="n">a</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span>
<span class="o">+++</span><span class="w"> </span><span class="n">b</span><span class="o">/</span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span>
<span class="o">@@</span><span class="w"> </span><span class="o">-</span><span class="mi">115</span><span class="p">,</span><span class="mi">9</span><span class="w"> </span><span class="o">+</span><span class="mi">115</span><span class="p">,</span><span class="mi">10</span><span class="w"> </span><span class="o">@@</span><span class="w"> </span><span class="k">pub</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="k">fn</span><span class="w"> </span><span class="nf">compute_throw_action</span><span class="p">(</span><span class="n">store</span><span class="p">:</span><span class="w"> </span><span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="k">dyn</span><span class="w"> </span><span class="n">VMStore</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">ThrowAction</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="p">}</span>
<span class="w">         </span><span class="nb">None</span>
<span class="w">     </span><span class="p">};</span>

<span class="o">+</span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">unwinder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nogc</span><span class="p">.</span><span class="n">unwinder</span><span class="p">();</span>
<span class="w">     </span><span class="kd">let</span><span class="w"> </span><span class="n">action</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">wasmtime_unwinder</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">(</span>

<span class="o">-</span><span class="w">            </span><span class="o">&amp;</span><span class="n">wasmtime_unwinder</span><span class="p">::</span><span class="n">UnwindHost</span><span class="p">,</span>
<span class="o">+</span><span class="w">            </span><span class="n">unwinder</span><span class="p">,</span>
<span class="w">             </span><span class="n">handler_lookup</span><span class="p">,</span>
<span class="w">             </span><span class="n">exit_pc</span><span class="p">,</span>
<span class="w">             </span><span class="n">exit_trampoline_fp</span><span class="p">,</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="535397001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535397001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535397001">(Aug 20 2025 at 22:11)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535400059"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535400059" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535400059">(Aug 20 2025 at 22:41)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535400415"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535400415" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535400415">(Aug 20 2025 at 22:44)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535403205"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535403205" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535403205">(Aug 20 2025 at 23:17)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535407217"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535407217" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535407217">(Aug 21 2025 at 00:10)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535408705"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535408705" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535408705">(Aug 21 2025 at 00:33)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535409739"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535409739" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535409739">(Aug 21 2025 at 00:47)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535411627"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535411627" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535411627">(Aug 21 2025 at 01:09)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208596407">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>While there may be more than one segfaulting test I can reproduce <code>exceptions::craneliftnative_basic_throw</code> failing with this stack trace:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">#</span><span class="mi">0</span><span class="w">  </span><span class="mh">0x000002aa022684a8</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime_environ</span><span class="p">::</span><span class="n">module</span><span class="p">::</span><span class="n">Module</span><span class="p">::</span><span class="n">defined_tag_index</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">environ</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">module</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">528</span>
<span class="p">#</span><span class="mi">1</span><span class="w">  </span><span class="mh">0x000002aa022768a0</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">instance</span><span class="p">::</span><span class="n">Instance</span><span class="p">::</span><span class="n">get_exported_tag</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">instance</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">676</span>
<span class="p">#</span><span class="mi">2</span><span class="w">  </span><span class="mh">0x000002aa020592fe</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">::{</span><span class="n">closure</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">99</span>
<span class="p">#</span><span class="mi">3</span><span class="w">  </span><span class="mh">0x000002aa02058a6e</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime_internal_unwinder</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">::{</span><span class="n">closure</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">76</span>
<span class="p">#</span><span class="mi">4</span><span class="w">  </span><span class="mh">0x000002aa0236f44c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime_internal_unwinder</span><span class="p">::</span><span class="n">stackwalk</span><span class="p">::</span><span class="n">visit_frames</span><span class="o">&lt;</span><span class="n">wasmtime_internal_unwinder</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">ThrowAction</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime_internal_unwinder</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">stackwalk</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">203</span>
<span class="p">#</span><span class="mi">5</span><span class="w">  </span><span class="mh">0x000002aa020588b6</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime_internal_unwinder</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">unwinder</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">60</span>
<span class="p">#</span><span class="mi">6</span><span class="w">  </span><span class="mh">0x000002aa020613f8</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">throw</span><span class="p">::</span><span class="n">compute_throw_action</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">throw</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">120</span>
<span class="p">#</span><span class="mi">7</span><span class="w">  </span><span class="mh">0x000002aa02387efc</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">call_thread_state</span><span class="p">::</span><span class="n">CallThreadState</span><span class="p">::</span><span class="n">record_unwind</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">819</span>
<span class="p">#</span><span class="mi">8</span><span class="w">  </span><span class="mh">0x000002aa0241cca2</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_unwind_and_record_trap</span><span class="p">::{</span><span class="n">closure</span><span class="p">#</span><span class="mi">1</span><span class="p">}</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">instance</span><span class="p">::{</span><span class="k">impl</span><span class="p">#</span><span class="mi">0</span><span class="p">}::</span><span class="n">enter_host_from_wasm</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">throw_ref</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">136</span>
<span class="p">#</span><span class="mi">9</span><span class="w">  </span><span class="mh">0x000002aa0245e3b8</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">tls</span><span class="p">::</span><span class="n">with</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_unwind_and_record_trap</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">1</span><span class="p">}</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">instance</span><span class="p">::{</span><span class="k">impl</span><span class="p">#</span><span class="mi">0</span><span class="p">}::</span><span class="n">enter_host_from_wasm</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">throw_ref</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;&gt;&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1394</span>
<span class="p">#</span><span class="mi">10</span><span class="w"> </span><span class="mh">0x000002aa02417ecc</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_unwind_and_record_trap</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">instance</span><span class="p">::{</span><span class="k">impl</span><span class="p">#</span><span class="mi">0</span><span class="p">}::</span><span class="n">enter_host_from_wasm</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">throw_ref</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">136</span>
<span class="p">#</span><span class="mi">11</span><span class="w"> </span><span class="mh">0x000002aa021466e0</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">instance</span><span class="p">::</span><span class="n">Instance</span><span class="p">::</span><span class="n">enter_host_from_wasm</span><span class="o">&lt;</span><span class="n">core</span><span class="p">::</span><span class="n">result</span><span class="p">::</span><span class="nb">Result</span><span class="o">&lt;</span><span class="p">(),</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">TrapReason</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">throw_ref</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">instance</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">265</span>
<span class="p">#</span><span class="mi">12</span><span class="w"> </span><span class="mh">0x000002aa02132a9a</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">raw</span><span class="p">::</span><span class="n">throw_ref</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">libcalls</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">125</span>
<span class="p">#</span><span class="mi">13</span><span class="w"> </span><span class="mh">0x000075fbea7486cc</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="p">()</span>
<span class="p">#</span><span class="mi">14</span><span class="w"> </span><span class="mh">0x000075fbea7480da</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="p">()</span>
<span class="p">#</span><span class="mi">15</span><span class="w"> </span><span class="mh">0x000075fbea74813c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="p">()</span>
<span class="p">#</span><span class="mi">16</span><span class="w"> </span><span class="mh">0x000075fbea74821c</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">??</span><span class="w"> </span><span class="p">()</span>
<span class="p">#</span><span class="mi">17</span><span class="w"> </span><span class="mh">0x000002aa016c9026</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">vmcontext</span><span class="p">::</span><span class="n">VMFuncRef</span><span class="p">::</span><span class="n">array_call_native</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">vmcontext</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">961</span>
<span class="p">#</span><span class="mi">18</span><span class="w"> </span><span class="mh">0x000002aa016c8f66</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">vmcontext</span><span class="p">::</span><span class="n">VMFuncRef</span><span class="p">::</span><span class="n">array_call</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">vmcontext</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">918</span>
<span class="p">#</span><span class="mi">19</span><span class="w"> </span><span class="mh">0x000002aa018f2082</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::{</span><span class="k">impl</span><span class="p">#</span><span class="mi">1</span><span class="p">}::</span><span class="n">call_unchecked_raw</span><span class="p">::{</span><span class="n">closure</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">func</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1025</span>
<span class="p">#</span><span class="mi">20</span><span class="w"> </span><span class="mh">0x000002aa01102302</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">traphandlers</span><span class="p">::</span><span class="n">catch_traps</span><span class="p">::{</span><span class="n">closure</span><span class="p">#</span><span class="mi">0</span><span class="p">}::</span><span class="n">call_closure</span><span class="o">&lt;</span><span class="n">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">func</span><span class="p">::{</span><span class="k">impl</span><span class="p">#</span><span class="mi">1</span><span class="p">}::</span><span class="n">call_unchecked_raw</span><span class="p">::{</span><span class="n">closure_env</span><span class="p">#</span><span class="mi">0</span><span class="p">}</span><span class="o">&lt;</span><span class="p">()</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">    </span><span class="n">at</span><span class="w"> </span><span class="n">crates</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">vm</span><span class="o">/</span><span class="n">traphandlers</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">463</span>
</code></pre></div>
<p>Given that it's s390x-only though it's probably an endianness issue, perhaps something with a little-endian load needs to be native-endian? Or vice versa? Or maybe a store on the host needs to be little instead of native endian?</p>
</blockquote>



<a name="535411827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535411827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535411827">(Aug 21 2025 at 01:12)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208600210">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>Yep, it's almost certainly endianness -- taking a look!</p>
</blockquote>



<a name="535413485"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535413485" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535413485">(Aug 21 2025 at 01:32)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208632699">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>Actually, it's an issue with dynamic context reads during the stack-walk, it seems -- s390x ABI is a bit different (stackchains rather than FP-chains) so I suspect this is the issue.</p>
</blockquote>



<a name="535415839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535415839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535415839">(Aug 21 2025 at 02:04)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535415973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535415973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535415973">(Aug 21 2025 at 02:06)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535416072"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535416072" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535416072">(Aug 21 2025 at 02:07)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208720884">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>s390x turned out to expose a mismatch in the definition of "spillslot offset" for the dynamic context -- the accessor I had exposed returns offset from the fixed storage area, which is ordinarily at <code>SP+0</code> <em>unless</em> there is an outgoing args area. s390x always has an outgoing args area (per ABI). A win for ISA diversity wrt testing!</p>
</blockquote>



<a name="535416141"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535416141" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535416141">(Aug 21 2025 at 02:08)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535420199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535420199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535420199">(Aug 21 2025 at 03:04)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/11326#issuecomment-3208838225">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<h4>Label Messager: wasmtime:config</h4>
<p>It looks like you are changing Wasmtime's configuration options. Make sure to<br>
complete this check list:</p>
<ul>
<li>
<p>[ ] If you added a new <code>Config</code> method, you wrote extensive documentation for<br>
      it.</p>
<p>&lt;details&gt;</p>
<p>Our documentation should be of the following form:</p>
<p>```text<br>
Short, simple summary sentence.</p>
<p>More details. These details can be multiple paragraphs. There should be<br>
information about not just the method, but its parameters and results as<br>
well.</p>
<p>Is this method fallible? If so, when can it return an error?</p>
<p>Can this method panic? If so, when does it panic?</p>
<h1>Example</h1>
<p>Optional example here.<br>
```</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you added a new <code>Config</code> method, or modified an existing one, you<br>
  ensured that this configuration is exercised by the fuzz targets.</p>
<p>&lt;details&gt;</p>
<p>For example, if you expose a new strategy for allocating the next instance<br>
slot inside the pooling allocator, you should ensure that at least one of our<br>
fuzz targets exercises that new strategy.</p>
<p>Often, all that is required of you is to ensure that there is a knob for this<br>
configuration option in [<code>wasmtime_fuzzing::Config</code>][fuzzing-config] (or one<br>
of its nested <code>struct</code>s).</p>
<p>Rarely, this may require authoring a new fuzz target to specifically test this<br>
configuration. See [our docs on fuzzing][fuzzing-docs] for more details.</p>
<p>&lt;/details&gt;</p>
</li>
<li>
<p>[ ] If you are enabling a configuration option by default, make sure that it<br>
  has been fuzzed for at least two weeks before turning it on by default.</p>
</li>
</ul>
<p>[fuzzing-config]: <a href="https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194">https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194</a><br>
[fuzzing-docs]: <a href="https://docs.wasmtime.dev/contributing-fuzzing.html">https://docs.wasmtime.dev/contributing-fuzzing.html</a></p>
<hr>
<p>&lt;details&gt;</p>
<p>To modify this label's message, edit the &lt;code&gt;.github/label-messager/wasmtime-config.md&lt;/code&gt; file.</p>
<p>To add new label messages or remove existing label messages, edit the<br>
&lt;code&gt;.github/label-messager.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/label-messager-action">Learn more.</a></p>
<p>&lt;/details&gt;</p>
</blockquote>



<a name="535421222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535421222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535421222">(Aug 21 2025 at 03:17)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>.</p>



<a name="535589790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311326%20WebAssembly%20exception-handling%20support./near/535589790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311326.20WebAssembly.20exception-handling.20support.2E.html#535589790">(Aug 21 2025 at 22:53)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11326">PR #11326</a>:</p>
<blockquote>
<p>This PR introduces support for the [Wasm exception-handling proposal], which introduces a conventional try/catch mechanism to WebAssembly. The PR supports modules that use <code>try_table</code> to register handlers for a dynamic scope; and provides <code>throw</code> and <code>throw_ref</code> that allocate (in the first case) and throw exception objects.</p>
<p>This PR builds on top of the work in #10510 for Cranelift-level exception support, #10919 for an unwinder, and #11230 for exception objects built on top of GC, in addition a bunch of smaller fix and enabling PRs around those.</p>
<p>[Wasm exception-handling proposal]: <a href="https://github.com/WebAssembly/exception-handling/">https://github.com/WebAssembly/exception-handling/</a></p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>