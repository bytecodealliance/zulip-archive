<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11391 Wasmtime hangs indefinitely · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html">wasmtime / issue #11391 Wasmtime hangs indefinitely</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="533213598"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533213598" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533213598">(Aug 07 2025 at 04:13)</a>:</h4>
<p>teyahb8 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>wasm file: <a href="https://github.com/user-attachments/files/21650739/wasm-shrunken_test779339.txt">wasm-shrunken_test779339.txt</a></p>
<p>wat code:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span>
<span class="w">  </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">memory</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="mi">65536</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">export</span><span class="w"> </span><span class="s">"main"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x269b302c</span><span class="w"> </span><span class="mh">0x33ff2555</span><span class="w"> </span><span class="mh">0x3d332eb9</span><span class="w"> </span><span class="mh">0x6150b21b</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="mi">91780</span><span class="n">cp</span><span class="o">+</span><span class="mi">106</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">127230580000000000000000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">eq</span>
<span class="w">    </span><span class="n">f64x2</span><span class="p">.</span><span class="n">min</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">ne</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">i64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">extract_lane_s</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">load64_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4424</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">abb8e2p</span><span class="o">+</span><span class="mi">62</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">7705158000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">9009</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">store8_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">818</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xd4913b28</span><span class="w"> </span><span class="mh">0xfd94f22d</span><span class="w"> </span><span class="mh">0x28f70108</span><span class="w"> </span><span class="mh">0x2ee6c557</span>
<span class="w">      </span><span class="n">i8x16</span><span class="p">.</span><span class="n">ne</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="n">load8x8_s</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">7845</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nb">drop</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">4</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x4412d00e</span><span class="w"> </span><span class="mh">0x91b9105c</span><span class="w"> </span><span class="mh">0x3f5d100c</span><span class="w"> </span><span class="mh">0x4888c991</span>
<span class="w">            </span><span class="n">i32x4</span><span class="p">.</span><span class="n">extmul_low_i16x8_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">7</span>
<span class="w">                  </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">8</span>
<span class="w">                    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                    </span><span class="nb">drop</span>
<span class="w">                    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                    </span><span class="n">br_table</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">7</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">8</span><span class="p">;)</span>
<span class="w">                  </span><span class="n">end</span>
<span class="w">                  </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                  </span><span class="n">br_if</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">                  </span><span class="n">nop</span>
<span class="w">                  </span><span class="n">nop</span>
<span class="w">                  </span><span class="n">br</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">                </span><span class="n">end</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">f64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="nb">drop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x7d1f37e7</span><span class="w"> </span><span class="mh">0x275466b3</span><span class="w"> </span><span class="mh">0x4ed3def7</span><span class="w"> </span><span class="mh">0x4ae48eda</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">select</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x6d311927</span><span class="w"> </span><span class="mh">0x418c5fa1</span><span class="w"> </span><span class="mh">0xfd0e4ac7</span><span class="w"> </span><span class="mh">0x91fbcd1d</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="nb">drop</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">              </span><span class="n">select</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">v128</span><span class="p">.</span><span class="n">store16_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">5390</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="nb">drop</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">4</span><span class="p">;)</span>
<span class="w">          </span><span class="n">end</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">v128</span><span class="p">.</span><span class="n">load32_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">1480</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xa3dc3f3f</span><span class="w"> </span><span class="mh">0x11c29a13</span><span class="w"> </span><span class="mh">0xba0ce1ed</span><span class="w"> </span><span class="mh">0x49567075</span>
<span class="w">        </span><span class="n">i8x16</span><span class="p">.</span><span class="n">min_u</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9763</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">2</span><span class="p">;)</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">7345</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4669</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store64_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">3353</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9577</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">3</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">i64x2</span><span class="p">.</span><span class="n">bitmask</span>
<span class="w">          </span><span class="n">v128</span><span class="p">.</span><span class="n">load8_splat</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9328</span>
<span class="w">          </span><span class="n">f32x4</span><span class="p">.</span><span class="n">le</span>
<span class="w">          </span><span class="nb">drop</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">br_if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">2</span><span class="p">;)</span>
<span class="w">          </span><span class="n">br</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">1</span><span class="p">;)</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nb">drop</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">br_if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">1</span><span class="p">;)</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store64_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">333</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="k">return</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x04ef3aa8</span><span class="w"> </span><span class="mh">0x144a0479</span><span class="w"> </span><span class="mh">0x7d6f0c6b</span><span class="w"> </span><span class="mh">0x86e20f80</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ol>
<li>Run: <code>wasmtime -W all-proposals=y --invoke main test.wasm</code></li>
</ol>
<h3>Expected Results</h3>
<p>Based on wasmer (llvm backed), wamr (AOT mode), and wasmedge, the output is: <code>out of bounds</code> exception</p>
<h3>Actual Results</h3>
<p>Wasmtime hangs indefinitely</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 37.0.0 (3cbeb24bc 2025-08-06)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm? Thanks in advance.<br>
</p>
</blockquote>



<a name="533213599"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533213599" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533213599">(Aug 07 2025 at 04:13)</a>:</h4>
<p><a href="https://github.com/teyahb8">teyahb8</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">Issue #11391</a>.</p>



<a name="533215504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533215504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533215504">(Aug 07 2025 at 04:37)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/11391#issuecomment-3162424752">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<p>@teyahb8, a request: could you invest a little more time into your bug reporting? While we're thankful for reports in general, you are following a pattern we have seen a bunch of times before, where someone points a new fuzzer at Wasmtime and generates a bunch of reports with minimal effort to bottom out root causes. This is problematic when combined with incomplete filtering or misunderstanding of the spec on your end (see e.g. your recent #11387): it creates significant cost for core maintainers in a way that is not balanced. In particular, the social contract of open-source dictates that you spend effort to reduce the bug, write up your understanding of the issue and why you think the results are incorrect.</p>
<p>So: would you mind minimizing this further? Could you note which load or store you believe should go out of bounds that doesn't? Thanks!</p>
<p>(We should probably have some documentation on "how to be a responsible citizen when fuzzing Wasmtime"...)</p>
</blockquote>



<a name="533219661"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533219661" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533219661">(Aug 07 2025 at 05:29)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/11391#issuecomment-3162545442">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<p>Actually, I was bothered enough by this to reduce it for you -- this sequence leads up to a load that goes out of bounds when using Pulley (<code>wasmtime run --target pulley64</code>) but not x86-64:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x269b302c</span><span class="w"> </span><span class="mh">0x33ff2555</span><span class="w"> </span><span class="mh">0x3d332eb9</span><span class="w"> </span><span class="mh">0x6150b21b</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="mi">91780</span><span class="n">cp</span><span class="o">+</span><span class="mi">106</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">127230580000000000000000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">eq</span>
<span class="w">    </span><span class="n">f64x2</span><span class="p">.</span><span class="n">min</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">ne</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">i64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">extract_lane_s</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">load64_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4424</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
</code></pre></div>
<p>which I manually reduced to</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i8x16</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span><span class="w"> </span><span class="mh">0xff</span>
<span class="w">    </span><span class="n">f64x2</span><span class="p">.</span><span class="n">min</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">extract_lane_s</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">load64_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4424</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
</code></pre></div>
<p>Note that this is performing a floating-point operation on v128 bits that (interpreted as <code>f64x2</code>) are NaNs, so Wasm permits nondeterminism. On x86-64, our implementation of <code>f64x2.min(0x00000000000000000000000000000000, 0xffffffffffffffffffffffffffffffff)</code> returns <code>0xfff8000000000000fff8000000000000</code>, while Pulley64's returns <code>0xffffffffffffffffffffffffffffffff</code>. The second argument is a NaN, and the result is a NaN, so both are correct. Neither are actually canonical; with <code>-W nan-canonicalization=y</code>, we get <code>0x7ff80000000000007ff8000000000000</code>.</p>
<p>With the all-ones (<code>0xfffff...</code>) result, the arithmetic shift-right-by-1 gives a bottom 32 bits of <code>0xffffffff</code> (sign bit smeared), the signed extract-lane gives a scalar i32 result of <code>0xffffffff</code>, and this load goes out of bounds (with the 4424-byte offset) in a 4GiB memory. With the x86-64 result with a NaN payload of all zeroes (also legal), we get a result from the extract-lane of <code>0</code>, and we are in-bounds. Note that with NaN canonicalization enabled, the load is also in-bounds.</p>
<p>The "hangs indefinitely" is a red herring: it is the result of the rest of your randomly-generated fuzz case, which has loops and a bunch of other junk that will never terminate. The relevant question is whether the initial load traps.</p>
<p>Because the behavior is dependent on particular NaN payload bits, and a particular (non-canonical) NaN behavior of x86-64 causes the load to trap, this is a perfectly allowable execution, and not a bug.</p>
<hr>
<p>Note the effort put in to analyze the bug here -- please do similar for any future fuzzbugs you file, and please note the sources of nondeterminism in Wasm and account for them in your infrastructure! You have already hit two (NaNs here, and stack depth in #11387 and #11390); the third to watch out for is whether <code>memory.grow</code> succeeds, which is allowed to depend on host resource availability.</p>
</blockquote>



<a name="533219672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533219672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533219672">(Aug 07 2025 at 05:30)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>wasm file: <a href="https://github.com/user-attachments/files/21650739/wasm-shrunken_test779339.txt">wasm-shrunken_test779339.txt</a></p>
<p>wat code:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span>
<span class="w">  </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">memory</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="mi">65536</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">export</span><span class="w"> </span><span class="s">"main"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x269b302c</span><span class="w"> </span><span class="mh">0x33ff2555</span><span class="w"> </span><span class="mh">0x3d332eb9</span><span class="w"> </span><span class="mh">0x6150b21b</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="mi">91780</span><span class="n">cp</span><span class="o">+</span><span class="mi">106</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">127230580000000000000000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">eq</span>
<span class="w">    </span><span class="n">f64x2</span><span class="p">.</span><span class="n">min</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">ne</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">i64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">extract_lane_s</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">load64_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4424</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">abb8e2p</span><span class="o">+</span><span class="mi">62</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">7705158000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">9009</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">store8_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">818</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xd4913b28</span><span class="w"> </span><span class="mh">0xfd94f22d</span><span class="w"> </span><span class="mh">0x28f70108</span><span class="w"> </span><span class="mh">0x2ee6c557</span>
<span class="w">      </span><span class="n">i8x16</span><span class="p">.</span><span class="n">ne</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="n">load8x8_s</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">7845</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nb">drop</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">4</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x4412d00e</span><span class="w"> </span><span class="mh">0x91b9105c</span><span class="w"> </span><span class="mh">0x3f5d100c</span><span class="w"> </span><span class="mh">0x4888c991</span>
<span class="w">            </span><span class="n">i32x4</span><span class="p">.</span><span class="n">extmul_low_i16x8_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">7</span>
<span class="w">                  </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">8</span>
<span class="w">                    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                    </span><span class="nb">drop</span>
<span class="w">                    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                    </span><span class="n">br_table</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">7</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">8</span><span class="p">;)</span>
<span class="w">                  </span><span class="n">end</span>
<span class="w">                  </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                  </span><span class="n">br_if</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">                  </span><span class="n">nop</span>
<span class="w">                  </span><span class="n">nop</span>
<span class="w">                  </span><span class="n">br</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">                </span><span class="n">end</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">f64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="nb">drop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x7d1f37e7</span><span class="w"> </span><span class="mh">0x275466b3</span><span class="w"> </span><span class="mh">0x4ed3def7</span><span class="w"> </span><span class="mh">0x4ae48eda</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">select</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x6d311927</span><span class="w"> </span><span class="mh">0x418c5fa1</span><span class="w"> </span><span class="mh">0xfd0e4ac7</span><span class="w"> </span><span class="mh">0x91fbcd1d</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="nb">drop</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">              </span><span class="n">select</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">v128</span><span class="p">.</span><span class="n">store16_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">5390</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="nb">drop</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">4</span><span class="p">;)</span>
<span class="w">          </span><span class="n">end</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">v128</span><span class="p">.</span><span class="n">load32_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">1480</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xa3dc3f3f</span><span class="w"> </span><span class="mh">0x11c29a13</span><span class="w"> </span><span class="mh">0xba0ce1ed</span><span class="w"> </span><span class="mh">0x49567075</span>
<span class="w">        </span><span class="n">i8x16</span><span class="p">.</span><span class="n">min_u</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9763</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">2</span><span class="p">;)</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">7345</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4669</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store64_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">3353</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9577</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">3</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">i64x2</span><span class="p">.</span><span class="n">bitmask</span>
<span class="w">          </span><span class="n">v128</span><span class="p">.</span><span class="n">load8_splat</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9328</span>
<span class="w">          </span><span class="n">f32x4</span><span class="p">.</span><span class="n">le</span>
<span class="w">          </span><span class="nb">drop</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">br_if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">2</span><span class="p">;)</span>
<span class="w">          </span><span class="n">br</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">1</span><span class="p">;)</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nb">drop</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">br_if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">1</span><span class="p">;)</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store64_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">333</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="k">return</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x04ef3aa8</span><span class="w"> </span><span class="mh">0x144a0479</span><span class="w"> </span><span class="mh">0x7d6f0c6b</span><span class="w"> </span><span class="mh">0x86e20f80</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ol>
<li>Run: <code>wasmtime -W all-proposals=y --invoke main test.wasm</code></li>
</ol>
<h3>Expected Results</h3>
<p>Based on wasmer (llvm backed), wamr (AOT mode), and wasmedge, the output is: <code>out of bounds</code> exception</p>
<h3>Actual Results</h3>
<p>Wasmtime hangs indefinitely</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 37.0.0 (3cbeb24bc 2025-08-06)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm? Thanks in advance.<br>
</p>
</blockquote>



<a name="533219696"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533219696" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533219696">(Aug 07 2025 at 05:30)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>wasm file: <a href="https://github.com/user-attachments/files/21650739/wasm-shrunken_test779339.txt">wasm-shrunken_test779339.txt</a></p>
<p>wat code:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span>
<span class="w">  </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">memory</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="mi">65536</span><span class="w"> </span><span class="mi">65536</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">export</span><span class="w"> </span><span class="s">"main"</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x269b302c</span><span class="w"> </span><span class="mh">0x33ff2555</span><span class="w"> </span><span class="mh">0x3d332eb9</span><span class="w"> </span><span class="mh">0x6150b21b</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="mi">91780</span><span class="n">cp</span><span class="o">+</span><span class="mi">106</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">127230580000000000000000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">eq</span>
<span class="w">    </span><span class="n">f64x2</span><span class="p">.</span><span class="n">min</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">ne</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">i32x4</span><span class="p">.</span><span class="n">shr_s</span>
<span class="w">    </span><span class="n">i64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">i8x16</span><span class="p">.</span><span class="n">extract_lane_s</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">load64_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4424</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">    </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">abb8e2p</span><span class="o">+</span><span class="mi">62</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">7705158000000000000</span><span class="p">;)</span>
<span class="w">    </span><span class="n">f32x4</span><span class="p">.</span><span class="n">splat</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">9009</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">store8_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">818</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xd4913b28</span><span class="w"> </span><span class="mh">0xfd94f22d</span><span class="w"> </span><span class="mh">0x28f70108</span><span class="w"> </span><span class="mh">0x2ee6c557</span>
<span class="w">      </span><span class="n">i8x16</span><span class="p">.</span><span class="n">ne</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="n">load8x8_s</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">7845</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nb">drop</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">4</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x4412d00e</span><span class="w"> </span><span class="mh">0x91b9105c</span><span class="w"> </span><span class="mh">0x3f5d100c</span><span class="w"> </span><span class="mh">0x4888c991</span>
<span class="w">            </span><span class="n">i32x4</span><span class="p">.</span><span class="n">extmul_low_i16x8_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">7</span>
<span class="w">                  </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">8</span>
<span class="w">                    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                    </span><span class="nb">drop</span>
<span class="w">                    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                    </span><span class="n">br_table</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">7</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">8</span><span class="p">;)</span>
<span class="w">                  </span><span class="n">end</span>
<span class="w">                  </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                  </span><span class="n">br_if</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">                  </span><span class="n">nop</span>
<span class="w">                  </span><span class="n">nop</span>
<span class="w">                  </span><span class="n">br</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">                </span><span class="n">end</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">f64x2</span><span class="p">.</span><span class="n">sub</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="nb">drop</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x7d1f37e7</span><span class="w"> </span><span class="mh">0x275466b3</span><span class="w"> </span><span class="mh">0x4ed3def7</span><span class="w"> </span><span class="mh">0x4ae48eda</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">select</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x6d311927</span><span class="w"> </span><span class="mh">0x418c5fa1</span><span class="w"> </span><span class="mh">0xfd0e4ac7</span><span class="w"> </span><span class="mh">0x91fbcd1d</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">              </span><span class="nb">drop</span>
<span class="w">              </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">              </span><span class="n">select</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">v128</span><span class="p">.</span><span class="n">store16_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">5390</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">nop</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="nb">drop</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">            </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">4</span><span class="p">;)</span>
<span class="w">          </span><span class="n">end</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">v128</span><span class="p">.</span><span class="n">load32_zero</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">1480</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span>
<span class="w">        </span><span class="k">else</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xa3dc3f3f</span><span class="w"> </span><span class="mh">0x11c29a13</span><span class="w"> </span><span class="mh">0xba0ce1ed</span><span class="w"> </span><span class="mh">0x49567075</span>
<span class="w">        </span><span class="n">i8x16</span><span class="p">.</span><span class="n">min_u</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9763</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">2</span><span class="p">;)</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">7345</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">4669</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store64_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">3353</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="n">store32_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9577</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">1</span>
<span class="w">          </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">3</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">i64x2</span><span class="p">.</span><span class="n">bitmask</span>
<span class="w">          </span><span class="n">v128</span><span class="p">.</span><span class="n">load8_splat</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">9328</span>
<span class="w">          </span><span class="n">f32x4</span><span class="p">.</span><span class="n">le</span>
<span class="w">          </span><span class="nb">drop</span>
<span class="w">          </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">br_if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">2</span><span class="p">;)</span>
<span class="w">          </span><span class="n">br</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">1</span><span class="p">;)</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="nb">drop</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">br_if</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">1</span><span class="p">;)</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">      </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="n">store64_lane</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">333</span><span class="w"> </span><span class="n">align</span><span class="o">=</span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span><span class="w"> </span><span class="mh">0x00000000</span>
<span class="w">      </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">      </span><span class="k">return</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nb">drop</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x04ef3aa8</span><span class="w"> </span><span class="mh">0x144a0479</span><span class="w"> </span><span class="mh">0x7d6f0c6b</span><span class="w"> </span><span class="mh">0x86e20f80</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">return</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<ol>
<li>Run: <code>wasmtime -W all-proposals=y --invoke main test.wasm</code></li>
</ol>
<h3>Expected Results</h3>
<p>Based on wasmer (llvm backed), wamr (AOT mode), and wasmedge, the output is: <code>out of bounds</code> exception</p>
<h3>Actual Results</h3>
<p>Wasmtime hangs indefinitely</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 37.0.0 (3cbeb24bc 2025-08-06)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm? Thanks in advance.<br>
</p>
</blockquote>



<a name="533325538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533325538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533325538">(Aug 07 2025 at 16:22)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/11391#issuecomment-3164911769">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<blockquote>
<p>(We should probably have some documentation on "how to be a responsible citizen when fuzzing Wasmtime"...)</p>
</blockquote>
<p>@cfallin yes, we really should, good idea. I can start whipping some initial docs up.</p>
<p>@teyahb8 a good place to start with regards to the above is <a href="https://blog.regehr.org/archives/2037">https://blog.regehr.org/archives/2037</a></p>
</blockquote>



<a name="533334972"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533334972" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533334972">(Aug 07 2025 at 17:26)</a>:</h4>
<p>teyahb8 <a href="https://github.com/bytecodealliance/wasmtime/issues/11391#issuecomment-3165119779">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<p>@cfallin @fitzgen Thanks for the helpful feedback. I appreciate the time and effort it takes to triage issues. I understand the frustration that can arise from receiving vague or low-effort reports (especially from fuzzing), but I want to stress that this was not submitted with bad intent or without care. I tried my best to reduce the test case from thousands of lines with <code>wasm-tools shrink</code> modulo our time-budget (I can share the original test case, if you want to verify). But, I agree that further reduction was warranted to localize the issue. Thanks for steering the discussion in the right direction regardless.</p>
<p>Your investigations clarified the root cause and have helped me better understand how NaN nondeterminism, variable stack size limits, and platform-specific behavior can influence Wasm execution. If these non-determinisms are well-documented somewhere, I will appreciate a pointer. Following in the footsteps of prior work, we are currently working on a research paper aimed at understanding how to build effective fuzzing infrastructure for WebAssembly runtimes, and this discussion has been both timely and insightful. So again, thank you for your time — and we welcome any constructive feedback as we move forward.</p>
</blockquote>



<a name="533347104"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533347104" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533347104">(Aug 07 2025 at 18:52)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/issues/11391#issuecomment-3165366144">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<blockquote>
<p>I can start whipping some initial docs up.</p>
</blockquote>
<p>PR adding docs for running responsible external fuzz campaigns in <a href="https://github.com/bytecodealliance/wasmtime/pull/11397">https://github.com/bytecodealliance/wasmtime/pull/11397</a></p>
<p>@teyahb8 please give that a once over and feel free to review and give feedback if anything is ambiguous or could be improved from your point of view. Thanks!</p>
<blockquote>
<p>Thanks for the helpful feedback. I appreciate the time and effort it takes to triage issues. I understand the frustration that can arise from receiving vague or low-effort reports (especially from fuzzing), but I want to stress that this was not submitted with bad intent or without care. I tried my best to reduce the test case from thousands of lines with <code>wasm-tools shrink</code> modulo our time-budget (I can share the original test case, if you want to verify). But, I agree that further reduction was warranted to localize the issue. Thanks for steering the discussion in the right direction regardless.</p>
</blockquote>
<p>For sure. We recognize that your intentions are good, we just need to make sure that this campaign becomes a positive experience for all parties involved :)</p>
<blockquote>
<p>Your investigations clarified the root cause and have helped me better understand how NaN nondeterminism, variable stack size limits, and platform-specific behavior can influence Wasm execution. If these non-determinisms are well-documented somewhere, I will appreciate a pointer. Following in the footsteps of prior work, we are currently working on a research paper aimed at understanding how to build effective fuzzing infrastructure for WebAssembly runtimes, and this discussion has been both timely and insightful. So again, thank you for your time — and we welcome any constructive feedback as we move forward.</p>
</blockquote>
<p><a href="https://docs.wasmtime.dev/examples-deterministic-wasm-execution.html">This page in our book</a> documents how to tune Wasmtime for deterministic Wasm execution, which also lists various places that non-determinism can crop up. This is linked from the new docs I wrote up and linked the PR to above.</p>
<p><a href="https://github.com/WebAssembly/design/blob/main/Nondeterminism.md">The <code>WebAssembly/design</code> repo also has a page on non-determinism.</a></p>
<p>We also do fairly extensive fuzzing internally, including differential fuzzing between a variety of engines, so we have some helpers for checking whether an error is deterministic or not that might be useful for you:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/blob/4cbea5e8b8f4aafa91a1526995eb2361f1e5183e/crates/fuzzing/src/oracles.rs#L539">https://github.com/bytecodealliance/wasmtime/blob/4cbea5e8b8f4aafa91a1526995eb2361f1e5183e/crates/fuzzing/src/oracles.rs#L539</a></li>
<li><a href="https://github.com/search?q=repo%3Abytecodealliance%2Fwasmtime+is_non_deterministic_error&amp;type=code">https://github.com/search?q=repo%3Abytecodealliance%2Fwasmtime+is_non_deterministic_error&amp;type=code</a></li>
</ul>
<p>We also do some special configuration of Wasmtime specifically when doing differential fuzzing so that we get more-deterministic results across engines: <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/fuzzing/src/generators/config.rs#L33">https://github.com/bytecodealliance/wasmtime/blob/main/crates/fuzzing/src/generators/config.rs#L33</a></p>
<p>In general, I'd love to hear more about the new areas you are exploring with your research and give my perspective as a practitioner and maintainer. We do a lot of fuzzing already and have lots of ideas about how to further improve our fuzzing and things we wish were better exercised but aren't sure how best to do that, etc... If you don't want to discuss that kind of thing in this issue thread, fee free to either reach out <a href="#narrow/channel/217126-wasmtime/">on our Zulip chat</a> or send me an email (email address in git log).</p>
<p>Thanks!</p>
</blockquote>



<a name="533349736"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311391%20Wasmtime%20hangs%20indefinitely/near/533349736" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311391.20Wasmtime.20hangs.20indefinitely.html#533349736">(Aug 07 2025 at 19:11)</a>:</h4>
<p>teyahb8 <a href="https://github.com/bytecodealliance/wasmtime/issues/11391#issuecomment-3165414354">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11391">issue #11391</a>:</p>
<blockquote>
<p>@fitzgen Thanks for sharing all these immensely helpful resources. I read your writeup and I think it sums up the expectations very well. Again, thanks for a productive response.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>