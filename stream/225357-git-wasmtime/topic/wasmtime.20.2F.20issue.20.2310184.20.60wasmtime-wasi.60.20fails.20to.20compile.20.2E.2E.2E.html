<html>
<head><meta charset="utf-8"><title>wasmtime / issue #10184 `wasmtime-wasi` fails to compile ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html">wasmtime / issue #10184 `wasmtime-wasi` fails to compile ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="497727882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/497727882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#497727882">(Feb 04 2025 at 18:10)</a>:</h4>
<p><a href="https://github.com/aumetra">aumetra</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">Issue #10184</a>.</p>



<a name="497727891"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/497727891" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#497727891">(Feb 04 2025 at 18:11)</a>:</h4>
<p>aumetra opened <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<h3>Test Case</h3>
<h3>Steps to Reproduce</h3>
<ul>
<li>Install latest rustc version (<code>rustc 1.86.0-nightly (f027438f8 2025-02-03)</code>)</li>
<li>Create new cargo project</li>
<li>Add <code>wasmtime-wasi</code> dependency</li>
<li>Try to compile</li>
</ul>
<h3>Expected Results</h3>
<p>The program compiles without issues</p>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0080</span><span class="p">]:</span><span class="w"> </span><span class="nc">evaluation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">constant</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">failed</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">147</span><span class="p">:</span><span class="mi">9</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">147</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w">         </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="mi">148</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="s">"wit"</span><span class="p">,</span>
<span class="mi">149</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"wasi:cli/command"</span><span class="p">,</span>
<span class="mi">150</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">tracing</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="o">..</span><span class="p">.</span><span class="w">   </span><span class="o">|</span>
<span class="mi">180</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">require_store_data_send</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="mi">181</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="p">});</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">__________</span><span class="o">^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">evaluated</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">&lt;</span><span class="n">DirectoryEntry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">ComponentType</span><span class="o">&gt;</span><span class="p">::</span><span class="n">ALIGN32</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">147</span><span class="p">:</span><span class="mi">9</span>
<span class="w">    </span><span class="o">|</span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">this</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">originates</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kr">macro</span><span class="w"> </span><span class="err">`</span><span class="n">assert</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">Nightly</span><span class="w"> </span><span class="n">builds</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="o">-</span><span class="n">Z</span><span class="w"> </span><span class="kr">macro</span><span class="o">-</span><span class="n">backtrace</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">info</span><span class="p">)</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0080</span><span class="p">]:</span><span class="w"> </span><span class="nc">evaluation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">constant</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">failed</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">327</span><span class="p">:</span><span class="mi">5</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">327</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w">     </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="mi">328</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="s">"wit"</span><span class="p">,</span>
<span class="mi">329</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"wasi:cli/command"</span><span class="p">,</span>
<span class="mi">330</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">tracing</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="o">..</span><span class="p">.</span><span class="w">   </span><span class="o">|</span>
<span class="mi">416</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="p">},</span>
<span class="mi">417</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="p">});</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">______</span><span class="o">^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">evaluated</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">&lt;</span><span class="n">DirectoryEntry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">ComponentType</span><span class="o">&gt;</span><span class="p">::</span><span class="n">ALIGN32</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">327</span><span class="p">:</span><span class="mi">5</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 29.0.1 on <a href="http://crates.io">crates.io</a></p>
<p>Operating system: Linux 6.13.0 #1-NixOS SMP PREEMPT_DYNAMIC Sun Jan 19 23:51:45 UTC 2025 x86_64 GNU/Linux</p>
<p>Architecture: x85_64</p>
<h3>Extra Info</h3>
<p>N/A<br>
</p>
</blockquote>



<a name="497768504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/497768504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#497768504">(Feb 04 2025 at 22:28)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10184#issuecomment-2635211082">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<p>Thanks for the report! This is due to <a href="https://github.com/bytecodealliance/wasm-tools/pull/1999">https://github.com/bytecodealliance/wasm-tools/pull/1999</a> which was a buggy implementation in a dependency of Wasmtime. I'll work on getting this fix out for Wasmtime as well. Fixing end-user builds will requiring updating the <code>wit-parser</code> crate that Wasmtime depends on. It'll take a moment to publish builds of fixed versions of <code>wit-parser</code> though because that will require a lot of patch releases for a crate where we don't have a great patch release process.</p>
<p>At this time there's unfortunately no fix though, so if folks run into this you'll need to pin nightlies to an older nightly temporarily.</p>
</blockquote>



<a name="497993197"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/497993197" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#497993197">(Feb 05 2025 at 22:17)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10184#issuecomment-2638165599">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<p>Ok here's what I've done to fix this:</p>
<ul>
<li>I've made a patch release of the <code>wit-parser</code> crate, the crate at fault here, for all versions that are affected.</li>
<li>I've updated Wasmtime's <code>main</code> and <code>release-{30,29.28}.0.0</code> branches.</li>
</ul>
<p>This means that <code>cargo install wasmtime-cli@29.0.0 --locked</code> will continue to fail, but if <code>--locked</code> is removed, for example, then it will succeed. Embedders using Wasmtime shouldn't be affected since they should be able to use the latest <code>wit-parser</code> dependency which will fix this issue.</p>
<p>The only remaining question is whether we want to publish a patch release of Wasmtime's release branches with an updated lock file. Personally I'd lean towards "no" but others might feel differently so I don't want to prematurely close this.</p>
<p>@aumetra can you confirm on your end that if you run <code>cargo update -p wit-parser</code> that the issue is resolved?</p>
</blockquote>



<a name="497993644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/497993644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#497993644">(Feb 05 2025 at 22:21)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/10184#issuecomment-2638171319">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<blockquote>
<p>The only remaining question is whether we want to publish a patch release of Wasmtime's release branches with an updated lock file. Personally I'd lean towards "no" but others might feel differently so I don't want to prematurely close this.</p>
</blockquote>
<p>I also lean towards "no" since in this case its as easy as dropping <code>--locked</code> on the cli install, and there is no bug in any of the published binaries. If a user can present some case we haven't thought of where they can't be flexible, I guess we can do it, but lets not unless asked.</p>
</blockquote>



<a name="497995153"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/497995153" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#497995153">(Feb 05 2025 at 22:33)</a>:</h4>
<p>aumetra <a href="https://github.com/bytecodealliance/wasmtime/issues/10184#issuecomment-2638188812">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<blockquote>
<p>can you confirm on your end that if you run <code>cargo update -p wit-parser</code> that the issue is resolved?</p>
</blockquote>
<p>Verified. Updated the dependency on my program and now it successfully builds again </p>
</blockquote>



<a name="498051080"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/498051080" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#498051080">(Feb 06 2025 at 07:17)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10184#issuecomment-2639017642">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<p>I've added this as a discussion item to our <a href="https://github.com/bytecodealliance/meetings/pull/537">next agenda</a> which is in a bit due to the wasm cg meeting happening next week. Regardless though thanks @aumetra for confirming that updating <code>wit-parser</code> works!</p>
</blockquote>



<a name="501866570"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/501866570" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#501866570">(Feb 25 2025 at 17:35)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<h3>Test Case</h3>
<h3>Steps to Reproduce</h3>
<ul>
<li>Install latest rustc version (<code>rustc 1.86.0-nightly (f027438f8 2025-02-03)</code>)</li>
<li>Create new cargo project</li>
<li>Add <code>wasmtime-wasi</code> dependency</li>
<li>Try to compile</li>
</ul>
<h3>Expected Results</h3>
<p>The program compiles without issues</p>
<h3>Actual Results</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">error</span><span class="p">[</span><span class="n">E0080</span><span class="p">]:</span><span class="w"> </span><span class="nc">evaluation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">constant</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">failed</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">147</span><span class="p">:</span><span class="mi">9</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">147</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w">         </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="mi">148</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="s">"wit"</span><span class="p">,</span>
<span class="mi">149</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"wasi:cli/command"</span><span class="p">,</span>
<span class="mi">150</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">tracing</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="o">..</span><span class="p">.</span><span class="w">   </span><span class="o">|</span>
<span class="mi">180</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">             </span><span class="n">require_store_data_send</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="mi">181</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="p">});</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">__________</span><span class="o">^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">evaluated</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">&lt;</span><span class="n">DirectoryEntry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">ComponentType</span><span class="o">&gt;</span><span class="p">::</span><span class="n">ALIGN32</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">147</span><span class="p">:</span><span class="mi">9</span>
<span class="w">    </span><span class="o">|</span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">this</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="n">originates</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="kr">macro</span><span class="w"> </span><span class="err">`</span><span class="n">assert</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="k">in</span><span class="w"> </span><span class="n">Nightly</span><span class="w"> </span><span class="n">builds</span><span class="p">,</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="o">-</span><span class="n">Z</span><span class="w"> </span><span class="kr">macro</span><span class="o">-</span><span class="n">backtrace</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">more</span><span class="w"> </span><span class="n">info</span><span class="p">)</span>

<span class="n">error</span><span class="p">[</span><span class="n">E0080</span><span class="p">]:</span><span class="w"> </span><span class="nc">evaluation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">constant</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">failed</span>
<span class="w">   </span><span class="o">-</span><span class="p">-&gt;</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">327</span><span class="p">:</span><span class="mi">5</span>
<span class="w">    </span><span class="o">|</span>
<span class="mi">327</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">/</span><span class="w">     </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">bindgen</span><span class="o">!</span><span class="p">({</span>
<span class="mi">328</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">path</span><span class="p">:</span><span class="w"> </span><span class="s">"wit"</span><span class="p">,</span>
<span class="mi">329</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">world</span><span class="p">:</span><span class="w"> </span><span class="s">"wasi:cli/command"</span><span class="p">,</span>
<span class="mi">330</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="n">tracing</span><span class="p">:</span><span class="w"> </span><span class="nc">true</span><span class="p">,</span>
<span class="o">..</span><span class="p">.</span><span class="w">   </span><span class="o">|</span>
<span class="mi">416</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">         </span><span class="p">},</span>
<span class="mi">417</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="w">     </span><span class="p">});</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="o">|</span><span class="n">______</span><span class="o">^</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">evaluated</span><span class="w"> </span><span class="n">program</span><span class="w"> </span><span class="n">panicked</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="o">'</span><span class="na">assertion</span><span class="w"> </span><span class="n">failed</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">&lt;</span><span class="n">DirectoryEntry</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">wasmtime</span><span class="p">::</span><span class="n">component</span><span class="p">::</span><span class="n">ComponentType</span><span class="o">&gt;</span><span class="p">::</span><span class="n">ALIGN32</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">aumetra</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">1949</span><span class="n">cf8c6b5b557f</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">wasi</span><span class="o">-</span><span class="mf">29.0.1</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">bindings</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">327</span><span class="p">:</span><span class="mi">5</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 29.0.1 on <a href="http://crates.io">crates.io</a></p>
<p>Operating system: Linux 6.13.0 #1-NixOS SMP PREEMPT_DYNAMIC Sun Jan 19 23:51:45 UTC 2025 x86_64 GNU/Linux</p>
<p>Architecture: x85_64</p>
<h3>Extra Info</h3>
<p>N/A<br>
</p>
</blockquote>



<a name="501866572"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310184%20%60wasmtime-wasi%60%20fails%20to%20compile%20.../near/501866572" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310184.20.60wasmtime-wasi.60.20fails.20to.20compile.20.2E.2E.2E.html#501866572">(Feb 25 2025 at 17:35)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10184#issuecomment-2682800733">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10184">issue #10184</a>:</p>
<blockquote>
<p>I think that this is now handled, so closing.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>