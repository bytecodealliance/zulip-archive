<html>
<head><meta charset="utf-8"><title>wasmtime / issue #10301 Winch/x64/simd segfault via fuzzi... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html">wasmtime / issue #10301 Winch/x64/simd segfault via fuzzi...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="502318488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/502318488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#502318488">(Feb 27 2025 at 15:51)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the fuzz-bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">Issue #10301</a>.</p>



<a name="502318489"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/502318489" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#502318489">(Feb 27 2025 at 15:51)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasm-proposal:simd label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">Issue #10301</a>.</p>



<a name="502318490"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/502318490" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#502318490">(Feb 27 2025 at 15:51)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the winch label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">Issue #10301</a>.</p>



<a name="502318491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/502318491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#502318491">(Feb 27 2025 at 15:51)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">issue #10301</a>:</p>
<blockquote>
<p>OSS-Fuzz is coming in with a few crashes from <a href="https://github.com/bytecodealliance/wasmtime/pull/10296">enabling fuzzing yesterday</a>. cc @jeffcharles @saulecabrera </p>
<div class="codehilite" data-code-language="wasm"><pre><span></span><code>(module
  (func (export "") (result v128 v128)
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
  )
)
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.10</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span><span class="err">`</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
</code></pre></div>
<p>(this one is shrunk via <code>wasm-tools shrink</code>)</p>
<div class="codehilite" data-code-language="wasm"><pre><span></span><code>(module
  (type (;0;) (func (result v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128)))
  (export "" (func 0))
  (func (;0;) (type 0) (result v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128)
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
  )
)
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.11</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span><span class="err">`</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
</code></pre></div>
<p>(this one didn't shrink much)</p>
<p>&lt;details&gt;</p>
<p>&lt;summary&gt;non-shrunken test case&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span>
<span class="w">  </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="n">v128</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">memory</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">global</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="kt">i64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">global</span><span class="w"> </span><span class="p">(;</span><span class="mi">1</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">global</span><span class="w"> </span><span class="p">(;</span><span class="mi">2</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">export</span><span class="w"> </span><span class="s">""</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i64</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i64</span><span class="p">)</span>
<span class="w">    </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">e12a36p</span><span class="o">+</span><span class="mi">24</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">31533622</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffep</span><span class="o">+</span><span class="mi">96</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">158456320000000000000000000000</span><span class="p">;)</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">ne</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">inf</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="n">inf</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">eq</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="n">inf</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="n">inf</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">eq</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">lt</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffep</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483500</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">gt</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffep</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483500</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">trunc_f32_u</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">67108864</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">shr_u</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">67108864</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">clz</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_u</span>
<span class="w">        </span><span class="n">memory</span><span class="p">.</span><span class="n">grow</span>
<span class="w">        </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">4</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">bebebebeae9e8p</span><span class="o">+</span><span class="mi">703</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">73435622781783640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">sqrt</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">ne</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">1685235965</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="n">p</span><span class="o">+</span><span class="mi">31</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">2147483648</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">lt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">gt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">trunc_f64_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">3</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">memory</span><span class="p">.</span><span class="n">size</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">mul</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_u</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_s</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                </span><span class="kt">i64</span><span class="p">.</span><span class="n">load8_u</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">16896</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">4</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">4</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">convert_i64_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">ne</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">inf</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="n">inf</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">eq</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">659065550</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="n">p</span><span class="o">+</span><span class="mi">31</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">2147483648</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">lt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="n">p</span><span class="o">+</span><span class="mi">31</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">2147483648</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">gt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">trunc_f64_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">6</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">memory</span><span class="p">.</span><span class="n">size</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">65536</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">mul</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">16904</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">6</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_u</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">6</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_s</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">6</span>
<span class="w">                </span><span class="kt">i64</span><span class="p">.</span><span class="n">load8_u</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">16896</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">7</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">7</span>
<span class="w">            </span><span class="n">global</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">end</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">xor</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">reinterpret_f32</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">xor</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">2</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x42424242</span><span class="w"> </span><span class="mh">0x42424242</span><span class="w"> </span><span class="mh">0xe6e6fffe</span><span class="w"> </span><span class="mh">0xe6e6e6e6</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">421071898</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">421075226</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xfff80000</span><span class="w"> </span><span class="mh">0xffffffff</span><span class="w"> </span><span class="mh">0xf0000000</span><span class="w"> </span><span class="mh">0xffffffff</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>&lt;/details&gt;</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">shrunken</span><span class="p">.</span><span class="n">wat</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.10</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">shrunken</span><span class="p">.</span><span class="n">wat</span><span class="err">`</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">bus</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">shrunken</span><span class="p">.</span><span class="n">wat</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="502318634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/502318634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#502318634">(Feb 27 2025 at 15:52)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10301#issuecomment-2688375888">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">issue #10301</a>:</p>
<blockquote>
<p>oss-fuzz links are</p>
<ul>
<li><a href="https://oss-fuzz.com/testcase-detail/6281567567937536">https://oss-fuzz.com/testcase-detail/6281567567937536</a></li>
<li><a href="https://oss-fuzz.com/testcase-detail/4874192684384256">https://oss-fuzz.com/testcase-detail/4874192684384256</a></li>
<li><a href="https://oss-fuzz.com/testcase-detail/4575298041741312">https://oss-fuzz.com/testcase-detail/4575298041741312</a></li>
</ul>
</blockquote>



<a name="502595318"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/502595318" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#502595318">(Feb 28 2025 at 14:47)</a>:</h4>
<p>jeffcharles <a href="https://github.com/bytecodealliance/wasmtime/issues/10301#issuecomment-2690826106">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">issue #10301</a>:</p>
<blockquote>
<p>Another related oss-fuzz failure: <a href="https://oss-fuzz.com/testcase-detail/6058888277590016">https://oss-fuzz.com/testcase-detail/6058888277590016</a>. I am currently investigating this issue.</p>
</blockquote>



<a name="503016663"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/503016663" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#503016663">(Mar 03 2025 at 12:42)</a>:</h4>
<p>saulecabrera closed <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">issue #10301</a>:</p>
<blockquote>
<p>OSS-Fuzz is coming in with a few crashes from <a href="https://github.com/bytecodealliance/wasmtime/pull/10296">enabling fuzzing yesterday</a>. cc @jeffcharles @saulecabrera </p>
<div class="codehilite" data-code-language="wasm"><pre><span></span><code>(module
  (func (export "") (result v128 v128)
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
  )
)
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.10</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span><span class="err">`</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
</code></pre></div>
<p>(this one is shrunk via <code>wasm-tools shrink</code>)</p>
<div class="codehilite" data-code-language="wasm"><pre><span></span><code>(module
  (type (;0;) (func (result v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128)))
  (export "" (func 0))
  (func (;0;) (type 0) (result v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128 v128)
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
    v128.const i32x4 0x00000000 0x00000000 0x00000000 0x00000000
  )
)
</code></pre></div>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.11</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span><span class="err">`</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">segmentation</span><span class="w"> </span><span class="n">fault</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">wat</span>
</code></pre></div>
<p>(this one didn't shrink much)</p>
<p>&lt;details&gt;</p>
<p>&lt;summary&gt;non-shrunken test case&lt;/summary&gt;</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">(</span><span class="n">module</span>
<span class="w">  </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="n">v128</span><span class="p">)))</span>
<span class="w">  </span><span class="p">(</span><span class="n">memory</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">global</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="kt">i64</span><span class="p">)</span><span class="w"> </span><span class="kt">i64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">global</span><span class="w"> </span><span class="p">(;</span><span class="mi">1</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">global</span><span class="w"> </span><span class="p">(;</span><span class="mi">2</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">mut</span><span class="w"> </span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="n">export</span><span class="w"> </span><span class="s">""</span><span class="w"> </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="mi">0</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="n">func</span><span class="w"> </span><span class="p">(;</span><span class="mi">0</span><span class="p">;)</span><span class="w"> </span><span class="p">(</span><span class="k">type</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="n">v128</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="n">v128</span><span class="p">)</span>
<span class="w">    </span><span class="p">(</span><span class="n">local</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">f32</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i64</span><span class="w"> </span><span class="kt">f64</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="kt">i64</span><span class="p">)</span>
<span class="w">    </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">1</span>
<span class="w">      </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">2</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">e12a36p</span><span class="o">+</span><span class="mi">24</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">31533622</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffep</span><span class="o">+</span><span class="mi">96</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">158456320000000000000000000000</span><span class="p">;)</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">ne</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">inf</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="n">inf</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">eq</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="n">inf</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="n">inf</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">eq</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">lt</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffep</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483500</span><span class="p">;)</span>
<span class="w">        </span><span class="kt">f32</span><span class="p">.</span><span class="n">gt</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="kt">f32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffep</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483500</span><span class="p">;)</span>
<span class="w">          </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">trunc_f32_u</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">67108864</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">shr_u</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">67108864</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">clz</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_u</span>
<span class="w">        </span><span class="n">memory</span><span class="p">.</span><span class="n">grow</span>
<span class="w">        </span><span class="k">loop</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">3</span>
<span class="w">          </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">4</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="p">.</span><span class="n">bebebebeae9e8p</span><span class="o">+</span><span class="mi">703</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">73435622781783640000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">sqrt</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">tee</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">ne</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">1685235965</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="n">p</span><span class="o">+</span><span class="mi">31</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">2147483648</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">lt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">gt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">trunc_f64_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">3</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">memory</span><span class="p">.</span><span class="n">size</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">mul</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_u</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_s</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">3</span>
<span class="w">                </span><span class="kt">i64</span><span class="p">.</span><span class="n">load8_u</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">16896</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">4</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">4</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">convert_i64_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">ne</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">inf</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="n">inf</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">eq</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">659065550</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">or</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x0</span><span class="n">p</span><span class="o">+</span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">0</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="n">p</span><span class="o">+</span><span class="mi">31</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">2147483648</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">lt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mh">0x1</span><span class="n">p</span><span class="o">+</span><span class="mi">31</span><span class="w"> </span><span class="p">(;</span><span class="o">=-</span><span class="mi">2147483648</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">            </span><span class="kt">f64</span><span class="p">.</span><span class="n">gt</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="kt">f64</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mh">0x1</span><span class="p">.</span><span class="n">fffffffcp</span><span class="o">+</span><span class="mi">30</span><span class="w"> </span><span class="p">(;</span><span class="o">=</span><span class="mi">2147483647</span><span class="p">;)</span>
<span class="w">              </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="kt">i32</span><span class="p">.</span><span class="n">trunc_f64_s</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">6</span>
<span class="w">            </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">5</span>
<span class="w">              </span><span class="n">block</span><span class="w"> </span><span class="p">;;</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">@</span><span class="mi">6</span>
<span class="w">                </span><span class="n">memory</span><span class="p">.</span><span class="n">size</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">65536</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">mul</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">16904</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">6</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">add</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_u</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">6</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="mi">0</span>
<span class="w">                </span><span class="kt">i32</span><span class="p">.</span><span class="n">le_s</span>
<span class="w">                </span><span class="n">br_if</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">6</span><span class="p">;)</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">6</span>
<span class="w">                </span><span class="kt">i64</span><span class="p">.</span><span class="n">load8_u</span><span class="w"> </span><span class="n">offset</span><span class="o">=</span><span class="mi">16896</span>
<span class="w">                </span><span class="n">local</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">7</span>
<span class="w">                </span><span class="n">br</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(;</span><span class="o">@</span><span class="mi">5</span><span class="p">;)</span>
<span class="w">              </span><span class="n">end</span>
<span class="w">              </span><span class="n">nop</span>
<span class="w">            </span><span class="n">end</span>
<span class="w">            </span><span class="n">local</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">7</span>
<span class="w">            </span><span class="n">global</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">0</span>
<span class="w">          </span><span class="n">end</span>
<span class="w">        </span><span class="n">end</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">xor</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">reinterpret_f32</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">get</span><span class="w"> </span><span class="mi">2</span>
<span class="w">        </span><span class="kt">i32</span><span class="p">.</span><span class="n">xor</span>
<span class="w">        </span><span class="n">global</span><span class="p">.</span><span class="n">set</span><span class="w"> </span><span class="mi">2</span>
<span class="w">      </span><span class="n">end</span>
<span class="w">    </span><span class="n">end</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0x42424242</span><span class="w"> </span><span class="mh">0x42424242</span><span class="w"> </span><span class="mh">0xe6e6fffe</span><span class="w"> </span><span class="mh">0xe6e6e6e6</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">421071898</span>
<span class="w">    </span><span class="kt">i32</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="o">-</span><span class="mi">421075226</span>
<span class="w">    </span><span class="n">v128</span><span class="p">.</span><span class="k">const</span><span class="w"> </span><span class="n">i32x4</span><span class="w"> </span><span class="mh">0xfff80000</span><span class="w"> </span><span class="mh">0xffffffff</span><span class="w"> </span><span class="mh">0xf0000000</span><span class="w"> </span><span class="mh">0xffffffff</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<p>&lt;/details&gt;</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">shrunken</span><span class="p">.</span><span class="n">wat</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">dev</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">unoptimized</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">debuginfo</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.10</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="err">`</span><span class="n">target</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">shrunken</span><span class="p">.</span><span class="n">wat</span><span class="err">`</span>
<span class="n">zsh</span><span class="p">:</span><span class="w"> </span><span class="nc">bus</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="p">(</span><span class="n">core</span><span class="w"> </span><span class="n">dumped</span><span class="p">)</span><span class="w">  </span><span class="n">cargo</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">Ccompiler</span><span class="o">=</span><span class="n">winch</span><span class="w"> </span><span class="n">testcase0</span><span class="p">.</span><span class="n">shrunken</span><span class="p">.</span><span class="n">wat</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="503804258"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310301%20Winch/x64/simd%20segfault%20via%20fuzzi.../near/503804258" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310301.20Winch.2Fx64.2Fsimd.20segfault.20via.20fuzzi.2E.2E.2E.html#503804258">(Mar 06 2025 at 14:13)</a>:</h4>
<p>saulecabrera <a href="https://github.com/bytecodealliance/wasmtime/issues/10301#issuecomment-2703968101">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10301">issue #10301</a>:</p>
<blockquote>
<p>Just a side note: I manually checked all the issues above and I can no longer reproduce with latest main. Some of them are not marked as confirmed in OSS-Fuzz yet, though.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>