<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10251 Exception and control tags · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html">wasmtime / PR #10251 Exception and control tags</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="500869986"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500869986" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500869986">(Feb 20 2025 at 12:50)</a>:</h4>
<p><strong>dhil</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500869987"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500869987" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500869987">(Feb 20 2025 at 12:50)</a>:</h4>
<p><strong>dhil</strong> requested <a href="https://github.com/dicej">dicej</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500869988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500869988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500869988">(Feb 20 2025 at 12:50)</a>:</h4>
<p>dhil opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a> from <code>dhil:tags</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This patch is a subset of PR #10177. It adds support for tags in Wasmtime. Tags are used by the exception handling and stack switching proposals for typing and matching transfers of control.</p>
<p>This patch does not implement component model or C API support for tags.</p>
<p>CC @frank-emrich</p>
</blockquote>



<a name="500870866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500870866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500870866">(Feb 20 2025 at 12:55)</a>:</h4>
<p>dhil updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500870988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500870988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500870988">(Feb 20 2025 at 12:55)</a>:</h4>
<p>dhil edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>:</p>
<blockquote>
<p>This patch is a subset of PR #10177. It adds support for tags in Wasmtime. Tags are used by the exception handling and stack switching proposals for typing and matching transfers of control.</p>
<p>This patch does not implement component model or C API support for tags. Issue #10252 tracks these two things.</p>
<p>CC @frank-emrich</p>
</blockquote>



<a name="500894799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500894799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500894799">(Feb 20 2025 at 14:36)</a>:</h4>
<p>dhil updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500899059"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500899059" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500899059">(Feb 20 2025 at 14:54)</a>:</h4>
<p><strong>dhil</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500899060"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500899060" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500899060">(Feb 20 2025 at 14:54)</a>:</h4>
<p><strong>dhil</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers">wasmtime-fuzz-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500899063"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500899063" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500899063">(Feb 20 2025 at 14:54)</a>:</h4>
<p>dhil updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500911128"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500911128" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500911128">(Feb 20 2025 at 15:45)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#issuecomment-2671890974">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing", "wasmtime:api", "wasmtime:c-api", "wasmtime:config", "wasmtime:ref-types"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing, wasmtime:ref-types</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="500912117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500912117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500912117">(Feb 20 2025 at 15:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2630330215">PR review</a>:</p>
<blockquote>
<p>Thank you again for being willing to split up the PR, it's  very helpful!</p>
</blockquote>



<a name="500912121"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500912121" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500912121">(Feb 20 2025 at 15:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1963837330">PR review comment</a>:</p>
<blockquote>
<p>I added a "miscellaneous TODO items" section on <a href="https://github.com/bytecodealliance/wasmtime/issues/10248">https://github.com/bytecodealliance/wasmtime/issues/10248</a> and added this there too (trying to ensure FIXME's like this are written down in issues)</p>
</blockquote>



<a name="500917264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500917264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500917264">(Feb 20 2025 at 16:10)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>.</p>



<a name="500928738"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/500928738" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#500928738">(Feb 20 2025 at 17:01)</a>:</h4>
<p>dhil <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#issuecomment-2672114728">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10251">PR #10251</a>:</p>
<blockquote>
<blockquote>
<p>Thank you again for being willing to split up the PR, it's very helpful!</p>
</blockquote>
<p>My pleasure! Thanks!</p>
</blockquote>



<a name="502134897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502134897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502134897">(Feb 26 2025 at 20:09)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645764694">PR review</a>.</p>



<a name="502134898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502134898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502134898">(Feb 26 2025 at 20:09)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972329164">PR review comment</a>:</p>
<blockquote>
<p>When you have a moment, can you update the above struct pseudo-definition to reflect the changes from this PR? Thanks!</p>
</blockquote>



<a name="502136279"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502136279" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502136279">(Feb 26 2025 at 20:16)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645790263">PR review</a>.</p>



<a name="502136282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502136282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502136282">(Feb 26 2025 at 20:16)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972341601">PR review comment</a>:</p>
<blockquote>
<p>This should validate that the function type only has parameters and not results, right? I'll add an item to <a href="https://github.com/bytecodealliance/wasmtime/pull/10177">https://github.com/bytecodealliance/wasmtime/pull/10177</a> for this, but feel free to remove it if my understanding is incorrect.</p>
</blockquote>



<a name="502136718"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502136718" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502136718">(Feb 26 2025 at 20:19)</a>:</h4>
<p>fitzgen edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972341601">PR review comment</a>.</p>



<a name="502145524"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502145524" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502145524">(Feb 26 2025 at 21:14)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645955014">PR review</a>.</p>



<a name="502145525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502145525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502145525">(Feb 26 2025 at 21:14)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972423938">PR review comment</a>:</p>
<blockquote>
<p>Do we actually need a separate <code>VMTagImport</code> from <code>VMTagDefinition</code>?</p>
<p>Because each tag is immutable (right?) we can inline the original <code>VMTagDefinition</code> for imported tags, removing the distinction between imported vs defined tags at the vmctx level. And <code>VMTagDefinition</code> happens to be smaller than a pointer on 64-bit architectures, so between that and removing an indirection, it is a double win.</p>
</blockquote>



<a name="502146297"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502146297" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502146297">(Feb 26 2025 at 21:19)</a>:</h4>
<p>dhil submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645964345">PR review</a>.</p>



<a name="502146299"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502146299" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502146299">(Feb 26 2025 at 21:19)</a>:</h4>
<p>dhil created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972430130">PR review comment</a>:</p>
<blockquote>
<p>Only for exception tags. But currently we don't have an exceptions feature. When stack switching is enabled the results can be nonempty.</p>
</blockquote>



<a name="502146945"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502146945" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502146945">(Feb 26 2025 at 21:24)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645973630">PR review</a>.</p>



<a name="502146954"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502146954" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502146954">(Feb 26 2025 at 21:24)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972436280">PR review comment</a>:</p>
<blockquote>
<p>Similarly it seems like we could just inline the tag's <code>VMSharedTypeIndex</code> here and avoid an indirection.</p>
</blockquote>



<a name="502147040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502147040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502147040">(Feb 26 2025 at 21:24)</a>:</h4>
<p>dhil submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645974774">PR review</a>.</p>



<a name="502147041"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502147041" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502147041">(Feb 26 2025 at 21:24)</a>:</h4>
<p>dhil created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972436943">PR review comment</a>:</p>
<blockquote>
<p>The key thing as far as I am aware is that tags are nominal. So we need to equip them with an unique identity, one per module instance. </p>
</blockquote>



<a name="502148560"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502148560" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502148560">(Feb 26 2025 at 21:34)</a>:</h4>
<p>frank-emrich submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2645999812">PR review</a>.</p>



<a name="502148562"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502148562" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502148562">(Feb 26 2025 at 21:34)</a>:</h4>
<p>frank-emrich created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972450666">PR review comment</a>:</p>
<blockquote>
<p>I actually added those in a follow up PR <a href="https://github.com/bytecodealliance/wasmtime/pull/10265/files#diff-6419ff9508ee5b42d1de13f9509eed5a52ae455d696dedc2b74e090e279757dfR32-R36">here</a> when I was touching the VMContext again.</p>
</blockquote>



<a name="502149158"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502149158" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502149158">(Feb 26 2025 at 21:38)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2646006742">PR review</a>.</p>



<a name="502149160"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502149160" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502149160">(Feb 26 2025 at 21:38)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972454794">PR review comment</a>:</p>
<blockquote>
<p>Gotcha, thanks!</p>
</blockquote>



<a name="502149302"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502149302" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502149302">(Feb 26 2025 at 21:39)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2646009418">PR review</a>.</p>



<a name="502149304"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502149304" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502149304">(Feb 26 2025 at 21:39)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972456261">PR review comment</a>:</p>
<blockquote>
<p>Ah, okay, that is good to know, I didn't realize they were nominal.</p>
</blockquote>



<a name="502153738"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502153738" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502153738">(Feb 26 2025 at 22:10)</a>:</h4>
<p>dhil submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2646065955">PR review</a>.</p>



<a name="502153740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502153740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502153740">(Feb 26 2025 at 22:10)</a>:</h4>
<p>dhil created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1972492562">PR review comment</a>:</p>
<blockquote>
<p>I think that'd be unsound. Consider this example:</p>
<div class="codehilite" data-code-language="WebAssembly"><pre><span></span><code><span class="p">(</span><span class="k">module</span> <span class="nv">$m1</span>
  <span class="p">(</span><span class="k">type</span> <span class="nv">$ft</span> <span class="p">(</span><span class="k">func</span><span class="p">))</span>
  <span class="p">(</span><span class="err">tag</span> <span class="nv">$foo</span> <span class="p">(</span><span class="k">export</span> <span class="s2">"foo"</span><span class="p">))</span>
  <span class="p">(</span><span class="k">func</span> <span class="p">(</span><span class="k">export</span> <span class="s2">"catch-foo"</span><span class="p">)</span> <span class="p">(</span><span class="k">param</span> <span class="nv">$f</span> <span class="p">(</span><span class="err">ref</span> <span class="nv">$ft</span><span class="p">))</span>
    <span class="p">(</span><span class="k">block</span> <span class="nv">$on_foo</span>
      <span class="p">(</span><span class="err">try_</span><span class="k">table</span> <span class="p">(</span><span class="err">catch</span> <span class="nv">$foo</span> <span class="nv">$on_foo</span><span class="p">)</span> <span class="p">(</span><span class="nb">call</span><span class="err">_ref</span> <span class="nv">$ft</span> <span class="p">(</span><span class="nb">local.get</span> <span class="nv">$f</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">unreachable</span><span class="p">)</span>
    <span class="p">))</span>
<span class="p">)</span>
<span class="p">(</span><span class="err">register</span> <span class="s2">"m1"</span><span class="p">)</span>

<span class="p">(</span><span class="k">module</span> <span class="nv">$m2</span>
  <span class="p">(</span><span class="k">type</span> <span class="nv">$ft</span> <span class="p">(</span><span class="k">func</span><span class="p">))</span>

  <span class="p">(</span><span class="k">func</span> <span class="nv">$catch-foo</span> <span class="p">(</span><span class="k">import</span> <span class="s2">"m1"</span> <span class="s2">"catch-foo"</span><span class="p">)</span> <span class="p">(</span><span class="k">param</span> <span class="p">(</span><span class="err">ref</span> <span class="nv">$ft</span><span class="p">)))</span>

  <span class="p">(</span><span class="err">tag</span> <span class="nv">$foo</span> <span class="p">(</span><span class="k">import</span> <span class="s2">"m1"</span> <span class="s2">"foo"</span><span class="p">))</span>
  <span class="p">(</span><span class="err">tag</span> <span class="nv">$bar</span><span class="p">)</span>

  <span class="p">(</span><span class="k">func</span> <span class="nv">$throw_foo</span>
    <span class="p">(</span><span class="err">throw</span> <span class="nv">$foo</span><span class="p">))</span>

  <span class="c1">;; Handle the imported foo.</span>
  <span class="p">(</span><span class="k">func</span> <span class="nv">$f</span> <span class="p">(</span><span class="k">export</span> <span class="s2">"main-1"</span><span class="p">)</span>
    <span class="p">(</span><span class="k">block</span> <span class="nv">$on_foo</span>
      <span class="p">(</span><span class="err">try_</span><span class="k">table</span> <span class="p">(</span><span class="err">catch</span> <span class="nv">$foo</span> <span class="nv">$on_foo</span><span class="p">)</span> <span class="p">(</span><span class="nb">call</span> <span class="nv">$g</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">unreachable</span><span class="p">)</span>
    <span class="p">))</span>

  <span class="c1">;; Handle this module's bar.</span>
  <span class="p">(</span><span class="k">func</span> <span class="nv">$g</span>
    <span class="p">(</span><span class="k">block</span> <span class="nv">$on_bar</span>
      <span class="p">(</span><span class="err">try_</span><span class="k">table</span> <span class="p">(</span><span class="err">catch</span> <span class="nv">$bar</span> <span class="nv">$on_bar</span><span class="p">)</span> <span class="p">(</span><span class="nb">call</span> <span class="nv">$throw_foo</span><span class="p">))</span>
      <span class="p">(</span><span class="nb">unreachable</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="p">(</span><span class="nb">unreachable</span><span class="p">))</span>
   <span class="p">(</span><span class="k">elem</span> <span class="err">declare</span> <span class="k">func</span> <span class="nv">$g</span><span class="p">)</span>

  <span class="c1">;; Handle the imported foo with the imported function</span>
  <span class="p">(</span><span class="k">func</span> <span class="nv">$h</span> <span class="p">(</span><span class="k">export</span> <span class="s2">"main-2"</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">call</span> <span class="nv">$catch-foo</span> <span class="p">(</span><span class="err">ref.</span><span class="k">func</span> <span class="nv">$g</span><span class="p">)))</span>
<span class="p">)</span>
<span class="p">(</span><span class="err">register</span> <span class="s2">"m2"</span><span class="p">)</span>
<span class="p">(</span><span class="err">assert_</span><span class="nb">return</span> <span class="p">(</span><span class="err">invoke</span> <span class="s2">"main-1"</span><span class="p">))</span>
<span class="p">(</span><span class="err">assert_</span><span class="nb">return</span> <span class="p">(</span><span class="err">invoke</span> <span class="s2">"main-2"</span><span class="p">))</span>
</code></pre></div>
<p>It is important here that <code>foo</code> and <code>bar</code> are different. And it is important that the identity of <code>foo</code> is preserved after the import.</p>
</blockquote>



<a name="502342640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502342640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502342640">(Feb 27 2025 at 17:42)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#pullrequestreview-2648591361">PR review</a>.</p>



<a name="502342644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310251%20Exception%20and%20control%20tags/near/502342644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310251.20Exception.20and.20control.20tags.html#502342644">(Feb 27 2025 at 17:42)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/10251#discussion_r1974065973">PR review comment</a>:</p>
<blockquote>
<p>Thanks for the example, I made this comment before I realized that tags were nominal.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>