<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11385 Wasmtime runtime returns invalid ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html">wasmtime / issue #11385 Wasmtime runtime returns invalid ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="533016955"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/533016955" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#533016955">(Aug 06 2025 at 03:12)</a>:</h4>
<p>Theaamadu opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">issue #11385</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Wasm file:</p>
<p><a href="https://github.com/user-attachments/files/21610183/wasm-shrunken_199-clock_gettime-monotonic.txt">wasm-shrunken_199-clock_gettime-monotonic.txt</a></p>
<p>Wat file:</p>
<p><a href="https://github.com/user-attachments/files/21610186/wat-shrunken_199-clock_gettime-monotonic.txt">wat-shrunken_199-clock_gettime-monotonic.txt</a></p>
<h3>Steps to Reproduce</h3>
<ol>
<li>Run command: wasmtime run -W all-proposals=y --invoke _start $wasm_file</li>
</ol>
<h3>Expected Results</h3>
<p>Based on the results of other runtimes, wasmtime should also have a <code>timeout</code></p>
<h3>Actual Results</h3>
<p>Wasmtime returns <code>Invalid enum value Clockid</code> error</p>
<h3>Versions and Environment</h3>
<p>wasmtime 36.0.0 (bdb963d1f 2025-07-07)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: X86_64</p>
<h3>Extra Info</h3>
<p>I must say that I have reduced the size of the both wat &amp; wasm code to my best. Could you please confirm the bug? Thanks<br>
</p>
</blockquote>



<a name="533016956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/533016956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#533016956">(Aug 06 2025 at 03:12)</a>:</h4>
<p><a href="https://github.com/Theaamadu">Theaamadu</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">Issue #11385</a>.</p>



<a name="533119707"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/533119707" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#533119707">(Aug 06 2025 at 14:47)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11385#issuecomment-3160490448">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">issue #11385</a>:</p>
<blockquote>
<p>Can you explain more about why you feel this is a bug? For example how was this source generate? Fuzz-generated? Minimized from C? Edge-case behavior of WASI varies runtime-to-runtime as the precise semantics of WASI have evolved over time. For WASIp1 there is no more development and much of its APIs are under-specified as the eventual work that would have gone into specifying them went into the component model instead.</p>
<p>My guess is this is likely not a bug in Wasmtime but probably a difference in validation of parameters with other runtimes. For example other runtimes may generate a different error first and/or skip validation that should be required. Understanding the provenance of this program and what it's trying to do is going to be key in understanding what exactly is the desired output of this program. Minimized <code>*.wat</code> code generally isn't too helpful for WASI APIs, it's best to start from a source language if possible (e.g. there's nothing to debug with in the files you posted)</p>
</blockquote>



<a name="533119744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/533119744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#533119744">(Aug 06 2025 at 14:47)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasi label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">Issue #11385</a>.</p>



<a name="533119745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/533119745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#533119745">(Aug 06 2025 at 14:47)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> removed the bug label from <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">Issue #11385</a>.</p>



<a name="535591055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/535591055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#535591055">(Aug 21 2025 at 23:08)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">issue #11385</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Wasm file:</p>
<p><a href="https://github.com/user-attachments/files/21610183/wasm-shrunken_199-clock_gettime-monotonic.txt">wasm-shrunken_199-clock_gettime-monotonic.txt</a></p>
<p>Wat file:</p>
<p><a href="https://github.com/user-attachments/files/21610186/wat-shrunken_199-clock_gettime-monotonic.txt">wat-shrunken_199-clock_gettime-monotonic.txt</a></p>
<h3>Steps to Reproduce</h3>
<ol>
<li>Run command: wasmtime run -W all-proposals=y --invoke _start $wasm_file</li>
</ol>
<h3>Expected Results</h3>
<p>Based on the results of other runtimes, wasmtime should also have a <code>timeout</code></p>
<h3>Actual Results</h3>
<p>Wasmtime returns <code>Invalid enum value Clockid</code> error</p>
<h3>Versions and Environment</h3>
<p>wasmtime 36.0.0 (bdb963d1f 2025-07-07)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: X86_64</p>
<h3>Extra Info</h3>
<p>I must say that I have reduced the size of the both wat &amp; wasm code to my best. Could you please confirm the bug? Thanks<br>
</p>
</blockquote>



<a name="535591056"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311385%20Wasmtime%20runtime%20returns%20invalid%20.../near/535591056" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311385.20Wasmtime.20runtime.20returns.20invalid.20.2E.2E.2E.html#535591056">(Aug 21 2025 at 23:08)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11385#issuecomment-3212325058">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11385">issue #11385</a>:</p>
<blockquote>
<p>Haven't heard back in awhile so I'm going to close this, but happy to reopen if more information comes to light.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>