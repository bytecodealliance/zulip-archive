<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12590 Make SCCs and graph traversals reusable · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html">wasmtime / PR #12590 Make SCCs and graph traversals reusable</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="573828752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/573828752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#573828752">(Feb 13 2026 at 21:12)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/cfallin">cfallin</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="573828753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/573828753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#573828753">(Feb 13 2026 at 21:12)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a> from <code>fitzgen:make-scc-reusable</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This moves our existing SCC computation and DFS graph traversals out of <code>wasmtime::compile</code> and into <code>wasmtime_environ::graphs</code>, where they can be reused elsewhere in the workspace. These functions and types were already generally generic over an iterator of nodes and/or an edge function to get a particular node's successors, but I've gone one step further and packaged up those two things together into a <code>Graph</code> trait.</p>
<p>In the process, I also moved the <code>NonMaxU32</code> type to <code>wasmtime_internal_core</code> and made it so we have other non-max integer types as well.</p>
<p>This will let us reuse SCC computation in our GC ops fuzzer, where we need SCCs to figure out how to merge fuzzer-generated rec groups, if necessary, since cyclic type references are constrained to within the same rec group. The GC ops fuzzer can also reuse the DFS traversal code in its topological sorting of supertypes and subtypes as well.</p>
<p>This is mostly, but not quite completely, code motion and fixups of paths and such.</p>
<p>@cfallin, I'm flagging you for review on this one because you reviewed the initial PRs that landed this code.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="573828755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/573828755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#573828755">(Feb 13 2026 at 21:12)</a>:</h4>
<p><strong>fitzgen</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="573830112"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/573830112" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#573830112">(Feb 13 2026 at 21:23)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="573830248"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/573830248" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#573830248">(Feb 13 2026 at 21:25)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12590#pullrequestreview-3799625688">PR review</a>:</p>
<blockquote>
<p>Seems reasonable!</p>
<p>I was idly wondering whether it would make more sense to put the graph-related bits in <code>crates/core/</code> since that is becoming a home for data structures in general, but I guess the focus there is more on foundational containers (with explicit OOM handling) than algorithms, and also the bits here are not adapted for OOM so we'd be mixing universes if we did that? I'm fine either way honestly.</p>
</blockquote>



<a name="573839915"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/573839915" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#573839915">(Feb 13 2026 at 22:54)</a>:</h4>
<p>github-actions[bot] added the label <code>wasmtime:api</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="574345644"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574345644" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574345644">(Feb 17 2026 at 17:16)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="574346140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574346140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574346140">(Feb 17 2026 at 17:19)</a>:</h4>
<p>fitzgen <a href="https://github.com/bytecodealliance/wasmtime/pull/12590#issuecomment-3915989407">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>:</p>
<blockquote>
<blockquote>
<p>I was idly wondering whether it would make more sense to put the graph-related bits in <code>crates/core/</code> since that is becoming a home for data structures in general, but I guess the focus there is more on foundational containers (with explicit OOM handling) than algorithms, and also the bits here are not adapted for OOM so we'd be mixing universes if we did that? I'm fine either way honestly.</p>
</blockquote>
<p>Yeah I think probably in an ideal world it would be like <code>wasmtime-internal-graph</code> or something but too many crates has annoying administrative overheads. At this point, whether something goes in <code>crates/core</code> or <code>crates/environ</code> is like 75% whether anything in Cranelift's dep graph needs it or not in my mind.</p>
<p>Anyways, we can always move things around if we find that we need to down the line.</p>
</blockquote>



<a name="574355864"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574355864" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574355864">(Feb 17 2026 at 18:07)</a>:</h4>
<p>fitzgen added <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590 Make SCCs and graph traversals reusable</a> to the merge queue.</p>



<a name="574360405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574360405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574360405">(Feb 17 2026 at 18:32)</a>:</h4>
<p>github-merge-queue[bot] removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590 Make SCCs and graph traversals reusable</a> from the merge queue.</p>



<a name="574361283"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574361283" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574361283">(Feb 17 2026 at 18:37)</a>:</h4>
<p>fitzgen updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="574361296"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574361296" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574361296">(Feb 17 2026 at 18:38)</a>:</h4>
<p>fitzgen has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="574363658"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574363658" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574363658">(Feb 17 2026 at 18:52)</a>:</h4>
<p>fitzgen added <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590 Make SCCs and graph traversals reusable</a> to the merge queue.</p>



<a name="574369277"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574369277" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574369277">(Feb 17 2026 at 19:25)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590</a>.</p>



<a name="574369281"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312590%20Make%20SCCs%20and%20graph%20traversals%20reusable/near/574369281" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312590.20Make.20SCCs.20and.20graph.20traversals.20reusable.html#574369281">(Feb 17 2026 at 19:25)</a>:</h4>
<p>fitzgen removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12590">PR #12590 Make SCCs and graph traversals reusable</a> from the merge queue.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>