<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12523 S390x: implement arith overflow · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html">wasmtime / PR #12523 S390x: implement arith overflow</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="571987274"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/571987274" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#571987274">(Feb 04 2026 at 18:58)</a>:</h4>
<p>theotherjimmy opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a> from <code>theotherjimmy:s390x-arith-overflow</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Implement the following isle instructions for S390x: </p>
<ul>
<li><code>uadd_overflow</code></li>
<li><code>sadd_overflow</code></li>
<li><code>usub_overflow</code></li>
<li><code>ssub_overflow</code></li>
<li><code>umul_overflow</code></li>
<li><code>smul_overflow</code><br>
</li>
</ul>
</blockquote>



<a name="571987276"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/571987276" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#571987276">(Feb 04 2026 at 18:58)</a>:</h4>
<p><strong>theotherjimmy</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="571987278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/571987278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#571987278">(Feb 04 2026 at 18:58)</a>:</h4>
<p><strong>theotherjimmy</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="571993264"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/571993264" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#571993264">(Feb 04 2026 at 19:32)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3849349518">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>r? @uweigand </p>
</blockquote>



<a name="571997046"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/571997046" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#571997046">(Feb 04 2026 at 19:53)</a>:</h4>
<p>github-actions[bot] added the label <code>cranelift</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="572139523"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139523" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139523">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768942737">PR review comment</a>:</p>
<blockquote>
<p>This is again unnecessary.</p>
</blockquote>



<a name="572139525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139525">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768948699">PR review comment</a>:</p>
<blockquote>
<p>Since you're doing a 64-bit multiply here, you still need to zero-extend the inputs even here.  Or else, you could use a 32x32-&gt;64 unsigned multiply.</p>
</blockquote>



<a name="572139526"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139526" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139526">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3756785790">PR review</a>.</p>



<a name="572139527"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139527" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139527">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768938338">PR review comment</a>:</p>
<blockquote>
<p>The inputs are not guaranteed to be zero-extended, so you have to do that here.</p>
</blockquote>



<a name="572139528"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139528" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139528">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768950445">PR review comment</a>:</p>
<blockquote>
<p>This still needs to do the != 0 conversion to boolean on the high part.</p>
</blockquote>



<a name="572139529"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139529" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139529">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768943911">PR review comment</a>:</p>
<blockquote>
<p>This should do a != 0 test to set a boolean.</p>
</blockquote>



<a name="572139530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139530">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2769005013">PR review comment</a>:</p>
<blockquote>
<p>This is more of a cosmetic issue, but I think I'd prefer to keep these types of helpers in inst.isle - see e.g. what we're doing for the ..._sat_reg helpers.  Ideally, we'd have a interface between inst.isle and lower.isle that looks more symmetrical across the different types ...</p>
</blockquote>



<a name="572139531"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139531" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139531">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768895358">PR review comment</a>:</p>
<blockquote>
<p>This seems just wrong.  The second return should be a boolean indicating whether overflow happened, not simply the high part of the widened multiplication.</p>
</blockquote>



<a name="572139532"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139532" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139532">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768915915">PR review comment</a>:</p>
<blockquote>
<p>For the 32-bit and 64-bit cases of smul_overflow, why don't you simply use MS(G)RKC, which sets CC indicating overflow - that would work exactly the same as for sadd/ssub.</p>
<p>For the 8-bit and 16-bit cases, you should be able to use a similar shift trick as for sadd/ssub, only you have to make sure to shift just one of the inputs (the other must still be sign-extended).</p>
</blockquote>



<a name="572139533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572139533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572139533">(Feb 05 2026 at 12:51)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768891339">PR review comment</a>:</p>
<blockquote>
<p>This is unnecessary - the high bytes are considered don't care.</p>
</blockquote>



<a name="572196359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572196359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572196359">(Feb 05 2026 at 16:28)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758168173">PR review</a>.</p>



<a name="572196364"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572196364" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572196364">(Feb 05 2026 at 16:28)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770065206">PR review comment</a>:</p>
<blockquote>
<p>From <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254</a></p>
<blockquote>
<p>Multiply integers unsigned with overflow out.<br>
<code>of</code> is set when the multiplication overflowed.<br>
<code>text
     a &amp;= x * y \pmod 2^B \\
    of &amp;= x * y &gt; 2^B
</code></p>
</blockquote>
<p>My read is that the overflow out is the whole upper word size of the multiply.</p>
</blockquote>



<a name="572196447"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572196447" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572196447">(Feb 05 2026 at 16:28)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758169670">PR review</a>.</p>



<a name="572196448"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572196448" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572196448">(Feb 05 2026 at 16:28)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770066562">PR review comment</a>:</p>
<blockquote>
<p>From <a href="https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254</a></p>
<blockquote>
<p>Multiply integers unsigned with overflow out.<br>
<code>of</code> is set when the multiplication overflowed.<br>
<code>text
     a &amp;= x * y \pmod 2^B \\
    of &amp;= x * y &gt; 2^B
</code></p>
</blockquote>
<p>My read is that the overflow out is the whole upper word size of the multiply.</p>
</blockquote>



<a name="572196476"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572196476" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572196476">(Feb 05 2026 at 16:28)</a>:</h4>
<p>theotherjimmy deleted <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770065206">PR review comment</a>.</p>



<a name="572203768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572203768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572203768">(Feb 05 2026 at 16:58)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="572210885"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572210885" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572210885">(Feb 05 2026 at 17:29)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="572212893"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572212893" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572212893">(Feb 05 2026 at 17:39)</a>:</h4>
<p>uweigand submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758470724">PR review</a>.</p>



<a name="572212895"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572212895" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572212895">(Feb 05 2026 at 17:39)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770337965">PR review comment</a>:</p>
<blockquote>
<p>This needs to sign-extend from <em>byte</em>, not word.</p>
</blockquote>



<a name="572212897"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572212897" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572212897">(Feb 05 2026 at 17:39)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770356026">PR review comment</a>:</p>
<blockquote>
<p>This is wrong, the CC checks for signed overflow, not unsigned overflow.   For <code>umul_overflow</code>, you'll have to either multiply in a wider mode, or use a widening multiply, and then check the high part is nonzero to detect unsigned overflow.</p>
</blockquote>



<a name="572212898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572212898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572212898">(Feb 05 2026 at 17:39)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770340353">PR review comment</a>:</p>
<blockquote>
<p>And this needs to sign-extend from halfword.</p>
</blockquote>



<a name="572212899"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572212899" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572212899">(Feb 05 2026 at 17:39)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770345750">PR review comment</a>:</p>
<blockquote>
<p>This is unfortunately wrong as msr does not set CC.  You'll have to use msrkc.</p>
</blockquote>



<a name="572212900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572212900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572212900">(Feb 05 2026 at 17:39)</a>:</h4>
<p>uweigand created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770347408">PR review comment</a>:</p>
<blockquote>
<p>And msgkrc here.</p>
</blockquote>



<a name="572213255"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572213255" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572213255">(Feb 05 2026 at 17:41)</a>:</h4>
<p>theotherjimmy edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770066562">PR review comment</a>.</p>



<a name="572213330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572213330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572213330">(Feb 05 2026 at 17:41)</a>:</h4>
<p>uweigand <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3855163844">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>You should enable the run-time filetests on s390x as well, these would probably have caught some of those errors:<br>
filetests/filetests/runtests/<em>overflow</em>.clif</p>
</blockquote>



<a name="572213401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572213401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572213401">(Feb 05 2026 at 17:42)</a>:</h4>
<p>uweigand edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3855163844">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>You should enable the run-time filetests on s390x as well, these would probably have caught some of those errors:<br>
<code>filetests/filetests/runtests/*overflow*.clif</code></p>
</blockquote>



<a name="572213640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572213640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572213640">(Feb 05 2026 at 17:43)</a>:</h4>
<p>theotherjimmy submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758514912">PR review</a>.</p>



<a name="572213641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572213641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572213641">(Feb 05 2026 at 17:43)</a>:</h4>
<p>theotherjimmy created <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770372875">PR review comment</a>:</p>
<blockquote>
<p>Ah, oops.</p>
</blockquote>



<a name="572219439"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/572219439" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#572219439">(Feb 05 2026 at 18:16)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="573827884"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573827884" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573827884">(Feb 13 2026 at 21:05)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="573828123"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573828123" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573828123">(Feb 13 2026 at 21:07)</a>:</h4>
<p>theotherjimmy <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899467596">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>@uweigand I ran all these tests on my lpar. The current version passes all enabled runtests on s390x, and I enabled the runtests for these instructions.</p>
</blockquote>



<a name="573828444"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573828444" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573828444">(Feb 13 2026 at 21:09)</a>:</h4>
<p>theotherjimmy <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899482722">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>It looks like I need to rebase onto main. I'll do that now then.</p>
</blockquote>



<a name="573828667"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573828667" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573828667">(Feb 13 2026 at 21:11)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="573828868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573828868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573828868">(Feb 13 2026 at 21:13)</a>:</h4>
<p>theotherjimmy edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899482722">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>It looks like I need to rebase onto main. I'll do that now then. Tests still pass with the rebase onto main.</p>
</blockquote>



<a name="573832606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573832606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573832606">(Feb 13 2026 at 21:44)</a>:</h4>
<p>theotherjimmy edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899467596">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>@uweigand I ran all these tests on my lpar. The current version passes all enabled runtests on s390x, and I enabled the runtests for these instructions.</p>
<p>I missed the <code>cargo test</code> tests. My bad. Please hold off on reviewing while I fix them.</p>
</blockquote>



<a name="573834946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573834946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573834946">(Feb 13 2026 at 22:03)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="573834978"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/573834978" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#573834978">(Feb 13 2026 at 22:04)</a>:</h4>
<p>theotherjimmy <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899768514">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>Fixed <code>cargo test</code> locally.</p>
</blockquote>



<a name="574766027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/574766027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#574766027">(Feb 19 2026 at 16:07)</a>:</h4>
<p>theotherjimmy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<a name="574766245"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/574766245" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#574766245">(Feb 19 2026 at 16:08)</a>:</h4>
<p>theotherjimmy <a href="https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3928247020">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>:</p>
<blockquote>
<p>Rebased for the regalloc2 version bump. Re-blessed all new tests. ran all runtests on my s390x LPAR, they passed.</p>
</blockquote>



<a name="574807867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312523%20S390x%3A%20implement%20arith%20overflow/near/574807867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312523.20S390x.3A.20implement.20arith.20overflow.html#574807867">(Feb 19 2026 at 19:31)</a>:</h4>
<p>alexcrichton requested <a href="https://github.com/uweigand">uweigand</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12523">PR #12523</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>