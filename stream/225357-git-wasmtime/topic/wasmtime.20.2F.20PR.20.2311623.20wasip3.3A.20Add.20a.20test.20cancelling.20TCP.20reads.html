<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11623 wasip3: Add a test cancelling TCP reads · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html">wasmtime / PR #11623 wasip3: Add a test cancelling TCP reads</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="537912688"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/537912688" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#537912688">(Sep 05 2025 at 17:07)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a> from <code>alexcrichton:stream-tests</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit adds a test where a stream of data is being sent over TCP and the read side reads as much as it can and then cancels any read that shows up pending. It then waits for readiness via a 0-length read and retries again. The test is intended to assert that the number of consecutive zero-length reads reported is capped at some small number (e.g. this shouldn't infinite loop).</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="537912765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/537912765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#537912765">(Sep 05 2025 at 17:07)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11623#pullrequestreview-3190194394">PR review</a>:</p>
<blockquote>
<p>Blocked on <a href="https://github.com/bytecodealliance/wasmtime/issues/11611">https://github.com/bytecodealliance/wasmtime/issues/11611</a></p>
</blockquote>



<a name="537912767"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/537912767" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#537912767">(Sep 05 2025 at 17:07)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11623#discussion_r2325625441">PR review comment</a>:</p>
<blockquote>
<p>This test should fail due to missing this line, but I haven't gotten that far.</p>
</blockquote>



<a name="537913184"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/537913184" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#537913184">(Sep 05 2025 at 17:10)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<a name="538309504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538309504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538309504">(Sep 08 2025 at 20:26)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<a name="538309546"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538309546" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538309546">(Sep 08 2025 at 20:26)</a>:</h4>
<p><strong>alexcrichton</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a> as ready for review.</p>



<a name="538309548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538309548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538309548">(Sep 08 2025 at 20:26)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<a name="538309549"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538309549" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538309549">(Sep 08 2025 at 20:26)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<a name="538309550"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538309550" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538309550">(Sep 08 2025 at 20:26)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<a name="538309569"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538309569" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538309569">(Sep 08 2025 at 20:26)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11623#issuecomment-3267857536">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>:</p>
<blockquote>
<p>Ok after <a href="https://github.com/bytecodealliance/wasmtime/pull/11625">https://github.com/bytecodealliance/wasmtime/pull/11625</a> this is now ready to merge</p>
</blockquote>



<a name="538310497"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538310497" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538310497">(Sep 08 2025 at 20:33)</a>:</h4>
<p>alexcrichton assigned alexcrichton to <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<a name="538310831"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538310831" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538310831">(Sep 08 2025 at 20:35)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a> (assigned to alexcrichton).</p>



<a name="538322551"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538322551" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538322551">(Sep 08 2025 at 22:13)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11623#pullrequestreview-3198344432">PR review</a>.</p>



<a name="538325731"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311623%20wasip3%3A%20Add%20a%20test%20cancelling%20TCP%20reads/near/538325731" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311623.20wasip3.3A.20Add.20a.20test.20cancelling.20TCP.20reads.html#538325731">(Sep 08 2025 at 22:50)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11623">PR #11623</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>