<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12513 Struct locals etc · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html">wasmtime / PR #12513 Struct locals etc</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="571797874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/571797874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#571797874">(Feb 04 2026 at 00:57)</a>:</h4>
<p>khagankhan opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a> from <code>khagankhan:struct-locals-etc</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<ul>
<li>Add support for generating locals, globals, and tables that contain structrefs and concretely typed struct references</li>
<li>Add new or extend existing fuzzer ops for accessing locals/globals/tables of structrefs and concretely typed struct references</li>
</ul>
<p>This PR implements the above changes. Open to feedback and reviews.</p>
<p>For now, all generated references are marked as <code>nullable: true</code>. As discussed, we will need to track nullability more precisely. I can either refine this within this PR after initial review, or follow up with a small, focused PR immediately afterward.</p>
<p>cc @fitzgen @eeide</p>
</blockquote>



<a name="571797875"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/571797875" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#571797875">(Feb 04 2026 at 00:57)</a>:</h4>
<p><strong>khagankhan</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers">wasmtime-fuzz-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>.</p>



<a name="571797876"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/571797876" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#571797876">(Feb 04 2026 at 00:57)</a>:</h4>
<p><strong>khagankhan</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>.</p>



<a name="571805881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/571805881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#571805881">(Feb 04 2026 at 02:32)</a>:</h4>
<p>github-actions[bot] added the label <code>fuzzing</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>.</p>



<a name="571805918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/571805918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#571805918">(Feb 04 2026 at 02:33)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#issuecomment-3844897606">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="572009427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572009427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572009427">(Feb 04 2026 at 21:06)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#pullrequestreview-3753263267">PR review</a>:</p>
<blockquote>
<p>Thanks! Looks good once the following things are addressed.</p>
</blockquote>



<a name="572009430"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572009430" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572009430">(Feb 04 2026 at 21:06)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#discussion_r2765932665">PR review comment</a>:</p>
<blockquote>
<p>I like that you bundled this stuff up into a struct that we can pass around as a single thing, that's a great clean up.</p>
<p>A couple of nitpicks/bikesheds however:</p>
<ul>
<li>
<p>The comment is not particularly helpful to someone reading the code for the first time, e.g. which function is "the function" and is "ctx" a parameter name or something else? I think something like this would be better:</p>
<blockquote>
<p>The base offsets and indices for various Wasm entities within their index spaces in the the encoded Wasm binary.</p>
</blockquote>
<p>Also, three slashes (<code>///</code>) for doc comments (even though this isn't <code>pub</code>, its still the idiomatic style).</p>
</li>
<li>
<p>Perhaps we can rename this to <code>WasmEncodingIndices</code> or <code>WasmEncodingBases</code> or something along those lines? "Storage" feels like a bit of a misnomer to me.</p>
</li>
</ul>
</blockquote>



<a name="572009432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572009432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572009432">(Feb 04 2026 at 21:06)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#discussion_r2765976979">PR review comment</a>:</p>
<blockquote>
<p><div class="codehilite" data-code-language="suggestion"><pre><span></span><code>                log::info!("gc_ops: take_struct(&lt;ref null struct&gt;)");
</code></pre></div><br>
</p>
</blockquote>



<a name="572009433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572009433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572009433">(Feb 04 2026 at 21:06)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#discussion_r2765954394">PR review comment</a>:</p>
<blockquote>
<p>Comment says <code>(ref any)</code> but the actual type added is <code>(ref null struct)</code>.</p>
<p>At minimum, we should make the comment match the actual code. In the fullness of time (okay as a follow up PR) we should probably have both a <code>(ref null any)</code> and a <code>(ref null struct)</code> global.</p>
</blockquote>



<a name="572012256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572012256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572012256">(Feb 04 2026 at 21:23)</a>:</h4>
<p>khagankhan updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>.</p>



<a name="572014865"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572014865" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572014865">(Feb 04 2026 at 21:38)</a>:</h4>
<p>khagankhan <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#issuecomment-3849871800">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>:</p>
<blockquote>
<p>Thanks @fitzgen! Ready for the review.</p>
</blockquote>



<a name="572017085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572017085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572017085">(Feb 04 2026 at 21:52)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12513#pullrequestreview-3753482213">PR review</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<a name="572017101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572017101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572017101">(Feb 04 2026 at 21:52)</a>:</h4>
<p>fitzgen added <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513 Struct locals etc</a> to the merge queue.</p>



<a name="572020812"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572020812" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572020812">(Feb 04 2026 at 22:18)</a>:</h4>
<p>fitzgen merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513</a>.</p>



<a name="572020814"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312513%20Struct%20locals%20etc/near/572020814" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312513.20Struct.20locals.20etc.html#572020814">(Feb 04 2026 at 22:18)</a>:</h4>
<p>fitzgen removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12513">PR #12513 Struct locals etc</a> from the merge queue.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>