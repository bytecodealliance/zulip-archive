<html>
<head><meta charset="utf-8"><title>wasmtime / issue #10331 Differential fuzzing failure betw... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310331.20Differential.20fuzzing.20failure.20betw.2E.2E.2E.html">wasmtime / issue #10331 Differential fuzzing failure betw...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="503393762"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310331%20Differential%20fuzzing%20failure%20betw.../near/503393762" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310331.20Differential.20fuzzing.20failure.20betw.2E.2E.2E.html#503393762">(Mar 05 2025 at 00:38)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the fuzz-bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10331">Issue #10331</a>.</p>



<a name="503393763"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310331%20Differential%20fuzzing%20failure%20betw.../near/503393763" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310331.20Differential.20fuzzing.20failure.20betw.2E.2E.2E.html#503393763">(Mar 05 2025 at 00:38)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10331">Issue #10331</a>.</p>



<a name="503393766"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310331%20Differential%20fuzzing%20failure%20betw.../near/503393766" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310331.20Differential.20fuzzing.20failure.20betw.2E.2E.2E.html#503393766">(Mar 05 2025 at 00:38)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/issues/10331">issue #10331</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="WebAssembly"><pre><span></span><code><span class="p">(</span><span class="k">module</span>
  <span class="p">(</span><span class="k">func</span> <span class="p">(</span><span class="k">export</span> <span class="s2">"test"</span><span class="p">)</span> <span class="p">(</span><span class="k">result</span> <span class="err">v</span><span class="mf">128</span><span class="p">)</span>
    <span class="err">v</span><span class="mf">128</span><span class="err">.const</span> <span class="kt">i64</span><span class="err">x</span><span class="mf">2 32768</span> <span class="mi">0</span>
    <span class="nb">call</span> <span class="mi">1</span>
  <span class="p">)</span>
  <span class="p">(</span><span class="k">func</span> <span class="p">(</span><span class="k">param</span> <span class="err">v</span><span class="mf">128</span><span class="p">)</span> <span class="p">(</span><span class="k">result</span> <span class="err">v</span><span class="mf">128</span><span class="p">)</span>
    <span class="nb">local.get</span> <span class="mi">0</span>
    <span class="err">i</span><span class="mi">16</span><span class="err">x</span><span class="mi">8</span><span class="err">.extadd_pairwise_i</span><span class="mf">8x16</span><span class="err">_s</span>
  <span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp">$ </span>target/debug/wasmtime<span class="w"> </span>-Ccompiler<span class="o">=</span>cranelift<span class="w"> </span>--invoke<span class="w"> </span><span class="nb">test</span><span class="w"> </span>test.wat
<span class="go">65408</span>

<span class="gp">$ </span>target/debug/wasmtime<span class="w"> </span>-Ccompiler<span class="o">=</span>winch<span class="w"> </span>--invoke<span class="w"> </span><span class="nb">test</span><span class="w"> </span>test.wat
<span class="go">0</span>
</code></pre></div>
<p>cc @saulecabrera @jeffcharles </p>
</blockquote>



<a name="503579011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310331%20Differential%20fuzzing%20failure%20betw.../near/503579011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310331.20Differential.20fuzzing.20failure.20betw.2E.2E.2E.html#503579011">(Mar 05 2025 at 17:09)</a>:</h4>
<p>jeffcharles <a href="https://github.com/bytecodealliance/wasmtime/issues/10331#issuecomment-2701564433">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10331">issue #10331</a>:</p>
<blockquote>
<p>The use of <code>self.v128_extend(src, writable!(tmp), low_kind)?;</code> in the macroassembler implementation for <code>extadd</code> looks incorrect to me since that extends the values in low half of the vector and puts that extended lower half of the vector in the scratch register and my understanding of <code>extadd</code> is it should be extending the adjacent lane and then adding the result. I'll work on an implementation that avoids that.</p>
</blockquote>



<a name="503827118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310331%20Differential%20fuzzing%20failure%20betw.../near/503827118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310331.20Differential.20fuzzing.20failure.20betw.2E.2E.2E.html#503827118">(Mar 06 2025 at 15:45)</a>:</h4>
<p>saulecabrera closed <a href="https://github.com/bytecodealliance/wasmtime/issues/10331">issue #10331</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="WebAssembly"><pre><span></span><code><span class="p">(</span><span class="k">module</span>
  <span class="p">(</span><span class="k">func</span> <span class="p">(</span><span class="k">export</span> <span class="s2">"test"</span><span class="p">)</span> <span class="p">(</span><span class="k">result</span> <span class="err">v</span><span class="mf">128</span><span class="p">)</span>
    <span class="err">v</span><span class="mf">128</span><span class="err">.const</span> <span class="kt">i64</span><span class="err">x</span><span class="mf">2 32768</span> <span class="mi">0</span>
    <span class="nb">call</span> <span class="mi">1</span>
  <span class="p">)</span>
  <span class="p">(</span><span class="k">func</span> <span class="p">(</span><span class="k">param</span> <span class="err">v</span><span class="mf">128</span><span class="p">)</span> <span class="p">(</span><span class="k">result</span> <span class="err">v</span><span class="mf">128</span><span class="p">)</span>
    <span class="nb">local.get</span> <span class="mi">0</span>
    <span class="err">i</span><span class="mi">16</span><span class="err">x</span><span class="mi">8</span><span class="err">.extadd_pairwise_i</span><span class="mf">8x16</span><span class="err">_s</span>
  <span class="p">)</span>
<span class="p">)</span>
</code></pre></div>
<div class="codehilite" data-code-language="Bash Session"><pre><span></span><code><span class="gp">$ </span>target/debug/wasmtime<span class="w"> </span>-Ccompiler<span class="o">=</span>cranelift<span class="w"> </span>--invoke<span class="w"> </span><span class="nb">test</span><span class="w"> </span>test.wat
<span class="go">65408</span>

<span class="gp">$ </span>target/debug/wasmtime<span class="w"> </span>-Ccompiler<span class="o">=</span>winch<span class="w"> </span>--invoke<span class="w"> </span><span class="nb">test</span><span class="w"> </span>test.wat
<span class="go">0</span>
</code></pre></div>
<p>cc @saulecabrera @jeffcharles </p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>