<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11783 wasmtime-unwinder: factor out `visit... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html">wasmtime / PR #11783 wasmtime-unwinder: factor out `visit...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="542852533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542852533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542852533">(Oct 03 2025 at 00:54)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a> from <code>cfallin:stack-iterator</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This will be desirable to allow a lazy stack-walk for our guest debugging API. It provides a <code>frame_iterator()</code> function that produces an iterator over frames in one Wasm activation, factoring out the heart of <code>visit_frames</code>; <code>visit_frames</code> is now a thin wrapper around this iterator. No functional change expected.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="542852535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542852535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542852535">(Oct 03 2025 at 00:54)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/pchickey">pchickey</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="542852537"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542852537" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542852537">(Oct 03 2025 at 00:54)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="542975416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542975416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542975416">(Oct 03 2025 at 15:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#pullrequestreview-3299672467">PR review</a>:</p>
<blockquote>
<p>Can you expand the safety documentation further to include the new caveat that the iterator can't be moved around and basically needs to be consumed ASAP? For example it's possible to stash this iterator somewhere else and then try to read it later after returning, in theory, which would be quite bad (but this wasn't possible with the previous interface)</p>
</blockquote>



<a name="542980424"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542980424" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542980424">(Oct 03 2025 at 16:15)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="542980462"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542980462" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542980462">(Oct 03 2025 at 16:15)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#issuecomment-3366327391">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>:</p>
<blockquote>
<p>Good call, thanks! Added.</p>
</blockquote>



<a name="542980488"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542980488" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542980488">(Oct 03 2025 at 16:15)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="542988117"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542988117" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542988117">(Oct 03 2025 at 16:55)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#issuecomment-3366456133">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>:</p>
<blockquote>
<p>wat.</p>
</blockquote>



<a name="542993085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/542993085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#542993085">(Oct 03 2025 at 17:23)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#issuecomment-3366562678">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>:</p>
<blockquote>
<p>Something weird is going on in the release build for macos-x86_64 <a href="https://github.com/bytecodealliance/wasmtime/actions/runs/18228566641/job/51906071185">here</a>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="o">=</span><span class="w"> </span><span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">Undefined</span><span class="w"> </span><span class="n">symbols</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="n">x86_64</span><span class="p">:</span>
<span class="w">            </span><span class="s">"wasmtime::runtime::vm::stack_switching::stack::unix::x86_64::wasmtime_continuation_start::h6f90f069cad1fb0f"</span><span class="p">,</span><span class="w"> </span><span class="n">referenced</span><span class="w"> </span><span class="n">from</span><span class="p">:</span>
<span class="w">                </span><span class="nc">wasmtime</span><span class="p">::</span><span class="n">runtime</span><span class="p">::</span><span class="n">vm</span><span class="p">::</span><span class="n">libcalls</span><span class="p">::</span><span class="n">cont_new</span><span class="p">::</span><span class="n">h036f758cc421dfe8</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">libwasmtime</span><span class="o">-</span><span class="n">d96af5e94c417052</span><span class="p">.</span><span class="n">rlib</span><span class="p">[</span><span class="mi">6</span><span class="p">](</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">d96af5e94c417052</span><span class="p">.</span><span class="n">wasmtime</span><span class="p">.</span><span class="mi">2</span><span class="n">f76dd9f0dfd2eb2</span><span class="o">-</span><span class="n">cgu</span><span class="p">.</span><span class="mf">03.</span><span class="n">rcgu</span><span class="p">.</span><span class="n">o</span><span class="p">)</span>
<span class="w">          </span><span class="n">ld</span><span class="p">:</span><span class="w"> </span><span class="nc">symbol</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">found</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">architecture</span><span class="w"> </span><span class="n">x86_64</span>
<span class="w">          </span><span class="n">clang</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="p">:</span><span class="w"> </span><span class="nc">linker</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="k">use</span><span class="w"> </span><span class="o">-</span><span class="n">v</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">invocation</span><span class="p">)</span>
</code></pre></div>
<p>This PR doesn't change anything related to stack-switching etc -- I wonder if this is some toolchain update related to macos x86_64 deprecation? I can't imagine what else it might be...</p>
</blockquote>



<a name="543001632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543001632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543001632">(Oct 03 2025 at 18:20)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#issuecomment-3366762128">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>:</p>
<blockquote>
<p>I can at least reproduce this locally, and it looks to rely on precise sets of flags/features so it's not the easiest to reproduce. Unfortunately <a href="https://github.com/bytecodealliance/wasmtime/pull/11787">https://github.com/bytecodealliance/wasmtime/pull/11787</a> doesn't help this. Looks like this doesn't show up on beta or nightly, however, so might be a bug fix in an upcoming version of Rust. I'll try to fix the configuration here</p>
</blockquote>



<a name="543001975"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543001975" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543001975">(Oct 03 2025 at 18:22)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="543001976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543001976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543001976">(Oct 03 2025 at 18:22)</a>:</h4>
<p><strong>alexcrichton</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="543014531"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543014531" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543014531">(Oct 03 2025 at 19:17)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#issuecomment-3366918050">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>:</p>
<blockquote>
<p>Ok looks like CI passed but it hit a merge conflict with #11787, so I'll let you handle the rebase/merge and queue this back up </p>
</blockquote>



<a name="543016660"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543016660" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543016660">(Oct 03 2025 at 19:26)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="543016770"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543016770" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543016770">(Oct 03 2025 at 19:26)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/11783#issuecomment-3366948402">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>:</p>
<blockquote>
<p>Thanks for the fix!</p>
</blockquote>



<a name="543016795"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543016795" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543016795">(Oct 03 2025 at 19:26)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<a name="543022357"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311783%20wasmtime-unwinder%3A%20factor%20out%20%60visit.../near/543022357" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311783.20wasmtime-unwinder.3A.20factor.20out.20.60visit.2E.2E.2E.html#543022357">(Oct 03 2025 at 20:09)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11783">PR #11783</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>