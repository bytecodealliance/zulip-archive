<html>
<head><meta charset="utf-8"><title>wasmtime / issue #12187 Run task to completion in `wasmti... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html">wasmtime / issue #12187 Run task to completion in `wasmti...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="564733632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/564733632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#564733632">(Dec 19 2025 at 16:19)</a>:</h4>
<p>dicej opened <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>:</p>
<blockquote>
<p>Currently, <code>wasmtime run</code>'s <code>invoke_component</code> function uses <code>Func::call_async</code> to invoke the function.  However, that will only run the guest task until it produces a result, then print that result an exit.  Ideally, it would use <code>Func::call_concurrent</code> instead, which returns a <code>TaskExit</code> which can be used to await the completion of the task, allowing any post-return operations to finish.</p>
</blockquote>



<a name="564734267"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/564734267" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#564734267">(Dec 19 2025 at 16:23)</a>:</h4>
<p>dicej edited <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>:</p>
<blockquote>
<p>Currently, <code>wasmtime run</code>'s <code>invoke_component</code> function uses <code>Func::call_async</code> to invoke the function.  However, that will only run the guest task until it produces a result, then print that result and exit.  Ideally, it would use <code>Func::call_concurrent</code> instead, which returns a <code>TaskExit</code> which can be used to await the completion of the task, allowing any post-return operations to finish.</p>
</blockquote>



<a name="564738073"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/564738073" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#564738073">(Dec 19 2025 at 16:41)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasm-proposal:component-model-async label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">Issue #12187</a>.</p>



<a name="565702008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/565702008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#565702008">(Dec 29 2025 at 17:25)</a>:</h4>
<p>vados-cosmonic <a href="https://github.com/bytecodealliance/wasmtime/issues/12187#issuecomment-3697090774">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>:</p>
<blockquote>
<p>Hey just to check, this was closed by <a href="https://github.com/bytecodealliance/wasmtime/pull/12185">https://github.com/bytecodealliance/wasmtime/pull/12185</a>, right?</p>
</blockquote>



<a name="565702043"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/565702043" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#565702043">(Dec 29 2025 at 17:25)</a>:</h4>
<p>vados-cosmonic edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/12187#issuecomment-3697090774">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>:</p>
<blockquote>
<p>Hey just to check, this was resolved by <a href="https://github.com/bytecodealliance/wasmtime/pull/12185">https://github.com/bytecodealliance/wasmtime/pull/12185</a>, right?</p>
</blockquote>



<a name="566381336"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/566381336" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#566381336">(Jan 05 2026 at 15:34)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12187#issuecomment-3710923070">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>:</p>
<blockquote>
<p>That handled executing the <code>wasi:cli/run</code> function, but this is the follow-up for <code>--invoke</code> which manually selects a function and invokes it. Effectively <a href="https://github.com/bytecodealliance/wasmtime/blob/1d8ab4b1d99682d75f72b8fd6b86195bd76da4bb/src/commands/run.rs#L619">this</a> needs to use <code>call_concurrent</code> and then use the second <code>TaskExit</code> return value</p>
</blockquote>



<a name="566620681"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/566620681" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#566620681">(Jan 06 2026 at 20:55)</a>:</h4>
<p>dicej assigned dicej to <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>.</p>



<a name="567198388"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312187%20Run%20task%20to%20completion%20in%20%60wasmti.../near/567198388" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312187.20Run.20task.20to.20completion.20in.20.60wasmti.2E.2E.2E.html#567198388">(Jan 09 2026 at 17:50)</a>:</h4>
<p>dicej closed <a href="https://github.com/bytecodealliance/wasmtime/issues/12187">issue #12187</a>:</p>
<blockquote>
<p>Currently, <code>wasmtime run</code>'s <code>invoke_component</code> function uses <code>Func::call_async</code> to invoke the function.  However, that will only run the guest task until it produces a result, then print that result and exit.  Ideally, it would use <code>Func::call_concurrent</code> instead, which returns a <code>TaskExit</code> which can be used to await the completion of the task, allowing any post-return operations to finish.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>