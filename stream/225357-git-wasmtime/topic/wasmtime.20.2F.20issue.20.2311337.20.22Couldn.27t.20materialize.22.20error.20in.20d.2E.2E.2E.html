<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11337 &quot;Couldn&#x27;t materialize&quot; error in d... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html">wasmtime / issue #11337 &quot;Couldn&#x27;t materialize&quot; error in d...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="531510611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/531510611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#531510611">(Jul 29 2025 at 04:41)</a>:</h4>
<p>catamorphism opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">issue #11337</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here</p>
<h3>Steps to Reproduce</h3>
<p>The .wasm file was created with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">clang</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="o">=</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip2</span><span class="w"> </span><span class="o">--</span><span class="n">sysroot</span><span class="o">=</span><span class="cp">$HOME</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">libc</span><span class="o">/</span><span class="n">sysroot</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="n">O0</span>
</code></pre></div>
<p>and <code>wasi-libc</code> was built from source.</p>
<p><code>function-pointer.c</code> is as follows:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)();</span>
<span class="p">}</span><span class="w"> </span><span class="n">myfile</span><span class="p">;</span>

<span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="n">int</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="o">*</span><span class="w"> </span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">f</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// If the above line is commented out and the next line is uncommented,</span>
<span class="w">    </span><span class="c1">// it works as expected</span>
<span class="w">    </span><span class="c1">// f()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">42</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="n">f1</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">f</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">f1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Steps:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">D</span><span class="w"> </span><span class="n">debug</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="o">-</span><span class="n">O</span><span class="w"> </span><span class="n">opt</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="o">--</span><span class="n">wasm</span><span class="w"> </span><span class="n">component</span><span class="o">-</span><span class="n">model</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.::</span><span class="o">/</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">foo</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="p">(</span><span class="n">WebAssemblyPtrWrapper</span><span class="o">&lt;</span><span class="n">myfile</span><span class="o">&gt;</span><span class="p">)</span><span class="w">  </span><span class="p">(</span><span class="n">__ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">199872</span><span class="p">)</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">n</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">materialize</span><span class="p">:</span><span class="w"> </span><span class="nc">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="nc">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">errored</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">DoExecute</span><span class="p">,</span><span class="w"> </span><span class="n">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">PrepareToExecuteJITExpression</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>I would expect to be able to view <code>f1</code> in the debugger at any point during the execution of <code>foo()</code>.</p>
<h3>Actual Results</h3>
<p>"Couldn't materialize" error as above.</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 35.0.0</p>
<p>Operating system: Linux (Ubuntu 24.04)</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="531510612"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/531510612" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#531510612">(Jul 29 2025 at 04:41)</a>:</h4>
<p><a href="https://github.com/catamorphism">catamorphism</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">Issue #11337</a>.</p>



<a name="531510665"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/531510665" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#531510665">(Jul 29 2025 at 04:41)</a>:</h4>
<p>catamorphism edited <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">issue #11337</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>TODO: upload Wasm file here</p>
<h3>Steps to Reproduce</h3>
<p>The .wasm file was created with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">clang</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="o">=</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip2</span><span class="w"> </span><span class="o">--</span><span class="n">sysroot</span><span class="o">=</span><span class="cp">$HOME</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">libc</span><span class="o">/</span><span class="n">sysroot</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="n">O0</span>
</code></pre></div>
<p>and <code>wasi-libc</code> was built from source.</p>
<p><code>function-pointer.c</code> is as follows:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)();</span>
<span class="p">}</span><span class="w"> </span><span class="n">myfile</span><span class="p">;</span>

<span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="n">int</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="o">*</span><span class="w"> </span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">f</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// If the above line is commented out and the next line is uncommented,</span>
<span class="w">    </span><span class="c1">// it works as expected</span>
<span class="w">    </span><span class="c1">// f()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">42</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="n">f1</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">f</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">f1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Steps:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">D</span><span class="w"> </span><span class="n">debug</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="o">-</span><span class="n">O</span><span class="w"> </span><span class="n">opt</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="o">--</span><span class="n">wasm</span><span class="w"> </span><span class="n">component</span><span class="o">-</span><span class="n">model</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.::</span><span class="o">/</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">foo</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="p">(</span><span class="n">WebAssemblyPtrWrapper</span><span class="o">&lt;</span><span class="n">myfile</span><span class="o">&gt;</span><span class="p">)</span><span class="w">  </span><span class="p">(</span><span class="n">__ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">199872</span><span class="p">)</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">n</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">materialize</span><span class="p">:</span><span class="w"> </span><span class="nc">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="nc">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">errored</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">DoExecute</span><span class="p">,</span><span class="w"> </span><span class="n">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">PrepareToExecuteJITExpression</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>I would expect to be able to view <code>f1</code> in the debugger at any point during the execution of <code>foo()</code>.</p>
<h3>Actual Results</h3>
<p>"Couldn't materialize" error as above.</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 35.0.0</p>
<p>lldb version: 18.1.3</p>
<p>Operating system: Linux (Ubuntu 24.04)</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="531510745"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/531510745" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#531510745">(Jul 29 2025 at 04:42)</a>:</h4>
<p>catamorphism edited <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">issue #11337</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/user-attachments/files/21480824/function-pointer.wasm.gz">function-pointer.wasm.gz</a></p>
<h3>Steps to Reproduce</h3>
<p>The .wasm file was created with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">clang</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="o">=</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip2</span><span class="w"> </span><span class="o">--</span><span class="n">sysroot</span><span class="o">=</span><span class="cp">$HOME</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">libc</span><span class="o">/</span><span class="n">sysroot</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="n">O0</span>
</code></pre></div>
<p>and <code>wasi-libc</code> was built from source.</p>
<p><code>function-pointer.c</code> is as follows:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)();</span>
<span class="p">}</span><span class="w"> </span><span class="n">myfile</span><span class="p">;</span>

<span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="n">int</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="o">*</span><span class="w"> </span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">f</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// If the above line is commented out and the next line is uncommented,</span>
<span class="w">    </span><span class="c1">// it works as expected</span>
<span class="w">    </span><span class="c1">// f()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">42</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="n">f1</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">f</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">f1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Steps:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">D</span><span class="w"> </span><span class="n">debug</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="o">-</span><span class="n">O</span><span class="w"> </span><span class="n">opt</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="o">--</span><span class="n">wasm</span><span class="w"> </span><span class="n">component</span><span class="o">-</span><span class="n">model</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.::</span><span class="o">/</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">foo</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="p">(</span><span class="n">WebAssemblyPtrWrapper</span><span class="o">&lt;</span><span class="n">myfile</span><span class="o">&gt;</span><span class="p">)</span><span class="w">  </span><span class="p">(</span><span class="n">__ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">199872</span><span class="p">)</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">n</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">materialize</span><span class="p">:</span><span class="w"> </span><span class="nc">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="nc">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">errored</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">DoExecute</span><span class="p">,</span><span class="w"> </span><span class="n">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">PrepareToExecuteJITExpression</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>I would expect to be able to view <code>f1</code> in the debugger at any point during the execution of <code>foo()</code>.</p>
<h3>Actual Results</h3>
<p>"Couldn't materialize" error as above.</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 35.0.0</p>
<p>lldb version: 18.1.3</p>
<p>Operating system: Linux (Ubuntu 24.04)</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<a name="531523489"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/531523489" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#531523489">(Jul 29 2025 at 06:28)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/11337#issuecomment-3130873777">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">issue #11337</a>:</p>
<blockquote>
<p>Unfortunately I don't have an easy answer/fix, but I'll note that historically our native-debugger support has been quite best-effort, and is more or less unmaintained at the moment. The DWARF translation has had known bugs, and we know that various aspects of our lowering can cause values to become unavailable. All of that to say: I'm not surprised that you are finding holes, and I wouldn't recommend relying on debugging by attaching a native debugger to wasmtime at the moment.</p>
<p>We do have a <a href="https://github.com/bytecodealliance/rfcs/blob/main/accepted/wasmtime-debugging.md">debugging RFC</a> that captures a lot of thinking about our debugging plans from a year ago; and assuming plans don't change, I should be able to start work on pieces of this later in the year.</p>
</blockquote>



<a name="532122976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/532122976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#532122976">(Jul 31 2025 at 16:46)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasmtime:debugging label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">Issue #11337</a>.</p>



<a name="532122977"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/532122977" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#532122977">(Jul 31 2025 at 16:46)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the cranelift:area:debug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">Issue #11337</a>.</p>



<a name="571999341"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311337%20%22Couldn%27t%20materialize%22%20error%20in%20d.../near/571999341" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311337.20.22Couldn.27t.20materialize.22.20error.20in.20d.2E.2E.2E.html#571999341">(Feb 04 2026 at 20:06)</a>:</h4>
<p>cfallin closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11337">issue #11337</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/user-attachments/files/21480824/function-pointer.wasm.gz">function-pointer.wasm.gz</a></p>
<h3>Steps to Reproduce</h3>
<p>The .wasm file was created with:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">clang</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="o">=</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip2</span><span class="w"> </span><span class="o">--</span><span class="n">sysroot</span><span class="o">=</span><span class="cp">$HOME</span><span class="o">/</span><span class="n">wasi</span><span class="o">-</span><span class="n">libc</span><span class="o">/</span><span class="n">sysroot</span><span class="w"> </span><span class="o">-</span><span class="n">o</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">c</span><span class="w"> </span><span class="o">-</span><span class="n">g</span><span class="w"> </span><span class="o">-</span><span class="n">O0</span>
</code></pre></div>
<p>and <code>wasi-libc</code> was built from source.</p>
<p><code>function-pointer.c</code> is as follows:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">int</span><span class="w"> </span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="n">void</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">f</span><span class="p">)();</span>
<span class="p">}</span><span class="w"> </span><span class="n">myfile</span><span class="p">;</span>

<span class="n">void</span><span class="w"> </span><span class="n">f</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="n">int</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="o">*</span><span class="w"> </span><span class="n">f1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">f</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// If the above line is commented out and the next line is uncommented,</span>
<span class="w">    </span><span class="c1">// it works as expected</span>
<span class="w">    </span><span class="c1">// f()</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">f1</span><span class="p">-&gt;</span><span class="nc">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">42</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">myfile</span><span class="w"> </span><span class="n">f1</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">f</span><span class="p">;</span>
<span class="w">    </span><span class="n">f1</span><span class="p">.</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">f1</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Steps:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">lldb</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">-</span><span class="n">D</span><span class="w"> </span><span class="n">debug</span><span class="o">-</span><span class="n">info</span><span class="w"> </span><span class="o">-</span><span class="n">O</span><span class="w"> </span><span class="n">opt</span><span class="o">-</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="w"> </span><span class="o">--</span><span class="n">wasm</span><span class="w"> </span><span class="n">component</span><span class="o">-</span><span class="n">model</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.::</span><span class="o">/</span><span class="w"> </span><span class="n">function</span><span class="o">-</span><span class="n">pointer</span><span class="p">.</span><span class="n">wasm</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">foo</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="p">(</span><span class="n">WebAssemblyPtrWrapper</span><span class="o">&lt;</span><span class="n">myfile</span><span class="o">&gt;</span><span class="p">)</span><span class="w">  </span><span class="p">(</span><span class="n">__ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">199872</span><span class="p">)</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">n</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="n">f1</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">Couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">materialize</span><span class="p">:</span><span class="w"> </span><span class="nc">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">get</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">variable</span><span class="w"> </span><span class="n">f1</span><span class="p">:</span><span class="w"> </span><span class="nc">variable</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">available</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">errored</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">DoExecute</span><span class="p">,</span><span class="w"> </span><span class="n">couldn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">PrepareToExecuteJITExpression</span>
</code></pre></div>
<h3>Expected Results</h3>
<p>I would expect to be able to view <code>f1</code> in the debugger at any point during the execution of <code>foo()</code>.</p>
<h3>Actual Results</h3>
<p>"Couldn't materialize" error as above.</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 35.0.0</p>
<p>lldb version: 18.1.3</p>
<p>Operating system: Linux (Ubuntu 24.04)</p>
<p>Architecture: x86_64<br>
</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>