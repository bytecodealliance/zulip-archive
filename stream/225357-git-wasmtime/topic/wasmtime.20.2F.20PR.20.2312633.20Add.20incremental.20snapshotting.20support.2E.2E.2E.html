<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12633 Add incremental snapshotting support... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html">wasmtime / PR #12633 Add incremental snapshotting support...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="575099039"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575099039" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575099039">(Feb 21 2026 at 16:37)</a>:</h4>
<p>Gentle opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a> from <code>Gentle:feat-savestates</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Rationale: If you keep the instrumentation information inside the output wasm file, then you can at any time use wizer to snapshot it again, allowing you to effectively save and resume later or on another machine</p>
<ul>
<li>adds a <code>keep_instrumentation</code> option that preserves <code>__wizer_*</code> exports in the output module</li>
<li>adds a <code>parse_instrumented</code> method that re-parses a previously snapshotted module so it can be snapshotted again.</li>
<li>parser::parse has been adjusted to either reject or require existing <code>__wizer_*</code> exports depending on new bool arg</li>
</ul>
<p>parse_instrumented skips validating the wasm module, the logic behind this is that if the wasm file was successfully instrumented before, then it must be valid. From micro benchmarking, wasm_validate takes longer than instrumentation itself, so there is a significant speedup by reusing the instrumentation information<br>
</p>
</blockquote>



<a name="575099041"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575099041" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575099041">(Feb 21 2026 at 16:37)</a>:</h4>
<p>Gentle requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>.</p>



<a name="575099042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575099042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575099042">(Feb 21 2026 at 16:37)</a>:</h4>
<p>Gentle requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>.</p>



<a name="575099896"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575099896" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575099896">(Feb 21 2026 at 16:52)</a>:</h4>
<p>Gentle updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>.</p>



<a name="575112765"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575112765" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575112765">(Feb 21 2026 at 20:48)</a>:</h4>
<p>github-actions[bot] added the label <code>wizer</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>.</p>



<a name="575112811"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575112811" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575112811">(Feb 21 2026 at 20:49)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/12633#issuecomment-3939457556">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "wizer"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: wizer</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="575114810"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575114810" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575114810">(Feb 21 2026 at 21:32)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/12633#issuecomment-3939539262">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>:</p>
<blockquote>
<blockquote>
<p>parse_instrumented skips validating the wasm module, the logic behind this is that if the wasm file was successfully instrumented before, then it must be valid.</p>
</blockquote>
<p>Is that safe to do when the wasm module comes from an untrusted source?</p>
</blockquote>



<a name="575132620"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575132620" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575132620">(Feb 22 2026 at 03:35)</a>:</h4>
<p>Gentle <a href="https://github.com/bytecodealliance/wasmtime/pull/12633#issuecomment-3940066737">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>:</p>
<blockquote>
<p>well no, at that point you are trusting that whoever added the __wizer_* exports did not lie and did validate the wasm before adding them</p>
<p>it's possible that my microbenchmarks were bad, but with a 20MB wasm file, validate, parse, then snapshot was 80% slower than just parse and snapshot. It doesn't break anything to add self.wasm_validate() in parse_instrumented, I just think it's redundant but I'd be happy to implement it differently if there are concerns</p>
</blockquote>



<a name="575132650"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575132650" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575132650">(Feb 22 2026 at 03:35)</a>:</h4>
<p>Gentle edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12633#issuecomment-3940066737">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>:</p>
<blockquote>
<p>well no, at that point you are trusting that whoever added the <code>__wizer_*</code> exports did not lie and did validate the wasm before adding them</p>
<p>it's possible that my microbenchmarks were bad, but with a 20MB wasm file, validate, parse, then snapshot was 80% slower than just parse and snapshot. It doesn't break anything to add self.wasm_validate() in parse_instrumented, I just think it's redundant but I'd be happy to implement it differently if there are concerns</p>
</blockquote>



<a name="575133042"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312633%20Add%20incremental%20snapshotting%20support.../near/575133042" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312633.20Add.20incremental.20snapshotting.20support.2E.2E.2E.html#575133042">(Feb 22 2026 at 03:44)</a>:</h4>
<p>Gentle edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12633#issuecomment-3940066737">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12633">PR #12633</a>:</p>
<blockquote>
<p>well no, at that point you are trusting that whoever added the <code>__wizer_*</code> exports did not lie and did validate the wasm before adding them</p>
<p>it's possible that my microbenchmarks were bad, but with a 20MB wasm file, validate, parse, then snapshot took roughly 6 times as long as just parse and snapshot. It doesn't break anything to add self.wasm_validate() in parse_instrumented, I just think it's redundant but I'd be happy to implement it differently if there are concerns</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>