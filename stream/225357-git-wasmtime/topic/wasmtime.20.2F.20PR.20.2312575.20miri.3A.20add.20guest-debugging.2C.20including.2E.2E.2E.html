<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12575 miri: add guest-debugging, including... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html">wasmtime / PR #12575 miri: add guest-debugging, including...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="573407535"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573407535" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573407535">(Feb 11 2026 at 23:33)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a> from <code>cfallin:debug-frames-miri</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>The fix to <code>vm_store_context</code> provenance in <code>record_unwind</code>/<code>unwind</code> is a little weird to me. I was seeing mut access to the <code>vm_store_context</code> via <code>store.vm_store_context_mut()</code> in <code>record_unwind</code> (before this diff) then access via the previously saved raw pointer in the <code>CallThreadState</code>, which was registered as invalid and I believe is indeed invalid. This was only manifesting when setting <code>Config::guest_debug</code>, even without the frame-handle accesses added here. I didn't dig into the exact diff in codegen or runtime behavior that caused this but in any case, accessing <code>vm_store_context</code> via these two different paths (with one mut) appears to be unsound in any case. The fix here is to set the unwind state via the raw pointer in <code>CallThreadState</code> since that's the only path that the subsequent <code>unwind</code> has access to.</p>
<p>Unrelated but useful: <code>ci/miri-provenance.test.sh</code> now accepts <code>MIRI_RUST_VERSION=+nightly</code> or whatnot, which is nice for running locally (I keep <code>stable</code> as my default toolchain).</p>
<p>Stacked on top of #12566 (only last commit is new).</p>
</blockquote>



<a name="573407538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573407538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573407538">(Feb 11 2026 at 23:33)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573407539"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573407539" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573407539">(Feb 11 2026 at 23:34)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573407540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573407540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573407540">(Feb 11 2026 at 23:34)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573407541"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573407541" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573407541">(Feb 11 2026 at 23:34)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573411003"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573411003" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573411003">(Feb 12 2026 at 00:07)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573411027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573411027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573411027">(Feb 12 2026 at 00:07)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>The fix to <code>vm_store_context</code> provenance in <code>record_unwind</code>/<code>unwind</code> is a little weird to me. I was seeing mut access to the <code>vm_store_context</code> via <code>store.vm_store_context_mut()</code> in <code>record_unwind</code> (before this diff) then access via the previously saved raw pointer in the <code>CallThreadState</code>, which was registered as invalid and I believe is indeed invalid. This was only manifesting when setting <code>Config::guest_debug</code>, even without the frame-handle accesses added here. I didn't dig into the exact diff in codegen or runtime behavior that caused this but in any case, accessing <code>vm_store_context</code> via these two different paths (with one mut) appears to be unsound in any case. The fix here is to set the unwind state via the raw pointer in <code>CallThreadState</code> since that's the only path that the subsequent <code>unwind</code> has access to.</p>
<p>Unrelated but useful: <code>ci/miri-provenance.test.sh</code> now accepts <code>MIRI_RUST_VERSION=+nightly</code> or whatnot, which is nice for running locally (I keep <code>stable</code> as my default toolchain).</p>
</blockquote>



<a name="573411088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573411088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573411088">(Feb 12 2026 at 00:08)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573411156"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573411156" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573411156">(Feb 12 2026 at 00:09)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573419798"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573419798" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573419798">(Feb 12 2026 at 01:40)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#pullrequestreview-3788310591">PR review</a>:</p>
<blockquote>
<p>Thanks! Do you think it'd be worth running through anything else in the debug API as well? Or does getting a module more-or-less exercise everything?</p>
</blockquote>



<a name="573419799"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573419799" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573419799">(Feb 12 2026 at 01:40)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#discussion_r2796346340">PR review comment</a>:</p>
<blockquote>
<p>Another way you can run this script is <code>rustup run nightly ./ci/miri-provenance.test.sh ...</code> although using <code>MIRI_RUST_VERSION=+nightly</code> works here too just as well</p>
</blockquote>



<a name="573432947"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573432947" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573432947">(Feb 12 2026 at 04:29)</a>:</h4>
<p>github-actions[bot] added the label <code>wasmtime:api</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573435790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573435790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573435790">(Feb 12 2026 at 05:02)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573435871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573435871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573435871">(Feb 12 2026 at 05:02)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#pullrequestreview-3788746344">PR review</a>.</p>



<a name="573435873"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573435873" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573435873">(Feb 12 2026 at 05:02)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#discussion_r2796784541">PR review comment</a>:</p>
<blockquote>
<p>Ah, I had no idea -- thanks! Removed my ad-hoc env var and added a comment to this script instead noting this trick.</p>
</blockquote>



<a name="573435962"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573435962" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573435962">(Feb 12 2026 at 05:03)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#issuecomment-3888703587">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>Getting the current module exercises almost everything (frame-walking, getting metadata, reading raw vmctx and converting back to proper borrow of instance, etc) but I added a few more reads for good measure. Thanks!</p>
</blockquote>



<a name="573435968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573435968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573435968">(Feb 12 2026 at 05:03)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573437016"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573437016" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573437016">(Feb 12 2026 at 05:15)</a>:</h4>
<p>cfallin added <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575 miri: add guest-debugging, including frame accesses.</a> to the merge queue</p>



<a name="573437231"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573437231" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573437231">(Feb 12 2026 at 05:18)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>The fix to <code>vm_store_context</code> provenance in <code>record_unwind</code>/<code>unwind</code> is a little weird to me. I was seeing mut access to the <code>vm_store_context</code> via <code>store.vm_store_context_mut()</code> in <code>record_unwind</code> (before this diff) then access via the previously saved raw pointer in the <code>CallThreadState</code>, which was registered as invalid and I believe is indeed invalid. This was only manifesting when setting <code>Config::guest_debug</code>, even without the frame-handle accesses added here. I didn't dig into the exact diff in codegen or runtime behavior that caused this but in any case, accessing <code>vm_store_context</code> via these two different paths (with one mut) appears to be unsound in any case. The fix here is to set the unwind state via the raw pointer in <code>CallThreadState</code> since that's the only path that the subsequent <code>unwind</code> has access to.</p>
</blockquote>



<a name="573439000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573439000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573439000">(Feb 12 2026 at 05:41)</a>:</h4>
<p>github-merge-queue[bot] removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575 miri: add guest-debugging, including frame accesses.</a> from the merge queue</p>



<a name="573589916"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573589916" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573589916">(Feb 12 2026 at 18:14)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573590185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573590185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573590185">(Feb 12 2026 at 18:16)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#issuecomment-3892613615">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>@alexcrichton pinging for re-review here -- another miri test failure (not part of the Pulley provenance test) has pushed me back toward another approach that involves re-deriving the raw <code>VMStoreContext</code> pointer in <code>CallThreadState</code> when setting up unwind state, for provenance reasons; this avoids action-at-a-distance failures where any mutation on the store in some path can potentially invalidate provenance.</p>
</blockquote>



<a name="573590233"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573590233" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573590233">(Feb 12 2026 at 18:16)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573590634"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573590634" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573590634">(Feb 12 2026 at 18:18)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573597186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573597186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573597186">(Feb 12 2026 at 18:57)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#issuecomment-3892819637">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>(There's still a failure on s390x only that I suspect is an endianness issue when running Pulley + guest-debug instrumentation -- will take a look)</p>
</blockquote>



<a name="573605827"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573605827" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573605827">(Feb 12 2026 at 19:44)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#pullrequestreview-3793264287">PR review</a>:</p>
<blockquote>
<p>Looks reasonable to me yeah <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="573606269"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573606269" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573606269">(Feb 12 2026 at 19:47)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#issuecomment-3893042138">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>A little more detail: Pulley on s390x with guest-debug enabled (which hasn't been tested before -- only native s390x with guest-debug) is generating a big-endian vector store in the CLIF to compile to Pulley, which Cranelift's Pulley backend doesn't support. That's a nontrivial bit of implementation (lane swapping, etc). I'll instead refactor the instrumentation to work as e.g. object fields do, always little endian, in a separate PR.</p>
</blockquote>



<a name="573623504"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573623504" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573623504">(Feb 12 2026 at 21:49)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#issuecomment-3893581035">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>s390x fix in #12585; will rebase on that once merged.</p>
</blockquote>



<a name="573637421"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573637421" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573637421">(Feb 12 2026 at 23:36)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#pullrequestreview-3793264287">PR review</a>:</p>
<blockquote>
<p>Looks reasonable to me yeah <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span> </p>
</blockquote>



<a name="573637422"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573637422" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573637422">(Feb 12 2026 at 23:36)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573637643"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573637643" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573637643">(Feb 12 2026 at 23:39)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573639279"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573639279" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573639279">(Feb 12 2026 at 23:56)</a>:</h4>
<p>cfallin edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/12575#issuecomment-3893581035">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>:</p>
<blockquote>
<p>s390x fix in #12585; will <del>rebase on that</del> merge that in once merged.</p>
</blockquote>



<a name="573639533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573639533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573639533">(Feb 12 2026 at 23:59)</a>:</h4>
<p>cfallin added <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575 miri: add guest-debugging, including frame accesses.</a> to the merge queue</p>



<a name="573641783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573641783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573641783">(Feb 13 2026 at 00:22)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575</a>.</p>



<a name="573641785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312575%20miri%3A%20add%20guest-debugging%2C%20including.../near/573641785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312575.20miri.3A.20add.20guest-debugging.2C.20including.2E.2E.2E.html#573641785">(Feb 13 2026 at 00:22)</a>:</h4>
<p>cfallin removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12575">PR #12575 miri: add guest-debugging, including frame accesses.</a> from the merge queue</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>