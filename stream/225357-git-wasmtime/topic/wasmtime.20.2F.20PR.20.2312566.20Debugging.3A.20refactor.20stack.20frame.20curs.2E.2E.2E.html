<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12566 Debugging: refactor stack frame curs... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html">wasmtime / PR #12566 Debugging: refactor stack frame curs...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="573177744"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573177744" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573177744">(Feb 11 2026 at 00:41)</a>:</h4>
<p>cfallin opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a> from <code>cfallin:a-new-framing-for-stack-frames</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This addresses some of the issues described #12486: we need the ability to keep a handle to a stack frame as long as execution is frozen, and keep multiple of these handles around, alongside the <code>Store</code>, without any handle directly holding a borrow of the store.</p>
<p>The frame handles work by means of an "execution version" scheme: the idea is that whenever any execution resumes in a given store, all handles to existing frames could be invalidated, but if no such execution occurs, all handles should still be valid. A tuple of (globally unique for process lifetime) store ID, and execution version within that store, should be sufficient to uniquely identify any frozen-stack period during execution. This accomplishes cheap handle invalidation without the need to track existing handles.</p>
<p>This PR also implements a cache of parsed frame-table data. Previously this was lazily parsed by the cursor as it walked up a stack, but with multiple handles hanging around, and with handles meant to be cheap to hold and clone, and with handles being invalidated eagerly, it makes much more sense to persist this parsed metadata at the <code>Store</code> level. (It cannot persist at the <code>Engine</code> level because PCs are local per store.)</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="573177748"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573177748" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573177748">(Feb 11 2026 at 00:41)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573177749"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573177749" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573177749">(Feb 11 2026 at 00:41)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers">wasmtime-compiler-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573177750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573177750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573177750">(Feb 11 2026 at 00:41)</a>:</h4>
<p><strong>cfallin</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573179991"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573179991" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573179991">(Feb 11 2026 at 01:03)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#issuecomment-3881564300">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>:</p>
<blockquote>
<p>(I plan to add tests for various handle invalidation cases tomorrow -- sorry, missed including those here)</p>
</blockquote>



<a name="573198984"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573198984" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573198984">(Feb 11 2026 at 04:34)</a>:</h4>
<p>github-actions[bot] added the label <code>wasmtime:api</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573327440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573327440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573327440">(Feb 11 2026 at 16:07)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573372750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372750">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795051232">PR review comment</a>:</p>
<blockquote>
<p>"hte"</p>
</blockquote>



<a name="573372751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372751">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795095522">PR review comment</a>:</p>
<blockquote>
<p>The <code>impl Into&lt;...&gt;</code> strategy may not be necessary here, can this be <code>AsContextMut</code> instead? This is also applicable to a lot of methods below too, basically anything that doesn't need to return a thing-with-<code>'a</code> can use <code>AsContextMut</code> instead of <code>Into&lt;...&gt;</code></p>
</blockquote>



<a name="573372752"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372752" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372752">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795091333">PR review comment</a>:</p>
<blockquote>
<p>Can you add <code>// SAFETY: ...</code> comments here and below?</p>
</blockquote>



<a name="573372753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372753">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795128572">PR review comment</a>:</p>
<blockquote>
<p>Could this perhaps take just a <code>pc</code> instead of a full <code>Frame</code> to emphasize how it's a per-pc calculation and can't take anything into account like fp/sp/etc?</p>
</blockquote>



<a name="573372754"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372754" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372754">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795099373">PR review comment</a>:</p>
<blockquote>
<p>Can you expand the docs here with a <code># Panics</code> section for the <code>is_valid</code> assertion?</p>
</blockquote>



<a name="573372755"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372755" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372755">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795087431">PR review comment</a>:</p>
<blockquote>
<p>Can you add a <code>// SAFETY: ...</code> comment here?</p>
</blockquote>



<a name="573372757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372757">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795114651">PR review comment</a>:</p>
<blockquote>
<p>Can this, and all methods below, document <code># Panics</code> with <code>is_valid</code> assertions?</p>
</blockquote>



<a name="573372759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573372759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573372759">(Feb 11 2026 at 19:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3786827888">PR review</a>:</p>
<blockquote>
<p>In retrospect we probably should have had this earlier, but given all the <code>unsafe</code> here I think it'd be good to get Miri testing for this. Could you extend the <code>pulley_provenance_test</code> test in <code>tests/all/pulley.rs</code> (or something like that) to be able to exercise all this under Miri?</p>
</blockquote>



<a name="573379574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573379574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573379574">(Feb 11 2026 at 20:21)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573383074"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383074" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383074">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573383088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383088">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787359166">PR review</a>.</p>



<a name="573383090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383090">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795429494">PR review comment</a>:</p>
<blockquote>
<p>Fixed, thanks!</p>
</blockquote>



<a name="573383124"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383124" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383124">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787361232">PR review</a>.</p>



<a name="573383125"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383125" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383125">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795430857">PR review comment</a>:</p>
<blockquote>
<p>Done in e1e24025927adb47b463159ab707951554bd6cd3.</p>
</blockquote>



<a name="573383140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383140">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787361910">PR review</a>.</p>



<a name="573383142"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383142" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383142">(Feb 11 2026 at 20:42)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795431370">PR review comment</a>:</p>
<blockquote>
<p>Done in e1e24025927adb47b463159ab707951554bd6cd3.</p>
</blockquote>



<a name="573383260"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383260" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383260">(Feb 11 2026 at 20:43)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787367866">PR review</a>.</p>



<a name="573383262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383262">(Feb 11 2026 at 20:43)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795435274">PR review comment</a>:</p>
<blockquote>
<p>Switched the API to return <code>Result</code> anywhere a handle is used that needs to be valid, instead, after discussion with @fitzgen; we'll need checks at some level anyway when we wrap this in a WIT and it makes more sense to produce the <code>Err</code> from the builtin check than do a double-check. Implemented in e1e24025927adb47b463159ab707951554bd6cd3.</p>
</blockquote>



<a name="573383331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383331">(Feb 11 2026 at 20:44)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787371217">PR review</a>.</p>



<a name="573383332"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573383332" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573383332">(Feb 11 2026 at 20:44)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795437598">PR review comment</a>:</p>
<blockquote>
<p>Updated to return a <code>Result</code> instead (details below) in e1e24025927adb47b463159ab707951554bd6cd3.</p>
</blockquote>



<a name="573384472"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573384472" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573384472">(Feb 11 2026 at 20:51)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573384491"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573384491" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573384491">(Feb 11 2026 at 20:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787414718">PR review</a>.</p>



<a name="573384495"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573384495" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573384495">(Feb 11 2026 at 20:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795468899">PR review comment</a>:</p>
<blockquote>
<p>Good idea -- done in dedd88b297.</p>
</blockquote>



<a name="573384563"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573384563" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573384563">(Feb 11 2026 at 20:51)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787417394">PR review</a>.</p>



<a name="573384566"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573384566" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573384566">(Feb 11 2026 at 20:51)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795471184">PR review comment</a>:</p>
<blockquote>
<p>Ah, yes, that's much cleaner -- possible everywhere but for <code>fn module(...) -&gt; Option&lt;&amp;'a Module&gt;</code>. Done in dedd88b297.</p>
</blockquote>



<a name="573387374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573387374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573387374">(Feb 11 2026 at 21:05)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#issuecomment-3887224169">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>:</p>
<blockquote>
<blockquote>
<p>In retrospect we probably should have had this earlier, but given all the <code>unsafe</code> here I think it'd be good to get Miri testing for this. Could you extend the <code>pulley_provenance_test</code> test in <code>tests/all/pulley.rs</code> (or something like that) to be able to exercise all this under Miri?</p>
</blockquote>
<p>I'm getting some UB errors in miri deep in the <code>MmapVec</code> code -- perhaps something to do with the private-code-copy support? In any case, I'd like to defer this miri testing to a followup if you don't mind as it's looking like it won't be trivial.</p>
</blockquote>



<a name="573391819"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573391819" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573391819">(Feb 11 2026 at 21:38)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787609176">PR review</a>:</p>
<blockquote>
<p>That sounds reasonable to me yeah, and thanks!</p>
</blockquote>



<a name="573391843"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573391843" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573391843">(Feb 11 2026 at 21:38)</a>:</h4>
<p>alexcrichton added <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566 Debugging: refactor stack frame cursor into frame handle abstraction.</a> to the merge queue</p>



<a name="573395428"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573395428" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573395428">(Feb 11 2026 at 22:02)</a>:</h4>
<p>github-merge-queue[bot] removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566 Debugging: refactor stack frame cursor into frame handle abstraction.</a> from the merge queue</p>



<a name="573396088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573396088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573396088">(Feb 11 2026 at 22:07)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573396120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573396120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573396120">(Feb 11 2026 at 22:07)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573397050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573397050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573397050">(Feb 11 2026 at 22:13)</a>:</h4>
<p>fitzgen submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3786470896">PR review</a>:</p>
<blockquote>
<p>(realizing I forgot to hit submit on my pending review comments)</p>
</blockquote>



<a name="573397052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573397052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573397052">(Feb 11 2026 at 22:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2794767749">PR review comment</a>:</p>
<blockquote>
<p>Seems like this could be <code>FrameCursor::new</code> now?</p>
</blockquote>



<a name="573397053"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573397053" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573397053">(Feb 11 2026 at 22:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2794827991">PR review comment</a>:</p>
<blockquote>
<p>This seems like it should be an <code>Activation::frame_cursor</code> method, so that we don't need to make the activation's register state <code>pub(crate)</code> (which means we need to audit the whole crate to check the safety of passing their values into <code>frame_cursor</code>, making sure that nothing else is setting them to invalid values).</p>
</blockquote>



<a name="573397055"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573397055" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573397055">(Feb 11 2026 at 22:13)</a>:</h4>
<p>fitzgen created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2794804488">PR review comment</a>:</p>
<blockquote>
<p>Can we avoid making these <code>pub(crate)</code>?</p>
<p>Because if <code>frame_cursor</code>/<code>FrameCursor::new</code> is going to continue to be <code>unsafe</code> (meaning that we are trusting its pc/fp/trampoline_fp arguments), then we should probably not make these <code>pub(crate)</code> to limit the scope of how much code needs to be trusted to maintain these values correctly.</p>
<p>Alternatively, we could also make <code>frame_cursor</code>/<code>FrameCursor::new</code> a safe function and have all the <code>unsafe</code> invariants bottleneck at <code>FrameCursor::advance</code>.</p>
</blockquote>



<a name="573397239"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573397239" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573397239">(Feb 11 2026 at 22:15)</a>:</h4>
<p>cfallin has disabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573400762"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400762" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400762">(Feb 11 2026 at 22:38)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573400785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400785">(Feb 11 2026 at 22:38)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787837151">PR review</a>.</p>



<a name="573400786"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400786" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400786">(Feb 11 2026 at 22:38)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795874613">PR review comment</a>:</p>
<blockquote>
<p>Done in 40f26f8fa4.</p>
</blockquote>



<a name="573400821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400821">(Feb 11 2026 at 22:39)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787838628">PR review</a>.</p>



<a name="573400823"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400823" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400823">(Feb 11 2026 at 22:39)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795875945">PR review comment</a>:</p>
<blockquote>
<p>Ah, yep, done in 40f26f8fa4 now that we have a method in <code>Activation</code> to use them directly.</p>
</blockquote>



<a name="573400870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400870">(Feb 11 2026 at 22:39)</a>:</h4>
<p>cfallin submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#pullrequestreview-3787840148">PR review</a>.</p>



<a name="573400871"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400871" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400871">(Feb 11 2026 at 22:39)</a>:</h4>
<p>cfallin created <a href="https://github.com/bytecodealliance/wasmtime/pull/12566#discussion_r2795877337">PR review comment</a>:</p>
<blockquote>
<p>Done in 40f26f8fa4.</p>
</blockquote>



<a name="573400882"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573400882" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573400882">(Feb 11 2026 at 22:39)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573401007"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573401007" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573401007">(Feb 11 2026 at 22:40)</a>:</h4>
<p>cfallin edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>:</p>
<blockquote>
<p>This addresses some of the issues described #12486: we need the ability to keep a handle to a stack frame as long as execution is frozen, and keep multiple of these handles around, alongside the <code>Store</code>, without any handle directly holding a borrow of the store.</p>
<p>The frame handles work by means of an "execution version" scheme: the idea is that whenever any execution resumes in a given store, all handles to existing frames could be invalidated, but if no such execution occurs, all handles should still be valid. A tuple of (globally unique for process lifetime) store ID, and execution version within that store, should be sufficient to uniquely identify any frozen-stack period during execution. This accomplishes cheap handle invalidation without the need to track existing handles.</p>
<p>This PR also implements a cache of parsed frame-table data. Previously this was lazily parsed by the cursor as it walked up a stack, but with multiple handles hanging around, and with handles meant to be cheap to hold and clone, and with handles being invalidated eagerly, it makes much more sense to persist this parsed metadata at the <code>Store</code> level. (It cannot persist at the <code>Engine</code> level because PCs are local per store.)</p>
<p>Fixes #12486.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="573401193"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573401193" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573401193">(Feb 11 2026 at 22:41)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573403746"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573403746" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573403746">(Feb 11 2026 at 23:01)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573405487"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573405487" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573405487">(Feb 11 2026 at 23:14)</a>:</h4>
<p>cfallin added <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566 Debugging: refactor stack frame cursor into frame handle abstraction.</a> to the merge queue</p>



<a name="573407008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573407008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573407008">(Feb 11 2026 at 23:28)</a>:</h4>
<p>cfallin updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573407029"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573407029" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573407029">(Feb 11 2026 at 23:29)</a>:</h4>
<p>cfallin removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566 Debugging: refactor stack frame cursor into frame handle abstraction.</a> from the merge queue</p>



<a name="573407044"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573407044" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573407044">(Feb 11 2026 at 23:29)</a>:</h4>
<p>cfallin has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573408552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573408552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573408552">(Feb 11 2026 at 23:43)</a>:</h4>
<p>cfallin added <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566 Debugging: refactor stack frame cursor into frame handle abstraction.</a> to the merge queue</p>



<a name="573410918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573410918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573410918">(Feb 12 2026 at 00:07)</a>:</h4>
<p>cfallin merged <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566</a>.</p>



<a name="573410920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312566%20Debugging%3A%20refactor%20stack%20frame%20curs.../near/573410920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312566.20Debugging.3A.20refactor.20stack.20frame.20curs.2E.2E.2E.html#573410920">(Feb 12 2026 at 00:07)</a>:</h4>
<p>cfallin removed <a href="https://github.com/bytecodealliance/wasmtime/pull/12566">PR #12566 Debugging: refactor stack frame cursor into frame handle abstraction.</a> from the merge queue</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>