<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11163 Cache GC heap memory&#x27;s `VMMemoryD... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311163.20Cache.20GC.20heap.20memory.27s.20.60VMMemoryD.2E.2E.2E.html">wasmtime / issue #11163 Cache GC heap memory&#x27;s `VMMemoryD...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="526479030"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311163%20Cache%20GC%20heap%20memory%27s%20%60VMMemoryD.../near/526479030" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311163.20Cache.20GC.20heap.20memory.27s.20.60VMMemoryD.2E.2E.2E.html#526479030">(Jun 30 2025 at 20:05)</a>:</h4>
<p>fitzgen opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11163">issue #11163</a>:</p>
<blockquote>
<p>Right now we call through a <code>dyn RuntimeLinearMemory</code> to get the <code>VMMemoryDefinition</code> every time we index into the heap, including in the tracing and decref'ing inner loop. It can only change when we grow the memory, which can only happen when the memory is taken out of the GC heap and then replaced, so we can just update the cache every time it is replaced. This should remove a bunch of indirect calls and let LLVM inline and GVN and etc more stuff.</p>
</blockquote>



<a name="526479031"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311163%20Cache%20GC%20heap%20memory%27s%20%60VMMemoryD.../near/526479031" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311163.20Cache.20GC.20heap.20memory.27s.20.60VMMemoryD.2E.2E.2E.html#526479031">(Jun 30 2025 at 20:05)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the performance label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11163">Issue #11163</a>.</p>



<a name="526479033"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311163%20Cache%20GC%20heap%20memory%27s%20%60VMMemoryD.../near/526479033" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311163.20Cache.20GC.20heap.20memory.27s.20.60VMMemoryD.2E.2E.2E.html#526479033">(Jun 30 2025 at 20:05)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasm-proposal:gc label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11163">Issue #11163</a>.</p>



<a name="526505758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311163%20Cache%20GC%20heap%20memory%27s%20%60VMMemoryD.../near/526505758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311163.20Cache.20GC.20heap.20memory.27s.20.60VMMemoryD.2E.2E.2E.html#526505758">(Jul 01 2025 at 00:33)</a>:</h4>
<p>fitzgen closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11163">issue #11163</a>:</p>
<blockquote>
<p>Right now we call through a <code>dyn RuntimeLinearMemory</code> to get the <code>VMMemoryDefinition</code> every time we index into the heap, including in the tracing and decref'ing inner loop. It can only change when we grow the memory, which can only happen when the memory is taken out of the GC heap and then replaced, so we can just update the cache every time it is replaced. This should remove a bunch of indirect calls and let LLVM inline and GVN and etc more stuff.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>