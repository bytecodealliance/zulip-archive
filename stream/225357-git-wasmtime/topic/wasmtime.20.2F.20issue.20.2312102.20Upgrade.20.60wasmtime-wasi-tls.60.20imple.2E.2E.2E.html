<html>
<head><meta charset="utf-8"><title>wasmtime / issue #12102 Upgrade `wasmtime-wasi-tls` imple... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html">wasmtime / issue #12102 Upgrade `wasmtime-wasi-tls` imple...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="561119542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/561119542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#561119542">(Dec 01 2025 at 10:28)</a>:</h4>
<p>Aditya1404Sal opened <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">issue #12102</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>Implement WASI TLS Phase 2 following the simplified security-focused wit proposal from <a href="https://github.com/WebAssembly/wasi-tls/issues/13">https://github.com/WebAssembly/wasi-tls/issues/13</a></p>
<h4>Benefit</h4>
<p>Phase 1 is unstable and <strong>only supports client-side TLS</strong>. This blocks WASI components from:</p>
<ul>
<li>Accepting incoming TLS connections (servers, proxies)</li>
<li>Accessing connection metadata (cipher suite, peer certificates)</li>
<li>Following modern async patterns aligned with Preview 2/3</li>
</ul>
<p>Phase 2 adds server-side support with a <strong>simplified, security-first API</strong> that:</p>
<ul>
<li>Focuses on TLS 1.3 (modern security, 75%+ adoption)</li>
<li>Removes problematic features (0-RTT replay attacks, suspension points)</li>
<li>Uses linear async flow that naturally evolves to Preview 3's <code>async/await</code></li>
<li>Reduces API surface by ~40% while adding critical functionality</li>
</ul>
<h4>Implementation</h4>
<p>Replace current Phase 1 WIT with Phase 2 proposal from <a href="https://github.com/WebAssembly/wasi-tls/issues/13">https://github.com/WebAssembly/wasi-tls/issues/13</a></p>
<p><strong>Key additions:</strong></p>
<ul>
<li><code>Server</code> resource with identity/ALPN/client-auth configuration</li>
<li><code>Connection</code> resource with cipher-suite, peer-certificate, close methods</li>
<li><code>accept()</code> for server-side handshakes</li>
<li>Async pattern: <code>finish()</code> + <code>subscribe()</code> (Preview 2) -&gt; <code>async finish()</code> (Preview 3)</li>
<li>Unified rustls/native-tls provider architecture with client/server separation</li>
</ul>
<p><strong>Security benefits:</strong></p>
<ul>
<li>No suspension points = no deadlock/state machine complexity</li>
<li>TLS 1.3 focus = modern ciphers, forward secrecy</li>
<li>Linear flow = easier auditing, fewer vulnerabilities</li>
</ul>
<h4>Alternatives</h4>
<p>Nonexistent<br>
</p>
</blockquote>



<a name="561121690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/561121690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#561121690">(Dec 01 2025 at 10:38)</a>:</h4>
<p>Aditya1404Sal <a href="https://github.com/bytecodealliance/wasmtime/issues/12102#issuecomment-3595822614">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">issue #12102</a>:</p>
<blockquote>
<p><strong>Note:</strong> I'm currently working on a reference implementation for this proposal and will be opening a PR shortly. Creating this issue first to document the feature request and facilitate discussion before the PR review.</p>
</blockquote>



<a name="561141803"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/561141803" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#561141803">(Dec 01 2025 at 12:13)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/12102#issuecomment-3596214005">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">issue #12102</a>:</p>
<blockquote>
<p>I would strongly recommend seeing more of the discussion of the spec change proposal through before implementing this, since I could see things changing substantially. In particular, the last paragraph in <a href="https://github.com/WebAssembly/wasi-tls/issues/13#issuecomment-3451832986">Joel's comment</a> on guest language APIs might well result in big changes.</p>
<p>(As an aside, the term "phase" as used here is a bit confusing, as the WASI standardization process <a href="https://github.com/WebAssembly/WASI/blob/main/docs/Proposals.md">uses</a> that term to describe stabilization stages of a proposal. I guess what you're talking about is something like a proposed API change for wasi-tls.)</p>
</blockquote>



<a name="561146959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/561146959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#561146959">(Dec 01 2025 at 12:37)</a>:</h4>
<p>Aditya1404Sal <a href="https://github.com/bytecodealliance/wasmtime/issues/12102#issuecomment-3596343992">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">issue #12102</a>:</p>
<blockquote>
<p>Thanks for the feedback and clarification on the terminology! You're right, I should've framed this as an "API redesign proposal" rather than "Phase 2." (Apologies for the confusion)</p>
<p>I understand the concern regarding the spec consensus, especially given Joel's comments about guest language API compatibility.</p>
<p>I'll review the existing <a href="https://github.com/badeend/wasi-sockets/blob/tls/TLS.md">Research into .NET and NodeJS's APIs</a> to better understand the compatibility requirements.</p>
<p>Are there specific aspects of the API design where prototyping or analysis would be most helpful for moving the discussion forward?<br>
</p>
</blockquote>



<a name="561148850"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/561148850" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#561148850">(Dec 01 2025 at 12:45)</a>:</h4>
<p>tschneidereit <a href="https://github.com/bytecodealliance/wasmtime/issues/12102#issuecomment-3596379126">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">issue #12102</a>:</p>
<blockquote>
<blockquote>
<p>Are there specific aspects of the API design where prototyping or analysis would be most helpful for moving the discussion forward?</p>
</blockquote>
<p>At this point I think the discussion is more important than prototyping, honestly</p>
</blockquote>



<a name="561215372"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/561215372" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#561215372">(Dec 01 2025 at 16:42)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasi:impl label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">Issue #12102</a>.</p>



<a name="562960371"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312102%20Upgrade%20%60wasmtime-wasi-tls%60%20imple.../near/562960371" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312102.20Upgrade.20.60wasmtime-wasi-tls.60.20imple.2E.2E.2E.html#562960371">(Dec 10 2025 at 13:53)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/issues/12102#issuecomment-3637199452">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12102">issue #12102</a>:</p>
<blockquote>
<p>See <a href="https://github.com/WebAssembly/wasi-tls/issues/13#issuecomment-3637161641">https://github.com/WebAssembly/wasi-tls/issues/13#issuecomment-3637161641</a> for more info, but IMO we should be following the original design from <a href="https://github.com/WebAssembly/wasi-sockets/pull/104">https://github.com/WebAssembly/wasi-sockets/pull/104</a>, probably "refreshed" for p3.</p>
<p>It seems like the order of operations would be something like:</p>
<ol>
<li>Extract a well-scoped part of <a href="https://github.com/WebAssembly/wasi-sockets/pull/104">https://github.com/WebAssembly/wasi-sockets/pull/104</a></li>
<li>"Modernize" it, make it consistent with other wasip3 proposals (e.g. see <a href="https://github.com/WebAssembly/wasi-http/tree/7c678c4c10238a4bf4db91a0e27023d680ff65fe/wit-0.3.0-draft">https://github.com/WebAssembly/wasi-http/tree/7c678c4c10238a4bf4db91a0e27023d680ff65fe/wit-0.3.0-draft</a>)</li>
<li>Fill in the incomplete parts / TODOs</li>
<li>Open a PR to <a href="https://github.com/WebAssembly/wasi-tls">https://github.com/WebAssembly/wasi-tls</a></li>
<li>(optional) In parallel start working on an implementation for Wasmtime, open a <em>draft</em> PR once ready</li>
<li>Once the spec PR is merged - make sure that Wasmtime PR is up-to-date with the latest spec and mark "ready-for-review"</li>
<li>Repeat from step 1. as required</li>
</ol>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>