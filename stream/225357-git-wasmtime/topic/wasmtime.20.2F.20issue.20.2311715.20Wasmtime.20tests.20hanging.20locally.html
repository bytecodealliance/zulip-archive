<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11715 Wasmtime tests hanging locally · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311715.20Wasmtime.20tests.20hanging.20locally.html">wasmtime / issue #11715 Wasmtime tests hanging locally</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="540420984"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311715%20Wasmtime%20tests%20hanging%20locally/near/540420984" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311715.20Wasmtime.20tests.20hanging.20locally.html#540420984">(Sep 19 2025 at 10:23)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11715">issue #11715</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span>
<span class="p">[</span><span class="n">snip</span><span class="p">]</span>
<span class="n">test</span><span class="w"> </span><span class="n">cli_tests</span><span class="p">::</span><span class="n">test_programs</span><span class="p">::</span><span class="n">cli_serve_trap_before_set</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">gc</span><span class="p">::</span><span class="n">drc_traces_the_correct_number_of_gc_refs_in_arrays</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">linker</span><span class="p">::</span><span class="n">module_interposition</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_tiny_static_heap</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftpulley_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">winch_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory_creator</span><span class="p">::</span><span class="n">not_for_windows</span><span class="p">::</span><span class="n">host_memory_grow</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">stack_overflow</span><span class="p">::</span><span class="n">craneliftpulley_big_stack_works_ok</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">winch_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">module</span><span class="p">::</span><span class="n">craneliftpulley_concurrent_type_registry_modifications</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory_creator</span><span class="p">::</span><span class="n">not_for_windows</span><span class="p">::</span><span class="n">host_memory_grow</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">gc</span><span class="p">::</span><span class="n">drc_traces_the_correct_number_of_gc_refs_in_arrays</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stack_overflow</span><span class="p">::</span><span class="n">craneliftnative_big_stack_works_ok</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">relocs</span><span class="p">::</span><span class="n">mixed_forced</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">relocs</span><span class="p">::</span><span class="n">mixed</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftpulley_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_tiny_static_heap</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">linker</span><span class="p">::</span><span class="n">module_interposition</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
</code></pre></div>
<p>The test binary was using 200% cpu when the warnings about slow execution were printed and dropped to 0% when the couple test passes happened with a wasmtime instance also using 0%. This wasmtime instance is <code>wasmtime serve --addr=127.0.0.1:0 /path/to/wasmtime/target/debug/build/test-programs-artifacts-51f05083d9eb061b/out/wasm32-wasip1/debug/cli_serve_trap_before_set.component.wasm -Scli --shutdown-addr=127.0.0.1:0</code>.</p>
<p>This is on current main (9362e47987363c350a8d9d09aa56677425496fb7) on Linux and consistently reproduces for me.</p>
</blockquote>



<a name="540475872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311715%20Wasmtime%20tests%20hanging%20locally/near/540475872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311715.20Wasmtime.20tests.20hanging.20locally.html#540475872">(Sep 19 2025 at 14:56)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11715#issuecomment-3312534394">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11715">issue #11715</a>:</p>
<blockquote>
<p>Do you have <code>RUST_BACKTRACE=1</code> set in your environment? I've seen this befor with that on this specific test and I keep forgetting to either file an issue for it or fix it. Basically the test generates too much output and the server integration we have doesn't work with that.</p>
</blockquote>



<a name="540476815"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311715%20Wasmtime%20tests%20hanging%20locally/near/540476815" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311715.20Wasmtime.20tests.20hanging.20locally.html#540476815">(Sep 19 2025 at 15:01)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/11715#issuecomment-3312547835">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11715">issue #11715</a>:</p>
<blockquote>
<p>Yes, I do have <code>RUST_BACKTRACE=1</code>.</p>
</blockquote>



<a name="541070135"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311715%20Wasmtime%20tests%20hanging%20locally/near/541070135" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311715.20Wasmtime.20tests.20hanging.20locally.html#541070135">(Sep 23 2025 at 17:49)</a>:</h4>
<p>fitzgen closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11715">issue #11715</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">test</span>
<span class="p">[</span><span class="n">snip</span><span class="p">]</span>
<span class="n">test</span><span class="w"> </span><span class="n">cli_tests</span><span class="p">::</span><span class="n">test_programs</span><span class="p">::</span><span class="n">cli_serve_trap_before_set</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">gc</span><span class="p">::</span><span class="n">drc_traces_the_correct_number_of_gc_refs_in_arrays</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">linker</span><span class="p">::</span><span class="n">module_interposition</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_tiny_static_heap</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftpulley_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">winch_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory_creator</span><span class="p">::</span><span class="n">not_for_windows</span><span class="p">::</span><span class="n">host_memory_grow</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">running</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">over</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="n">seconds</span>
<span class="n">test</span><span class="w"> </span><span class="n">stack_overflow</span><span class="p">::</span><span class="n">craneliftpulley_big_stack_works_ok</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">winch_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">module</span><span class="p">::</span><span class="n">craneliftpulley_concurrent_type_registry_modifications</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory_creator</span><span class="p">::</span><span class="n">not_for_windows</span><span class="p">::</span><span class="n">host_memory_grow</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">gc</span><span class="p">::</span><span class="n">drc_traces_the_correct_number_of_gc_refs_in_arrays</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">stack_overflow</span><span class="p">::</span><span class="n">craneliftnative_big_stack_works_ok</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">relocs</span><span class="p">::</span><span class="n">mixed_forced</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">relocs</span><span class="p">::</span><span class="n">mixed</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftpulley_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_tiny_static_heap</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">linker</span><span class="p">::</span><span class="n">module_interposition</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
<span class="n">test</span><span class="w"> </span><span class="n">memory</span><span class="p">::</span><span class="n">craneliftnative_offsets_static_dynamic_oh_my</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="n">ok</span>
</code></pre></div>
<p>The test binary was using 200% cpu when the warnings about slow execution were printed and dropped to 0% when the couple test passes happened with a wasmtime instance also using 0%. This wasmtime instance is <code>wasmtime serve --addr=127.0.0.1:0 /path/to/wasmtime/target/debug/build/test-programs-artifacts-51f05083d9eb061b/out/wasm32-wasip1/debug/cli_serve_trap_before_set.component.wasm -Scli --shutdown-addr=127.0.0.1:0</code>.</p>
<p>This is on current main (9362e47987363c350a8d9d09aa56677425496fb7) on Linux and consistently reproduces for me.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>