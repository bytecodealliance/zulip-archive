<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11387 Output difference between interpr... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html">wasmtime / issue #11387 Output difference between interpr...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="533170750"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533170750" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533170750">(Aug 06 2025 at 19:54)</a>:</h4>
<p>teyahb8 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><strong>Wasm file:</strong> <a href="https://github.com/user-attachments/files/21633533/wasm-58-test.txt">wasm-58-test.txt</a><br>
<strong>Wat file:</strong> <a href="https://github.com/user-attachments/files/21633574/wat-58-test.txt">wat-58-test.txt</a></p>
<h3>Steps to Reproduce</h3>
<ol>
<li>Rename <code>wasm-58-test.txt</code> to <code>test.wasm</code></li>
<li>For wasmtime interpreter, run: <code>wasmtime -W all-proposals=y --invoke _start test.wasm</code></li>
<li>For wasmtime compiled, run: <code>wasmtime compile -W all-proposals=y test.wasm -o test.cwasm</code><br>
     run: <code>wasmtime -W all-proposals=y --allow-precompiled --invoke _start test.cwasm</code></li>
</ol>
<h3>Expected Results</h3>
<p>Based on execution from other runtimes like the wasm-micro-runtime and also wasmtime's interpreter mode, the expected output might be <code>stack overflow</code>.</p>
<h3>Actual Results</h3>
<p>Compiled mode outputs:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="mi">58</span><span class="o">-</span><span class="n">path_exists</span><span class="p">.</span><span class="n">cwasm</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">invoke</span><span class="w"> </span><span class="err">`</span><span class="n">_start</span><span class="err">`</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">           </span><span class="mi">0</span><span class="p">:</span><span class="w">   </span><span class="mh">0xc373</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">240</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">1</span><span class="p">:</span><span class="w">   </span><span class="mh">0x7bfc</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">168</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="mh">0x131c2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">305</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">3</span><span class="p">:</span><span class="w">   </span><span class="mh">0xb1d4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">222</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">4</span><span class="p">:</span><span class="w">   </span><span class="mh">0xbd9e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">233</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">5</span><span class="p">:</span><span class="w">   </span><span class="mh">0xb119</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">221</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">6</span><span class="p">:</span><span class="w">   </span><span class="mh">0xb07d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">220</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">7</span><span class="p">:</span><span class="w">   </span><span class="mh">0xba81</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">228</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">8</span><span class="p">:</span><span class="w">  </span><span class="mh">0x126b7</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">297</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">9</span><span class="p">:</span><span class="w">  </span><span class="mh">0x14cb5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">330</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">10</span><span class="p">:</span><span class="w">   </span><span class="mh">0x876b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">184</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">11</span><span class="p">:</span><span class="w">   </span><span class="mh">0xa4ba</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">207</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">12</span><span class="p">:</span><span class="w">   </span><span class="mh">0xa9d9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">209</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">13</span><span class="p">:</span><span class="w">   </span><span class="mh">0x21a7</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">61</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">14</span><span class="p">:</span><span class="w">    </span><span class="mh">0xe88</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">34</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">15</span><span class="p">:</span><span class="w">   </span><span class="mh">0x1256</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">48</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">16</span><span class="p">:</span><span class="w">    </span><span class="mh">0xcf4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">29</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">17</span><span class="p">:</span><span class="w">    </span><span class="mh">0xe48</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">33</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">18</span><span class="p">:</span><span class="w">    </span><span class="mh">0xe1d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">32</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">19</span><span class="p">:</span><span class="w">   </span><span class="mh">0x9430</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">196</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">20</span><span class="p">:</span><span class="w">    </span><span class="mh">0xc93</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">28</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">21</span><span class="p">:</span><span class="w">   </span><span class="mh">0x23d9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">62</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">22</span><span class="p">:</span><span class="w">    </span><span class="mh">0x5d1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">17</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">Pointer</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">bounds</span><span class="p">:</span><span class="w"> </span><span class="nc">Region</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967058</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 37.0.0 (3cbeb24bc 2025-08-06)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm which output should be the correct output and which mode might be incorrect? Thanks in advance?<br>
</p>
</blockquote>



<a name="533170751"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533170751" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533170751">(Aug 06 2025 at 19:54)</a>:</h4>
<p><a href="https://github.com/teyahb8">teyahb8</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">Issue #11387</a>.</p>



<a name="533178374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533178374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533178374">(Aug 06 2025 at 20:58)</a>:</h4>
<p>pchickey closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><strong>Wasm file:</strong> <a href="https://github.com/user-attachments/files/21633533/wasm-58-test.txt">wasm-58-test.txt</a><br>
<strong>Wat file:</strong> <a href="https://github.com/user-attachments/files/21633574/wat-58-test.txt">wat-58-test.txt</a></p>
<h3>Steps to Reproduce</h3>
<ol>
<li>Rename <code>wasm-58-test.txt</code> to <code>test.wasm</code></li>
<li>For wasmtime interpreter, run: <code>wasmtime -W all-proposals=y --invoke _start test.wasm</code></li>
<li>For wasmtime compiled, run: <code>wasmtime compile -W all-proposals=y test.wasm -o test.cwasm</code><br>
     run: <code>wasmtime -W all-proposals=y --allow-precompiled --invoke _start test.cwasm</code></li>
</ol>
<h3>Expected Results</h3>
<p>Based on execution from other runtimes like the wasm-micro-runtime and also wasmtime's interpreter mode, the expected output might be <code>stack overflow</code>.</p>
<h3>Actual Results</h3>
<p>Compiled mode outputs:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="mi">58</span><span class="o">-</span><span class="n">path_exists</span><span class="p">.</span><span class="n">cwasm</span><span class="err">`</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">invoke</span><span class="w"> </span><span class="err">`</span><span class="n">_start</span><span class="err">`</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">           </span><span class="mi">0</span><span class="p">:</span><span class="w">   </span><span class="mh">0xc373</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">240</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">1</span><span class="p">:</span><span class="w">   </span><span class="mh">0x7bfc</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">168</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="mh">0x131c2</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">305</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">3</span><span class="p">:</span><span class="w">   </span><span class="mh">0xb1d4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">222</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">4</span><span class="p">:</span><span class="w">   </span><span class="mh">0xbd9e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">233</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">5</span><span class="p">:</span><span class="w">   </span><span class="mh">0xb119</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">221</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">6</span><span class="p">:</span><span class="w">   </span><span class="mh">0xb07d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">220</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">7</span><span class="p">:</span><span class="w">   </span><span class="mh">0xba81</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">228</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">8</span><span class="p">:</span><span class="w">  </span><span class="mh">0x126b7</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">297</span><span class="o">&gt;</span>
<span class="w">           </span><span class="mi">9</span><span class="p">:</span><span class="w">  </span><span class="mh">0x14cb5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">330</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">10</span><span class="p">:</span><span class="w">   </span><span class="mh">0x876b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">184</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">11</span><span class="p">:</span><span class="w">   </span><span class="mh">0xa4ba</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">207</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">12</span><span class="p">:</span><span class="w">   </span><span class="mh">0xa9d9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">209</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">13</span><span class="p">:</span><span class="w">   </span><span class="mh">0x21a7</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">61</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">14</span><span class="p">:</span><span class="w">    </span><span class="mh">0xe88</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">34</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">15</span><span class="p">:</span><span class="w">   </span><span class="mh">0x1256</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">48</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">16</span><span class="p">:</span><span class="w">    </span><span class="mh">0xcf4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">29</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">17</span><span class="p">:</span><span class="w">    </span><span class="mh">0xe48</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">33</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">18</span><span class="p">:</span><span class="w">    </span><span class="mh">0xe1d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">32</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">19</span><span class="p">:</span><span class="w">   </span><span class="mh">0x9430</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">196</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">20</span><span class="p">:</span><span class="w">    </span><span class="mh">0xc93</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">28</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">21</span><span class="p">:</span><span class="w">   </span><span class="mh">0x23d9</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">62</span><span class="o">&gt;</span>
<span class="w">          </span><span class="mi">22</span><span class="p">:</span><span class="w">    </span><span class="mh">0x5d1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="n">unknown</span><span class="o">&gt;!&lt;</span><span class="n">wasm</span><span class="w"> </span><span class="n">function</span><span class="w"> </span><span class="mi">17</span><span class="o">&gt;</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">Pointer</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">bounds</span><span class="p">:</span><span class="w"> </span><span class="nc">Region</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">start</span><span class="p">:</span><span class="w"> </span><span class="mi">4294967058</span><span class="p">,</span><span class="w"> </span><span class="n">len</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 37.0.0 (3cbeb24bc 2025-08-06)</p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm which output should be the correct output and which mode might be incorrect? Thanks in advance?<br>
</p>
</blockquote>



<a name="533178375"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533178375" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533178375">(Aug 06 2025 at 20:58)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161589112">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>It looks like instead of getting an overflow on the wasm control stack, as you do in wasmtimes winch backend or in wamr, you are instead getting an underflow on LLVM's shadow stack. This is down to implementation details of the wasm control stack size between implementations. The spec<a href="https://www.w3.org/TR/wasm-core-2/#execution%E2%91%A3"> describes that the number of frames on the stack may be restricted</a>, and the exact restriction is allowed to vary by implementation.</p>
</blockquote>



<a name="533178583"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533178583" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533178583">(Aug 06 2025 at 21:00)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161589112">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>It looks like instead of getting an overflow on the wasm control stack, as you do in wasmtimes winch backend or in wamr, you are instead getting an underflow on LLVM's shadow stack. This is down to implementation details of the wasm control stack size between implementations. The spec<a href="https://www.w3.org/TR/wasm-core-2/#execution%E2%91%A3"> describes that the number of frames on the stack may be restricted</a>, and the exact restriction is allowed to vary by implementation.</p>
<p>Please inspect your bug reports for these sort of allowable spec differences in the future.</p>
</blockquote>



<a name="533180451"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533180451" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533180451">(Aug 06 2025 at 21:14)</a>:</h4>
<p>teyahb8 <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161641721">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>Thanks for the explanation, @pchickey. So, is there a way to definitely say which is the correct output between <code>stack overflow</code> and <code>pointer out of bounds</code>?</p>
</blockquote>



<a name="533184976"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533184976" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533184976">(Aug 06 2025 at 21:59)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161762290">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>Either output is correct for this program.</p>
</blockquote>



<a name="533185553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533185553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533185553">(Aug 06 2025 at 22:05)</a>:</h4>
<p>teyahb8 <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161774855">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>That makes sense. Thanks for the clarification. But, I still think that it might be better for any single runtime to be consistent across multiple modes within itself. In this case, getting the same output for both the interpreter and the compiled modes of Wasmtime might be desirable.</p>
</blockquote>



<a name="533193868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533193868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533193868">(Aug 06 2025 at 23:49)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161939456">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>It could be desirable in the absence of any other tradeoffs, but the tradeoff there is, to a first approximation, that cranelift is allowed to generate the best native stack frames it can manage instead of having to pad them out to whatever stack frame size the winch implementation happens to be. This would needlessly degrade performance for anyone using cranelift on programs that dont reach the stack limit, which in practice is 100% of the programs we care about executing. In practice this behavior has never bothered anyone writing real programs because they don't reach the default max stack size that wasmtime settled on. And, if hypothetically tomorrow llvm was to start spitting out wasm that blew past wasmtime's default limit, wasmtime embedders would make a single-line commit to increase <a href="https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.max_wasm_stack">https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.max_wasm_stack</a> and care about other problems instead.</p>
<p>Put another way, I dont really think this particular behavior matters to anyone besides someone fuzzing around to find differences between runtimes in badly-behaved wasm programs.</p>
</blockquote>



<a name="533193878"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533193878" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533193878">(Aug 06 2025 at 23:49)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161939456">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>It could be desirable in the absence of any other tradeoffs, but the tradeoff there is, to a first approximation, that cranelift is allowed to generate the best native stack frames it can manage instead of having to pad them out to whatever stack frame size the winch implementation happens to be. This would needlessly degrade performance for anyone using cranelift on programs that dont reach the stack limit, which in practice is 100% of the programs we care about executing. In practice this behavior has never bothered anyone writing real programs because they don't reach the default max stack size that wasmtime settled on. And, if hypothetically tomorrow llvm was to start spitting out wasm that blew past wasmtime's default limit, wasmtime embedders would make a single-line commit to increase <a href="https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.max_wasm_stack">https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.max_wasm_stack</a> and move on to caring about other problems instead.</p>
<p>Put another way, I dont really think this particular behavior matters to anyone besides someone fuzzing around to find differences between runtimes in badly-behaved wasm programs.</p>
</blockquote>



<a name="533195145"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533195145" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533195145">(Aug 07 2025 at 00:06)</a>:</h4>
<p>pchickey edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3161939456">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>It could be desirable in the absence of any other tradeoffs, but the tradeoff there is, to a first approximation, that cranelift is allowed to generate the best native stack frames it can manage instead of having to pad them out to whatever stack frame size the winch implementation happens to be. This would needlessly degrade performance for anyone using cranelift on programs that dont reach the stack limit, which in practice is 100% of the programs we care about executing. In practice this behavior has never bothered anyone writing real programs because they don't reach the default max stack size that wasmtime settled on. And, if hypothetically tomorrow llvm was to start spitting out wasm for non-pathological programs that blew past wasmtime's default limit, wasmtime embedders would make a single-line commit to increase <a href="https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.max_wasm_stack">https://docs.wasmtime.dev/api/wasmtime/struct.Config.html#method.max_wasm_stack</a> and move on to caring about other problems instead.</p>
<p>Put another way, I dont really think this particular behavior matters to anyone besides someone fuzzing around to find differences between runtimes in badly-behaved wasm programs.</p>
</blockquote>



<a name="533202378"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311387%20Output%20difference%20between%20interpr.../near/533202378" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311387.20Output.20difference.20between.20interpr.2E.2E.2E.html#533202378">(Aug 07 2025 at 01:29)</a>:</h4>
<p>teyahb8 <a href="https://github.com/bytecodealliance/wasmtime/issues/11387#issuecomment-3162123891">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11387">issue #11387</a>:</p>
<blockquote>
<p>That is reasonable. Thanks for the feedback.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>