<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11958 Wasmtime (wasm32-wasip1-threads) ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html">wasmtime / issue #11958 Wasmtime (wasm32-wasip1-threads) ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="548243711"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548243711" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548243711">(Oct 31 2025 at 20:47)</a>:</h4>
<p>sergey-shandar opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">issue #11958</a>:</p>
<blockquote>
<p>Wasmtime (wasm32-wasip1-threads)  crashes in release mode with Rust 1.91.</p>
<p>Steps to reporoduce:</p>
<ol>
<li>
<p>Create a Rust library project with one empty test:<br>
<code>rust
   #[cfg(test)]
   mod tests {
       #[test]
       fn it_works() {
       }
   }
   </code></p>
</li>
<li>
<p>Add <code>.cargo/config.toml</code>:<br>
<code>toml
   [target.wasm32-wasip1-threads]
   runner = "wasmtime run --wasi threads --dir . --"   
   </code> </p>
</li>
<li>
<p>Run <code>cargo test --target wasm32-wasip1-threads --release</code></p>
</li>
<li>Observe the message <code>memory allocation of 7200 bytes failed</code>.</li>
</ol>
<h2>Full Log</h2>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="p">)</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">release</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.15</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">unittests</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="p">)</span>
<span class="n">memory</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7200</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">failed</span>
<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">invoke</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">default</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">           </span><span class="mi">0</span><span class="p">:</span><span class="w">  </span><span class="mh">0x4bc4e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">abort</span>
<span class="w">           </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="mh">0x41212</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasip1</span><span class="p">::</span><span class="n">helpers</span><span class="p">::</span><span class="n">abort_internal</span><span class="p">::</span><span class="n">ha95e4b7b37825e00</span>
<span class="w">           </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c170</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">process</span><span class="p">::</span><span class="n">abort</span><span class="p">::</span><span class="n">h91607da9bb82ec87</span>
<span class="w">           </span><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c3cd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">rust_oom</span><span class="p">::</span><span class="n">h21bdef45e0e6a1a0</span>
<span class="w">           </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c39d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__rustc</span><span class="p">[</span><span class="n">de0091b922c53d7e</span><span class="p">]::</span><span class="n">__rg_oom</span>
<span class="w">           </span><span class="mi">5</span><span class="p">:</span><span class="w">    </span><span class="mh">0xb4e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__rustc</span><span class="p">[</span><span class="n">de0091b922c53d7e</span><span class="p">]::</span><span class="n">__rust_alloc_error_handler</span>
<span class="w">           </span><span class="mi">6</span><span class="p">:</span><span class="w">  </span><span class="mh">0x4e34f</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">alloc</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">handle_alloc_error</span><span class="p">::</span><span class="n">h16f2cb08a8c8d330</span>
<span class="w">           </span><span class="mi">7</span><span class="p">:</span><span class="w">  </span><span class="mh">0x1562d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sync</span><span class="p">::</span><span class="n">mpmc</span><span class="p">::</span><span class="n">Sender</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">send</span><span class="p">::</span><span class="n">h16e0c33b47bbbcf8</span>
<span class="w">           </span><span class="mi">8</span><span class="p">:</span><span class="w">  </span><span class="mh">0x33142</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">run_test</span><span class="p">::</span><span class="n">h6c9fb36fafc2b781</span>
<span class="w">           </span><span class="mi">9</span><span class="p">:</span><span class="w">  </span><span class="mh">0x2edbb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">console</span><span class="p">::</span><span class="n">run_tests_console</span><span class="p">::</span><span class="n">hddcf495e81547068</span>
<span class="w">          </span><span class="mi">10</span><span class="p">:</span><span class="w">  </span><span class="mh">0x21677</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">test_main</span><span class="p">::</span><span class="n">h7a58e57b45f99f97</span>
<span class="w">          </span><span class="mi">11</span><span class="p">:</span><span class="w">  </span><span class="mh">0x213ca</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">test_main_static</span><span class="p">::</span><span class="n">h416bc0fbae963dba</span>
<span class="w">          </span><span class="mi">12</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa7e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">wasmtime_crash</span><span class="p">::</span><span class="n">main</span><span class="p">::</span><span class="n">h18852beb334594f8</span>
<span class="w">          </span><span class="mi">13</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa99</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">__rust_begin_short_backtrace</span><span class="p">::</span><span class="n">hb37c57d27f11e5ce</span>
<span class="w">          </span><span class="mi">14</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa8c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">rt</span><span class="p">::</span><span class="n">lang_start</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h5d5c6601c10fe938</span>
<span class="w">          </span><span class="mi">15</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3f909</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">rt</span><span class="p">::</span><span class="n">lang_start_internal</span><span class="p">::</span><span class="n">hb64ce140b809498d</span>
<span class="w">          </span><span class="mi">16</span><span class="p">:</span><span class="w">    </span><span class="mh">0xaf4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__main_void</span>
<span class="w">          </span><span class="mi">17</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa54</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">_start</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">wasm</span><span class="w"> </span><span class="n">trap</span><span class="p">:</span><span class="w"> </span><span class="nc">wasm</span><span class="w"> </span><span class="err">`</span><span class="n">unreachable</span><span class="err">`</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">executed</span>
<span class="n">running</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">test</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rerun</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="err">`</span><span class="o">--</span><span class="n">lib</span><span class="err">`</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">wasi</span><span class="w"> </span><span class="n">threads</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="mi">134</span><span class="p">)</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">abnormally</span><span class="p">;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">capture</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">harness</span><span class="p">.</span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span><span class="p">::</span><span class="n">it_works</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="548243712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548243712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548243712">(Oct 31 2025 at 20:47)</a>:</h4>
<p><a href="https://github.com/sergey-shandar">sergey-shandar</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">Issue #11958</a>.</p>



<a name="548243787"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548243787" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548243787">(Oct 31 2025 at 20:48)</a>:</h4>
<p>sergey-shandar edited <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">issue #11958</a>:</p>
<blockquote>
<p>Wasmtime (wasm32-wasip1-threads)  crashes in release mode with Rust 1.91.</p>
<p>Steps to reporoduce:</p>
<ol>
<li>
<p>Create a Rust library project with one empty test:<br>
<code>rust
   #[cfg(test)]
   mod tests {
       #[test]
       fn it_works() {
       }
   }
   </code></p>
</li>
<li>
<p>Add <code>.cargo/config.toml</code>:<br>
<code>toml
   [target.wasm32-wasip1-threads]
   runner = "wasmtime run --wasi threads --dir . --"   
   </code> </p>
</li>
<li>
<p>Run <code>cargo test --target wasm32-wasip1-threads --release</code></p>
</li>
<li>Observe the message <code>memory allocation of 7200 bytes failed</code>.</li>
</ol>
<h2>Full Log</h2>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="p">)</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">release</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.15</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">unittests</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="p">)</span>
<span class="n">memory</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7200</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">failed</span>
<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">invoke</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">default</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">           </span><span class="mi">0</span><span class="p">:</span><span class="w">  </span><span class="mh">0x4bc4e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">abort</span>
<span class="w">           </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="mh">0x41212</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasip1</span><span class="p">::</span><span class="n">helpers</span><span class="p">::</span><span class="n">abort_internal</span><span class="p">::</span><span class="n">ha95e4b7b37825e00</span>
<span class="w">           </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c170</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">process</span><span class="p">::</span><span class="n">abort</span><span class="p">::</span><span class="n">h91607da9bb82ec87</span>
<span class="w">           </span><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c3cd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">rust_oom</span><span class="p">::</span><span class="n">h21bdef45e0e6a1a0</span>
<span class="w">           </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c39d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__rustc</span><span class="p">[</span><span class="n">de0091b922c53d7e</span><span class="p">]::</span><span class="n">__rg_oom</span>
<span class="w">           </span><span class="mi">5</span><span class="p">:</span><span class="w">    </span><span class="mh">0xb4e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__rustc</span><span class="p">[</span><span class="n">de0091b922c53d7e</span><span class="p">]::</span><span class="n">__rust_alloc_error_handler</span>
<span class="w">           </span><span class="mi">6</span><span class="p">:</span><span class="w">  </span><span class="mh">0x4e34f</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">alloc</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">handle_alloc_error</span><span class="p">::</span><span class="n">h16f2cb08a8c8d330</span>
<span class="w">           </span><span class="mi">7</span><span class="p">:</span><span class="w">  </span><span class="mh">0x1562d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sync</span><span class="p">::</span><span class="n">mpmc</span><span class="p">::</span><span class="n">Sender</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">send</span><span class="p">::</span><span class="n">h16e0c33b47bbbcf8</span>
<span class="w">           </span><span class="mi">8</span><span class="p">:</span><span class="w">  </span><span class="mh">0x33142</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">run_test</span><span class="p">::</span><span class="n">h6c9fb36fafc2b781</span>
<span class="w">           </span><span class="mi">9</span><span class="p">:</span><span class="w">  </span><span class="mh">0x2edbb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">console</span><span class="p">::</span><span class="n">run_tests_console</span><span class="p">::</span><span class="n">hddcf495e81547068</span>
<span class="w">          </span><span class="mi">10</span><span class="p">:</span><span class="w">  </span><span class="mh">0x21677</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">test_main</span><span class="p">::</span><span class="n">h7a58e57b45f99f97</span>
<span class="w">          </span><span class="mi">11</span><span class="p">:</span><span class="w">  </span><span class="mh">0x213ca</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">test_main_static</span><span class="p">::</span><span class="n">h416bc0fbae963dba</span>
<span class="w">          </span><span class="mi">12</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa7e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">wasmtime_crash</span><span class="p">::</span><span class="n">main</span><span class="p">::</span><span class="n">h18852beb334594f8</span>
<span class="w">          </span><span class="mi">13</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa99</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">__rust_begin_short_backtrace</span><span class="p">::</span><span class="n">hb37c57d27f11e5ce</span>
<span class="w">          </span><span class="mi">14</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa8c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">rt</span><span class="p">::</span><span class="n">lang_start</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h5d5c6601c10fe938</span>
<span class="w">          </span><span class="mi">15</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3f909</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">rt</span><span class="p">::</span><span class="n">lang_start_internal</span><span class="p">::</span><span class="n">hb64ce140b809498d</span>
<span class="w">          </span><span class="mi">16</span><span class="p">:</span><span class="w">    </span><span class="mh">0xaf4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__main_void</span>
<span class="w">          </span><span class="mi">17</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa54</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">_start</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">wasm</span><span class="w"> </span><span class="n">trap</span><span class="p">:</span><span class="w"> </span><span class="nc">wasm</span><span class="w"> </span><span class="err">`</span><span class="n">unreachable</span><span class="err">`</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">executed</span>
<span class="n">running</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">test</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rerun</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="err">`</span><span class="o">--</span><span class="n">lib</span><span class="err">`</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">wasi</span><span class="w"> </span><span class="n">threads</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="mi">134</span><span class="p">)</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">abnormally</span><span class="p">;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">capture</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">harness</span><span class="p">.</span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span><span class="p">::</span><span class="n">it_works</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<p>Example: <a href="https://github.com/sergey-shandar/wasmtime-crash/actions/runs/18984799268/job/54225881045">https://github.com/sergey-shandar/wasmtime-crash/actions/runs/18984799268/job/54225881045</a></p>
</blockquote>



<a name="548248903"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548248903" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548248903">(Oct 31 2025 at 21:37)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/11958#issuecomment-3474972115">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">issue #11958</a>:</p>
<blockquote>
<p>This doesn't look like wasmtime crashing, rather it is the wasm module itself that fails to allocate memory.</p>
</blockquote>



<a name="548277507"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548277507" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548277507">(Nov 01 2025 at 05:32)</a>:</h4>
<p>sergey-shandar <a href="https://github.com/bytecodealliance/wasmtime/issues/11958#issuecomment-3475804380">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">issue #11958</a>:</p>
<blockquote>
<blockquote>
<p>This doesn't look like wasmtime crashing, rather it is the wasm module itself that fails to allocate memory.</p>
</blockquote>
<p>You may be right because <code>wasmer</code> also fails and I've found this issue: <a href="https://github.com/rust-lang/rust/issues/146843">https://github.com/rust-lang/rust/issues/146843</a></p>
</blockquote>



<a name="548288358"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548288358" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548288358">(Nov 01 2025 at 08:45)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">issue #11958</a>:</p>
<blockquote>
<p>Wasmtime (wasm32-wasip1-threads)  crashes in release mode with Rust 1.91.</p>
<p>Steps to reporoduce:</p>
<ol>
<li>
<p>Create a Rust library project with one empty test:<br>
<code>rust
   #[cfg(test)]
   mod tests {
       #[test]
       fn it_works() {
       }
   }
   </code></p>
</li>
<li>
<p>Add <code>.cargo/config.toml</code>:<br>
<code>toml
   [target.wasm32-wasip1-threads]
   runner = "wasmtime run --wasi threads --dir . --"   
   </code> </p>
</li>
<li>
<p>Run <code>cargo test --target wasm32-wasip1-threads --release</code></p>
</li>
<li>Observe the message <code>memory allocation of 7200 bytes failed</code>.</li>
</ol>
<h2>Full Log</h2>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">   </span><span class="n">Compiling</span><span class="w"> </span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="w"> </span><span class="n">v0</span><span class="p">.</span><span class="mf">1.0</span><span class="w"> </span><span class="p">(</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="p">)</span>
<span class="w">    </span><span class="n">Finished</span><span class="w"> </span><span class="err">`</span><span class="n">release</span><span class="err">`</span><span class="w"> </span><span class="n">profile</span><span class="w"> </span><span class="p">[</span><span class="n">optimized</span><span class="p">]</span><span class="w"> </span><span class="n">target</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mf">0.15</span><span class="n">s</span>
<span class="w">     </span><span class="n">Running</span><span class="w"> </span><span class="n">unittests</span><span class="w"> </span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="p">)</span>
<span class="n">memory</span><span class="w"> </span><span class="n">allocation</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="mi">7200</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">failed</span>
<span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="n">main</span><span class="w"> </span><span class="n">module</span><span class="w"> </span><span class="err">`</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">    </span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="nc">failed</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">invoke</span><span class="w"> </span><span class="n">command</span><span class="w"> </span><span class="n">default</span>
<span class="w">    </span><span class="mi">1</span><span class="p">:</span><span class="w"> </span><span class="nc">error</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">executing</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">wasm</span><span class="w"> </span><span class="n">backtrace</span><span class="p">:</span>
<span class="w">           </span><span class="mi">0</span><span class="p">:</span><span class="w">  </span><span class="mh">0x4bc4e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">abort</span>
<span class="w">           </span><span class="mi">1</span><span class="p">:</span><span class="w">  </span><span class="mh">0x41212</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">pal</span><span class="p">::</span><span class="n">wasip1</span><span class="p">::</span><span class="n">helpers</span><span class="p">::</span><span class="n">abort_internal</span><span class="p">::</span><span class="n">ha95e4b7b37825e00</span>
<span class="w">           </span><span class="mi">2</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c170</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">process</span><span class="p">::</span><span class="n">abort</span><span class="p">::</span><span class="n">h91607da9bb82ec87</span>
<span class="w">           </span><span class="mi">3</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c3cd</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">rust_oom</span><span class="p">::</span><span class="n">h21bdef45e0e6a1a0</span>
<span class="w">           </span><span class="mi">4</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3c39d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__rustc</span><span class="p">[</span><span class="n">de0091b922c53d7e</span><span class="p">]::</span><span class="n">__rg_oom</span>
<span class="w">           </span><span class="mi">5</span><span class="p">:</span><span class="w">    </span><span class="mh">0xb4e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__rustc</span><span class="p">[</span><span class="n">de0091b922c53d7e</span><span class="p">]::</span><span class="n">__rust_alloc_error_handler</span>
<span class="w">           </span><span class="mi">6</span><span class="p">:</span><span class="w">  </span><span class="mh">0x4e34f</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">alloc</span><span class="p">::</span><span class="n">alloc</span><span class="p">::</span><span class="n">handle_alloc_error</span><span class="p">::</span><span class="n">h16f2cb08a8c8d330</span>
<span class="w">           </span><span class="mi">7</span><span class="p">:</span><span class="w">  </span><span class="mh">0x1562d</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sync</span><span class="p">::</span><span class="n">mpmc</span><span class="p">::</span><span class="n">Sender</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">::</span><span class="n">send</span><span class="p">::</span><span class="n">h16e0c33b47bbbcf8</span>
<span class="w">           </span><span class="mi">8</span><span class="p">:</span><span class="w">  </span><span class="mh">0x33142</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">run_test</span><span class="p">::</span><span class="n">h6c9fb36fafc2b781</span>
<span class="w">           </span><span class="mi">9</span><span class="p">:</span><span class="w">  </span><span class="mh">0x2edbb</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">console</span><span class="p">::</span><span class="n">run_tests_console</span><span class="p">::</span><span class="n">hddcf495e81547068</span>
<span class="w">          </span><span class="mi">10</span><span class="p">:</span><span class="w">  </span><span class="mh">0x21677</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">test_main</span><span class="p">::</span><span class="n">h7a58e57b45f99f97</span>
<span class="w">          </span><span class="mi">11</span><span class="p">:</span><span class="w">  </span><span class="mh">0x213ca</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">test</span><span class="p">::</span><span class="n">test_main_static</span><span class="p">::</span><span class="n">h416bc0fbae963dba</span>
<span class="w">          </span><span class="mi">12</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa7e</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">wasmtime_crash</span><span class="p">::</span><span class="n">main</span><span class="p">::</span><span class="n">h18852beb334594f8</span>
<span class="w">          </span><span class="mi">13</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa99</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">sys</span><span class="p">::</span><span class="n">backtrace</span><span class="p">::</span><span class="n">__rust_begin_short_backtrace</span><span class="p">::</span><span class="n">hb37c57d27f11e5ce</span>
<span class="w">          </span><span class="mi">14</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa8c</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">rt</span><span class="p">::</span><span class="n">lang_start</span><span class="p">::{{</span><span class="n">closure</span><span class="p">}}::</span><span class="n">h5d5c6601c10fe938</span>
<span class="w">          </span><span class="mi">15</span><span class="p">:</span><span class="w">  </span><span class="mh">0x3f909</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">std</span><span class="p">::</span><span class="n">rt</span><span class="p">::</span><span class="n">lang_start_internal</span><span class="p">::</span><span class="n">hb64ce140b809498d</span>
<span class="w">          </span><span class="mi">16</span><span class="p">:</span><span class="w">    </span><span class="mh">0xaf4</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">__main_void</span>
<span class="w">          </span><span class="mi">17</span><span class="p">:</span><span class="w">    </span><span class="mh">0xa54</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="o">!</span><span class="n">_start</span>
<span class="w">    </span><span class="mi">2</span><span class="p">:</span><span class="w"> </span><span class="nc">wasm</span><span class="w"> </span><span class="n">trap</span><span class="p">:</span><span class="w"> </span><span class="nc">wasm</span><span class="w"> </span><span class="err">`</span><span class="n">unreachable</span><span class="err">`</span><span class="w"> </span><span class="n">instruction</span><span class="w"> </span><span class="n">executed</span>
<span class="n">running</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="n">test</span>
<span class="n">error</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">failed</span><span class="p">,</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rerun</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="err">`</span><span class="o">--</span><span class="n">lib</span><span class="err">`</span>
<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">wasmtime</span><span class="w"> </span><span class="n">run</span><span class="w"> </span><span class="o">--</span><span class="n">wasi</span><span class="w"> </span><span class="n">threads</span><span class="w"> </span><span class="o">--</span><span class="n">dir</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">runner</span><span class="o">/</span><span class="n">work</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">wasmtime</span><span class="o">-</span><span class="n">crash</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">wasm32</span><span class="o">-</span><span class="n">wasip1</span><span class="o">-</span><span class="n">threads</span><span class="o">/</span><span class="n">release</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">wasmtime_crash</span><span class="o">-</span><span class="mi">2</span><span class="n">dc7c8acc224c302</span><span class="p">.</span><span class="n">wasm</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">exit</span><span class="w"> </span><span class="n">status</span><span class="p">:</span><span class="w"> </span><span class="mi">134</span><span class="p">)</span>
<span class="n">note</span><span class="p">:</span><span class="w"> </span><span class="nc">test</span><span class="w"> </span><span class="n">exited</span><span class="w"> </span><span class="n">abnormally</span><span class="p">;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">see</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">full</span><span class="w"> </span><span class="n">output</span><span class="w"> </span><span class="n">pass</span><span class="w"> </span><span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">capture</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">harness</span><span class="p">.</span>
<span class="n">test</span><span class="w"> </span><span class="n">tests</span><span class="p">::</span><span class="n">it_works</span><span class="w"> </span><span class="o">..</span><span class="p">.</span>
</code></pre></div>
<p>Example: <a href="https://github.com/sergey-shandar/wasmtime-crash/actions/runs/18984799268/job/54225881045">https://github.com/sergey-shandar/wasmtime-crash/actions/runs/18984799268/job/54225881045</a></p>
</blockquote>



<a name="548288359"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311958%20Wasmtime%20%28wasm32-wasip1-threads%29%20.../near/548288359" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311958.20Wasmtime.20.28wasm32-wasip1-threads.29.20.2E.2E.2E.html#548288359">(Nov 01 2025 at 08:45)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11958#issuecomment-3475979821">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11958">issue #11958</a>:</p>
<blockquote>
<p>Agreed yes this is unlikely to be a Wasmtime issue, so I'm going to close this. Feel free to follow-up upstream however.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>