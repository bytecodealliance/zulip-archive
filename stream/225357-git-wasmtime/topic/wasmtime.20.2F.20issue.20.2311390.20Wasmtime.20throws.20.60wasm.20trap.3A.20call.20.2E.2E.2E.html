<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11390 Wasmtime throws `wasm trap: call ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311390.20Wasmtime.20throws.20.60wasm.20trap.3A.20call.20.2E.2E.2E.html">wasmtime / issue #11390 Wasmtime throws `wasm trap: call ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="533193144"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311390%20Wasmtime%20throws%20%60wasm%20trap%3A%20call%20.../near/533193144" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311390.20Wasmtime.20throws.20.60wasm.20trap.3A.20call.20.2E.2E.2E.html#533193144">(Aug 06 2025 at 23:40)</a>:</h4>
<p>Theaamadu opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11390">issue #11390</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/user-attachments/files/21642308/shrunken_shrunken_124-fd_fdstat_set_rights.txt">shrunken_shrunken_124-fd_fdstat_set_rights.txt</a></p>
<h3>Steps to Reproduce</h3>
<ol>
<li>Rename txt to wasm</li>
<li>For wasmtime interpreter, run: wasmtime -W all-proposals=y --invoke _start WASM_FILE</li>
<li>For wasmtime compiled, run: wasmtime compile -W all-proposals=y WASM_FILE -o test.cwasm</li>
<li>run: wasmtime -W all-proposals=y --allow-precompiled --invoke _start test.cwasm</li>
</ol>
<h3>Expected Results</h3>
<p>Based on execution from other runtimes like the <code>wasmer</code> and also <code>wasmedge</code>, the expected output might be <code>unreachable exception</code>.</p>
<h3>Actual Results</h3>
<p>Last 20 lines of the actual result:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="w">         </span><span class="m">32656</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32657</span>:<span class="w">    </span>0xf86<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">39</span>&gt;
<span class="w">         </span><span class="m">32658</span>:<span class="w">   </span>0x130f<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">42</span>&gt;
<span class="w">         </span><span class="m">32659</span>:<span class="w">    </span>0x6fb<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">24</span>&gt;
<span class="w">         </span><span class="m">32660</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32661</span>:<span class="w">    </span>0xf86<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">39</span>&gt;
<span class="w">         </span><span class="m">32662</span>:<span class="w">   </span>0x130f<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">42</span>&gt;
<span class="w">         </span><span class="m">32663</span>:<span class="w">    </span>0x6fb<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">24</span>&gt;
<span class="w">         </span><span class="m">32664</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32665</span>:<span class="w">    </span>0xf86<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">39</span>&gt;
<span class="w">         </span><span class="m">32666</span>:<span class="w">   </span>0x130f<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">42</span>&gt;
<span class="w">         </span><span class="m">32667</span>:<span class="w">    </span>0x6fb<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">24</span>&gt;
<span class="w">         </span><span class="m">32668</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32669</span>:<span class="w">   </span>0x1303<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">41</span>&gt;
<span class="w">         </span><span class="m">32670</span>:<span class="w">    </span>0xf25<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">36</span>&gt;
<span class="w">         </span><span class="m">32671</span>:<span class="w">    </span>0x371<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">18</span>&gt;
<span class="w">         </span><span class="m">32672</span>:<span class="w">    </span>0x129<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">3</span>&gt;
<span class="w">         </span><span class="m">32673</span>:<span class="w">    </span>0x174<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">8</span>&gt;
<span class="w">         </span><span class="m">32674</span>:<span class="w">     </span>0xfd<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">2</span>&gt;
<span class="w">    </span><span class="m">2</span>:<span class="w"> </span>wasm<span class="w"> </span>trap:<span class="w"> </span>call<span class="w"> </span>stack<span class="w"> </span>exhausted
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 36.0.0 (bdb963d1f 2025-07-07) </p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm which output should be the correct output and which mode might be incorrect? Thanks in advance?</p>
</blockquote>



<a name="533193145"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311390%20Wasmtime%20throws%20%60wasm%20trap%3A%20call%20.../near/533193145" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311390.20Wasmtime.20throws.20.60wasm.20trap.3A.20call.20.2E.2E.2E.html#533193145">(Aug 06 2025 at 23:40)</a>:</h4>
<p><a href="https://github.com/Theaamadu">Theaamadu</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11390">Issue #11390</a>.</p>



<a name="533194840"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311390%20Wasmtime%20throws%20%60wasm%20trap%3A%20call%20.../near/533194840" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311390.20Wasmtime.20throws.20.60wasm.20trap.3A.20call.20.2E.2E.2E.html#533194840">(Aug 07 2025 at 00:03)</a>:</h4>
<p>pchickey closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11390">issue #11390</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p><a href="https://github.com/user-attachments/files/21642308/shrunken_shrunken_124-fd_fdstat_set_rights.txt">shrunken_shrunken_124-fd_fdstat_set_rights.txt</a></p>
<h3>Steps to Reproduce</h3>
<ol>
<li>Rename txt to wasm</li>
<li>For wasmtime interpreter, run: wasmtime -W all-proposals=y --invoke _start WASM_FILE</li>
<li>For wasmtime compiled, run: wasmtime compile -W all-proposals=y WASM_FILE -o test.cwasm</li>
<li>run: wasmtime -W all-proposals=y --allow-precompiled --invoke _start test.cwasm</li>
</ol>
<h3>Expected Results</h3>
<p>Based on execution from other runtimes like the <code>wasmer</code> and also <code>wasmedge</code>, the expected output might be <code>unreachable exception</code>.</p>
<h3>Actual Results</h3>
<p>Last 20 lines of the actual result:</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code><span class="w">         </span><span class="m">32656</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32657</span>:<span class="w">    </span>0xf86<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">39</span>&gt;
<span class="w">         </span><span class="m">32658</span>:<span class="w">   </span>0x130f<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">42</span>&gt;
<span class="w">         </span><span class="m">32659</span>:<span class="w">    </span>0x6fb<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">24</span>&gt;
<span class="w">         </span><span class="m">32660</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32661</span>:<span class="w">    </span>0xf86<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">39</span>&gt;
<span class="w">         </span><span class="m">32662</span>:<span class="w">   </span>0x130f<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">42</span>&gt;
<span class="w">         </span><span class="m">32663</span>:<span class="w">    </span>0x6fb<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">24</span>&gt;
<span class="w">         </span><span class="m">32664</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32665</span>:<span class="w">    </span>0xf86<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">39</span>&gt;
<span class="w">         </span><span class="m">32666</span>:<span class="w">   </span>0x130f<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">42</span>&gt;
<span class="w">         </span><span class="m">32667</span>:<span class="w">    </span>0x6fb<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">24</span>&gt;
<span class="w">         </span><span class="m">32668</span>:<span class="w">    </span>0xf65<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">37</span>&gt;
<span class="w">         </span><span class="m">32669</span>:<span class="w">   </span>0x1303<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">41</span>&gt;
<span class="w">         </span><span class="m">32670</span>:<span class="w">    </span>0xf25<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">36</span>&gt;
<span class="w">         </span><span class="m">32671</span>:<span class="w">    </span>0x371<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">18</span>&gt;
<span class="w">         </span><span class="m">32672</span>:<span class="w">    </span>0x129<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">3</span>&gt;
<span class="w">         </span><span class="m">32673</span>:<span class="w">    </span>0x174<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">8</span>&gt;
<span class="w">         </span><span class="m">32674</span>:<span class="w">     </span>0xfd<span class="w"> </span>-<span class="w"> </span>&lt;unknown&gt;!&lt;wasm<span class="w"> </span><span class="k">function</span><span class="w"> </span><span class="m">2</span>&gt;
<span class="w">    </span><span class="m">2</span>:<span class="w"> </span>wasm<span class="w"> </span>trap:<span class="w"> </span>call<span class="w"> </span>stack<span class="w"> </span>exhausted
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: wasmtime 36.0.0 (bdb963d1f 2025-07-07) </p>
<p>Operating system: Ubuntu 22.04</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Can you please confirm which output should be the correct output and which mode might be incorrect? Thanks in advance?</p>
</blockquote>



<a name="533194842"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311390%20Wasmtime%20throws%20%60wasm%20trap%3A%20call%20.../near/533194842" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311390.20Wasmtime.20throws.20.60wasm.20trap.3A.20call.20.2E.2E.2E.html#533194842">(Aug 07 2025 at 00:03)</a>:</h4>
<p>pchickey <a href="https://github.com/bytecodealliance/wasmtime/issues/11390#issuecomment-3161969365">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11390">issue #11390</a>:</p>
<blockquote>
<p>Dupe of #11387. Implementations are allowed to exhaust the wasm stack at different levels.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>