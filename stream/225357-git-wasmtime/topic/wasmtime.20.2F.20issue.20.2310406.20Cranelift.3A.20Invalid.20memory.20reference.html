<html>
<head><meta charset="utf-8"><title>wasmtime / issue #10406 Cranelift: Invalid memory reference · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html">wasmtime / issue #10406 Cranelift: Invalid memory reference</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="506063974"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506063974" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506063974">(Mar 17 2025 at 07:30)</a>:</h4>
<p><a href="https://github.com/Ludea">Ludea</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">Issue #10406</a>.</p>



<a name="506063975"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506063975" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506063975">(Mar 17 2025 at 07:30)</a>:</h4>
<p><a href="https://github.com/Ludea">Ludea</a> added the cranelift label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">Issue #10406</a>.</p>



<a name="506063978"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506063978" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506063978">(Mar 17 2025 at 07:30)</a>:</h4>
<p>Ludea opened <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Thanks for filing an issue! Please fill out the TODOs below.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">paste</span><span class="w"> </span><span class="p">.</span><span class="n">clif</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">here</span><span class="p">.</span><span class="w"> </span><span class="n">Ideally</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="n">via</span>
<span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">bugpoint</span><span class="err">`</span><span class="w"> </span><span class="n">command</span><span class="p">.</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<p>1- create a rust app<br>
2- run<code> cargo add wastime </code><br>
3- run <code>cargo build</code></p>
<h3>Expected Results</h3>
<p>Successfull build my app</p>
<p>What do you expect to happen?<br>
build wastime with default feature successuflly</p>
<h3>Actual Results</h3>
<p>unable to build cranelift-codegen</p>
<p>What actually happens? Panic? Segfault? Incorrect result?<br>
<code>(signal 11, SIGSEGV: invalid memory reference)</code></p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: <br>
wasmtime 0.30.2, with default feature</p>
<p>Operating system: <br>
Android</p>
<p>Architecture: <br>
aarch64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="506076874"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506076874" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506076874">(Mar 17 2025 at 08:31)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728576636">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>What system did you try building on? And which rustc version did you use?</p>
</blockquote>



<a name="506079290"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506079290" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506079290">(Mar 17 2025 at 08:41)</a>:</h4>
<p>Ludea <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728600123">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Rust version : 1.84.1<br>
I try to build on <a href="https://github.com/termux">mobile device</a><br>
</p>
</blockquote>



<a name="506084174"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506084174" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506084174">(Mar 17 2025 at 09:01)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728663009">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Is it rustc that segfaults or a build script?</p>
</blockquote>



<a name="506085817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506085817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506085817">(Mar 17 2025 at 09:07)</a>:</h4>
<p>Ludea <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728688312">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>it's from rustc</p>
</blockquote>



<a name="506085985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506085985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506085985">(Mar 17 2025 at 09:08)</a>:</h4>
<p>Ludea edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728688312">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>it's from rustc</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">could</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">compile</span><span class="w"> </span><span class="err">`</span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">lib</span><span class="p">)</span>

<span class="n">Caused</span><span class="w"> </span><span class="n">by</span><span class="p">:</span>
<span class="w">  </span><span class="nc">process</span><span class="w"> </span><span class="n">didn</span><span class="o">'</span><span class="na">t</span><span class="w"> </span><span class="n">exit</span><span class="w"> </span><span class="n">successfully</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="n">rustc</span><span class="w"> </span><span class="o">--</span><span class="k">crate</span><span class="o">-</span><span class="n">name</span><span class="w"> </span><span class="n">cranelift_codegen</span><span class="w"> </span><span class="o">--</span><span class="n">edition</span><span class="o">=</span><span class="mi">2021</span><span class="w"> </span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="p">.</span><span class="n">cargo</span><span class="o">/</span><span class="n">registry</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">index</span><span class="p">.</span><span class="n">crates</span><span class="p">.</span><span class="n">io</span><span class="o">-</span><span class="mi">6</span><span class="n">f17d22bba15001f</span><span class="o">/</span><span class="n">cranelift</span><span class="o">-</span><span class="n">codegen</span><span class="o">-</span><span class="mf">0.117.2</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">lib</span><span class="p">.</span><span class="n">rs</span><span class="w"> </span><span class="o">--</span><span class="n">error</span><span class="o">-</span><span class="n">format</span><span class="o">=</span><span class="n">json</span><span class="w"> </span><span class="o">--</span><span class="n">json</span><span class="o">=</span><span class="n">diagnostic</span><span class="o">-</span><span class="n">rendered</span><span class="o">-</span><span class="n">ansi</span><span class="p">,</span><span class="n">artifacts</span><span class="p">,</span><span class="n">future</span><span class="o">-</span><span class="n">incompat</span><span class="w"> </span><span class="o">--</span><span class="n">diagnostic</span><span class="o">-</span><span class="n">width</span><span class="o">=</span><span class="mi">42</span><span class="w"> </span><span class="o">--</span><span class="k">crate</span><span class="o">-</span><span class="k">type</span><span class="w"> </span><span class="nc">lib</span><span class="w"> </span><span class="o">--</span><span class="n">emit</span><span class="o">=</span><span class="n">dep</span><span class="o">-</span><span class="n">info</span><span class="p">,</span><span class="n">metadata</span><span class="p">,</span><span class="n">link</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="n">embed</span><span class="o">-</span><span class="n">bitcode</span><span class="o">=</span><span class="n">no</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="n">debuginfo</span><span class="o">=</span><span class="mi">2</span><span class="w"> </span><span class="o">'--</span><span class="n">allow</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">all</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">unused_import_braces</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">unused_extern_crates</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">unused</span><span class="o">-</span><span class="kr">macro</span><span class="o">-</span><span class="n">rules</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">unused</span><span class="o">-</span><span class="n">lifetimes</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">unstable_features</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="k">unsafe</span><span class="o">-</span><span class="n">attr</span><span class="o">-</span><span class="n">outside</span><span class="o">-</span><span class="k">unsafe</span><span class="w"> </span><span class="o">'--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">unnecessary_to_owned</span><span class="sc">' '</span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">unnecessary_mut_passed</span><span class="sc">' '</span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">unnecessary_fallible_conversions</span><span class="sc">' '</span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">unnecessary_cast</span><span class="sc">' '</span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">uninlined_format_args</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">unexpected_cfgs</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">trivial_numeric_casts</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">rust</span><span class="o">-</span><span class="mi">2024</span><span class="o">-</span><span class="n">prelude</span><span class="o">-</span><span class="n">collisions</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">rust</span><span class="o">-</span><span class="mi">2024</span><span class="o">-</span><span class="n">incompatible</span><span class="o">-</span><span class="n">pat</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">rust</span><span class="o">-</span><span class="mi">2024</span><span class="o">-</span><span class="n">guarded</span><span class="o">-</span><span class="n">string</span><span class="o">-</span><span class="n">incompatible</span><span class="o">-</span><span class="n">syntax</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">missing</span><span class="o">-</span><span class="k">unsafe</span><span class="o">-</span><span class="n">on</span><span class="o">-</span><span class="k">extern</span><span class="w"> </span><span class="o">'--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">map_clone</span><span class="sc">' '</span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">manual_strip</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">keyword_idents_2024</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="k">impl</span><span class="o">-</span><span class="k">trait</span><span class="o">-</span><span class="n">overcaptures</span><span class="w"> </span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">deprecated</span><span class="o">-</span><span class="n">safe</span><span class="o">-</span><span class="mi">2024</span><span class="w"> </span><span class="o">'--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">clone_on_copy</span><span class="sc">' '</span><span class="o">--</span><span class="n">warn</span><span class="o">=</span><span class="n">clippy</span><span class="p">::</span><span class="n">allow_attributes_without_reason</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">cfg</span><span class="p">(</span><span class="n">pulley_tail_calls</span><span class="p">)</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">cfg</span><span class="p">(</span><span class="n">pulley_assume_llvm_makes_tail_calls</span><span class="p">)</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">feature</span><span class="o">=</span><span class="s">"gimli"</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">feature</span><span class="o">=</span><span class="s">"host-arch"</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">feature</span><span class="o">=</span><span class="s">"std"</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">feature</span><span class="o">=</span><span class="s">"timing"</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">feature</span><span class="o">=</span><span class="s">"unwind"</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">cfg</span><span class="p">(</span><span class="n">docsrs</span><span class="p">)</span><span class="o">'</span><span class="w"> </span><span class="o">--</span><span class="n">check</span><span class="o">-</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">cfg</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span><span class="w"> </span><span class="n">values</span><span class="p">(</span><span class="s">"all-arch"</span><span class="p">,</span><span class="w"> </span><span class="s">"all-native-arch"</span><span class="p">,</span><span class="w"> </span><span class="s">"anyhow"</span><span class="p">,</span><span class="w"> </span><span class="s">"arm64"</span><span class="p">,</span><span class="w"> </span><span class="s">"capstone"</span><span class="p">,</span><span class="w"> </span><span class="s">"core"</span><span class="p">,</span><span class="w"> </span><span class="s">"default"</span><span class="p">,</span><span class="w"> </span><span class="s">"disas"</span><span class="p">,</span><span class="w"> </span><span class="s">"enable-serde"</span><span class="p">,</span><span class="w"> </span><span class="s">"gimli"</span><span class="p">,</span><span class="w"> </span><span class="s">"host-arch"</span><span class="p">,</span><span class="w"> </span><span class="s">"incremental-cache"</span><span class="p">,</span><span class="w"> </span><span class="s">"isle-errors"</span><span class="p">,</span><span class="w"> </span><span class="s">"postcard"</span><span class="p">,</span><span class="w"> </span><span class="s">"pulley"</span><span class="p">,</span><span class="w"> </span><span class="s">"riscv64"</span><span class="p">,</span><span class="w"> </span><span class="s">"s390x"</span><span class="p">,</span><span class="w"> </span><span class="s">"serde"</span><span class="p">,</span><span class="w"> </span><span class="s">"serde_derive"</span><span class="p">,</span><span class="w"> </span><span class="s">"sha2"</span><span class="p">,</span><span class="w"> </span><span class="s">"souper-harvest"</span><span class="p">,</span><span class="w"> </span><span class="s">"souper-ir"</span><span class="p">,</span><span class="w"> </span><span class="s">"std"</span><span class="p">,</span><span class="w"> </span><span class="s">"timing"</span><span class="p">,</span><span class="w"> </span><span class="s">"trace-log"</span><span class="p">,</span><span class="w"> </span><span class="s">"unwind"</span><span class="p">,</span><span class="w"> </span><span class="s">"x86"</span><span class="p">))</span><span class="o">'</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="n">metadata</span><span class="o">=</span><span class="mi">8</span><span class="n">ceca3438a4e6be6</span><span class="w"> </span><span class="o">-</span><span class="n">C</span><span class="w"> </span><span class="n">extra</span><span class="o">-</span><span class="n">filename</span><span class="o">=-</span><span class="mi">8</span><span class="n">ceca3438a4e6be6</span><span class="w"> </span><span class="o">--</span><span class="n">out</span><span class="o">-</span><span class="n">dir</span><span class="w"> </span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="w"> </span><span class="o">-</span><span class="n">L</span><span class="w"> </span><span class="n">dependency</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">bumpalo</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libbumpalo</span><span class="o">-</span><span class="mi">60</span><span class="n">cd594841ea15d3</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">cranelift_assembler_x64</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libcranelift_assembler_x64</span><span class="o">-</span><span class="mi">3</span><span class="n">deec114eded7b2c</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">cranelift_bforest</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libcranelift_bforest</span><span class="o">-</span><span class="n">bf4c3da081cf2730</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">cranelift_bitset</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libcranelift_bitset</span><span class="o">-</span><span class="mi">9</span><span class="n">bfc4df467b1b977</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">cranelift_codegen_shared</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libcranelift_codegen_shared</span><span class="o">-</span><span class="mi">6</span><span class="n">b3c740776c6b68a</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">cranelift_control</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libcranelift_control</span><span class="o">-</span><span class="n">f6a47121bff88efc</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">cranelift_entity</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libcranelift_entity</span><span class="o">-</span><span class="n">d303a77032a10d00</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">gimli</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libgimli</span><span class="o">-</span><span class="mi">5</span><span class="n">f3f39779306b379</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">hashbrown</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libhashbrown</span><span class="o">-</span><span class="mi">108</span><span class="n">b067292ceb726</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">log</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">liblog</span><span class="o">-</span><span class="n">e301598471c6dba6</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">regalloc2</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libregalloc2</span><span class="o">-</span><span class="mf">6e28</span><span class="n">ab3a69324b1f</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">rustc_hash</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">librustc_hash</span><span class="o">-</span><span class="n">c1112e54603ea26d</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">smallvec</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libsmallvec</span><span class="o">-</span><span class="mi">7</span><span class="n">a396962699c87f4</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="k">extern</span><span class="w"> </span><span class="n">target_lexicon</span><span class="o">=/</span><span class="n">data</span><span class="o">/</span><span class="n">data</span><span class="o">/</span><span class="n">com</span><span class="p">.</span><span class="n">termux</span><span class="o">/</span><span class="n">files</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lucle</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">deps</span><span class="o">/</span><span class="n">libtarget_lexicon</span><span class="o">-</span><span class="mi">47121</span><span class="n">f6009da8553</span><span class="p">.</span><span class="n">rmeta</span><span class="w"> </span><span class="o">--</span><span class="n">cap</span><span class="o">-</span><span class="n">lints</span><span class="w"> </span><span class="n">allow</span><span class="w"> </span><span class="o">--</span><span class="n">cfg</span><span class="w"> </span><span class="o">'</span><span class="na">feature</span><span class="o">=</span><span class="s">"arm64"</span><span class="o">'</span><span class="err">`</span><span class="w"> </span><span class="p">(</span><span class="n">signal</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="n">SIGSEGV</span><span class="p">:</span><span class="w"> </span><span class="nc">invalid</span><span class="w"> </span><span class="n">memory</span><span class="w"> </span><span class="n">reference</span><span class="p">)</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="506093690"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506093690" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506093690">(Mar 17 2025 at 09:38)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728797546">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Can you run that command in gdb to get a backtrace?</p>
</blockquote>



<a name="506102354"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506102354" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506102354">(Mar 17 2025 at 10:10)</a>:</h4>
<p>Ludea <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2728898595">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>I try <code>RUST_BACKTRACE=1 cargo build</code> and get same message</p>
</blockquote>



<a name="506169013"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506169013" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506169013">(Mar 17 2025 at 14:30)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2729734775">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Is this using rustc_codegen_cranelift to build Cranelift? If so this issue probably belong on rustc_codegen_cranelift. If it's a general segfault compiling Rust code then this probably belongs on the rust-lang/rust issue tracker.</p>
</blockquote>



<a name="506172510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506172510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506172510">(Mar 17 2025 at 14:42)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2729776682">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>I don't think it uses cg_clif. The failing command contains neither rustc-clif nor -Zcodegen-backend. In any case I did be highly surprised if Termux were to ship cg_clif, especially on a stable rustc version.</p>
</blockquote>



<a name="506184889"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506184889" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506184889">(Mar 17 2025 at 15:25)</a>:</h4>
<p>Ludea <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2729948523">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>I can use <a href="https://github.com/termux-user-repository/tur/tree/master/tur/rustc-nightly">https://github.com/termux-user-repository/tur/tree/master/tur/rustc-nightly</a></p>
</blockquote>



<a name="506196771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506196771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506196771">(Mar 17 2025 at 16:03)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2730065821">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>I'm trying to mostly clarify what to do with this issue on this repository. I don't know what termux is for example and the actual OP of this issue is pretty light on details (and didn't actually fill out most of the template, just used the default values). Is this something expected to be fixed in this repository?</p>
</blockquote>



<a name="506199932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506199932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506199932">(Mar 17 2025 at 16:14)</a>:</h4>
<p>Ludea closed <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Thanks for filing an issue! Please fill out the TODOs below.</p>
<h3><code>.clif</code> Test Case</h3>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">paste</span><span class="w"> </span><span class="p">.</span><span class="n">clif</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">here</span><span class="p">.</span><span class="w"> </span><span class="n">Ideally</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">case</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">been</span><span class="w"> </span><span class="n">reduced</span><span class="w"> </span><span class="n">via</span>
<span class="n">the</span><span class="w"> </span><span class="err">`</span><span class="n">clif</span><span class="o">-</span><span class="n">util</span><span class="w"> </span><span class="n">bugpoint</span><span class="err">`</span><span class="w"> </span><span class="n">command</span><span class="p">.</span>
</code></pre></div>
<h3>Steps to Reproduce</h3>
<p>1- create a rust app<br>
2- run<code> cargo add wastime </code><br>
3- run <code>cargo build</code></p>
<h3>Expected Results</h3>
<p>Successfull build my app</p>
<p>What do you expect to happen?<br>
build wastime with default feature successuflly</p>
<h3>Actual Results</h3>
<p>unable to build cranelift-codegen</p>
<p>What actually happens? Panic? Segfault? Incorrect result?<br>
<code>(signal 11, SIGSEGV: invalid memory reference)</code></p>
<h3>Versions and Environment</h3>
<p>Cranelift version or commit: <br>
wasmtime 0.30.2, with default feature</p>
<p>Operating system: <br>
Android</p>
<p>Architecture: <br>
aarch64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="506199941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/506199941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#506199941">(Mar 17 2025 at 16:14)</a>:</h4>
<p>Ludea <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2730101816">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>It's not a cranelift issue, closing </p>
</blockquote>



<a name="507388251"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310406%20Cranelift%3A%20Invalid%20memory%20reference/near/507388251" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310406.20Cranelift.3A.20Invalid.20memory.20reference.html#507388251">(Mar 22 2025 at 00:16)</a>:</h4>
<p>Ludea <a href="https://github.com/bytecodealliance/wasmtime/issues/10406#issuecomment-2744713023">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10406">issue #10406</a>:</p>
<blockquote>
<p>Fixed by <a href="https://github.com/termux-user-repository/tur/commit/4dc50f8018369a1ff0b9603ef30c1aaf2c2e39f6">https://github.com/termux-user-repository/tur/commit/4dc50f8018369a1ff0b9603ef30c1aaf2c2e39f6</a></p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>