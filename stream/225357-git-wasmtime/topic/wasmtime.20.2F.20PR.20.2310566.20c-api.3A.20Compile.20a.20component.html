<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10566 c-api: Compile a component · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html">wasmtime / PR #10566 c-api: Compile a component</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="511660625"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511660625" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511660625">(Apr 11 2025 at 14:05)</a>:</h4>
<p>MangoPeachGrape opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a> from <code>MangoPeachGrape:c-api/component-model/compile</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>First little bit of #9812, <a href="https://github.com/bytecodealliance/wasmtime/pull/9812#pullrequestreview-2503060369">"compile a component"</a>, with some changes suggested in the original pr:</p>
<ul>
<li><a href="https://github.com/bytecodealliance/wasmtime/pull/9812#discussion_r1884430669">No longer depends on cranelift</a>, feature gated compile function on <code>WASMTIME_FEATURE_COMPILER</code>.</li>
<li><a href="https://github.com/bytecodealliance/wasmtime/pull/9812#discussion_r1884432876">Moved config switch to config.h</a>.</li>
<li><a href="https://github.com/bytecodealliance/wasmtime/pull/9812#discussion_r1884460573">Prepared the file structure for multiple header files</a>, should the same be done for the rust side?</li>
</ul>
<p>Based on the efforts of @lanfeust69 and @rockwotj.</p>
</blockquote>



<a name="511660629"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511660629" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511660629">(Apr 11 2025 at 14:05)</a>:</h4>
<p><strong>MangoPeachGrape</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="511660630"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511660630" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511660630">(Apr 11 2025 at 14:05)</a>:</h4>
<p><strong>MangoPeachGrape</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="511682788"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511682788" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511682788">(Apr 11 2025 at 15:41)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#pullrequestreview-2760764516">PR review</a>:</p>
<blockquote>
<p>Thanks!</p>
</blockquote>



<a name="511682791"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511682791" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511682791">(Apr 11 2025 at 15:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#discussion_r2039807942">PR review comment</a>:</p>
<blockquote>
<p>Could this be called <code>wasmtime_component_new</code> to look similar to modules?</p>
</blockquote>



<a name="511682793"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511682793" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511682793">(Apr 11 2025 at 15:41)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#discussion_r2039804651">PR review comment</a>:</p>
<blockquote>
<p>Could this be changed to <code>&lt;wasmtime/component/component.h&gt;</code> like other wasmtime-specific imports?</p>
</blockquote>



<a name="511683002"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511683002" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511683002">(Apr 11 2025 at 15:42)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797292806">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>Also if you're up for it feel free to fill out this header to match the <code>module.h</code> header, e.g. with deserializing and such. Reflection on imports/exports though is going to be a "big deal" so deferring that is probably best.</p>
</blockquote>



<a name="511689998"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511689998" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511689998">(Apr 11 2025 at 16:18)</a>:</h4>
<p>MangoPeachGrape updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="511691941"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511691941" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511691941">(Apr 11 2025 at 16:29)</a>:</h4>
<p>MangoPeachGrape <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797410969">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<blockquote>
<p>Also if you're up for it feel free to fill out this header to match the <code>module.h</code> header, e.g. with deserializing and such. Reflection on imports/exports though is going to be a "big deal" so deferring that is probably best.</p>
</blockquote>
<p>Added <code>wasmtime_component_serialize()</code> and <code>wasmtime_component_serialize()</code>. Should I do <code>wasmtime_module_deserialize_file()</code> as well, or any other functions?</p>
<p>For the documentation in the header file I did <code>s/module/component/</code>, so it might not be accurate. In general, do you want documentation on everything in the header files in these early commits, or is that something that can be added in PRs down the line?</p>
</blockquote>



<a name="511692346"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511692346" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511692346">(Apr 11 2025 at 16:32)</a>:</h4>
<p>MangoPeachGrape edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797410969">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<blockquote>
<p>Also if you're up for it feel free to fill out this header to match the <code>module.h</code> header, e.g. with deserializing and such. Reflection on imports/exports though is going to be a "big deal" so deferring that is probably best.</p>
</blockquote>
<p>Added <code>wasmtime_component_serialize()</code> and <code>wasmtime_component_deserialize()</code>. Should I do <code>wasmtime_module_deserialize_file()</code> as well, or any other functions?</p>
<p>For the documentation in the header file I did <code>s/module/component/</code>, so it might not be accurate. In general, do you want documentation on everything in the header files in these early commits, or is that something that can be added in PRs down the line?</p>
</blockquote>



<a name="511695038"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511695038" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511695038">(Apr 11 2025 at 16:48)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797468646">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p><code>wasmtime_component_deserialize_file</code> sounds good to add yeah, and maybe <code>wasmtime_component_clone</code> as well, but otherwise it looks like other functions aren't as applicable yet so that's probably good for now.</p>
<p>For docs I find it best to add it when the functions come in, but I'll admit during review I generally gloss over docs. I can give them a once-over to confirm everything is right after deserialize_file is added</p>
</blockquote>



<a name="511705832"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511705832" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511705832">(Apr 11 2025 at 17:53)</a>:</h4>
<p>MangoPeachGrape updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="511707413"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511707413" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511707413">(Apr 11 2025 at 18:02)</a>:</h4>
<p>MangoPeachGrape <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797668984">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>I'm unsure if all the <code>const</code>s are correct, for example in <code>wasmtime_component_clone(const wasmtime_component_t *component)</code>, because <code>wasmtime_module_clone(wasmtime_module_t *m)</code> doesn't have const?</p>
<p>Should the rust file also be split up, similar to the header files?</p>
</blockquote>



<a name="511724530"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511724530" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511724530">(Apr 11 2025 at 19:55)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797901226">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>Ah yeah the const there is ok, and it's one where we aren't necessarily the best-principled, but adding <code>const</code> when it maps to <code>&amp;T</code> in Rust doesn't hurt for sure.</p>
<p>For file organization, yeah if you're up for it I think it would be a good idea. We'll be filling this out more in the future so I think it makes sense to separate everything out by file and starting here feels a bit odd as it's so small but it's predicted to get larger and be more justified in the future.</p>
</blockquote>



<a name="511727221"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511727221" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511727221">(Apr 11 2025 at 20:17)</a>:</h4>
<p>MangoPeachGrape updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="511727718"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511727718" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511727718">(Apr 11 2025 at 20:21)</a>:</h4>
<p>MangoPeachGrape <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2797941038">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<blockquote>
<p>For file organization, yeah if you're up for it I think it would be a good idea. We'll be filling this out more in the future so I think it makes sense to separate everything out by file and starting here feels a bit odd as it's so small but it's predicted to get larger and be more justified in the future.</p>
</blockquote>
<p>Done!</p>
<p>What should the scope be for the next PR?</p>
</blockquote>



<a name="511846993"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/511846993" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#511846993">(Apr 12 2025 at 21:41)</a>:</h4>
<p>MangoPeachGrape updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="512092924"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512092924" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512092924">(Apr 14 2025 at 14:22)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#pullrequestreview-2764525674">PR review</a>.</p>



<a name="512093574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512093574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512093574">(Apr 14 2025 at 14:25)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2801893957">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>Personally I think one major missing piece of foundation for the C API is a good testing story. We don't have many tests for the C API and right now they're all classified as examples rather than unit tests. They're also awkward to write because C is pretty awkward to write.</p>
<p>To solve this one thing we've wanted to do was to fold the wasmtime-cpp repository (C++ bindings build on the C API) into this repository. That would make it much easier to write tests and then we could whip up some cmake as well to get tests.</p>
<p>I know writing tests isn't the most glamorous thing but it's a major thing I'd personally like to see before much of the rest of the C API becomes load bearing because I think the conversion of values is going to be significantly trickier than the wasm C API and warrant more thorough testing.</p>
</blockquote>



<a name="512110284"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512110284" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512110284">(Apr 14 2025 at 15:28)</a>:</h4>
<p>MangoPeachGrape updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="512125542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512125542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512125542">(Apr 14 2025 at 16:34)</a>:</h4>
<p>MangoPeachGrape <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2802267822">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>Yes, tests would be great!</p>
<p>All the tests would use GoogleTest, would you still seperate the tests for the C api and the C++ api, or would you have those combined?</p>
<p>Is this something you would want me to take a jab at? I'm not that familiar with the codebase, so I would need some guiding where to put everything.</p>
</blockquote>



<a name="512126956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512126956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512126956">(Apr 14 2025 at 16:40)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2802283846">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>GoogleTest would be fine yeah, and I think it'd be reasonable to test everything together. I'd expected we'd test C++ APIs by deafult (by moving <code>wasmtime.hh</code> to this repository) and then we could write one-off tests in C if necessary.</p>
<p>If you're willing to work on this that'd be great! Most of us in this repo aren't really all that well-versed in C/C++ repository management so if you know of practices/idioms around organization/testing/CI/etc that'd be very helpful. Most of the source would probably want to live in <code>crates/c-api</code> or some sub-folder, and I'm happy to help out with CI integration as well.</p>
</blockquote>



<a name="512127469"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512127469" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512127469">(Apr 14 2025 at 16:43)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>.</p>



<a name="512179019"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512179019" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512179019">(Apr 14 2025 at 21:42)</a>:</h4>
<p>MangoPeachGrape <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2803093518">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>@alexcrichton, Some questions that that came up while moving the C++ api into this repository:</p>
<ul>
<li>Should the C++ examples go to <code>examples/</code>, and the tests go to <code>crates/c-api/tests/</code>?</li>
<li>Should we guard the C++ api to be only built if the consumer wants it (some consumers might not be able to build C++)?</li>
<li>Should C/C++ tests be built by default, or only be enabled by a CMake option when desired?<br>
</li>
</ul>
</blockquote>



<a name="512180797"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310566%20c-api%3A%20Compile%20a%20component/near/512180797" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310566.20c-api.3A.20Compile.20a.20component.html#512180797">(Apr 14 2025 at 21:54)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10566#issuecomment-2803116152">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10566">PR #10566</a>:</p>
<blockquote>
<p>Yeah let's put examples in <code>examples/{example}.{rs,c,cpp}</code> and in theory we can fill out that matrix over time. For tests I think <code>crates/c-api/tests</code> is a good spot too.</p>
<p>The C++ API build step from an end consumable artifact point of view should just be a header file so I think it's fine to always enable/copy that around. For the tests I think it's also reasonable to require C++ to build tests since that's just for developers which should be easier in general. Given that I'd hope we can skip CMake options to conditionalize the C++ usage and basically just always use it</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>