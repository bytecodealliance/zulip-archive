<html>
<head><meta charset="utf-8"><title>wasmtime / PR #6899 Add timezone host functions. · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html">wasmtime / PR #6899 Add timezone host functions.</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="387076860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/387076860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#387076860">(Aug 24 2023 at 13:38)</a>:</h4>
<p>cdmurph32 opened <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a> from <code>cdmurph32:timezone</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Issue:<br>
<a href="https://github.com/bytecodealliance/wasmtime/issues/4274">https://github.com/bytecodealliance/wasmtime/issues/4274</a></p>
<p>WASI Clocks proposal:<br>
<a href="https://github.com/WebAssembly/wasi-clocks/pull/48">https://github.com/WebAssembly/wasi-clocks/pull/48</a></p>
<p>Relate cap-std PR:<br>
<a href="https://github.com/bytecodealliance/cap-std/pull/327">https://github.com/bytecodealliance/cap-std/pull/327</a></p>
</blockquote>



<a name="387362920"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/387362920" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#387362920">(Aug 26 2023 at 00:47)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="387748790"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/387748790" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#387748790">(Aug 28 2023 at 20:10)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="387749785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/387749785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#387749785">(Aug 28 2023 at 20:17)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="425602126"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/425602126" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#425602126">(Mar 08 2024 at 20:28)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="425604538"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/425604538" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#425604538">(Mar 08 2024 at 20:46)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="425682946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/425682946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#425682946">(Mar 09 2024 at 12:35)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="425698898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/425698898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#425698898">(Mar 09 2024 at 16:17)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="425706409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/425706409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#425706409">(Mar 09 2024 at 17:52)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="425903115"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/425903115" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#425903115">(Mar 11 2024 at 12:56)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="445146330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/445146330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#445146330">(Jun 17 2024 at 14:27)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="448037608"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/448037608" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#448037608">(Jun 29 2024 at 21:54)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="448621900"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/448621900" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#448621900">(Jul 02 2024 at 14:33)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="450013949"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/450013949" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#450013949">(Jul 09 2024 at 00:26)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="450014950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/450014950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#450014950">(Jul 09 2024 at 00:34)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="535765516"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/535765516" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#535765516">(Aug 22 2025 at 22:54)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="535870732"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/535870732" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#535870732">(Aug 24 2025 at 00:12)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="536083244"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536083244" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536083244">(Aug 25 2025 at 18:30)</a>:</h4>
<p><strong>cdmurph32</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a> as ready for review.</p>



<a name="536083250"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536083250" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536083250">(Aug 25 2025 at 18:30)</a>:</h4>
<p><strong>cdmurph32</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers">wasmtime-wasi-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="536083253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536083253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536083253">(Aug 25 2025 at 18:30)</a>:</h4>
<p><strong>cdmurph32</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="536083254"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536083254" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536083254">(Aug 25 2025 at 18:30)</a>:</h4>
<p><strong>cdmurph32</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="536083256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536083256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536083256">(Aug 25 2025 at 18:30)</a>:</h4>
<p><strong>cdmurph32</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="536106085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536106085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536106085">(Aug 25 2025 at 20:48)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3152976990">PR review</a>:</p>
<blockquote>
<p>I'm not expert on timezones or clocks so I can't review the APIs as-is, but despite that I've still got a few questions about this:</p>
<ul>
<li>Does it still make sense to use <code>chrono</code> and <code>chrono-tz</code>? Since this PR was opened I think <code>jiff</code> was released which might be more modern.</li>
<li>Does <code>chrono</code> or <code>chrono-tz</code> have any sort of system dependency on something like a timezone database? If so, are there any consequences to that? If not should it? Or will we need to update frequently?</li>
<li>What's the build/size impact of including <code>chrono</code> and <code>chrono-tz</code>? Adding 10M to the executable? 10K?</li>
<li>We're generally pretty conservative with the defaults of a WASI program, so it might make more sense to default to UTC instead of the local timezone maybe?</li>
<li>This PR has been pretty inactive for ~2 years and now mergable without much discussion here. That's understandable though if the discussion happened upstream. Do you have links and/or confirmation for others that it's suitable to add this at this time? (or is there no such body that makes sense to confirm this decision?)</li>
</ul>
</blockquote>



<a name="536106086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536106086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536106086">(Aug 25 2025 at 20:48)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2299097484">PR review comment</a>:</p>
<blockquote>
<p>Would it perhaps make sense to frontload this linear search in the <code>Timezone::new</code> constructor?</p>
<p>Also, would it also make sense to provide a <code>Timezone::new_utc()</code> constructor?</p>
</blockquote>



<a name="536238001"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536238001" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536238001">(Aug 26 2025 at 13:33)</a>:</h4>
<p>cdmurph32 <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3224202645">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<p>This PR has been delayed for the past 2 years by the following discussions:<br>
<a href="https://github.com/WebAssembly/wasi-clocks/issues/69">https://github.com/WebAssembly/wasi-clocks/issues/69</a><br>
<a href="https://github.com/WebAssembly/wasi-clocks/pull/79">https://github.com/WebAssembly/wasi-clocks/pull/79</a></p>
<p>Recently it was decided that the result of these discussions will land in 0.3. Therefore this PR can move ahead for 0.2. The 0.3 wit files will be different for all 3 interfaces (wall-clock, monotonic-clock, timezone).</p>
<p>Wasmtime releases should use the latest version of whichever crate is providing the IANA timezone database, just as any other software would. There are updates every few, but they are typically driven by geopolitics and are not on a predictable cadence.</p>
<p>I will try out jiff as a replacement and report the difference in build size.</p>
</blockquote>



<a name="536249735"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536249735" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536249735">(Aug 26 2025 at 14:26)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3224406869">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<p>Forgive me if these are naive questions, but I haven't been following this proposal closely in the interim years. Do you have a link to a decision somewhere of "let's ship unstable APIs in 0.2"? I'm a bit surprised by that if the APIs are going to be entirely different in 0.3 so I'm curious to read up on the rationale.</p>
<blockquote>
<p>just as any other software would</p>
</blockquote>
<p>Do you have a sense for how other software does? For example does most software bundle the database? Use an external database? (I'm new to timezones in this regard). Basically is Wasmtime doing the "standard thing" here? Or do we know if <code>chrono</code> is non-standard in any way?</p>
<blockquote>
<p>I will try out jiff as a replacement and report the difference in build size.</p>
</blockquote>
<p>To clarify I'm mostly just curious if it was considered. I do not know how to evaluate tradeoffs so I'm relying on expert advice in this area. I, myself, am not equipped to render judgment on a <code>chrono</code>-vs-<code>jiff</code> decision so what I'm trying to do is ask leading questions. My hope is to read the analysis of someone else's judgment and see if I have further questions or whether we can link to that in the future for example.</p>
</blockquote>



<a name="536386673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536386673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536386673">(Aug 27 2025 at 10:04)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3227577773">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<p>Looks like <a href="https://docs.rs/jiff/latest/jiff/_documentation/design/index.html#chrono">https://docs.rs/jiff/latest/jiff/_documentation/design/index.html#chrono</a> and <a href="https://docs.rs/jiff/latest/jiff/_documentation/comparison/index.html#chrono-v0438">https://docs.rs/jiff/latest/jiff/_documentation/comparison/index.html#chrono-v0438</a> give a pretty good overview of differences between <code>jiff</code> and <code>chrono</code>.</p>
<p>From my perspective, since <code>jiff</code>:</p>
<ul>
<li>reads the timezone database from the OS by default on supported systems (which IMO is the right thing to do)</li>
<li>has fully standard-compliant timezone handling implemented</li>
</ul>
<p>I'd prefer using <code>jiff</code> instead. If we really wanted to, we could even expose an option to force embedding of the database on all systems as a compile-time flag for advanced embedding use cases.</p>
<p>Since the interface is fairly small and functionality would be largely reused for e.g. p3 or any potential p2 <code>timezone</code> interface changes (<a href="https://github.com/WebAssembly/wasi-clocks/pull/71">https://github.com/WebAssembly/wasi-clocks/pull/71</a>) I think it's fine to land this, as the maintenance cost we'd incur would be minor even if/when the <code>timezone</code> interface would change</p>
</blockquote>



<a name="536388151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536388151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536388151">(Aug 27 2025 at 10:14)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3159189745">PR review</a>.</p>



<a name="536388156"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536388156" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536388156">(Aug 27 2025 at 10:14)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2303495879">PR review comment</a>:</p>
<blockquote>
<p>I feel like this interface would have been useful if embedders were able to provide an arbitrary timezone to use with UTC default.</p>
<p>There are many ways to do that, but perhaps we could:</p>
<ul>
<li>store <code>jiff::tz::TimeZone</code> <a href="https://docs.rs/jiff/latest/jiff/tz/struct.TimeZone.html">https://docs.rs/jiff/latest/jiff/tz/struct.TimeZone.html</a> in the struct</li>
<li>provide <code>TryFrom&lt;cap_time_ext::Timezone&gt; for Timezone</code></li>
<li>provide <code>From&lt;jiff::tz::Timezone&gt; for Timezone</code></li>
</ul>
<p>If we had that, we could have a <code>Default</code> implemented for <code>Timezone</code>, which would default to UTC.</p>
<p>We could then:</p>
<ul>
<li>rename <code>new</code> to something like <code>new_host</code> and make it fallible</li>
<li>add <code>new_utc</code>, which acts the same as <code>Default</code></li>
<li>maybe implement <code>FromStr</code> for <code>Timezone</code> in terms of <a href="https://docs.rs/jiff/latest/jiff/tz/struct.TimeZone.html#method.get">https://docs.rs/jiff/latest/jiff/tz/struct.TimeZone.html#method.get</a> ?</li>
</ul>
</blockquote>



<a name="536443147"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536443147" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536443147">(Aug 27 2025 at 15:14)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3160302170">PR review</a>.</p>



<a name="536443150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536443150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536443150">(Aug 27 2025 at 15:14)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2304296376">PR review comment</a>:</p>
<blockquote>
<p>Maybe we should replace iana_time_zone with jiff in cap-std-ext?<br>
<a href="https://github.com/bytecodealliance/cap-std/blob/main/cap-time-ext/src/timezone.rs">https://github.com/bytecodealliance/cap-std/blob/main/cap-time-ext/src/timezone.rs</a></p>
</blockquote>



<a name="536488540"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536488540" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536488540">(Aug 27 2025 at 19:57)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3161568828">PR review</a>.</p>



<a name="536488542"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536488542" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536488542">(Aug 27 2025 at 19:57)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2305168823">PR review comment</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="k">fn</span><span class="w"> </span><span class="nf">timezone_from_duration</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">datetime</span><span class="p">:</span><span class="w"> </span><span class="nc">Duration</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nb">Option</span><span class="o">&lt;</span><span class="n">TimezoneDisplay</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">tz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">timezone</span><span class="p">.</span><span class="n">timezone</span><span class="p">().</span><span class="n">ok</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Timestamp</span><span class="p">::</span><span class="n">from_second</span><span class="p">(</span><span class="n">datetime</span><span class="p">.</span><span class="n">as_secs</span><span class="p">()</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="kt">i64</span><span class="p">).</span><span class="n">ok</span><span class="p">()</span><span class="o">?</span><span class="p">;</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">localtime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tz</span><span class="p">.</span><span class="n">to_offset_info</span><span class="p">(</span><span class="n">timestamp</span><span class="p">);</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">utc_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">localtime</span><span class="p">.</span><span class="n">offset</span><span class="p">().</span><span class="n">seconds</span><span class="p">();</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tz</span><span class="p">.</span><span class="n">iana_name</span><span class="p">().</span><span class="n">unwrap_or</span><span class="p">(</span><span class="s">"UTC"</span><span class="p">).</span><span class="n">to_string</span><span class="p">();</span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">in_daylight_saving_time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">jiff</span><span class="p">::</span><span class="n">tz</span><span class="p">::</span><span class="n">Dst</span><span class="p">::</span><span class="n">Yes</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">localtime</span><span class="p">.</span><span class="n">dst</span><span class="p">();</span>
<span class="w">        </span><span class="nb">Some</span><span class="p">(</span><span class="n">TimezoneDisplay</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">utc_offset</span><span class="p">,</span>
<span class="w">            </span><span class="n">name</span><span class="p">,</span>
<span class="w">            </span><span class="n">in_daylight_saving_time</span><span class="p">,</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>If I replace iana_time_zone with jiff in cap-std-ext we could have something like this. Jiff automatically returns UTC if the timezone cannot be determined. Does this look better? <br>
Pros: No more linear search<br>
Cons: cap-std-ext::Timezone now returns a giff::Timezone instead of a string. Not really <code>std</code> behavior.<br>
If that Con is a deal breaker, I could keep the return type a string and convert the string back into a jiff timezone</p>
</blockquote>



<a name="536490820"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536490820" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536490820">(Aug 27 2025 at 20:17)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3161625823">PR review</a>.</p>



<a name="536490821"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536490821" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536490821">(Aug 27 2025 at 20:17)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2305210280">PR review comment</a>:</p>
<blockquote>
<p>For me it's not necessarily a requirement to change cap-std bits, it's fine to use jiff directly here in Wasmtime</p>
</blockquote>



<a name="536499966"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536499966" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536499966">(Aug 27 2025 at 21:42)</a>:</h4>
<p>pchickey submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3161838341">PR review</a>.</p>



<a name="536499967"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536499967" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536499967">(Aug 27 2025 at 21:42)</a>:</h4>
<p>pchickey created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2305356914">PR review comment</a>:</p>
<blockquote>
<p>I'd prefer to wasmtime-wasi jiff directly instead of going through cap-std-ext, I don't think the indirection through that additional crate is really getting us much in this case. The user can provide.a jiff::Timezone to the WasiCtxBuilder and if they don't it should default to UTC. We can then have a wasmtime-cli flag for setting a time zone, or "auto" which allows jiff to make its best effort to figure one out.</p>
</blockquote>



<a name="536502050"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536502050" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536502050">(Aug 27 2025 at 22:06)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2303495879">PR review comment</a>.</p>



<a name="536636564"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536636564" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536636564">(Aug 28 2025 at 15:45)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2307834277">PR review comment</a>:</p>
<blockquote>
<p>Do we still need the ambient authority marker, or can we get rid of timezone in cap-std-ext altogether?<br>
Should we have this?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Timezone</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">timezone</span><span class="p">:</span><span class="w"> </span><span class="nc">cap_time_ext</span><span class="p">::</span><span class="n">Timezone</span><span class="p">,</span>
<span class="w">    </span><span class="n">jiff_timezone</span><span class="p">:</span><span class="w"> </span><span class="nc">JiffTimeZone</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div>
<p>or this?</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">Timezone</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">timezone</span><span class="p">:</span><span class="w"> </span><span class="nc">JiffTimeZone</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="536636565"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536636565" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536636565">(Aug 28 2025 at 15:45)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3165481499">PR review</a>.</p>



<a name="536636633"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536636633" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536636633">(Aug 28 2025 at 15:45)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2307834277">PR review comment</a>.</p>



<a name="536643857"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536643857" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536643857">(Aug 28 2025 at 16:24)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2307927132">PR review comment</a>:</p>
<blockquote>
<p>I'd expect to see something like:</p>
<div class="codehilite" data-code-language="suggestion"><pre><span></span><code>pub struct Timezone {
    // The underlying system timezone.
    timezone: jiff::tz::Timezone,
}

impl Default for Timezone {
    fn default() -&gt; Self {
        Self::from(jiff::tz::Timezone::UTC)
    }
}

impl From&lt;jiff::tz::Timezone&gt; for Timezone {
   fn from(timezone: jiff::tz::Timezone) -&gt; Self {
       Self {
          timezone,
       }
   }
}
</code></pre></div>
<p>Personally, I am wary of exposing third-party library dependencies in public API, especially pre-1.0, since that could cause hard to debug issues downstream if/when <code>jiff</code> version does not match for users. That's why I'm proposing <code>FromStr</code> implemntation via <code>get</code>, such that users can do <code>let tz: Timezone = "Europe/Amsterdam"::parse()?</code></p>
</blockquote>



<a name="536643858"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536643858" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536643858">(Aug 28 2025 at 16:24)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3165614299">PR review</a>.</p>



<a name="536643943"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536643943" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536643943">(Aug 28 2025 at 16:24)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2307927132">PR review comment</a>.</p>



<a name="536644199"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536644199" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536644199">(Aug 28 2025 at 16:26)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2307927132">PR review comment</a>.</p>



<a name="536644754"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536644754" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536644754">(Aug 28 2025 at 16:30)</a>:</h4>
<p>rvolosatovs edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2307927132">PR review comment</a>.</p>



<a name="536782090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536782090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536782090">(Aug 29 2025 at 12:52)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3168631855">PR review</a>.</p>



<a name="536782091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536782091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536782091">(Aug 29 2025 at 12:52)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2310087635">PR review comment</a>:</p>
<blockquote>
<p>Thanks. That answers my question. We can get rid of the ambient authority.</p>
</blockquote>



<a name="536916159"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536916159" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536916159">(Aug 30 2025 at 13:51)</a>:</h4>
<p>cdmurph32 updated <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>.</p>



<a name="536916994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536916994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536916994">(Aug 30 2025 at 14:05)</a>:</h4>
<p>cdmurph32 <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3239289049">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<blockquote>
<p>Forgive me if these are naive questions, but I haven't been following this proposal closely in the interim years. Do you have a link to a decision somewhere of "let's ship unstable APIs in 0.2"? I'm a bit surprised by that if the APIs are going to be entirely different in 0.3 so I'm curious to read up on the rationale.</p>
<blockquote>
<p>just as any other software would</p>
</blockquote>
<p>Do you have a sense for how other software does? For example does most software bundle the database? Use an external database? (I'm new to timezones in this regard). Basically is Wasmtime doing the "standard thing" here? Or do we know if <code>chrono</code> is non-standard in any way?</p>
</blockquote>
<p>No apology necessary. Other than this WASI and wasmtime work, I have no particular experience with timezones or clocks either.</p>
<p>Yes, both chrono and jiff come with their own timezone databases. This is the standard as far as I can tell. If a new timezone is created after the database in use and the system returns that new timezone, the jiff::tz::Timezone will be "TimeZone::unknown()", and as my PR is currently written, the timezone provided by wasmtime will fallback to <code>UTC</code>.</p>
<blockquote>
<blockquote>
<p>I will try out jiff as a replacement and report the difference in build size.</p>
</blockquote>
<p>To clarify I'm mostly just curious if it was considered. I do not know how to evaluate tradeoffs so I'm relying on expert advice in this area. I, myself, am not equipped to render judgment on a <code>chrono</code>-vs-<code>jiff</code> decision so what I'm trying to do is ask leading questions. My hope is to read the analysis of someone else's judgment and see if I have further questions or whether we can link to that in the future for example.</p>
</blockquote>
<p>As @rvolosatovs mentioned, <code>jiff</code> appears to be the better fit. It appears to add ~ 1MB to the wasmtime binary as opposed to 2 MB with chrono.</p>
</blockquote>



<a name="536917588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536917588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536917588">(Aug 30 2025 at 14:17)</a>:</h4>
<p>cdmurph32 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3239289049">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<blockquote>
<p>Forgive me if these are naive questions, but I haven't been following this proposal closely in the interim years. Do you have a link to a decision somewhere of "let's ship unstable APIs in 0.2"? I'm a bit surprised by that if the APIs are going to be entirely different in 0.3 so I'm curious to read up on the rationale.</p>
</blockquote>
<p>No apology necessary. Other than this WASI and wasmtime work, I have no particular experience with timezones or clocks either.<br>
On the one hand, this work is behind the wasi option <code>clocks-timezone</code>. This options are also used to gate the unstable features <code>network-error-code</code> and <code>cli-with-exit-code</code>.</p>
<p>On the other hand, the proposed changes for clocks in 0.3 rename monotonic and wall-clock. I'm not sure exactly how they would work with the code as presently constructed. Timezone will probably also change.</p>
<blockquote>
<blockquote>
<p>just as any other software would</p>
</blockquote>
<p>Do you have a sense for how other software does? For example does most software bundle the database? Use an external database? (I'm new to timezones in this regard). Basically is Wasmtime doing the "standard thing" here? Or do we know if <code>chrono</code> is non-standard in any way?</p>
</blockquote>
<p>Yes, both chrono and jiff come with their own timezone databases. This is the standard as far as I can tell. If a new timezone is created after the database in use and the system returns that new timezone, the jiff::tz::Timezone will be "TimeZone::unknown()", and as my PR is currently written, the timezone provided by wasmtime will fallback to <code>UTC</code>.</p>
<blockquote>
<blockquote>
<p>I will try out jiff as a replacement and report the difference in build size.</p>
</blockquote>
<p>To clarify I'm mostly just curious if it was considered. I do not know how to evaluate tradeoffs so I'm relying on expert advice in this area. I, myself, am not equipped to render judgment on a <code>chrono</code>-vs-<code>jiff</code> decision so what I'm trying to do is ask leading questions. My hope is to read the analysis of someone else's judgment and see if I have further questions or whether we can link to that in the future for example.</p>
</blockquote>
<p>As @rvolosatovs mentioned, <code>jiff</code> appears to be the better fit. It appears to add ~ 1MB to the wasmtime binary as opposed to 2 MB with chrono.</p>
</blockquote>



<a name="536917606"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536917606" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536917606">(Aug 30 2025 at 14:17)</a>:</h4>
<p>cdmurph32 edited a <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3239289049">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<p>@alexcrichton </p>
<blockquote>
<p>Forgive me if these are naive questions, but I haven't been following this proposal closely in the interim years. Do you have a link to a decision somewhere of "let's ship unstable APIs in 0.2"? I'm a bit surprised by that if the APIs are going to be entirely different in 0.3 so I'm curious to read up on the rationale.</p>
</blockquote>
<p>No apology necessary. Other than this WASI and wasmtime work, I have no particular experience with timezones or clocks either.<br>
On the one hand, this work is behind the wasi option <code>clocks-timezone</code>. This options are also used to gate the unstable features <code>network-error-code</code> and <code>cli-with-exit-code</code>.</p>
<p>On the other hand, the proposed changes for clocks in 0.3 rename monotonic and wall-clock. I'm not sure exactly how they would work with the code as presently constructed. Timezone will probably also change.</p>
<blockquote>
<blockquote>
<p>just as any other software would</p>
</blockquote>
<p>Do you have a sense for how other software does? For example does most software bundle the database? Use an external database? (I'm new to timezones in this regard). Basically is Wasmtime doing the "standard thing" here? Or do we know if <code>chrono</code> is non-standard in any way?</p>
</blockquote>
<p>Yes, both chrono and jiff come with their own timezone databases. This is the standard as far as I can tell. If a new timezone is created after the database in use and the system returns that new timezone, the jiff::tz::Timezone will be "TimeZone::unknown()", and as my PR is currently written, the timezone provided by wasmtime will fallback to <code>UTC</code>.</p>
<blockquote>
<blockquote>
<p>I will try out jiff as a replacement and report the difference in build size.</p>
</blockquote>
<p>To clarify I'm mostly just curious if it was considered. I do not know how to evaluate tradeoffs so I'm relying on expert advice in this area. I, myself, am not equipped to render judgment on a <code>chrono</code>-vs-<code>jiff</code> decision so what I'm trying to do is ask leading questions. My hope is to read the analysis of someone else's judgment and see if I have further questions or whether we can link to that in the future for example.</p>
</blockquote>
<p>As @rvolosatovs mentioned, <code>jiff</code> appears to be the better fit. It appears to add ~ 1MB to the wasmtime binary as opposed to 2 MB with chrono.</p>
</blockquote>



<a name="536918555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536918555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536918555">(Aug 30 2025 at 14:32)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3171061808">PR review</a>.</p>



<a name="536918557"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/536918557" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#536918557">(Aug 30 2025 at 14:32)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2311965580">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>I'd prefer to wasmtime-wasi jiff directly instead of going through cap-std-ext, I don't think the indirection through that additional crate is really getting us much in this case. The user can provide.a jiff::Timezone to the WasiCtxBuilder and if they don't it should default to UTC. We can then have a wasmtime-cli flag for setting a time zone, or "auto" which allows jiff to make its best effort to figure one out.</p>
</blockquote>
<p>Yes. Jiff seems to be the way to go. I've updated the PR to reflect that. </p>
<p>I think allowing the user to override the system timezone is reasonable, especially for testing purposes, but I don't see why we would want to default to UTC if that timezone is not provided. Reporting the correct timezone would be the expected behavior for most applications and would be consistent with native code. For edge compute applications, I would imagine the automatic reporting of the correct timezone is a table stakes expectation.</p>
</blockquote>



<a name="537529756"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537529756" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537529756">(Sep 03 2025 at 18:04)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3181861415">PR review</a>.</p>



<a name="537529757"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537529757" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537529757">(Sep 03 2025 at 18:04)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2319791418">PR review comment</a>:</p>
<blockquote>
<p>Personally I'd agree with @rvolosatovs that the default time zone should be UTC. I don't doubt that many embedders will want to change this but Wasmtime's default stance has been one to sandbox everything and picking a deterministic default feels more sand-box-y to me than inferring based on the host system. For embedders that want to use the native time zone though I'd want to make sure we can easily enable that with a single call on <code>WasiCtxBuilder</code>, for example.</p>
</blockquote>



<a name="537529946"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537529946" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537529946">(Sep 03 2025 at 18:05)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3250242647">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<p>@cdmurph32 do you have a link to the discussion to ship this as unstable in 0.2? I understand it's all off-by-default, but I'd still like to read the discussion.</p>
<p>A 1M size increase isn't the end of the world but that's also pretty chunky for an off-by-default API too...</p>
</blockquote>



<a name="537877404"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537877404" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537877404">(Sep 05 2025 at 13:58)</a>:</h4>
<p>cdmurph32 <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#issuecomment-3258459811">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/6899">PR #6899</a>:</p>
<blockquote>
<blockquote>
<p>@cdmurph32 do you have a link to the discussion to ship this as unstable in 0.2? I understand it's all off-by-default, but I'd still like to read the discussion.</p>
<p>A 1M size increase isn't the end of the world but that's also pretty chunky for an off-by-default API too...</p>
</blockquote>
<p>That's fine. We can wait for 0.3.</p>
</blockquote>



<a name="537877808"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537877808" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537877808">(Sep 05 2025 at 14:00)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3189500727">PR review</a>.</p>



<a name="537877809"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537877809" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537877809">(Sep 05 2025 at 14:00)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2325187261">PR review comment</a>:</p>
<blockquote>
<p>If we want to default to UTC, then I don't see any role for wasmtime at all. There is no host functionality that can be provided.</p>
</blockquote>



<a name="537878207"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537878207" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537878207">(Sep 05 2025 at 14:02)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2325187261">PR review comment</a>.</p>



<a name="537878342"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537878342" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537878342">(Sep 05 2025 at 14:02)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2325187261">PR review comment</a>.</p>



<a name="537881610"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537881610" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537881610">(Sep 05 2025 at 14:18)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3189571996">PR review</a>.</p>



<a name="537881613"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537881613" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537881613">(Sep 05 2025 at 14:18)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2325235021">PR review comment</a>:</p>
<blockquote>
<p>I fear you might be misunderstanding me, but to clarify I'd think of this like environment variables. By default wasmtime doesn't give any environment variables to the guest, but the <code>WasiCtxBuilder</code> structure has methods to pass environment variables. The default behavior of "nothing" doesn't mean that the implementation of environment variabls is pointless it's just the default behavior.</p>
<p>I'm thinking the same thing for time zones. By default it's UTC, but embedders can easily configure "use this time zone instead" where "this" could be something specific or the system's local time zone. I'm not sure why this behavior would lead to the implementation having no role in Wasmtime. Wasmtime is still providing functionality, time zones and information, and embedders can configure which time zone is reported.</p>
</blockquote>



<a name="537954552"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537954552" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537954552">(Sep 05 2025 at 22:21)</a>:</h4>
<p>cdmurph32 submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3190952341">PR review</a>.</p>



<a name="537954553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537954553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537954553">(Sep 05 2025 at 22:21)</a>:</h4>
<p>cdmurph32 created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>:</p>
<blockquote>
<p>This would probably be easily smoothed over in a quick chat, but I'll try to articulate my understanding as best I can here. Today, there is nothing technically stopping someone from using timezones in their component and setting the timezone to UTC or whatever timezone they want. If they want to enable host timezone access, they would need something like what this PR provides.<br>
If we want that functionality not to be enabled by default then that's fine. Perhaps that is what you mean. </p>
<p>Where I'm coming from people expect their Wasm applications to work just like their native code. For C2PA, all of our tests run with <code>-S cli -S http --dir .</code>. Too many WASI specific code paths and it just isn't worth the hassle to maintain.<br>
If <code>--dir</code> isn't passed and and file access is denied, then the code panics. Likewise if people don't want the system timezone, then they shouldn't pass the feature flag. If they do want it, then it should just work as like the native code, which is their expectation.</p>
</blockquote>



<a name="537955078"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537955078" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537955078">(Sep 05 2025 at 22:26)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>.</p>



<a name="537955282"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537955282" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537955282">(Sep 05 2025 at 22:28)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>.</p>



<a name="537955301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537955301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537955301">(Sep 05 2025 at 22:28)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>.</p>



<a name="537955312"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537955312" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537955312">(Sep 05 2025 at 22:28)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>.</p>



<a name="537955360"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537955360" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537955360">(Sep 05 2025 at 22:29)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>.</p>



<a name="537955427"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537955427" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537955427">(Sep 05 2025 at 22:30)</a>:</h4>
<p>cdmurph32 edited <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326156321">PR review comment</a>.</p>



<a name="537982150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537982150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537982150">(Sep 06 2025 at 07:11)</a>:</h4>
<p>rvolosatovs submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#pullrequestreview-3191666195">PR review</a>.</p>



<a name="537982151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%236899%20Add%20timezone%20host%20functions./near/537982151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.236899.20Add.20timezone.20host.20functions.2E.html#537982151">(Sep 06 2025 at 07:11)</a>:</h4>
<p>rvolosatovs created <a href="https://github.com/bytecodealliance/wasmtime/pull/6899#discussion_r2326597033">PR review comment</a>:</p>
<blockquote>
<p>Could you help me understand why we'd need different code paths?</p>
<p>For the CLI you'd pass something like <code>--inherit-timezone</code> to use the timezone of the host or <code>--timezone $mytz</code> to use some custom one. If you don't specify any - it runs in UTC by default.</p>
<p>In case of an embedding you'd use analogous options on the <code>WasiCtxBuilder</code></p>
<p>If this functionality does not address your use case, I'd really like to know more about it</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>