<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10108 Disallow dead code/unused imports by... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310108.20Disallow.20dead.20code.2Funused.20imports.20by.2E.2E.2E.html">wasmtime / PR #10108 Disallow dead code/unused imports by...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="495795309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310108%20Disallow%20dead%20code/unused%20imports%20by.../near/495795309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310108.20Disallow.20dead.20code.2Funused.20imports.20by.2E.2E.2E.html#495795309">(Jan 24 2025 at 21:25)</a>:</h4>
<p>alexcrichton opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10108">PR #10108</a> from <code>alexcrichton:deny-unknown-imports</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This PR is a change to the crate attributes of the <code>wasmtime</code> crate. Quite some time ago when Wasmtime had far fewer crate features I added a directive to allow dead code and unused imports when the <code>default</code> feature was disabled. The original intention was to not worry too much about unused imports and dead code in every possible configuration of Wasmtime to ease the burden of dealing with unused imports or compile-time conditionally used code.</p>
<p>The primary consequence of this change though is that <code>cargo build</code> doesn't actually warn about dead code or unused imports in this repository during development. The reason for this is that the <code>default</code> feature is disabled by default and never actually enabled by any dependency inside the repository. Instead each crate, like <code>wasmtime-cli</code>, has its own <code>default</code> feature.</p>
<p>If I were to start from the problem of "I want dead code warnings by default in this repository" there's two possible fixes:</p>
<ol>
<li>Change <code>wasmtime-cli</code>'s <code>default</code> feature to include <code>wasmtime/default</code>.</li>
<li>Remove this <code>#[allow]</code> directive.</li>
</ol>
<p>While (1) would indeed work this is an attempt to get (2) working to see how bad the changes are necessary within the crate.</p>
<p>prtest:full</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="495796468"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310108%20Disallow%20dead%20code/unused%20imports%20by.../near/495796468" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310108.20Disallow.20dead.20code.2Funused.20imports.20by.2E.2E.2E.html#495796468">(Jan 24 2025 at 21:34)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10108#issuecomment-2613415980">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10108">PR #10108</a>:</p>
<blockquote>
<p>Oof that's a lot of red</p>
</blockquote>



<a name="496241329"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310108%20Disallow%20dead%20code/unused%20imports%20by.../near/496241329" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310108.20Disallow.20dead.20code.2Funused.20imports.20by.2E.2E.2E.html#496241329">(Jan 28 2025 at 01:27)</a>:</h4>
<p>alexcrichton closed without merge <a href="https://github.com/bytecodealliance/wasmtime/pull/10108">PR #10108</a>.</p>



<a name="496241330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310108%20Disallow%20dead%20code/unused%20imports%20by.../near/496241330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310108.20Disallow.20dead.20code.2Funused.20imports.20by.2E.2E.2E.html#496241330">(Jan 28 2025 at 01:27)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/10108#issuecomment-2617428206">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/10108">PR #10108</a>:</p>
<blockquote>
<p>Moving to <a href="https://github.com/bytecodealliance/wasmtime/pull/10131">https://github.com/bytecodealliance/wasmtime/pull/10131</a></p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>