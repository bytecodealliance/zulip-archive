<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12602 Fix UEFI compilation for cranelift-jit · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html">wasmtime / PR #12602 Fix UEFI compilation for cranelift-jit</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="574204052"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574204052" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574204052">(Feb 17 2026 at 01:24)</a>:</h4>
<p>RossComputerGuy opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a> from <code>RossComputerGuy:fix/jit-uefi</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
<p>Fixes enough of the errors to get cranelift-jit compiled to UEFI via:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$</span><span class="w"> </span><span class="n">RUSTFLAGS</span><span class="o">=</span><span class="s">"--cfg uefi_std"</span><span class="w"> </span><span class="n">cargo</span><span class="w"> </span><span class="n">build</span><span class="w"> </span><span class="o">--</span><span class="n">target</span><span class="w"> </span><span class="n">aarch64</span><span class="o">-</span><span class="n">unknown</span><span class="o">-</span><span class="n">uefi</span>
</code></pre></div>
<p>Requires changes to <code>region-rs</code> but it hasn't been touched in 2 years. <a href="https://github.com/darfink/region-rs/pull/39">https://github.com/darfink/region-rs/pull/39</a></p>
</blockquote>



<a name="574204958"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574204958" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574204958">(Feb 17 2026 at 01:39)</a>:</h4>
<p>RossComputerGuy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>.</p>



<a name="574212894"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574212894" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574212894">(Feb 17 2026 at 03:34)</a>:</h4>
<p>github-actions[bot] added the label <code>cranelift</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>.</p>



<a name="574217826"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574217826" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574217826">(Feb 17 2026 at 04:51)</a>:</h4>
<p>RossComputerGuy updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>.</p>



<a name="574217879"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574217879" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574217879">(Feb 17 2026 at 04:52)</a>:</h4>
<p>RossComputerGuy <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3912269050">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">413</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">param</span><span class="w"> </span><span class="n">v0</span><span class="p">:</span><span class="w"> </span><span class="nc">regs</span><span class="w"> </span><span class="n">ValueRegs</span><span class="p">(</span><span class="n">v192</span><span class="p">)</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">422</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">inst0</span><span class="w"> </span><span class="p">(</span><span class="n">UnaryImm</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">opcode</span><span class="p">:</span><span class="w"> </span><span class="nc">Iconst</span><span class="p">,</span><span class="w"> </span><span class="n">imm</span><span class="p">:</span><span class="w"> </span><span class="nc">Imm64</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span><span class="w"> </span><span class="p">}):</span><span class="w"> </span><span class="nc">result</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">regs</span><span class="w"> </span><span class="n">ValueRegs</span><span class="p">(</span><span class="n">v193</span><span class="p">)</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">422</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">inst1</span><span class="w"> </span><span class="p">(</span><span class="n">Binary</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">opcode</span><span class="p">:</span><span class="w"> </span><span class="nc">Iadd</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="p">]</span><span class="w"> </span><span class="p">}):</span><span class="w"> </span><span class="nc">result</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">regs</span><span class="w"> </span><span class="n">ValueRegs</span><span class="p">(</span><span class="n">v194</span><span class="p">)</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">493</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">inst0</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="mi">1</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">502</span><span class="w">  </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">constant</span><span class="p">:</span><span class="w"> </span><span class="mi">37</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">493</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">inst1</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="mi">1</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">493</span><span class="w"> </span><span class="n">bb</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">inst2</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="mi">1</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">496</span><span class="w">  </span><span class="p">-&gt;</span><span class="w"> </span><span class="nc">side</span><span class="o">-</span><span class="n">effecting</span><span class="p">;</span><span class="w"> </span><span class="n">incrementing</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">next</span><span class="w"> </span><span class="n">inst</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1313</span><span class="w"> </span><span class="n">arg</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">Unused</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Once</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1313</span><span class="w"> </span><span class="n">arg</span><span class="w"> </span><span class="n">v0</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">Unused</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Once</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1313</span><span class="w"> </span><span class="n">arg</span><span class="w"> </span><span class="n">v2</span><span class="w"> </span><span class="n">used</span><span class="p">,</span><span class="w"> </span><span class="n">old</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="n">Unused</span><span class="p">,</span><span class="w"> </span><span class="n">new</span><span class="w"> </span><span class="n">Once</span>
<span class="p">[</span><span class="n">DEBUG</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">35</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">CLIF</span><span class="w"> </span><span class="n">instructions</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lower</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
<span class="p">[</span><span class="n">DEBUG</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">compile</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">39</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">CLIF</span><span class="w"> </span><span class="n">blocks</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lower</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">1140</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">lower</span><span class="w"> </span><span class="n">function</span><span class="p">:</span><span class="w"> </span><span class="nc">function</span><span class="w"> </span><span class="n">u0</span><span class="p">:</span><span class="mi">0</span><span class="p">(</span><span class="kt">i32</span><span class="p">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="kt">i32</span><span class="w"> </span><span class="nc">tail</span><span class="w"> </span><span class="p">{</span>
<span class="n">block0</span><span class="p">(</span><span class="n">v0</span><span class="p">:</span><span class="w"> </span><span class="kt">i32</span><span class="p">):</span>
<span class="w">    </span><span class="nc">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iconst</span><span class="p">.</span><span class="kt">i32</span><span class="w"> </span><span class="mi">37</span>
<span class="w">    </span><span class="n">v2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iadd</span><span class="w"> </span><span class="n">v1</span><span class="p">,</span><span class="w"> </span><span class="n">v0</span><span class="w">  </span><span class="p">;</span><span class="w"> </span><span class="n">v1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">37</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">v2</span>
<span class="p">}</span>

<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">776</span><span class="w"> </span><span class="n">lower_clif_block</span><span class="p">:</span><span class="w"> </span><span class="nc">block</span><span class="w"> </span><span class="n">block0</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="n">inst2</span><span class="w"> </span><span class="p">(</span><span class="n">MultiAry</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">opcode</span><span class="p">:</span><span class="w"> </span><span class="nc">Return</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">:</span><span class="w"> </span><span class="nc">EntityList</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">index</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="n">unused</span><span class="p">:</span><span class="w"> </span><span class="nc">PhantomData</span><span class="o">&lt;</span><span class="n">cranelift_codegen</span><span class="p">::</span><span class="n">ir</span><span class="p">::</span><span class="n">entities</span><span class="p">::</span><span class="n">Value</span><span class="o">&gt;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">})</span><span class="w"> </span><span class="n">is_branch</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="n">side_effect</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="n">value_needed</span><span class="w"> </span><span class="kc">false</span>
<span class="p">[</span><span class="n">TRACE</span><span class="p">]</span><span class="w"> </span><span class="n">cranelift</span><span class="o">/</span><span class="n">codegen</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">machinst</span><span class="o">/</span><span class="n">lower</span><span class="p">.</span><span class="n">rs</span><span class="p">:</span><span class="mi">810</span><span class="w"> </span><span class="n">lowering</span><span class="p">:</span><span class="w"> </span><span class="nc">inst</span><span class="w"> </span><span class="n">inst2</span><span class="p">:</span><span class="w"> </span><span class="nc">return</span><span class="w"> </span><span class="n">v2</span>


<span class="n">Synchronous</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mh">0x000000014043BF50</span>


<span class="n">Synchronous</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="mh">0x000000014043BF50</span>
</code></pre></div>
<p>It seems the example crashes in UEFI. May need help figuring this problem out.</p>
</blockquote>



<a name="574341712"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574341712" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574341712">(Feb 17 2026 at 17:02)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915913601">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>@RossComputerGuy thanks for the PR.</p>
<p>Unfortunately I don't think there is much that we can go on regarding your observed crash. The quoted log shows normal compilation followed by "synchronous exception", nothing in-between, and you've told us nothing about your environment or what you're trying to do.</p>
<p>I can make some educated guesses -- e.g., have you set pages to have execute permission? Is that a thing in your environment (do you have paging enabled)? Are you properly managing other requirements of the ABI (e.g. stack alignment)? Does the code that you're compiling have any bugs that could result in a bad memory access?</p>
<p>Basically, for an actionable bug report, we need: (i) information about what you're trying to do; (ii) information about what happened; (iii) information about why you believe something else should have happened; (iv) whatever investigation you've done that narrows down where this divergence is occurring, ideally pointing in the direction of a Cranelift issue. Thanks!</p>
</blockquote>



<a name="574342402"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574342402" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574342402">(Feb 17 2026 at 17:04)</a>:</h4>
<p>RossComputerGuy <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915923405">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>I did narrow it down to this block:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/f6418005cd282f32840483709c448cf2e8ac808a/cranelift/jit/examples/jit-minimal.rs#L30-L54">https://github.com/bytecodealliance/wasmtime/blob/f6418005cd282f32840483709c448cf2e8ac808a/cranelift/jit/examples/jit-minimal.rs#L30-L54</a></p>
<p>I'll see if I can get more details.</p>
</blockquote>



<a name="574343771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574343771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574343771">(Feb 17 2026 at 17:08)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915940746">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>OK, thanks. That's a function body that returns <code>x + 37</code>, and it compiles to reasonable (and correct) machine code in Cranelift. I suspect there is something wrong with your execution environment in general, which is why I was asking about execute permissions, stack alignment, paging, and all of that.</p>
</blockquote>



<a name="574344383"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574344383" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574344383">(Feb 17 2026 at 17:11)</a>:</h4>
<p>RossComputerGuy <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915953120">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>Yes but isn't that block not even executing anything? I thought that's just doing codegen. I do have <code>region</code> set up to work with paging which hopefully is correct. The problem is UEFI doesn't really have stack traces so it's hard to figure out what is going awry.</p>
</blockquote>



<a name="574345015"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574345015" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574345015">(Feb 17 2026 at 17:14)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915965848">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>target-lexicon's default_calling_convention method doesn't look like it handles uefi. Maybe that is the issue? On x86_64 uefi uses the windows callconv.</p>
</blockquote>



<a name="574345287"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574345287" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574345287">(Feb 17 2026 at 17:15)</a>:</h4>
<p>RossComputerGuy <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915971170">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>That is correct, however this is aarch64 that I am compiling for.</p>
</blockquote>



<a name="574345452"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574345452" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574345452">(Feb 17 2026 at 17:15)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915974512">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>Ah, I see, I thought you meant you had narrowed down the exception to the code produced by that IR emission sequence. You mean literally there is a crash in that IR emission sequence...</p>
<p>Do you have a panic handler that can print a panic message at least?</p>
</blockquote>



<a name="574345908"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312602%20Fix%20UEFI%20compilation%20for%20cranelift-jit/near/574345908" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312602.20Fix.20UEFI.20compilation.20for.20cranelift-jit.html#574345908">(Feb 17 2026 at 17:18)</a>:</h4>
<p>RossComputerGuy <a href="https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915984302">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12602">PR #12602</a>:</p>
<blockquote>
<p>Yeah no, it doesn't even get to the point of emitting the binary. I haven't attached a panic handler but I will. I know there's also a UEFI debug protocol which should allow me to attach into the interrupt vector so hopefully I can catch exceptions and deal with them.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>