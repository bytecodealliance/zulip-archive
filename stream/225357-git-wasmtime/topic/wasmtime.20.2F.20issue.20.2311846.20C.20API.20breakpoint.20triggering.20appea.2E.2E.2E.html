<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11846 C API breakpoint triggering appea... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html">wasmtime / issue #11846 C API breakpoint triggering appea...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="544593816"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311846%20C%20API%20breakpoint%20triggering%20appea.../near/544593816" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html#544593816">(Oct 13 2025 at 16:58)</a>:</h4>
<p>adv-sw opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11846">issue #11846</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Repro: <a href="http://advance-software.com/misc/test_breakpoint.zip">http://advance-software.com/misc/test_breakpoint.zip</a>)</p>
<h3>Steps to Reproduce - Windows</h3>
<ol>
<li>
<p>Build your wasmtime.exe &amp; put it in repro dist subdirectory. <br>
(there's a 0 length placeholder there right now)</p>
</li>
<li>
<p>Then [command line] : </p>
<blockquote>
<p>lldb -- .\wasmtime.exe  -D debug-info --invoke app_init .\breakable.wasm<br>
(lldb)  b app_init<br>
(lldb) r<br>
&amp; that works (for me)</p>
</blockquote>
</li>
<li>
<p>Build the c-api test in host, using visual studio 2022 -  a couple of hardwired paths in there to change but its mostly portable. resulting .exe should end up in repro "dist" subdir, overwriting the 0 length placeholder.</p>
</li>
<li>
<p>Verify it works (from dist) : </p>
<blockquote>
<p>.\test_wasmtime_debug_api.exe .\breakable.wasm<br>
Should get result : 42</p>
</blockquote>
</li>
<li>
<p>Next, run under lldb : </p>
<blockquote>
<p>lldb -- .\test_wasmtime_debug_api.exe .\breakable.wasm<br>
(lldb) b app_init<br>
(lldb) r<br>
breakpoint not hit. </p>
</blockquote>
</li>
</ol>
<p>that's the bug.</p>
<p>What do you expect to happen?</p>
<p>breakpoint should be hit when running breakable.wasm from both wasmtime &amp; c API test.</p>
<p>What actually happens? </p>
<p>breakpoint  hit when running breakable.wasm from wasmtime, not hit from c API test.</p>
<h3>Versions and Environment</h3>
<p>wasmtime trunk</p>
<p>lldb version 20.1.7</p>
<p>Wasmtime version or commit: TODO</p>
<p>Operating system: windows 11 - latest.</p>
<p>Architecture: x64-84</p>
<h3>Extra Info</h3>
<p>Source to breakable.wasm is in wasm subdir - its trivial.</p>
<p>Tried c-api buiit static &amp; dynamic. static my preference as less sensitive to where .dll's are on Windows which has caused system to be unreliable in the past. Neither works.</p>
<p>Difference (guess) : wasmtime likely uses wasmtime API, the C API test uses the wasm API.</p>
</blockquote>



<a name="544593817"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311846%20C%20API%20breakpoint%20triggering%20appea.../near/544593817" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html#544593817">(Oct 13 2025 at 16:58)</a>:</h4>
<p><a href="https://github.com/adv-sw">adv-sw</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11846">Issue #11846</a>.</p>



<a name="544594114"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311846%20C%20API%20breakpoint%20triggering%20appea.../near/544594114" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html#544594114">(Oct 13 2025 at 17:00)</a>:</h4>
<p>adv-sw edited <a href="https://github.com/bytecodealliance/wasmtime/issues/11846">issue #11846</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Repro: <a href="http://advance-software.com/misc/test_breakpoint.zip">http://advance-software.com/misc/test_breakpoint.zip</a>)</p>
<h3>Steps to Reproduce - Windows</h3>
<ol>
<li>
<p>Build your wasmtime.exe &amp; put it in repro dist subdirectory. <br>
(there's a 0 length placeholder there right now)</p>
</li>
<li>
<p>Then [command line] : </p>
<blockquote>
<p>lldb -- .\wasmtime.exe  -D debug-info --invoke app_init .\breakable.wasm<br>
(lldb)  b app_init<br>
(lldb) r<br>
&amp; that works (for me)</p>
</blockquote>
</li>
<li>
<p>Build the c-api test in host, using visual studio 2022 -  a couple of hardwired paths in there to change but its mostly portable. resulting .exe should end up in repro "dist" subdir, overwriting the 0 length placeholder.</p>
</li>
<li>
<p>Verify it works (from dist) : </p>
<blockquote>
<p>.\test_wasmtime_debug_api.exe .\breakable.wasm<br>
Should get result : 42</p>
</blockquote>
</li>
<li>
<p>Next, run under lldb : </p>
<blockquote>
<p>lldb -- .\test_wasmtime_debug_api.exe .\breakable.wasm<br>
(lldb) b app_init<br>
(lldb) r<br>
breakpoint not hit. </p>
</blockquote>
</li>
</ol>
<p>that's the bug.</p>
<p>What do you expect to happen?</p>
<p>breakpoint should be hit when running breakable.wasm from both wasmtime &amp; c API test.</p>
<p>What actually happens? </p>
<p>breakpoint  hit when running breakable.wasm from wasmtime, not hit from c API test.</p>
<h3>Versions and Environment</h3>
<p>lldb version 20.1.7</p>
<p>Wasmtime version or commit: trunk</p>
<p>Operating system: windows 11 - latest.</p>
<p>Architecture: x64-84</p>
<h3>Extra Info</h3>
<p>Source to breakable.wasm is in wasm subdir - its trivial.</p>
<p>Tried c-api buiit static &amp; dynamic. static my preference as less sensitive to where .dll's are on Windows which has caused system to be unreliable in the past. Neither works.</p>
<p>Difference (guess) : wasmtime likely uses wasmtime API, the C API test uses the wasm API.</p>
</blockquote>



<a name="544595785"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311846%20C%20API%20breakpoint%20triggering%20appea.../near/544595785" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html#544595785">(Oct 13 2025 at 17:13)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasmtime:debugging label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11846">Issue #11846</a>.</p>



<a name="544694599"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311846%20C%20API%20breakpoint%20triggering%20appea.../near/544694599" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html#544694599">(Oct 14 2025 at 08:59)</a>:</h4>
<p>adv-sw closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11846">issue #11846</a>:</p>
<blockquote>
<h3>Test Case</h3>
<p>Repro: <a href="http://advance-software.com/misc/test_breakpoint.zip">http://advance-software.com/misc/test_breakpoint.zip</a>)</p>
<h3>Steps to Reproduce - Windows</h3>
<ol>
<li>
<p>Build your wasmtime.exe &amp; put it in repro dist subdirectory. <br>
(there's a 0 length placeholder there right now)</p>
</li>
<li>
<p>Then [command line] : </p>
<blockquote>
<p>lldb -- .\wasmtime.exe  -D debug-info --invoke app_init .\breakable.wasm<br>
(lldb)  b app_init<br>
(lldb) r<br>
&amp; that works (for me)</p>
</blockquote>
</li>
<li>
<p>Build the c-api test in host, using visual studio 2022 -  a couple of hardwired paths in there to change but its mostly portable. resulting .exe should end up in repro "dist" subdir, overwriting the 0 length placeholder.</p>
</li>
<li>
<p>Verify it works (from dist) : </p>
<blockquote>
<p>.\test_wasmtime_debug_api.exe .\breakable.wasm<br>
Should get result : 42</p>
</blockquote>
</li>
<li>
<p>Next, run under lldb : </p>
<blockquote>
<p>lldb -- .\test_wasmtime_debug_api.exe .\breakable.wasm<br>
(lldb) b app_init<br>
(lldb) r<br>
breakpoint not hit. </p>
</blockquote>
</li>
</ol>
<p>that's the bug.</p>
<p>What do you expect to happen?</p>
<p>breakpoint should be hit when running breakable.wasm from both wasmtime &amp; c API test.</p>
<p>What actually happens? </p>
<p>breakpoint  hit when running breakable.wasm from wasmtime, not hit from c API test.</p>
<h3>Versions and Environment</h3>
<p>lldb version 20.1.7</p>
<p>Wasmtime version or commit: trunk</p>
<p>Operating system: windows 11 - latest.</p>
<p>Architecture: x64-84</p>
<h3>Extra Info</h3>
<p>Source to breakable.wasm is in wasm subdir - its trivial.</p>
<p>Tried c-api buiit static &amp; dynamic. static my preference as less sensitive to where .dll's are on Windows which has caused system to be unreliable in the past. Neither works.</p>
<p>Difference (guess) : wasmtime likely uses wasmtime API, the C API test uses the wasm API.</p>
</blockquote>



<a name="544694603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311846%20C%20API%20breakpoint%20triggering%20appea.../near/544694603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311846.20C.20API.20breakpoint.20triggering.20appea.2E.2E.2E.html#544694603">(Oct 14 2025 at 08:59)</a>:</h4>
<p>adv-sw <a href="https://github.com/bytecodealliance/wasmtime/issues/11846#issuecomment-3400809240">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11846">issue #11846</a>:</p>
<blockquote>
<p>Fixed. Cause was missing conf.h</p>
<p>Fixed by manually recreating from <a href="http://conf.h.in">conf.h.in</a> with all current options enabled.</p>
<p><a href="https://github.com/bytecodealliance/wasmtime/issues/11849">https://github.com/bytecodealliance/wasmtime/issues/11849</a></p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>