<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11778 WASIp3 request#set-scheme is more... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311778.20WASIp3.20request.23set-scheme.20is.20more.2E.2E.2E.html">wasmtime / issue #11778 WASIp3 request#set-scheme is more...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="542674513"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311778%20WASIp3%20request%23set-scheme%20is%20more.../near/542674513" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311778.20WASIp3.20request.23set-scheme.20is.20more.2E.2E.2E.html#542674513">(Oct 02 2025 at 07:47)</a>:</h4>
<p>wingo opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11778">issue #11778</a>:</p>
<blockquote>
<p><a href="https://www.rfc-editor.org/rfc/rfc3986#section-3.1">RFC 3986 §3.1</a>, referred to by RFC 9110, specifies that URI schemes should begin with an ascii alphabetic character and then continue the same but also allowing <code>+</code>, <code>-</code>, numbers and <code>.</code>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">      </span><span class="n">scheme</span><span class="w">      </span><span class="o">=</span><span class="w"> </span><span class="n">ALPHA</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="w"> </span><span class="n">ALPHA</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">DIGIT</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"+"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"-"</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">"."</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>
<p>And in Wasmtime, we have the expected behavior in that <code>request.set_method</code> allows the productions above and rejects most others, but it is more lenient in that it allows schemes that begin with a character in <code>+-.0123456789~</code>.  Probably that needs tightening up.</p>
</blockquote>



<a name="542674514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311778%20WASIp3%20request%23set-scheme%20is%20more.../near/542674514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311778.20WASIp3.20request.23set-scheme.20is.20more.2E.2E.2E.html#542674514">(Oct 02 2025 at 07:47)</a>:</h4>
<p><a href="https://github.com/wingo">wingo</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11778">Issue #11778</a>.</p>



<a name="542674863"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311778%20WASIp3%20request%23set-scheme%20is%20more.../near/542674863" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311778.20WASIp3.20request.23set-scheme.20is.20more.2E.2E.2E.html#542674863">(Oct 02 2025 at 07:49)</a>:</h4>
<p>wingo <a href="https://github.com/bytecodealliance/wasmtime/issues/11778#issuecomment-3359677161">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11778">issue #11778</a>:</p>
<blockquote>
<p>We should probably also eagerly lower-case "other" schemes, i.e. that <code>get-method</code> after <code>set-method("A")</code> should return <code>"a"</code>:</p>
<blockquote>
<p>Although schemes are case-insensitive, the canonical form is lowercase and documents that specify schemes must do so with lowercase letters.  An implementation should accept uppercase letters as equivalent to lowercase in scheme names e.g., allow "HTTP" as well as "http") for the sake of robustness but should only produce lowercase scheme names for consistency.</p>
</blockquote>
</blockquote>



<a name="542756008"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311778%20WASIp3%20request%23set-scheme%20is%20more.../near/542756008" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311778.20WASIp3.20request.23set-scheme.20is.20more.2E.2E.2E.html#542756008">(Oct 02 2025 at 14:26)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasi:impl label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11778">Issue #11778</a>.</p>



<a name="546725791"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311778%20WASIp3%20request%23set-scheme%20is%20more.../near/546725791" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311778.20WASIp3.20request.23set-scheme.20is.20more.2E.2E.2E.html#546725791">(Oct 23 2025 at 16:37)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasi:spec label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11778">Issue #11778</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>