<html>
<head><meta charset="utf-8"><title>wasmtime / issue #10138 Wasmtime rust application crashed... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html">wasmtime / issue #10138 Wasmtime rust application crashed...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="496382014"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496382014" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496382014">(Jan 28 2025 at 17:00)</a>:</h4>
<p><a href="https://github.com/ggjjj">ggjjj</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">Issue #10138</a>.</p>



<a name="496382017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496382017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496382017">(Jan 28 2025 at 17:00)</a>:</h4>
<p>ggjjj opened <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<p>Create a rust application with wasmtime engine and enable debug flag. <br>
    let mut engine_config = EngineConfig::default();<br>
    engine_config.debug_info(true);</p>
<h3>Expected Results</h3>
<p>Breakpoint continues successfully instead of crashing of application</p>
<h3>Actual Results</h3>
<p>Segfault into</p>
<p>__attribute__((weak, noinline))<br>
#endif<br>
    void __jit_debug_register_code() {<br>
#ifndef CFG_TARGET_OS_windows<br>
  __asm__("");<br>
#endif<br>
}</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 25.0.2</p>
<p>Operating system:  Ubuntu</p>
<p>Architecture: x86_64</p>
<h3>Extra Info</h3>
<p>Anything else you'd like to add?<br>
</p>
</blockquote>



<a name="496382380"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496382380" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496382380">(Jan 28 2025 at 17:01)</a>:</h4>
<p>ggjjj edited <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<p>Create a rust application with wasmtime engine and enable debug flag. <br>
    let mut engine_config = EngineConfig::default();<br>
    engine_config.debug_info(true);<br>
     // create link and insert_components <br>
    let pre_instance = linker.instantiate_pre(&amp;module)?;</p>
<p>Note: Cannot share the complete code here want to understand why the sedfaults and crashes are occuring</p>
<h3>Expected Results</h3>
<p>Breakpoint with codeLLDB continues successfully instead of crashing of application</p>
<h3>Actual Results</h3>
<p>Segfault into</p>
<p>__attribute__((weak, noinline))<br>
#endif<br>
    void __jit_debug_register_code() {<br>
#ifndef CFG_TARGET_OS_windows<br>
  __asm__("");<br>
#endif<br>
}</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 25.0.2</p>
<p>Operating system:  Ubuntu</p>
<p>Architecture: x86_64</p>
</blockquote>



<a name="496390308"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496390308" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496390308">(Jan 28 2025 at 17:42)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2619669156">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>That function shouldn't be able to segfault. It literally does nothing but return. That function only exists for the debugger to set a breakpoint at and when the breakpoint gets hit have the debugger update it's cache of debuginfo for jitted functions.</p>
<p>Can you show the actual crash message lldb shows?</p>
</blockquote>



<a name="496406355"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496406355" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496406355">(Jan 28 2025 at 19:09)</a>:</h4>
<p>alexcrichton edited <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<p>Create a rust application with wasmtime engine and enable debug flag. </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">engine_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EngineConfig</span><span class="p">::</span><span class="n">default</span><span class="p">();</span>
<span class="w">    </span><span class="n">engine_config</span><span class="p">.</span><span class="n">debug_info</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">     </span><span class="c1">// create link and insert_components</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">pre_instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linker</span><span class="p">.</span><span class="n">instantiate_pre</span><span class="p">(</span><span class="o">&amp;</span><span class="n">module</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
</code></pre></div>
<p>Note: Cannot share the complete code here want to understand why the sedfaults and crashes are occuring</p>
<h3>Expected Results</h3>
<p>Breakpoint with codeLLDB continues successfully instead of crashing of application</p>
<h3>Actual Results</h3>
<p>Segfault into</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="p">#</span><span class="n">endif</span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="p">#</span><span class="n">endif</span>
<span class="p">}</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 25.0.2</p>
<p>Operating system:  Ubuntu</p>
<p>Architecture: x86_64</p>
</blockquote>



<a name="496680981"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496680981" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496680981">(Jan 30 2025 at 02:21)</a>:</h4>
<p>ggjjj edited <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<p>Create a rust application with wasmtime engine and enable debug flag. </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">engine_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EngineConfig</span><span class="p">::</span><span class="n">default</span><span class="p">();</span>
<span class="w">    </span><span class="n">engine_config</span><span class="p">.</span><span class="n">debug_info</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">     </span><span class="c1">// create link and insert_components</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">pre_instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linker</span><span class="p">.</span><span class="n">instantiate_pre</span><span class="p">(</span><span class="o">&amp;</span><span class="n">module</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
</code></pre></div>
<p>Note: Cannot share the complete code here want to understand why the sedfaults and crashes are occuring</p>
<h3>Expected Results</h3>
<p>Breakpoint with codeLLDB continues successfully instead of crashing of application</p>
<h3>Actual Results</h3>
<p>Segfault into</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="p">#</span><span class="n">endif</span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="p">#</span><span class="n">endif</span>
<span class="p">}</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 25.0.2</p>
<p>Operating system:  Ubuntu</p>
<p>Architecture: x86_64</p>
<p>Code LLDB extension version : 1.11.3</p>
<p>lldb version with LLVM - 19.1.7</p>
</blockquote>



<a name="496681309"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496681309" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496681309">(Jan 30 2025 at 02:23)</a>:</h4>
<p>ggjjj <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623375333">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>Here is some more data. I updated the versions of LLDB and codeLLDB used in the issue description.</p>
<p>When I launch the rust app which loads multiple modules as a graph, we get the following error</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">lldb</span><span class="o">-</span><span class="mi">19</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="n">Current</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="o">**</span><span class="n">settings</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">plugin</span><span class="p">.</span><span class="n">jit</span><span class="o">-</span><span class="n">loader</span><span class="p">.</span><span class="n">gdb</span><span class="p">.</span><span class="n">enable</span><span class="w"> </span><span class="n">on</span><span class="o">**</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">launched</span><span class="p">:</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.700</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.821</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module1</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">53.328</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">appr</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module2</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">56.869</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module3</span><span class="p">:</span><span class="nc">v1</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">stopped</span>
<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="p">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">'</span><span class="na">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">SIGTERM</span>
<span class="w">   </span><span class="n">frame</span><span class="w"> </span><span class="p">#</span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x0000555556aac844</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="err">`</span><span class="n">__jit_debug_register_code</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">92</span><span class="p">:</span><span class="mi">38</span>
<span class="w">  </span><span class="mi">89</span><span class="w">   </span><span class="c1">// `asm` statement.</span>
<span class="w">  </span><span class="mi">90</span><span class="w">   </span><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="w">  </span><span class="mi">91</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
<span class="p">-&gt;</span><span class="w"> </span><span class="mi">92</span><span class="w">       </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="mi">93</span><span class="w">   </span><span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="mi">94</span><span class="w">     </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="w">  </span><span class="mi">95</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
</code></pre></div>
</blockquote>



<a name="496681478"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496681478" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496681478">(Jan 30 2025 at 02:25)</a>:</h4>
<p>ggjjj <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623377556">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p><strong>Call stack image while doing visual breakpoint debugging</strong></p>
<p>![Image](<a href="https://github.com/user-attachments/assets/c41eaf92-5b11-49b2-99fa-3df0e4d56cbf">https://github.com/user-attachments/assets/c41eaf92-5b11-49b2-99fa-3df0e4d56cbf</a>)</p>
<p><strong>crash message in debug console</strong></p>
<p>![Image](<a href="https://github.com/user-attachments/assets/44397d62-56d4-4a61-b664-9faf4cfc7291">https://github.com/user-attachments/assets/44397d62-56d4-4a61-b664-9faf4cfc7291</a>)</p>
<p><strong>segfault in the code</strong></p>
<p>![Image](<a href="https://github.com/user-attachments/assets/74363367-aa01-4dc6-b3a7-184c3a0310bb">https://github.com/user-attachments/assets/74363367-aa01-4dc6-b3a7-184c3a0310bb</a>)</p>
</blockquote>



<a name="496681548"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496681548" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496681548">(Jan 30 2025 at 02:26)</a>:</h4>
<p>ggjjj edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623375333">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>Here is some more data. I updated the versions of LLDB and codeLLDB used in the issue description.</p>
<p>When I launch the rust app which loads multiple modules as a graph, we get the following error when launched lldb via terminal.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">lldb</span><span class="o">-</span><span class="mi">19</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="n">Current</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="o">**</span><span class="n">settings</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">plugin</span><span class="p">.</span><span class="n">jit</span><span class="o">-</span><span class="n">loader</span><span class="p">.</span><span class="n">gdb</span><span class="p">.</span><span class="n">enable</span><span class="w"> </span><span class="n">on</span><span class="o">**</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">launched</span><span class="p">:</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.700</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.821</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module1</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">53.328</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">appr</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module2</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">56.869</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module3</span><span class="p">:</span><span class="nc">v1</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">stopped</span>
<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="p">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">'</span><span class="na">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">SIGTERM</span>
<span class="w">   </span><span class="n">frame</span><span class="w"> </span><span class="p">#</span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x0000555556aac844</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="err">`</span><span class="n">__jit_debug_register_code</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">92</span><span class="p">:</span><span class="mi">38</span>
<span class="w">  </span><span class="mi">89</span><span class="w">   </span><span class="c1">// `asm` statement.</span>
<span class="w">  </span><span class="mi">90</span><span class="w">   </span><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="w">  </span><span class="mi">91</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
<span class="p">-&gt;</span><span class="w"> </span><span class="mi">92</span><span class="w">       </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="mi">93</span><span class="w">   </span><span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="mi">94</span><span class="w">     </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="w">  </span><span class="mi">95</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
</code></pre></div>
</blockquote>



<a name="496681662"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496681662" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496681662">(Jan 30 2025 at 02:27)</a>:</h4>
<p>ggjjj edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623375333">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>Here is some more data. I updated the versions of LLDB and codeLLDB used in the issue description and also enabled this flag <strong>settings set plugin.jit-loader.gdb.enable on</strong></p>
<p>When I launch the rust app which loads multiple modules as a graph, we get the following error when launched lldb via terminal.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">lldb</span><span class="o">-</span><span class="mi">19</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="n">Current</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">plugin</span><span class="p">.</span><span class="n">jit</span><span class="o">-</span><span class="n">loader</span><span class="p">.</span><span class="n">gdb</span><span class="p">.</span><span class="n">enable</span><span class="w"> </span><span class="n">on</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">launched</span><span class="p">:</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.700</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.821</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module1</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">53.328</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">appr</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module2</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">56.869</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module3</span><span class="p">:</span><span class="nc">v1</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">stopped</span>
<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="p">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">'</span><span class="na">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">SIGTERM</span>
<span class="w">   </span><span class="n">frame</span><span class="w"> </span><span class="p">#</span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x0000555556aac844</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="err">`</span><span class="n">__jit_debug_register_code</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">92</span><span class="p">:</span><span class="mi">38</span>
<span class="w">  </span><span class="mi">89</span><span class="w">   </span><span class="c1">// `asm` statement.</span>
<span class="w">  </span><span class="mi">90</span><span class="w">   </span><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="w">  </span><span class="mi">91</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
<span class="p">-&gt;</span><span class="w"> </span><span class="mi">92</span><span class="w">       </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="mi">93</span><span class="w">   </span><span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="mi">94</span><span class="w">     </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="w">  </span><span class="mi">95</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
</code></pre></div>
</blockquote>



<a name="496681672"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496681672" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496681672">(Jan 30 2025 at 02:28)</a>:</h4>
<p>ggjjj edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623375333">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>Here is some more data. I updated the versions of LLDB and codeLLDB used in the issue description and also enabled this flag <code>settings set plugin.jit-loader.gdb.enable on</code></p>
<p>When I launch the rust app which loads multiple modules as a graph, we get the following error when launched lldb via terminal.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w"> </span><span class="n">lldb</span><span class="o">-</span><span class="mi">19</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="n">Current</span><span class="w"> </span><span class="n">executable</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">).</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">settings</span><span class="w"> </span><span class="n">set</span><span class="w"> </span><span class="n">plugin</span><span class="p">.</span><span class="n">jit</span><span class="o">-</span><span class="n">loader</span><span class="p">.</span><span class="n">gdb</span><span class="p">.</span><span class="n">enable</span><span class="w"> </span><span class="n">on</span>
<span class="p">(</span><span class="n">lldb</span><span class="p">)</span><span class="w"> </span><span class="n">run</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">launched</span><span class="p">:</span><span class="w"> </span><span class="o">'</span><span class="p">.</span><span class="o">/</span><span class="n">runtime</span><span class="o">/</span><span class="n">target</span><span class="o">/</span><span class="n">debug</span><span class="o">/</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="w"> </span><span class="p">(</span><span class="n">x86_64</span><span class="p">)</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.700</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">starting</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">49.821</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module1</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">53.328</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">appr</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module2</span><span class="p">:</span><span class="nc">v1</span>
<span class="o">&lt;</span><span class="mi">6</span><span class="o">&gt;</span><span class="mi">2025</span><span class="o">-</span><span class="mi">01</span><span class="o">-</span><span class="mi">30</span><span class="n">T00</span><span class="p">:</span><span class="mi">29</span><span class="p">:</span><span class="mf">56.869</span><span class="n">Z</span><span class="w"> </span><span class="n">codespaces</span><span class="o">-</span><span class="n">a5dc2f</span><span class="w"> </span><span class="p">[</span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="o">@</span><span class="mi">311</span><span class="w"> </span><span class="n">tid</span><span class="o">=</span><span class="s">"25109"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">pre_instantiating</span><span class="w"> </span><span class="n">and</span><span class="w"> </span><span class="n">inserting</span><span class="w"> </span><span class="n">component</span><span class="w"> </span><span class="n">module3</span><span class="p">:</span><span class="nc">v1</span>
<span class="n">Process</span><span class="w"> </span><span class="mi">25109</span><span class="w"> </span><span class="n">stopped</span>
<span class="o">*</span><span class="w"> </span><span class="n">thread</span><span class="w"> </span><span class="p">#</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">'</span><span class="na">host</span><span class="o">-</span><span class="n">app</span><span class="o">'</span><span class="p">,</span><span class="w"> </span><span class="n">stop</span><span class="w"> </span><span class="n">reason</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">signal</span><span class="w"> </span><span class="n">SIGTERM</span>
<span class="w">   </span><span class="n">frame</span><span class="w"> </span><span class="p">#</span><span class="mi">0</span><span class="p">:</span><span class="w"> </span><span class="mh">0x0000555556aac844</span><span class="w"> </span><span class="n">host</span><span class="o">-</span><span class="n">app</span><span class="err">`</span><span class="n">__jit_debug_register_code</span><span class="w"> </span><span class="n">at</span><span class="w"> </span><span class="n">helpers</span><span class="p">.</span><span class="n">c</span><span class="p">:</span><span class="mi">92</span><span class="p">:</span><span class="mi">38</span>
<span class="w">  </span><span class="mi">89</span><span class="w">   </span><span class="c1">// `asm` statement.</span>
<span class="w">  </span><span class="mi">90</span><span class="w">   </span><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="w">  </span><span class="mi">91</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
<span class="p">-&gt;</span><span class="w"> </span><span class="mi">92</span><span class="w">       </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="mi">93</span><span class="w">   </span><span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="mi">94</span><span class="w">     </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="w">  </span><span class="mi">95</span><span class="w">   </span><span class="p">#</span><span class="n">endif</span>
</code></pre></div>
</blockquote>



<a name="496686159"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496686159" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496686159">(Jan 30 2025 at 03:24)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623434143">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p><code>SIGTERM</code> is not a segfault; that usually indicates that something external to the process has killed it. Can you tell us anything more about your embedding/surrounding application or the environment it runs in? Otherwise, all we have to go on is "call to empty function ends in SIGTERM" which unfortunately doesn't point in any useful direction (as far as I can tell at least!).</p>
</blockquote>



<a name="496686390"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/496686390" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#496686390">(Jan 30 2025 at 03:27)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2623437026">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>Actually, going off of what @bjorn3 said above</p>
<blockquote>
<p>That function only exists for the debugger to set a breakpoint at and when the breakpoint gets hit have the debugger update it's cache of debuginfo for jitted functions.</p>
</blockquote>
<p>Perhaps this is working as intended: lldb does, indeed, stop with a signal at that function. You're observing internal debugging plumbing in that case. Can you continue (<code>c</code>) to further execution?</p>
</blockquote>



<a name="497111869"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/497111869" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#497111869">(Feb 01 2025 at 00:31)</a>:</h4>
<p>ggjjj <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2628619000">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<blockquote>
<p>Actually, going off of what <a href="https://github.com/bjorn3">@bjorn3</a> said above</p>
<blockquote>
<p>That function only exists for the debugger to set a breakpoint at and when the breakpoint gets hit have the debugger update it's cache of debuginfo for jitted functions.</p>
</blockquote>
<p>Perhaps this is working as intended: lldb does, indeed, stop with a signal at that function. You're observing internal debugging plumbing in that case. Can you continue (<code>c</code>) to further execution?</p>
</blockquote>
<p>I tried this and the process exits after sometime. I tried to set breakpoint on exits and aborts to see what causes the exit but nothing hits the breakpoint on exit. so Not sure what is making the process to exit</p>
</blockquote>



<a name="497111999"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/497111999" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#497111999">(Feb 01 2025 at 00:32)</a>:</h4>
<p>ggjjj <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2628620030">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<blockquote>
<p><code>SIGTERM</code> is not a segfault; that usually indicates that something external to the process has killed it. Can you tell us anything more about your embedding/surrounding application or the environment it runs in? Otherwise, all we have to go on is "call to empty function ends in SIGTERM" which unfortunately doesn't point in any useful direction (as far as I can tell at least!).</p>
</blockquote>
<p>what can cause <code>SIGTERM</code> ? is there a way to find from call stack? The application is in rust which configures the wasmtime in debug mode and loads three wasm component models </p>
</blockquote>



<a name="497112040"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/497112040" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#497112040">(Feb 01 2025 at 00:33)</a>:</h4>
<p>ggjjj edited a <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2628620030">comment</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<blockquote>
<p><code>SIGTERM</code> is not a segfault; that usually indicates that something external to the process has killed it. Can you tell us anything more about your embedding/surrounding application or the environment it runs in? Otherwise, all we have to go on is "call to empty function ends in SIGTERM" which unfortunately doesn't point in any useful direction (as far as I can tell at least!).</p>
</blockquote>
<p>what can cause <code>SIGTERM</code> ? is there a way to find from call stack? The application is in rust which configures the wasmtime in debug mode and loads three wasm component models </p>
<p>Call stack image updated</p>
<p>![Image](<a href="https://github.com/user-attachments/assets/091a1cfd-7c73-4534-a93f-9273d3d8649d">https://github.com/user-attachments/assets/091a1cfd-7c73-4534-a93f-9273d3d8649d</a>)</p>
</blockquote>



<a name="497121152"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/497121152" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#497121152">(Feb 01 2025 at 02:36)</a>:</h4>
<p>cfallin <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2628705749">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<blockquote>
<p>what can cause SIGTERM ? is there a way to find from call stack?</p>
</blockquote>
<p>In general, the <code>kill()</code> syscall; another process needs to send it, Wasmtime will not send it to itself or perform any action that causes it to be sent. (To quote <a href="https://unix.stackexchange.com/questions/10231/when-does-the-system-send-a-sigterm-to-a-process">this StackOverflow answer</a>, "If a process receives SIGTERM, some other process sent that signal.") I'm not sure about determining where it was sent from -- in your broader application maybe there is something you could <code>strace</code>, or maybe you could use eBPF kprobes and instrument the <code>kill</code> syscall to print a log message. I'm afraid I can't help too much more without knowing more about your application, sorry.</p>
</blockquote>



<a name="516495510"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/516495510" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#516495510">(May 06 2025 at 17:12)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<h3>Steps to Reproduce</h3>
<p>Create a rust application with wasmtime engine and enable debug flag. </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">engine_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EngineConfig</span><span class="p">::</span><span class="n">default</span><span class="p">();</span>
<span class="w">    </span><span class="n">engine_config</span><span class="p">.</span><span class="n">debug_info</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="w">     </span><span class="c1">// create link and insert_components</span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">pre_instance</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">linker</span><span class="p">.</span><span class="n">instantiate_pre</span><span class="p">(</span><span class="o">&amp;</span><span class="n">module</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>
</code></pre></div>
<p>Note: Cannot share the complete code here want to understand why the sedfaults and crashes are occuring</p>
<h3>Expected Results</h3>
<p>Breakpoint with codeLLDB continues successfully instead of crashing of application</p>
<h3>Actual Results</h3>
<p>Segfault into</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="w"> </span><span class="n">noinline</span><span class="p">))</span>
<span class="p">#</span><span class="n">endif</span>
<span class="w">    </span><span class="n">void</span><span class="w"> </span><span class="n">__jit_debug_register_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="p">#</span><span class="n">ifndef</span><span class="w"> </span><span class="n">CFG_TARGET_OS_windows</span>
<span class="w">  </span><span class="n">__asm__</span><span class="p">(</span><span class="s">""</span><span class="p">);</span>
<span class="p">#</span><span class="n">endif</span>
<span class="p">}</span>
</code></pre></div>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 25.0.2</p>
<p>Operating system:  Ubuntu</p>
<p>Architecture: x86_64</p>
<p>Code LLDB extension version : 1.11.3</p>
<p>lldb version with LLVM - 19.1.7</p>
</blockquote>



<a name="516495514"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2310138%20Wasmtime%20rust%20application%20crashed.../near/516495514" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2310138.20Wasmtime.20rust.20application.20crashed.2E.2E.2E.html#516495514">(May 06 2025 at 17:12)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/10138#issuecomment-2855337708">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/10138">issue #10138</a>:</p>
<blockquote>
<p>I think this has more-or-less been answered as not an issue on the Wasmtime side, so I'm going to close this.</p>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>