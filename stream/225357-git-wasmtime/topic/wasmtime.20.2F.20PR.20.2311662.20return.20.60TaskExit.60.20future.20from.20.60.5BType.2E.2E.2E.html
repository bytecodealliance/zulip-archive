<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11662 return `TaskExit` future from `[Type... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html">wasmtime / PR #11662 return `TaskExit` future from `[Type...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="538541176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538541176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538541176">(Sep 09 2025 at 22:24)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538541177"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538541177" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538541177">(Sep 09 2025 at 22:24)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538541178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538541178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538541178">(Sep 09 2025 at 22:24)</a>:</h4>
<p>dicej opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a> from <code>dicej:call-concurrent-task-exit</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>In addition to returning the value produced by the callee, these functions now also return a <code>TaskExit</code> future which resolves once the subtask (and any transitively-created subtasks) have exited.  This partially addresses #11600; the next step will be to add a <code>wasmtime-wit-bindgen</code> option to expose the <code>TaskExit</code> value in generated bindings.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="538541578"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538541578" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538541578">(Sep 09 2025 at 22:27)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538542027"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538542027" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538542027">(Sep 09 2025 at 22:32)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538542922"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538542922" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538542922">(Sep 09 2025 at 22:42)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538543164"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538543164" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538543164">(Sep 09 2025 at 22:45)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538680418"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538680418" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538680418">(Sep 10 2025 at 15:22)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11662#pullrequestreview-3206695382">PR review</a>.</p>



<a name="538680419"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538680419" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538680419">(Sep 10 2025 at 15:22)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11662#discussion_r2337127309">PR review comment</a>:</p>
<blockquote>
<p>Thinking more on this, two points:</p>
<ul>
<li>One is that I'm starting to think we may want to actually skip the type parameter here and instead have <code>async fn TaskExit::block(self, impl AsAccessor) -&gt; Result&lt;()&gt;</code> or something like that. It helps simplify bindings-generated signatures as well as the signatures of <code>call_*</code> above since we can keep <code>impl AsAccessor</code> instead of threading around the <code>A</code> type parameter.</li>
<li>Another is that while I have no doubt "just add a channel" is the easiest way to fix this I think we'll want to avoid that in the future. In addition to the cost of the allocation/management of the Arcs (two layers, one on the sender and one in the channel itself) I feel like channels end up causing more problems than they solve in the long run. For now though it's fine but I think we'll want to have internal documentation along the lines of "it's acknowledged that the accessor isn't actually used in the <code>block</code> implementation but it's here for hypothetical use in the future</li>
</ul>
</blockquote>



<a name="538693151"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538693151" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538693151">(Sep 10 2025 at 16:21)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538693181"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538693181" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538693181">(Sep 10 2025 at 16:21)</a>:</h4>
<p>dicej has enabled auto merge for <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<a name="538700229"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311662%20return%20%60TaskExit%60%20future%20from%20%60%5BType.../near/538700229" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311662.20return.20.60TaskExit.60.20future.20from.20.60.5BType.2E.2E.2E.html#538700229">(Sep 10 2025 at 17:00)</a>:</h4>
<p>dicej merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11662">PR #11662</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>