<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11123 [DO NOT MERGE] update `component-mod... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html">wasmtime / PR #11123 [DO NOT MERGE] update `component-mod...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="525557011"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/525557011" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#525557011">(Jun 24 2025 at 16:38)</a>:</h4>
<p>dicej opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a> from <code>dicej:cm-async-plumbing</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This pulls in the latest Component Model async ABI code from the<br>
<code>wasip3-prototyping</code> repo, including various API refactors and spec updates.</p>
<p>This includes all the changes to the <code>wasmtime</code> crate from <code>wasip3-prototyping</code><br>
_except_ that the <code>concurrent</code> submodule and child submodules contain only<br>
non-functional stubs.  For that reason, and the fact that<br>
e.g. <code>Func::call_async</code> is now implemented in terms of <code>Func::call_concurrent</code>,<br>
most of the component model tests are failing.  This commit is not meant to be<br>
merged as-is; a follow-up commit (to be PR'd separately) will contain the real<br>
<code>concurrent</code> implementation, at which point the tests will pass again.  I'm<br>
splitting these into separate PRs to make review easier.</p>
<p>Note that this builds on<br>
<a href="https://github.com/bytecodealliance/wasmtime/pull/11114">https://github.com/bytecodealliance/wasmtime/pull/11114</a>; only the second commit<br>
is new.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="525557132"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/525557132" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#525557132">(Jun 24 2025 at 16:39)</a>:</h4>
<p>dicej edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>:</p>
<blockquote>
<p>This pulls in the latest Component Model async ABI code from the <code>wasip3-prototyping</code> repo, including various API refactors and spec updates.</p>
<p>This includes all the changes to the <code>wasmtime</code> crate from <code>wasip3-prototyping</code> _except_ that the <code>concurrent</code> submodule and child submodules contain only non-functional stubs.  For that reason, and the fact that<br>
e.g. <code>Func::call_async</code> is now implemented in terms of <code>Func::call_concurrent</code>, most of the component model tests are failing.  This commit is not meant to be merged as-is; a follow-up commit (to be PR'd separately) will contain the real<br>
<code>concurrent</code> implementation, at which point the tests will pass again.  I'm splitting these into separate PRs to make review easier.</p>
<p>Note that this builds on <a href="https://github.com/bytecodealliance/wasmtime/pull/11114">https://github.com/bytecodealliance/wasmtime/pull/11114</a>; only the second commit is new.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="525557162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/525557162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#525557162">(Jun 24 2025 at 16:39)</a>:</h4>
<p>dicej edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>:</p>
<blockquote>
<p>This pulls in the latest Component Model async ABI code from the <code>wasip3-prototyping</code> repo, including various API refactors and spec updates.</p>
<p>This includes all the changes to the <code>wasmtime</code> crate from <code>wasip3-prototyping</code> _except_ that the <code>concurrent</code> submodule and child submodules contain only non-functional stubs.  For that reason, and the fact that e.g. <code>Func::call_async</code> is now implemented in terms of <code>Func::call_concurrent</code>, most of the component model tests are failing.  This commit is not meant to be merged as-is; a follow-up commit (to be PR'd separately) will contain the real<br>
<code>concurrent</code> implementation, at which point the tests will pass again.  I'm splitting these into separate PRs to make review easier.</p>
<p>Note that this builds on <a href="https://github.com/bytecodealliance/wasmtime/pull/11114">https://github.com/bytecodealliance/wasmtime/pull/11114</a>; only the second commit is new.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="525557185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/525557185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#525557185">(Jun 24 2025 at 16:39)</a>:</h4>
<p>dicej edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>:</p>
<blockquote>
<p>This pulls in the latest Component Model async ABI code from the <code>wasip3-prototyping</code> repo, including various API refactors and spec updates.</p>
<p>This includes all the changes to the <code>wasmtime</code> crate from <code>wasip3-prototyping</code> _except_ that the <code>concurrent</code> submodule and child submodules contain only non-functional stubs.  For that reason, and the fact that e.g. <code>Func::call_async</code> is now implemented in terms of <code>Func::call_concurrent</code>, most of the component model tests are failing.  This commit is not meant to be merged as-is; a follow-up commit (to be PR'd separately) will contain the real <code>concurrent</code> implementation, at which point the tests will pass again.  I'm splitting these into separate PRs to make review easier.</p>
<p>Note that this builds on <a href="https://github.com/bytecodealliance/wasmtime/pull/11114">https://github.com/bytecodealliance/wasmtime/pull/11114</a>; only the second commit is new.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="525575102"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/525575102" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#525575102">(Jun 24 2025 at 18:38)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="525989545"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/525989545" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#525989545">(Jun 26 2025 at 22:48)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526103994"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526103994" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526103994">(Jun 27 2025 at 15:04)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526104595"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526104595" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526104595">(Jun 27 2025 at 15:07)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526104872"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526104872" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526104872">(Jun 27 2025 at 15:08)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526110462"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526110462" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526110462">(Jun 27 2025 at 15:40)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526112324"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526112324" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526112324">(Jun 27 2025 at 15:53)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526117455"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117455" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117455">(Jun 27 2025 at 16:23)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#pullrequestreview-2966962144">PR review</a>:</p>
<blockquote>
<p>These are a few comments so far but I've yet to really get into the meat of this. FWIW I also rebased <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">https://github.com/bytecodealliance/wasmtime/pull/11127</a> on top of some of the local changes I've made, mostly to ensure that the changes don't break the full build.</p>
</blockquote>



<a name="526117456"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117456" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117456">(Jun 27 2025 at 16:23)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#discussion_r2172262019">PR review comment</a>:</p>
<blockquote>
<p>Did this not end up getting stored in <code>Options</code>?</p>
</blockquote>



<a name="526117457"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117457" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117457">(Jun 27 2025 at 16:23)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#discussion_r2172269742">PR review comment</a>:</p>
<blockquote>
<p>Are these TODOs still applicable? If so mind converting these to doc comments?</p>
</blockquote>



<a name="526117458"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117458" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117458">(Jun 27 2025 at 16:23)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#discussion_r2172303333">PR review comment</a>:</p>
<blockquote>
<p>We'll want to smith this module a bit, mind moving this to a <code>concurrent_disabled.rs</code> or similar? Otherwise the big-ish changes we'll want here are:</p>
<ul>
<li>Types in this module should somehow contain an uninhabited enum. We've got <code>crate::runtime::Uninhabited</code> for this purpose and that'll ensure that we never accidentally create these types.</li>
<li>Ideally there are no <code>panic!</code>s in this module. If anything takes <code>self</code> you can <code>match self.uninhabited {}</code> which is a compile-time assertion that it's not possible to be in that method.</li>
<li>For other methods that are panicking they'll want to return an error/trap, at least where possible.</li>
</ul>
<p>Basically the worry is that if we have substantial #[cfg]'d-out functionality it's basically never tested in this repo so we want to make sure it's as simple as it can be an "obviously correct" for its situation. In that sense my worry here is that I don't want anything to accidentally get into a situation where a runtime panic can happen. In theory many of these methods are dynamically unreachable but it's hard to infer that just from looking at this module, so I'd feel safer transforming things to returning an error to at least know that if we are wrong and these functions are reachable that they'll return some sort of error instead of panicking.</p>
</blockquote>



<a name="526117664"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117664" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117664">(Jun 27 2025 at 16:25)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#issuecomment-3013629810">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>:</p>
<blockquote>
<p>This may not be plausible as I haven't gotten into the "meat" yet, but I'd like to pursue ideally the ability to land this PR as-is independent of <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">https://github.com/bytecodealliance/wasmtime/pull/11127</a>. Would it be possible to avoid changing <code>call_async</code> in this PR and <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">https://github.com/bytecodealliance/wasmtime/pull/11127</a> would be where the implementation changes?</p>
</blockquote>



<a name="526117985"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117985" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117985">(Jun 27 2025 at 16:27)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#pullrequestreview-2967178163">PR review</a>.</p>



<a name="526117988"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526117988" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526117988">(Jun 27 2025 at 16:27)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#discussion_r2172399938">PR review comment</a>:</p>
<blockquote>
<p>Sorry, I don't think I understand the question.  If you're wondering why the field name is prefixed with an underscore, it's because it won't be used until the full async implementation is merged.  I can add a comment and/or <code>#[cfg(allow(dead_code))]</code> if that helps.</p>
</blockquote>



<a name="526118118"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526118118" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526118118">(Jun 27 2025 at 16:28)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#pullrequestreview-2967181422">PR review</a>.</p>



<a name="526118119"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526118119" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526118119">(Jun 27 2025 at 16:28)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#discussion_r2172402539">PR review comment</a>:</p>
<blockquote>
<p>Yes, they're still applicable.  I'll convert them.</p>
</blockquote>



<a name="526137643"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526137643" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526137643">(Jun 27 2025 at 18:49)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#issuecomment-3014069866">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing", "wasmtime:api", "wasmtime:c-api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="526147400"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526147400" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526147400">(Jun 27 2025 at 20:19)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#pullrequestreview-2967890762">PR review</a>.</p>



<a name="526147401"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526147401" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526147401">(Jun 27 2025 at 20:19)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#discussion_r2172820755">PR review comment</a>:</p>
<blockquote>
<p>I started changing the panics into compile-time assertions or traps, but I quickly realized that in almost all cases the code really should be unreachable, since any attempt to use CM async features should have failed at <code>wasmparser</code> validation time.  It feels misleading to me to trap in those cases, because it implies that the code _is_ reachable, i.e. that a guest would somehow sneak use of an async feature past the validator.</p>
<p>I'll go ahead and switch to traps, but also add comments indicating that it's our (Wasmtime's) fault if they're hit, not the guest's.</p>
</blockquote>



<a name="526148856"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526148856" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526148856">(Jun 27 2025 at 20:31)</a>:</h4>
<p>dicej <a href="https://github.com/bytecodealliance/wasmtime/pull/11123#issuecomment-3014287299">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>:</p>
<blockquote>
<blockquote>
<p>Would it be possible to avoid changing <code>call_async</code> in this PR and #11127 would be where the implementation changes?</p>
</blockquote>
<p>I'll take a shot at it.</p>
</blockquote>



<a name="526150097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526150097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526150097">(Jun 27 2025 at 20:44)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<a name="526152083"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311123%20%5BDO%20NOT%20MERGE%5D%20update%20%60component-mod.../near/526152083" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311123.20.5BDO.20NOT.20MERGE.5D.20update.20.60component-mod.2E.2E.2E.html#526152083">(Jun 27 2025 at 21:04)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11123">PR #11123</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>