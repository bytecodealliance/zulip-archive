<html>
<head><meta charset="utf-8"><title>wasmtime / issue #12166 component-model-async: validation... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html">wasmtime / issue #12166 component-model-async: validation...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="563933973"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/563933973" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#563933973">(Dec 15 2025 at 22:05)</a>:</h4>
<p>lukewagner opened <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>According to <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/CanonicalABI.md#-canon-streamreadwrite">these rules</a> <code>(canon stream.read (stream) (core func))</code> should validate without a <code>memory</code> immediate.  <code>(canon future.read (future) (core func))</code> successfully validates, so this seems specific to streams.  <code>.wast</code> test will be forthcoming in <a href="https://github.com/WebAssembly/component-model/pull/580">CM/#580</a></p>
</blockquote>



<a name="563937181"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/563937181" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#563937181">(Dec 15 2025 at 22:27)</a>:</h4>
<p>lukewagner edited <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>According to <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/CanonicalABI.md#-canon-streamreadwrite">these rules</a> <code>(canon stream.read (stream) (core func))</code> should validate without a <code>memory</code> immediate.  <code>(canon future.read (future) (core func))</code> successfully validates, so this seems specific to streams.  Test added as <a href="https://github.com/WebAssembly/component-model/blob/main/test/async/same-component-stream-future.wast">test/async/same-component-stream-future.wast</a> in CM repo (fails validation, should succeed).</p>
</blockquote>



<a name="564515847"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/564515847" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#564515847">(Dec 18 2025 at 17:10)</a>:</h4>
<p><a href="https://github.com/fitzgen">fitzgen</a> added the wasm-proposal:component-model-async label to <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">Issue #12166</a>.</p>



<a name="564564434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/564564434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#564564434">(Dec 18 2025 at 20:46)</a>:</h4>
<p>dicej <a href="https://github.com/bytecodealliance/wasmtime/issues/12166#issuecomment-3672156297">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>This should be addressed by <a href="https://github.com/bytecodealliance/wasm-tools/pull/2406">https://github.com/bytecodealliance/wasm-tools/pull/2406</a></p>
</blockquote>



<a name="564566533"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/564566533" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#564566533">(Dec 18 2025 at 21:00)</a>:</h4>
<p>lukewagner <a href="https://github.com/bytecodealliance/wasmtime/issues/12166#issuecomment-3672196634">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>Thanks!  Happy to close this now if that's appropriate.</p>
</blockquote>



<a name="564566956"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/564566956" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#564566956">(Dec 18 2025 at 21:02)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12166#issuecomment-3672206021">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>Oh we can take care of closing, but I'd like to leave this open until we update wasm-tools here to track that. I also think we'll want tests to ensure that wasmtime is ready for compilation/runtime if the memory option isn't present (I'd naively expect it to unwrap it today)</p>
</blockquote>



<a name="564567877"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/564567877" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#564567877">(Dec 18 2025 at 21:09)</a>:</h4>
<p>dicej <a href="https://github.com/bytecodealliance/wasmtime/issues/12166#issuecomment-3672228292">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<blockquote>
<p>I also think we'll want tests to ensure that wasmtime is ready for compilation/runtime if the memory option isn't present (I'd naively expect it to unwrap it today)</p>
</blockquote>
<p>We might get lucky there since streams and futures share a lot of code, and the memory option has already been optional for futures for a while.  We'll see.</p>
</blockquote>



<a name="566846175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/566846175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#566846175">(Jan 08 2026 at 00:14)</a>:</h4>
<p>alexcrichton closed <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>According to <a href="https://github.com/WebAssembly/component-model/blob/main/design/mvp/CanonicalABI.md#-canon-streamreadwrite">these rules</a> <code>(canon stream.read (stream) (core func))</code> should validate without a <code>memory</code> immediate.  <code>(canon future.read (future) (core func))</code> successfully validates, so this seems specific to streams.  Test added as <a href="https://github.com/WebAssembly/component-model/blob/main/test/async/same-component-stream-future.wast">test/async/same-component-stream-future.wast</a> in CM repo (fails validation, should succeed).</p>
</blockquote>



<a name="566846176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312166%20component-model-async%3A%20validation.../near/566846176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312166.20component-model-async.3A.20validation.2E.2E.2E.html#566846176">(Jan 08 2026 at 00:14)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12166#issuecomment-3721351392">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12166">issue #12166</a>:</p>
<blockquote>
<p>Updated/tested in <a href="https://github.com/bytecodealliance/wasmtime/pull/12254">https://github.com/bytecodealliance/wasmtime/pull/12254</a></p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>