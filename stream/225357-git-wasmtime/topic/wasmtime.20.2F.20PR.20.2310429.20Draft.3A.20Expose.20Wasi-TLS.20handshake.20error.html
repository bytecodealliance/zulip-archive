<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10429 Draft: Expose Wasi-TLS handshake error · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html">wasmtime / PR #10429 Draft: Expose Wasi-TLS handshake error</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="506992729"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/506992729" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#506992729">(Mar 20 2025 at 14:40)</a>:</h4>
<p>badeend edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10429">PR #10429</a>.</p>



<a name="507033175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507033175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507033175">(Mar 20 2025 at 17:15)</a>:</h4>
<p>jsturtevant submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#pullrequestreview-2703479112">PR review</a>.</p>



<a name="507033177"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507033177" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507033177">(Mar 20 2025 at 17:15)</a>:</h4>
<p>jsturtevant created <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#discussion_r2006074910">PR review comment</a>:</p>
<blockquote>
<p>should we be return some information about the stream being closed with this error?</p>
</blockquote>



<a name="507033178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507033178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507033178">(Mar 20 2025 at 17:15)</a>:</h4>
<p>jsturtevant created <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#discussion_r2006083093">PR review comment</a>:</p>
<blockquote>
<p>do we need logic to clean up these table entries?</p>
</blockquote>



<a name="507036531"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507036531" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507036531">(Mar 20 2025 at 17:31)</a>:</h4>
<p>badeend submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#pullrequestreview-2703578248">PR review</a>.</p>



<a name="507036532"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507036532" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507036532">(Mar 20 2025 at 17:31)</a>:</h4>
<p>badeend created <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#discussion_r2006136754">PR review comment</a>:</p>
<blockquote>
<p>See <a href="https://github.com/WebAssembly/wasi-tls/pull/10">https://github.com/WebAssembly/wasi-tls/pull/10</a></p>
</blockquote>



<a name="507037553"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507037553" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507037553">(Mar 20 2025 at 17:35)</a>:</h4>
<p>badeend submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#pullrequestreview-2703590283">PR review</a>.</p>



<a name="507037559"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507037559" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507037559">(Mar 20 2025 at 17:35)</a>:</h4>
<p>badeend created <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#discussion_r2006143929">PR review comment</a>:</p>
<blockquote>
<p>You mean the table entries for the newly created <code>wasi:io/error</code> resources? The ownership of these resource is transferred into the guest one line below it. It's then the responsibility of the guest to drop it properly like any other resource. When the guest drops that resource, wasmtime removes it from the table in <a href="https://github.com/bytecodealliance/wasmtime/blob/main/crates/wasi-io/src/impls.rs#L114-L116">https://github.com/bytecodealliance/wasmtime/blob/main/crates/wasi-io/src/impls.rs#L114-L116</a></p>
</blockquote>



<a name="507043680"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507043680" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507043680">(Mar 20 2025 at 18:04)</a>:</h4>
<p>jsturtevant submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#pullrequestreview-2703662690">PR review</a>.</p>



<a name="507043681"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507043681" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507043681">(Mar 20 2025 at 18:04)</a>:</h4>
<p>jsturtevant created <a href="https://github.com/bytecodealliance/wasmtime/pull/10429#discussion_r2006187900">PR review comment</a>:</p>
<blockquote>
<p>thanks for the explanation</p>
</blockquote>



<a name="507062792"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507062792" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507062792">(Mar 20 2025 at 19:52)</a>:</h4>
<p>badeend updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10429">PR #10429</a>.</p>



<a name="507063097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507063097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507063097">(Mar 20 2025 at 19:54)</a>:</h4>
<p>badeend edited <a href="https://github.com/bytecodealliance/wasmtime/pull/10429">PR #10429</a>:</p>
<blockquote>
<p>Implements <a href="https://github.com/WebAssembly/wasi-tls/pull/10">https://github.com/WebAssembly/wasi-tls/pull/10</a></p>
<p>And added a test case to verify the error information is indeed reaching the guest.</p>
<p>~PR is still draft, because above issue needs to be merged first. But feel free to review the design &amp; implementation already.~</p>
<p>CC @jsturtevant </p>
</blockquote>



<a name="507063219"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507063219" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507063219">(Mar 20 2025 at 19:54)</a>:</h4>
<p><strong>badeend</strong> has marked <a href="https://github.com/bytecodealliance/wasmtime/pull/10429">PR #10429</a> as ready for review.</p>



<a name="507063220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310429%20Draft%3A%20Expose%20Wasi-TLS%20handshake%20error/near/507063220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310429.20Draft.3A.20Expose.20Wasi-TLS.20handshake.20error.html#507063220">(Mar 20 2025 at 19:54)</a>:</h4>
<p><strong>badeend</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10429">PR #10429</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>