<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10518 Plumb initial translation of `thread... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html">wasmtime / PR #10518 Plumb initial translation of `thread...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="509806226"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806226" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806226">(Apr 02 2025 at 22:41)</a>:</h4>
<p>abrown opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10518">PR #10518</a> from <code>abrown:set-indirect-libcall</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This change in no way implements actual spawning of threads; it simply translates the CM builtin <code>thread.spawn_indirect</code> to invoke a real Wasmtime libcall that does some preliminary checks and panics. It is useful, though, to (1) exercise all the new table-related functions and (2) show the limits of Wasmtime's current state: we will need a way of interacting with shared functions and possibly some form of shared store.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="509806631"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806631" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806631">(Apr 02 2025 at 22:44)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2737758337">PR review</a>.</p>



<a name="509806632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806632">(Apr 02 2025 at 22:44)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2025700703">PR review comment</a>:</p>
<blockquote>
<p>@alexcrichton, I feel like there is some way to actually materialize this <code>ty</code> index into a real type so we can check that the <code>funcref</code> has the expected type of the thread start function but I don't see it.</p>
</blockquote>



<a name="509806758"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806758" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806758">(Apr 02 2025 at 22:45)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2737759902">PR review</a>.</p>



<a name="509806759"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806759" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806759">(Apr 02 2025 at 22:45)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2025701809">PR review comment</a>:</p>
<blockquote>
<p>E.g., is <code>TypeFuncIndex</code> the right type to be passing around here?</p>
</blockquote>



<a name="509806948"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806948" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806948">(Apr 02 2025 at 22:47)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2737761692">PR review</a>.</p>



<a name="509806950"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509806950" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509806950">(Apr 02 2025 at 22:47)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2025703154">PR review comment</a>:</p>
<blockquote>
<p>For 64-bit WebAssembly, we probably want <code>element</code> (and probably even <code>context</code>) to be a <code>u64</code>; how are we handling the 32-bit/64-bit distinction elsewhere?</p>
</blockquote>



<a name="509807154"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509807154" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509807154">(Apr 02 2025 at 22:49)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2737763219">PR review</a>.</p>



<a name="509807155"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/509807155" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#509807155">(Apr 02 2025 at 22:49)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2025704253">PR review comment</a>:</p>
<blockquote>
<p>It's unclear to me which parts should live up at this level and which should live in <code>ComponentInstance::thread_spawn_indirect</code>. Any suggestions?</p>
</blockquote>



<a name="510755274"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/510755274" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#510755274">(Apr 07 2025 at 19:55)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2747945014">PR review</a>:</p>
<blockquote>
<p>This seems reasonable enough to me with some tweaks, but I do think we'll want a test for this. I don't think there's any viable path to testing the runtime bits at this time so I'd prefer to leave the implementation body of the intrinsic as <code>todo!()</code> for now, but testing at least the compile-time/Cranelift parts seems reasonable with a test that just compiles something but does nothing with the result.</p>
</blockquote>



<a name="510755275"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/510755275" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#510755275">(Apr 07 2025 at 19:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2031908844">PR review comment</a>:</p>
<blockquote>
<p><code>TypeFuncIndex</code> is fine yeah, and the way to pass it to runtime would basically be to embed the constant in the generated code itself. Runtime would then be responsible for translating <code>TypeFuncIndex</code> into a <code>VMSharedTypeIndex</code> which can be done through various translation tables similar to how core wasm does it</p>
</blockquote>



<a name="510755276"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/510755276" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#510755276">(Apr 07 2025 at 19:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2031917501">PR review comment</a>:</p>
<blockquote>
<p>Currently it's basically not-handled, Wasmtime <a href="https://github.com/bytecodealliance/wasmtime/issues/4311">doesn't support 64-bit components at all</a></p>
</blockquote>



<a name="510755278"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/510755278" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#510755278">(Apr 07 2025 at 19:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2031914709">PR review comment</a>:</p>
<blockquote>
<p>Stylistic an up-to-you,  but generally "simple things" and "ABI things" in this file and meat elsewhere. So e.g. converting <code>u32</code> to more typed things here, but leaving the meat of the implementation elsewhere is fine.</p>
</blockquote>



<a name="510755279"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/510755279" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#510755279">(Apr 07 2025 at 19:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2031915939">PR review comment</a>:</p>
<blockquote>
<p>This is a disconnect between runtime and compile-time where here the u32 is the offset in the VMContext but at runtime it's interpreted as <code>RuntimeTableIndex</code></p>
</blockquote>



<a name="510755280"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/510755280" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#510755280">(Apr 07 2025 at 19:55)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2031918594">PR review comment</a>:</p>
<blockquote>
<p>FWIW technically some and/or most of this is going to go away. Lazy initialization is probably not going to be possible with shared tables.</p>
</blockquote>



<a name="511507698"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511507698" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511507698">(Apr 10 2025 at 21:03)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10518">PR #10518</a>.</p>



<a name="511511574"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511511574" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511511574">(Apr 10 2025 at 21:32)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2758473373">PR review</a>.</p>



<a name="511511575"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511511575" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511511575">(Apr 10 2025 at 21:32)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2038372172">PR review comment</a>:</p>
<blockquote>
<p>Ok, but actually the index being used is coming from a core function type. E.g., in the tests, for <code>(core type $start (shared (func (param $context i32))))</code>, we use <code>$start</code> as the index passed through to this canonical built-in. I see how to retrieve a <code>TypeFunc</code> using <code>ComponentTypes</code> but I don't think that's what we actually want here &mdash; that would be a component type. Is <code>TypeFuncIndex</code> the right index to be using here? How do we get to its core type (presumably backed by <code>VMSharedTypeIndex</code>)?</p>
</blockquote>



<a name="511511934"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511511934" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511511934">(Apr 10 2025 at 21:35)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10518">PR #10518</a>.</p>



<a name="511512586"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511512586" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511512586">(Apr 10 2025 at 21:40)</a>:</h4>
<p>abrown submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2758486507">PR review</a>.</p>



<a name="511512588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511512588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511512588">(Apr 10 2025 at 21:40)</a>:</h4>
<p>abrown created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2038380240">PR review comment</a>:</p>
<blockquote>
<p>Yup. What I'm trying to do is plumb through enough to (a) show how this is currently possible using unshared tables (while still immediately failing) and (b) create a use site here so that future refactoring considers this usage. I was thinking that tests could even check for the initial behavior that _is_ functional today: i.e., we can't run a shared function, but at least we can check that using the wrong index results in a failure.</p>
</blockquote>



<a name="511702837"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511702837" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511702837">(Apr 11 2025 at 17:35)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2761093084">PR review</a>.</p>



<a name="511702839"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511702839" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511702839">(Apr 11 2025 at 17:35)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2040008164">PR review comment</a>:</p>
<blockquote>
<p>Agreed yeah we don't want to deal with <code>TypeFunc</code> here as the type-check should be a single comparison ideally, via <code>VMShareTypeIndex</code>. Converting from <code>TypeFuncIndex</code> will require a table of some form stored in <code>VMComponentContext</code> which is filled in on initialization. That happens for core modules, for example, where basically <code>VMContext</code> has a table from <code>TypeFuncIndex</code> to <code>VMSharedTypeIndex</code></p>
</blockquote>



<a name="511703085"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511703085" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511703085">(Apr 11 2025 at 17:36)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#pullrequestreview-2761096212">PR review</a>.</p>



<a name="511703086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/511703086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#511703086">(Apr 11 2025 at 17:36)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/10518#discussion_r2040009748">PR review comment</a>:</p>
<blockquote>
<p>I don't think it's possible to hit this at runtime though? All components would fail validation unless they use shared tables, and shared talbes aren't implemented in Wasmtime, so it's not possible to instantiate any component using this intrinsic?</p>
</blockquote>



<a name="512417037"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310518%20Plumb%20initial%20translation%20of%20%60thread.../near/512417037" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310518.20Plumb.20initial.20translation.20of.20.60thread.2E.2E.2E.html#512417037">(Apr 15 2025 at 21:32)</a>:</h4>
<p>abrown updated <a href="https://github.com/bytecodealliance/wasmtime/pull/10518">PR #10518</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>