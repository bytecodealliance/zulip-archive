<html>
<head><meta charset="utf-8"><title>wasmtime / PR #10057 Add Pulley support to wasmtime_test ... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310057.20Add.20Pulley.20support.20to.20wasmtime_test.20.2E.2E.2E.html">wasmtime / PR #10057 Add Pulley support to wasmtime_test ...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="494969328"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310057%20Add%20Pulley%20support%20to%20wasmtime_test%20.../near/494969328" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310057.20Add.20Pulley.20support.20to.20wasmtime_test.20.2E.2E.2E.html#494969328">(Jan 21 2025 at 04:55)</a>:</h4>
<p>irrio opened <a href="https://github.com/bytecodealliance/wasmtime/pull/10057">PR #10057</a> from <code>irrio:wasmtime-test-macro-pulley</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This PR updates the <code>#[wasmtime_test]</code> macro to add support for Pulley.</p>
<p>This was one of the last remaining items in the Pulley TODO List #9747, I figured I'd try to knock it out.</p>
<p>I've renamed the <code>Cranelift</code> compilation strategy to <code>CraneliftNative</code> in order to disambiguate it from <code>CraneliftPulley</code> and to directly match the symbol in the <code>Compiler</code> enum.</p>
<p><code>CraneliftPulley</code> is now included by default in the compilation strategies used by <code>#[wasmtime_test]</code>.</p>
<p>In order to support the tests that are targeting Winch specifically, I've added an <code>only(...)</code> specifier. So instead of <code>#[wasmtime_test(strategies(not(Cranelift)))]</code> it would be <code>#[wasmtime_test(strategies(only(Winch)))]</code>.</p>
<p>Now that the <code>wrap_and_typed_i31ref</code> test was running multiple times with different strategies, the <code>static HITS</code> counter was leaking state into the other test and causing things to fail. I moved the counter into the Store to get rid of the static variable.</p>
</blockquote>



<a name="494969329"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310057%20Add%20Pulley%20support%20to%20wasmtime_test%20.../near/494969329" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310057.20Add.20Pulley.20support.20to.20wasmtime_test.20.2E.2E.2E.html#494969329">(Jan 21 2025 at 04:55)</a>:</h4>
<p><strong>irrio</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10057">PR #10057</a>.</p>



<a name="494969330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310057%20Add%20Pulley%20support%20to%20wasmtime_test%20.../near/494969330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310057.20Add.20Pulley.20support.20to.20wasmtime_test.20.2E.2E.2E.html#494969330">(Jan 21 2025 at 04:55)</a>:</h4>
<p><strong>irrio</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/10057">PR #10057</a>.</p>



<a name="495115072"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310057%20Add%20Pulley%20support%20to%20wasmtime_test%20.../near/495115072" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310057.20Add.20Pulley.20support.20to.20wasmtime_test.20.2E.2E.2E.html#495115072">(Jan 21 2025 at 18:01)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/10057#pullrequestreview-2565358998">PR review</a>:</p>
<blockquote>
<p>Thanks for this!</p>
</blockquote>



<a name="495119230"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2310057%20Add%20Pulley%20support%20to%20wasmtime_test%20.../near/495119230" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2310057.20Add.20Pulley.20support.20to.20wasmtime_test.20.2E.2E.2E.html#495119230">(Jan 21 2025 at 18:24)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/10057">PR #10057</a>.</p>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>