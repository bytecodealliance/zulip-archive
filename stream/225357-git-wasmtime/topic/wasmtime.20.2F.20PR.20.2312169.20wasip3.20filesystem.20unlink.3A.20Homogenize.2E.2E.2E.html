<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12169 wasip3 filesystem unlink: Homogenize... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html">wasmtime / PR #12169 wasip3 filesystem unlink: Homogenize...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="563997588"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/563997588" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#563997588">(Dec 16 2025 at 09:31)</a>:</h4>
<p>wingo opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a> from <code>wingo:canonicalize-unlink-dir-errors</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>When attempting to unlink a directory, POSIX specifies the result should be EPERM, but only MacOS implements that behavior.  Paper over the differences.  Also turn EACCESS into EPERM, to paper over Windows differences.</p>
<p>Related to <a href="https://github.com/WebAssembly/WASI/pull/852">https://github.com/WebAssembly/WASI/pull/852</a> and <a href="https://github.com/WebAssembly/wasi-testsuite/pull/137">https://github.com/WebAssembly/wasi-testsuite/pull/137</a>.</p>
<p>POSIX 2008 reference: <a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/unlink.html">https://pubs.opengroup.org/onlinepubs/9699919799/functions/unlink.html</a></p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="563997591"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/563997591" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#563997591">(Dec 16 2025 at 09:31)</a>:</h4>
<p><strong>wingo</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers">wasmtime-wasi-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a>.</p>



<a name="563998262"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/563998262" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#563998262">(Dec 16 2025 at 09:34)</a>:</h4>
<p>wingo updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a>.</p>



<a name="564004822"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/564004822" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#564004822">(Dec 16 2025 at 10:08)</a>:</h4>
<p>wingo <a href="https://github.com/bytecodealliance/wasmtime/pull/12169#issuecomment-3659765964">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a>:</p>
<blockquote>
<p>Seems this fails wasip1 tests which do want to assert that the error is <code>ISDIR</code>.  Probably best to move this workaround to just the p3 bindings, because I don't want to touch p1 or p2.</p>
</blockquote>



<a name="564057555"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/564057555" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#564057555">(Dec 16 2025 at 14:39)</a>:</h4>
<p>wingo updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a>.</p>



<a name="564060796"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/564060796" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#564060796">(Dec 16 2025 at 14:53)</a>:</h4>
<p>wingo updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a>.</p>



<a name="564535257"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/564535257" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#564535257">(Dec 18 2025 at 18:44)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12169#pullrequestreview-3594524306">PR review</a>:</p>
<blockquote>
<p>Thanks! Could this have a test here as well? Also, could this be done <a href="https://github.com/bytecodealliance/wasmtime/blob/23b2fe3f4cf0d1484a767e9467321d955c27549b/crates/wasi/src/filesystem.rs#L1128-L1137">around here</a> to apply to wasip{1,2,3} uniformly instead of just wasip3?</p>
</blockquote>



<a name="564715997"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312169%20wasip3%20filesystem%20unlink%3A%20Homogenize.../near/564715997" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312169.20wasip3.20filesystem.20unlink.3A.20Homogenize.2E.2E.2E.html#564715997">(Dec 19 2025 at 15:01)</a>:</h4>
<p>wingo <a href="https://github.com/bytecodealliance/wasmtime/pull/12169#issuecomment-3675399996">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12169">PR #12169</a>:</p>
<blockquote>
<p>I originally did it on <code>filesystem.rs</code>, but then that caused the existing p1/p2 tests to fail as they were expecting <code>EISDIR</code>, so I moved it to p3 only.  Sure, can do a test here, will be after the holidays tho :)</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>