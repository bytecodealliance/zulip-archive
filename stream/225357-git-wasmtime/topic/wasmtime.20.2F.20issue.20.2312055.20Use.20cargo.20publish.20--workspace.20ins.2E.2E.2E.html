<html>
<head><meta charset="utf-8"><title>wasmtime / issue #12055 Use cargo publish --workspace ins... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312055.20Use.20cargo.20publish.20--workspace.20ins.2E.2E.2E.html">wasmtime / issue #12055 Use cargo publish --workspace ins...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="558463070"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312055%20Use%20cargo%20publish%20--workspace%20ins.../near/558463070" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312055.20Use.20cargo.20publish.20--workspace.20ins.2E.2E.2E.html#558463070">(Nov 20 2025 at 15:39)</a>:</h4>
<p>bjorn3 opened <a href="https://github.com/bytecodealliance/wasmtime/issues/12055">issue #12055</a>:</p>
<blockquote>
<h4>Feature</h4>
<p>See title</p>
<h4>Benefit</h4>
<p>This would allow getting rid of <a href="https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs">https://github.com/bytecodealliance/wasmtime/blob/main/scripts/publish.rs</a> and in particular having to explicitly specify which packages to publish and in what order. It should also make publishing faster by publishing multiple crates at once and only waiting for the publish to be propagated when publishing a crate that has a just published crate as dependency.</p>
<h4>Implementation</h4>
<p>TODO: Do you have an implementation plan, and/or ideas for data structures or<br>
algorithms to use?</p>
<h4>Alternatives</h4>
<p>TODO: What are the alternative implementation approaches or alternative ways to<br>
solve the problem that this feature would solve? How do these alternatives<br>
compare to this proposal?<br>
</p>
</blockquote>



<a name="558466830"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312055%20Use%20cargo%20publish%20--workspace%20ins.../near/558466830" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312055.20Use.20cargo.20publish.20--workspace.20ins.2E.2E.2E.html#558466830">(Nov 20 2025 at 15:53)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12055#issuecomment-3558794044">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12055">issue #12055</a>:</p>
<blockquote>
<p>While I'd like to take advantage of this, there's a few reasons I haven't tried to pull the trigger yet:</p>
<ul>
<li>We'd need a flag like <code>--idempotent</code>. Inevitably publishes go wrong and being unable to restart a publish is a bit of a deal breaker.</li>
<li>Over time we've packed a lot of other bits into <code>publish.rs</code>, such as verifying crates build from packaged sources, verifying everything has the right ownership, and automatically bumping versions.</li>
</ul>
<p>I've no doubt that <code>publish --workspace</code> is faster, but it's not really the long poll in our publication process anyway, so I'm not too worried about it personally.</p>
</blockquote>



<a name="558471632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312055%20Use%20cargo%20publish%20--workspace%20ins.../near/558471632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312055.20Use.20cargo.20publish.20--workspace.20ins.2E.2E.2E.html#558471632">(Nov 20 2025 at 16:12)</a>:</h4>
<p>bjorn3 <a href="https://github.com/bytecodealliance/wasmtime/issues/12055#issuecomment-3558885391">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12055">issue #12055</a>:</p>
<blockquote>
<blockquote>
<p>We'd need a flag like --idempotent. Inevitably publishes go wrong and being unable to restart a publish is a bit of a deal breaker.</p>
</blockquote>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>
<blockquote>
<p>such as verifying crates build from packaged sources</p>
</blockquote>
<p>That is basically <code>cargo package --workspace</code> without <code>--no-verify</code>, right?</p>
</blockquote>



<a name="558526959"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2312055%20Use%20cargo%20publish%20--workspace%20ins.../near/558526959" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2312055.20Use.20cargo.20publish.20--workspace.20ins.2E.2E.2E.html#558526959">(Nov 20 2025 at 20:55)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/12055#issuecomment-3560009376">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/12055">issue #12055</a>:</p>
<blockquote>
<p>Almost yeah, we also test that it builds and at least locally <code>cargo package --workspace</code> doesn't look like it's building the crates, it's just packaging them. For the wasmtime repo <code>cargo package --workspace</code> also looks to fail since it's packaging <code>publish = false</code> packages which otherwise aren't compatible with packaging.</p>
</blockquote>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>