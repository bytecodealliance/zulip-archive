<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12496 WIP ComponentType: add as_val method... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html">wasmtime / PR #12496 WIP ComponentType: add as_val method...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="571518704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571518704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571518704">(Feb 02 2026 at 20:27)</a>:</h4>
<p>pchickey edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="571534596"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571534596" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571534596">(Feb 02 2026 at 22:07)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="571553209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571553209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571553209">(Feb 03 2026 at 01:06)</a>:</h4>
<p>github-actions[bot] added the label <code>wasmtime:api</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="571724129"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571724129" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571724129">(Feb 03 2026 at 17:39)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/12496#pullrequestreview-3746631538">PR review</a>:</p>
<blockquote>
<p>Personally I'm not overly thrilled about extending the <code>Lift</code>/<code>Lower</code>/etc traits given the complexity of testing them and the sheer breadth of impls required, but this is overall relatively minor in terms of complexity. Before landing mind also expanding the PR description with some rationale for the expected use cases?</p>
<p>Bikeshedding wise I might say <code>to_val</code> instead of <code>as_val</code> since "as" implies "cheap" typically and this definitely isn't cheap. I'd also bikeshed the signature a bit to use <code>StoreContextMut&lt;T&gt;</code> rather than <code>impl AsContextMut</code> to avoid the extra indirection of <code>impl Trait</code> where possible.</p>
<p>The <code>'static</code> bounds popping up on futures/streams is fine, those are only really practically usable with <code>'static</code> types anyway, so I don't think that'll be an issue. The specifics of <code>as_val</code> for futures/streams I think will want to be re-worked a bit too to avoid manually creating structs, but I can take a closer look once this is closer to landing.</p>
<p>Similar to futures/streams I'll need to think a bit harder about the <code>try_as_resource_any</code> method added here for resources. I forget exactly where we are on clone/copy/etc on those and how it affects what we document in terms of guarantees and whatnot.</p>
</blockquote>



<a name="571733192"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571733192" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571733192">(Feb 03 2026 at 18:26)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="571990673"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571990673" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571990673">(Feb 04 2026 at 19:16)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="571994162"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/571994162" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#571994162">(Feb 04 2026 at 19:37)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="572001980"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/572001980" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#572001980">(Feb 04 2026 at 20:21)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="572013851"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/572013851" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#572013851">(Feb 04 2026 at 21:33)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="572014062"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/572014062" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#572014062">(Feb 04 2026 at 21:33)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<a name="572026227"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312496%20WIP%20ComponentType%3A%20add%20as_val%20method.../near/572026227" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312496.20WIP.20ComponentType.3A.20add.20as_val.20method.2E.2E.2E.html#572026227">(Feb 04 2026 at 22:54)</a>:</h4>
<p>pchickey updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12496">PR #12496</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>