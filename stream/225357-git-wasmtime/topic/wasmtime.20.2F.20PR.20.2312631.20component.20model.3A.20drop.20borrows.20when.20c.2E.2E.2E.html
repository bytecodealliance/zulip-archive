<html>
<head><meta charset="utf-8"><title>wasmtime / PR #12631 component model: drop borrows when c... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html">wasmtime / PR #12631 component model: drop borrows when c...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="575041471"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312631%20component%20model%3A%20drop%20borrows%20when%20c.../near/575041471" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html#575041471">(Feb 20 2026 at 23:07)</a>:</h4>
<p>jellevandenhooff opened <a href="https://github.com/bytecodealliance/wasmtime/pull/12631">PR #12631</a> from <code>jellevandenhooff:fix-subtask-cancel-borrow-release</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>Update the component model resource tracking to handle cancelling host tasks. I ran into this when cancelling a read on a UDP socket and then trying to drop the socket afterwards. Before this change, that did not work because the cancelled read still held on to the socket.</p>
<p>I debugged this issue and wrote the code with Claude. I've tested this code for my use case and it seems to work, but I don't fully understand the implications. I worry that it might not be safe to release the borrow count because maybe the host function can still run.</p>
</blockquote>



<a name="575041472"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312631%20component%20model%3A%20drop%20borrows%20when%20c.../near/575041472" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html#575041472">(Feb 20 2026 at 23:07)</a>:</h4>
<p>jellevandenhooff requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12631">PR #12631</a>.</p>



<a name="575041473"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312631%20component%20model%3A%20drop%20borrows%20when%20c.../near/575041473" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html#575041473">(Feb 20 2026 at 23:07)</a>:</h4>
<p>jellevandenhooff requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/12631">PR #12631</a>.</p>



<a name="575042301"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312631%20component%20model%3A%20drop%20borrows%20when%20c.../near/575042301" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html#575042301">(Feb 20 2026 at 23:16)</a>:</h4>
<p>jellevandenhooff updated <a href="https://github.com/bytecodealliance/wasmtime/pull/12631">PR #12631</a>.</p>



<a name="575043163"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312631%20component%20model%3A%20drop%20borrows%20when%20c.../near/575043163" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html#575043163">(Feb 20 2026 at 23:26)</a>:</h4>
<p>jellevandenhooff edited <a href="https://github.com/bytecodealliance/wasmtime/pull/12631">PR #12631</a>:</p>
<blockquote>
<p>Update the component model resource tracking to handle cancelling host tasks. Before this change, when cancelling a read on a UDP socket and then dropping the socket failed because of outstanding borrows: the read never released its borrow. Now it does.</p>
<p>I debugged this issue and wrote the code with Claude. I've tested this code for my use case and it seems to work, but I don't fully understand the implications. I worry that it might not be safe to release the borrow count because maybe the host function can still run.</p>
</blockquote>



<a name="575054032"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2312631%20component%20model%3A%20drop%20borrows%20when%20c.../near/575054032" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2312631.20component.20model.3A.20drop.20borrows.20when.20c.2E.2E.2E.html#575054032">(Feb 21 2026 at 02:32)</a>:</h4>
<p>github-actions[bot] added the label <code>wasmtime:api</code> on <a href="https://github.com/bytecodealliance/wasmtime/pull/12631">PR #12631</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>