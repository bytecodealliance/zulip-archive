<html>
<head><meta charset="utf-8"><title>wasmtime / issue #11249 Generated guest export bindings a... · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html">wasmtime / issue #11249 Generated guest export bindings a...</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="528914149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/528914149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#528914149">(Jul 15 2025 at 17:56)</a>:</h4>
<p>rvolosatovs opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">issue #11249</a>:</p>
<blockquote>
<p>Since <a href="https://github.com/bytecodealliance/wasmtime/pull/11238">https://github.com/bytecodealliance/wasmtime/pull/11238</a> has been merged, calling an async export requires an <code>Accessor</code>, however, the only way to get an <code>Accessor</code> is to use an <code>Instance</code>.</p>
<p>Users relying uniquely on generated <code>instantiate_async</code> bindings do not have access to one and so can never call the async export.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>checkout #11221 </li>
<li><code>cargo doc -p wasmtime-wasi --features p3 --open --document-private-items</code></li>
<li>take a look at docs generated for <code>target/doc/wasmtime_wasi/p3/bindings/struct.Command.html</code></li>
</ul>
<p>&lt;img width="978" height="657" alt="Image" src="<a href="https://github.com/user-attachments/assets/b353638d-f7a5-4179-a6bc-a5c50f9df24d">https://github.com/user-attachments/assets/b353638d-f7a5-4179-a6bc-a5c50f9df24d</a>" /&gt;<br>
&lt;img width="611" height="435" alt="Image" src="<a href="https://github.com/user-attachments/assets/1a88d5de-720c-45e6-88dd-35da78b4d61e">https://github.com/user-attachments/assets/1a88d5de-720c-45e6-88dd-35da78b4d61e</a>" /&gt;</p>
<h3>Expected Results</h3>
<p>Either a way to run an export without manual instantiation or removal of these bindings</p>
<h3>Actual Results</h3>
<p>"dead end" from user's perspective with seemingly no way of constructing an <code>Accessor</code> using the public API</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 326795f583 (latest <code>main</code>)</p>
<p>Operating system: MacOS</p>
<p>Architecture: aarch64-darwin</p>
<h3>Extra Info</h3>
<p>Without changing <code>wasmtime</code> API, there seem to be two ways to fix this issue:</p>
<ul>
<li>return a tuple from <code>instantiate_async</code> e.g. <code>(Command, Instance)</code> (and similar for other worlds)</li>
<li>simply remove the <code>instantiate_async</code> generated functions and require users to always instantiate manually and rely on <code>Command::new</code> (and similar for other worlds)</li>
</ul>
</blockquote>



<a name="528914150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/528914150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#528914150">(Jul 15 2025 at 17:56)</a>:</h4>
<p><a href="https://github.com/rvolosatovs">rvolosatovs</a> added the bug label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">Issue #11249</a>.</p>



<a name="528914465"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/528914465" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#528914465">(Jul 15 2025 at 17:58)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> added the wasm-proposal:component-model-async label to <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">Issue #11249</a>.</p>



<a name="528949120"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/528949120" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#528949120">(Jul 15 2025 at 22:06)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/issues/11249#issuecomment-3075875764">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">issue #11249</a>:</p>
<blockquote>
<p>In the limit this will be resolved by <a href="https://github.com/bytecodealliance/wasmtime/issues/11226">https://github.com/bytecodealliance/wasmtime/issues/11226</a> because you won't need an instance to acquire an accessor, you can instead acquire that from the store. Until that point though is it ok to use the instance and less-nice auto-generated bindings as a workaround?</p>
</blockquote>



<a name="528949130"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/528949130" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#528949130">(Jul 15 2025 at 22:06)</a>:</h4>
<p><a href="https://github.com/alexcrichton">alexcrichton</a> removed the bug label from <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">Issue #11249</a>.</p>



<a name="529014440"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/529014440" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#529014440">(Jul 16 2025 at 09:12)</a>:</h4>
<p>rvolosatovs <a href="https://github.com/bytecodealliance/wasmtime/issues/11249#issuecomment-3077677194">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">issue #11249</a>:</p>
<blockquote>
<blockquote>
<p>In the limit this will be resolved by <a href="https://github.com/bytecodealliance/wasmtime/issues/11226">https://github.com/bytecodealliance/wasmtime/issues/11226</a> because you won't need an instance to acquire an accessor, you can instead acquire that from the store. Until that point though is it ok to use the instance and less-nice auto-generated bindings as a workaround?</p>
</blockquote>
<p>Sounds good to me!</p>
</blockquote>



<a name="539597594"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/539597594" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#539597594">(Sep 15 2025 at 16:01)</a>:</h4>
<p>alexcrichton assigned dicej to <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">issue #11249</a>.</p>



<a name="543400903"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20issue%20%2311249%20Generated%20guest%20export%20bindings%20a.../near/543400903" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20issue.20.2311249.20Generated.20guest.20export.20bindings.20a.2E.2E.2E.html#543400903">(Oct 06 2025 at 20:16)</a>:</h4>
<p>dicej closed <a href="https://github.com/bytecodealliance/wasmtime/issues/11249">issue #11249</a>:</p>
<blockquote>
<p>Since <a href="https://github.com/bytecodealliance/wasmtime/pull/11238">https://github.com/bytecodealliance/wasmtime/pull/11238</a> has been merged, calling an async export requires an <code>Accessor</code>, however, the only way to get an <code>Accessor</code> is to use an <code>Instance</code>.</p>
<p>Users relying uniquely on generated <code>instantiate_async</code> bindings do not have access to one and so can never call the async export.</p>
<h3>Steps to Reproduce</h3>
<ul>
<li>checkout #11221 </li>
<li><code>cargo doc -p wasmtime-wasi --features p3 --open --document-private-items</code></li>
<li>take a look at docs generated for <code>target/doc/wasmtime_wasi/p3/bindings/struct.Command.html</code></li>
</ul>
<p>&lt;img width="978" height="657" alt="Image" src="<a href="https://github.com/user-attachments/assets/b353638d-f7a5-4179-a6bc-a5c50f9df24d">https://github.com/user-attachments/assets/b353638d-f7a5-4179-a6bc-a5c50f9df24d</a>" /&gt;<br>
&lt;img width="611" height="435" alt="Image" src="<a href="https://github.com/user-attachments/assets/1a88d5de-720c-45e6-88dd-35da78b4d61e">https://github.com/user-attachments/assets/1a88d5de-720c-45e6-88dd-35da78b4d61e</a>" /&gt;</p>
<h3>Expected Results</h3>
<p>Either a way to run an export without manual instantiation or removal of these bindings</p>
<h3>Actual Results</h3>
<p>"dead end" from user's perspective with seemingly no way of constructing an <code>Accessor</code> using the public API</p>
<h3>Versions and Environment</h3>
<p>Wasmtime version or commit: 326795f583 (latest <code>main</code>)</p>
<p>Operating system: MacOS</p>
<p>Architecture: aarch64-darwin</p>
<h3>Extra Info</h3>
<p>Without changing <code>wasmtime</code> API, there seem to be two ways to fix this issue:</p>
<ul>
<li>return a tuple from <code>instantiate_async</code> e.g. <code>(Command, Instance)</code> (and similar for other worlds)</li>
<li>simply remove the <code>instantiate_async</code> generated functions and require users to always instantiate manually and rely on <code>Command::new</code> (and similar for other worlds)</li>
</ul>
</blockquote>



<hr><p>Last updated: Oct 25 2025 at 23:03 UTC</p>
</html>