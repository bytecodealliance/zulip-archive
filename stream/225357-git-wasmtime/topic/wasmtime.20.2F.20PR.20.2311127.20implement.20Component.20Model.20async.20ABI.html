<html>
<head><meta charset="utf-8"><title>wasmtime / PR #11127 implement Component Model async ABI · git-wasmtime · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/index.html">git-wasmtime</a></h2>
<h3>Topic: <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html">wasmtime / PR #11127 implement Component Model async ABI</a></h3>

<hr>

<base href="https://bytecodealliance.zulipchat.com">

<head><link href="https://bytecodealliance.github.io/zulip-archive/style.css" rel="stylesheet"></head>

<a name="525563431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525563431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525563431">(Jun 24 2025 at 17:19)</a>:</h4>
<p>dicej opened <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a> from <code>dicej:cm-async-implementation</code> to <code>bytecodealliance:main</code>:</p>
<blockquote>
<p>This commit replaces the stub functions and types in <code>wasmtime::runtime::component::concurrent</code> and its submodules with the working implementation developed in the <code>wasip3-prototyping</code> repo.  For ease of review, it does not include any new tests; I'll add those in a follow-up commit.</p>
<p>Note that this builds on #11114 and #11123; only the third commit is new.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="525563433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525563433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525563433">(Jun 24 2025 at 17:19)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers">wasmtime-fuzz-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525563434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525563434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525563434">(Jun 24 2025 at 17:19)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers">wasmtime-wasi-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525563435"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525563435" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525563435">(Jun 24 2025 at 17:19)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/fitzgen">fitzgen</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525563436"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525563436" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525563436">(Jun 24 2025 at 17:19)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers">wasmtime-core-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525563437"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525563437" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525563437">(Jun 24 2025 at 17:19)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers">wasmtime-default-reviewers</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525564017"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525564017" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525564017">(Jun 24 2025 at 17:23)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525574753"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525574753" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525574753">(Jun 24 2025 at 18:36)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525575049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525575049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525575049">(Jun 24 2025 at 18:37)</a>:</h4>
<p><strong>dicej</strong> requested <a href="https://github.com/alexcrichton">alexcrichton</a> for a review on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="525990213"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/525990213" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#525990213">(Jun 26 2025 at 22:58)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526111580"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526111580" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526111580">(Jun 27 2025 at 15:48)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526137640"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526137640" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526137640">(Jun 27 2025 at 18:49)</a>:</h4>
<p>github-actions[bot] <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#issuecomment-3014069854">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>:</p>
<blockquote>
<h4>Subscribe to Label Action</h4>
<p>cc @fitzgen</p>
<p>&lt;details&gt;<br>
This issue or pull request has been labeled: "fuzzing", "wasmtime:api", "wasmtime:c-api"</p>
<p>Thus the following users have been cc'd because of the following labels:</p>
<ul>
<li>fitzgen: fuzzing</li>
</ul>
<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>
<p><a href="https://github.com/bytecodealliance/subscribe-to-label-action">Learn more.</a><br>
&lt;/details&gt;</p>
</blockquote>



<a name="526423898"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526423898" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526423898">(Jun 30 2025 at 15:03)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526427326"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526427326" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526427326">(Jun 30 2025 at 15:20)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526437611"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526437611" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526437611">(Jun 30 2025 at 16:14)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526478416"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526478416" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526478416">(Jun 30 2025 at 20:00)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#issuecomment-3020521042">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>:</p>
<blockquote>
<p>@dicej on this one thing I want to write down before I forget (I've forgotten this many times so far...)</p>
<p>Index allocation for futures/streams/error-context I believe are going to need to be updated here. I believe the current state of this PR is such that there's one indexing namespace for all resources within a component, and then there's another index namespace for futures/streams/error-context. Spec-wise I believe it's required we unify these index namespaces. I realize that this is an artifact of the history of the implementation here, but it's something that I want to be sure to write down and not forget.</p>
<p>Effectively my naive expectation would be that <a href="https://github.com/bytecodealliance/wasmtime/blob/57ba95e92eff1d02f6b05ab86b9e81b35bd69d28/crates/wasmtime/src/runtime/vm/component/resources.rs#L92-L120">this type</a> grows to include <code>Stream</code>/<code>Future</code>/<code>ErrorContext</code> variants and a table or similar in <code>ConcurrentState</code> will end up being removed.</p>
</blockquote>



<a name="526689065"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526689065" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526689065">(Jul 01 2025 at 22:01)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526822000"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526822000" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526822000">(Jul 02 2025 at 14:58)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526832522"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526832522" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526832522">(Jul 02 2025 at 15:46)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526833348"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526833348" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526833348">(Jul 02 2025 at 15:50)</a>:</h4>
<p>alexcrichton <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#issuecomment-3028379823">commented</a> on <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>:</p>
<blockquote>
<p>Another thought I've now had which I don't want to forget: this is introducing a significant <code>#[cfg]</code> in the path of calling a component function with the async style. That means that the non-cm-async implementation will be entirely untested in CI which is not an ideal state to be in. I don't know how best to handle this but I wanted to note it before I forget.</p>
</blockquote>



<a name="526868009"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526868009" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526868009">(Jul 02 2025 at 19:33)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526880155"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526880155" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526880155">(Jul 02 2025 at 21:14)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="526880369"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/526880369" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#526880369">(Jul 02 2025 at 21:16)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527085385"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527085385" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527085385">(Jul 03 2025 at 23:15)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527101918"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527101918" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527101918">(Jul 04 2025 at 03:45)</a>:</h4>
<p>dicej edited <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>:</p>
<blockquote>
<p>This commit replaces the stub functions and types in <code>wasmtime::runtime::component::concurrent</code> and its submodules with the working implementation developed in the <code>wasip3-prototyping</code> repo.  For ease of review, it does not include any new tests; I'll add those in a follow-up commit.</p>
<p>&lt;!--<br>
Please make sure you include the following information:</p>
<ul>
<li>
<p>If this work has been discussed elsewhere, please include a link to that<br>
  conversation. If it was discussed in an issue, just mention "issue #...".</p>
</li>
<li>
<p>Explain why this change is needed. If the details are in an issue already,<br>
  this can be brief.</p>
</li>
</ul>
<p>Our development process is documented in the Wasmtime book:<br>
<a href="https://docs.wasmtime.dev/contributing-development-process.html">https://docs.wasmtime.dev/contributing-development-process.html</a></p>
<p>Please ensure all communication follows the code of conduct:<br>
<a href="https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>
--&gt;</p>
</blockquote>



<a name="527494561"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527494561" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527494561">(Jul 07 2025 at 14:37)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527499768"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527499768" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527499768">(Jul 07 2025 at 15:02)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527510632"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527510632" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527510632">(Jul 07 2025 at 15:58)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527516971"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527516971" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527516971">(Jul 07 2025 at 16:32)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527517090"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517090" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517090">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994199390">PR review</a>:</p>
<blockquote>
<p>Ok I've gone through all of <code>concurrent.rs</code> and here's comments here and there. I haven't looked at <code>futures_and_streams</code> yet and I'll want to closely review the <code>unsafe</code> traits there though, so more to come.</p>
<p>I've also pushed up a few commits here for miscellaneous things, so feel free to squash them all in if you're ok with them or append further commits here.</p>
</blockquote>



<a name="527517091"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517091" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517091">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190313099">PR review comment</a>:</p>
<blockquote>
<p>IIRC this file is a duplicate of <code>vm/component/resources.rs</code> right? (or at least a historic one). IIRC we talked about deferring resolving this duplication to later, but mind filing an issue and registering a FIXME here?</p>
</blockquote>



<a name="527517092"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517092" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517092">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190315958">PR review comment</a>:</p>
<blockquote>
<p>I manually changed the previous PR, but mind updating the import style in the new files to match the preexisting style in Wasmtime?</p>
</blockquote>



<a name="527517093"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517093" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517093">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190315069">PR review comment</a>:</p>
<blockquote>
<p>Mind either (a) resolving this TODO in this PR or (b) filing an issue for this TODO to point to and pointing to that?</p>
</blockquote>



<a name="527517095"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517095" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517095">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190513332">PR review comment</a>:</p>
<blockquote>
<p>Mind filing an issue for this?</p>
</blockquote>



<a name="527517096"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517096" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517096">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190361563">PR review comment</a>:</p>
<blockquote>
<p>Like above, can this be <code>pub(crate)</code></p>
</blockquote>



<a name="527517097"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517097" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517097">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190330180">PR review comment</a>:</p>
<blockquote>
<p>Can you file an issue about removing <code>to_vec</code> here? I'm remembering now that while I synchronized the async/concurrent signature in <code>Linker</code> for dynamic things I think that's something we're going to want to do here as well for <code>call_concurrent</code>. The signature will change slightly but I think it will still be doable (and like the linker ones it'd use <code>Vec</code> internally for now)</p>
</blockquote>



<a name="527517098"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517098" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517098">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190320054">PR review comment</a>:</p>
<blockquote>
<p>Could this be done by removing the task on <code>Drop</code> instead of allocating an extra <code>Arc</code>?</p>
</blockquote>



<a name="527517099"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517099" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517099">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190358936">PR review comment</a>:</p>
<blockquote>
<p>Could this be made <code>pub(crate)</code>?</p>
</blockquote>



<a name="527517100"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517100" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517100">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190488636">PR review comment</a>:</p>
<blockquote>
<p>Are these perhaps relics of a historical implementation? (similar with methods above). I'd otherwise imagine that the method-based accessors could all get removed in favor of accessing the fields directly</p>
</blockquote>



<a name="527517101"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517101" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517101">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190323869">PR review comment</a>:</p>
<blockquote>
<p>I'm wary of this in that we don't want to change the public API contract required depending on crate features being enabled or disabled. This implementation looks like it goes from requriing <code>post_return</code> to not requiring it, which would be a regression for the public API. Could this be integrated differently to still require post return when <code>call_async</code> is used? (it's fine to me that <code>call_concurrent</code> is documented as not requiring post-return)</p>
</blockquote>



<a name="527517102"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517102" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517102">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190548947">PR review comment</a>:</p>
<blockquote>
<p>Mind removing this and replacing it with <code>Waker::noop()</code>?</p>
</blockquote>



<a name="527517103"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517103" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517103">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190547394">PR review comment</a>:</p>
<blockquote>
<p>We'll want to do something about this (e.g. document, remove, etc).</p>
<p>In toying around locally though I see that the reason for this is <code>Vec&lt;HostTaskFuture&gt;</code> which is only <code>Send</code>, not also <code>Sync</code>. I think we'll want to keep that in the sense that we don't want to require futures to all be both <code>Sync</code> and <code>Send</code>, only <code>Send</code>, if possible.</p>
<p>Also in toying with this though I can remove the <code>spawned_tasks</code> field entirely and tests all pass. Given that do you know of a reason to keep this field, and if not can it be removed? (once removed it's possible to remove these <code>unsafe impl</code> blocks)</p>
</blockquote>



<a name="527517105"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527517105" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527517105">(Jul 07 2025 at 16:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190320893">PR review comment</a>:</p>
<blockquote>
<p>Also, mind running some of the basic, typed, no-call-hook, etc, benchmarks for host-to-wasm to see the impact of this new code path?</p>
</blockquote>



<a name="527519525"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527519525" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527519525">(Jul 07 2025 at 16:49)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994682223">PR review</a>.</p>



<a name="527519526"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527519526" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527519526">(Jul 07 2025 at 16:49)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190624239">PR review comment</a>:</p>
<blockquote>
<p>This is intentionally public to allow host function implementations to call <code>Instance::{future,stream}</code>, for which they need an <code>Instance</code> object.</p>
<p>Given that <code>Instance</code> is <code>Copy</code>, I suppose we could require the host function closure to close over an <code>Instance</code> from the top-level code (i.e. the code that actually creates the instance).  The ergonomics wouldn't be as nice, though, plus it creates the hazard that the host embedder code mixes up its <code>Instance</code>s and closes over the wrong one.</p>
</blockquote>



<a name="527519603"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527519603" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527519603">(Jul 07 2025 at 16:49)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994683215">PR review</a>.</p>



<a name="527519604"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527519604" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527519604">(Jul 07 2025 at 16:49)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190624891">PR review comment</a>:</p>
<blockquote>
<p>See my reply above.</p>
</blockquote>



<a name="527519881"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527519881" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527519881">(Jul 07 2025 at 16:51)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994688606">PR review</a>.</p>



<a name="527519883"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527519883" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527519883">(Jul 07 2025 at 16:51)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190628287">PR review comment</a>:</p>
<blockquote>
<p>I think I just got carried away with writing accessor methods; I can get rid of them.</p>
</blockquote>



<a name="527520319"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527520319" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527520319">(Jul 07 2025 at 16:54)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994697392">PR review</a>.</p>



<a name="527520321"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527520321" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527520321">(Jul 07 2025 at 16:54)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190634136">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Also in toying with this though I can remove the spawned_tasks field entirely and tests all pass</p>
</blockquote>
<p>Sounds like we're missing test coverage, then -- probably because we were leaning on the <code>wasmtime-wasi[-http]</code> integration tests to exercise this and never wrote any non-wasi tests for it.  I'm sure some of the wasi tests will fail if you remove that field.</p>
</blockquote>



<a name="527520932"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527520932" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527520932">(Jul 07 2025 at 16:58)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994706835">PR review</a>.</p>



<a name="527520933"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527520933" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527520933">(Jul 07 2025 at 16:58)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190640531">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Could this be done by removing the task on <code>Drop</code> instead of allocating an extra <code>Arc</code>?</p>
</blockquote>
<p>I had originally planned to do that, but couldn't see how to avoid shared mutable aliasing of the store.  Revisiting it now, I can see we just need a custom <code>Future</code> implementation which has a <code>StoreContextMut</code> field, similar to what we did for <code>FiberFuture</code>.  I'll do that.</p>
</blockquote>



<a name="527521187"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527521187" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527521187">(Jul 07 2025 at 17:00)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190642953">PR review comment</a>:</p>
<blockquote>
<p>BTW, I'm fine with changing the field to a <code>Mutex&lt;Vec&lt;HostTaskFuture&gt;&gt;</code> if that's what we need to remove the <code>unsafe impl</code>s.</p>
</blockquote>



<a name="527521188"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527521188" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527521188">(Jul 07 2025 at 17:00)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994710532">PR review</a>.</p>



<a name="527525641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527525641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527525641">(Jul 07 2025 at 17:30)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190690344">PR review comment</a>:</p>
<blockquote>
<p>Can you elaborate on how you'd like to see this code changed?  Naively, I could imagine changing this to look more like <code>TypedFunc::call_async</code>, but that would require the same <code>unsafe</code> use of a raw pointer, which I was trying to avoid here. </p>
</blockquote>



<a name="527525642"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527525642" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527525642">(Jul 07 2025 at 17:30)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994781927">PR review</a>.</p>



<a name="527527859"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527527859" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527527859">(Jul 07 2025 at 17:46)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994821514">PR review</a>.</p>



<a name="527527860"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527527860" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527527860">(Jul 07 2025 at 17:46)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190717181">PR review comment</a>:</p>
<blockquote>
<p>Ideally we'd have <code>fn call_concurrent&lt;'a&gt;(self, store: ..., params: &amp;'a [Val], results: &amp;'a mut [Val]) -&gt; Pin&lt;Box&lt;... + 'a&gt;&gt;</code> where the returned future would close over <code>params</code> and <code>results</code>. Internally that'd do something like <code>Linker::func_new_concurrent</code> where <code>Vec</code> is still used internally to satisfy the <code>'static</code> needed to put the future into the store but otherwise the public signature wouldn't change.</p>
</blockquote>



<a name="527528433"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527528433" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527528433">(Jul 07 2025 at 17:50)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994830634">PR review</a>.</p>



<a name="527528434"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527528434" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527528434">(Jul 07 2025 at 17:50)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190722941">PR review comment</a>:</p>
<blockquote>
<p>This sort of API makes it very similar to <code>Caller</code> that we have for core wasm which is something I've long wanted to delete from the public API, but it's pretty load-bearing so we probably can't remove that. I've historically wanted to resist any similar temptation to add such a similar call to components as well (e.g. there's no <code>Caller</code> on any <code>component::Linker</code> methods, it's all just <code>StoreContextMut</code>).</p>
<p>I'll try to revisit this when reading over futures and streams code and see if I can't formulate more thoughts about this.</p>
</blockquote>



<a name="527528641"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527528641" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527528641">(Jul 07 2025 at 17:51)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994833854">PR review</a>.</p>



<a name="527528643"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527528643" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527528643">(Jul 07 2025 at 17:51)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190725238">PR review comment</a>:</p>
<blockquote>
<p>Currently in this PR there are no reads of the <code>spawned_tasks</code> field which is why tests in the <code>cm-async-tests</code> PR (which I realize doesn't include <code>wasmtime-wasi{,-http}</code>) pass. Does this mean that some changes from upstream wasip3-prototyping accidentally weren't merged back here?</p>
</blockquote>



<a name="527530220"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527530220" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527530220">(Jul 07 2025 at 18:00)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994852457">PR review</a>.</p>



<a name="527530222"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527530222" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527530222">(Jul 07 2025 at 18:00)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190737947">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Currently in this PR there are no reads of the <code>spawned_tasks</code> field</p>
</blockquote>
<p>Maybe I'm misunderstanding, but isn't <a href="https://github.com/dicej/wasmtime/blob/c135259dff3ed16d87668c24d7f5698727f85a35/crates/wasmtime/src/runtime/component/concurrent.rs#L3160-L3171">this</a> a read of that field?</p>
</blockquote>



<a name="527530573"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527530573" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527530573">(Jul 07 2025 at 18:01)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527531405"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527531405" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527531405">(Jul 07 2025 at 18:05)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527535867"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527535867" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527535867">(Jul 07 2025 at 18:29)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2994921147">PR review</a>.</p>



<a name="527535868"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527535868" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527535868">(Jul 07 2025 at 18:29)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190784562">PR review comment</a>:</p>
<blockquote>
<p>Er yes, bad words on my part. Basically nothing ever pushes on that vector so it's always empty</p>
</blockquote>



<a name="527550693"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527550693" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527550693">(Jul 07 2025 at 19:45)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2995094388">PR review</a>.</p>



<a name="527550694"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527550694" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527550694">(Jul 07 2025 at 19:45)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2190898154">PR review comment</a>:</p>
<blockquote>
<p>Ok, then yes, this looks like dead code.  We used to push spawned tasks to a vector in <code>Access[or]::spawn</code> but now we call <code>Instance::spawn_with_accessor</code> instead, so you're right that the field can be removed.  I'll do that.</p>
</blockquote>



<a name="527552150"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527552150" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527552150">(Jul 07 2025 at 19:57)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527583806"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527583806" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527583806">(Jul 07 2025 at 23:59)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527585209"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527585209" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527585209">(Jul 08 2025 at 00:16)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2995613915">PR review</a>.</p>



<a name="527585210"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527585210" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527585210">(Jul 08 2025 at 00:16)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2191232497">PR review comment</a>:</p>
<blockquote>
<p>I've pushed an update to require <code>post_return_async</code> for <code>call_async</code> and added docs to <code>call_concurrent</code> indicating that the <code>post-return</code> function is called automatically in that case.</p>
</blockquote>



<a name="527694746"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527694746" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527694746">(Jul 08 2025 at 13:47)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192586822">PR review comment</a>:</p>
<blockquote>
<blockquote>
<p>Also, mind running some of the basic, typed, no-call-hook, etc, benchmarks for host-to-wasm to see the impact of this new code path?</p>
</blockquote>
<p>Would you mind providing instructions for doing that?  I ran <code>cargo bench</code>, but that ran a bunch of other, irrelevant stuff as well.  How did you get your "before vs. after" numbers on the last PR, and how did you specify which ones to run?</p>
</blockquote>



<a name="527694747"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527694747" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527694747">(Jul 08 2025 at 13:47)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2997747978">PR review</a>.</p>



<a name="527705804"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527705804" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527705804">(Jul 08 2025 at 14:32)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2997934845">PR review</a>.</p>



<a name="527705806"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527705806" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527705806">(Jul 08 2025 at 14:32)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192697301">PR review comment</a>:</p>
<blockquote>
<p>Oh sure yeah, I do:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">bench</span><span class="w"> </span><span class="o">--</span><span class="n">bench</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">--</span><span class="n">list</span>
</code></pre></div>
<p>first, and then this accepts a regex argument to pare down what's being run so I build up a regex to just the benchmarks that are relevant. For example</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">bench</span><span class="w"> </span><span class="o">--</span><span class="n">bench</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">--</span><span class="n">list</span><span class="w"> </span><span class="o">'^</span><span class="n">sync</span><span class="p">.</span><span class="o">*</span><span class="n">component</span><span class="o">'</span>
</code></pre></div>
<p>focuses just on sync calls (the fastest ones) and component-related ones. Here we only want host-to-wasm </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">bench</span><span class="w"> </span><span class="o">--</span><span class="n">bench</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">--</span><span class="n">list</span><span class="w"> </span><span class="o">'^</span><span class="n">sync</span><span class="p">.</span><span class="o">*</span><span class="n">component</span><span class="p">.</span><span class="o">*</span><span class="n">host</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">wasm</span><span class="o">'</span>
</code></pre></div>
<p>and eventually what you probably want to run is:</p>
<p><div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">cargo</span><span class="w"> </span><span class="n">bench</span><span class="w"> </span><span class="o">--</span><span class="n">bench</span><span class="w"> </span><span class="n">call</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="o">--</span><span class="n">list</span><span class="w"> </span><span class="o">'^</span><span class="n">sync</span><span class="o">/</span><span class="n">no</span><span class="o">-</span><span class="n">hook</span><span class="p">.</span><span class="o">*</span><span class="n">component</span><span class="p">.</span><span class="o">*</span><span class="n">host</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">wasm</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="n">typed</span><span class="w"> </span><span class="p">.</span><span class="o">*'</span>
</code></pre></div><br>
</p>
</blockquote>



<a name="527706086"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527706086" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527706086">(Jul 08 2025 at 14:33)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2997939197">PR review</a>.</p>



<a name="527706088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527706088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527706088">(Jul 08 2025 at 14:33)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192700260">PR review comment</a>:</p>
<blockquote>
<p>What I'd also recommend is using </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$previous_command</span><span class="w"> </span><span class="o">--</span><span class="n">save</span><span class="o">-</span><span class="n">baseline</span><span class="w"> </span><span class="n">main</span>
</code></pre></div>
<p>on the <code>main</code> branch or without the component-model-async feature. Then with this PR you'd run:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">$previous_command</span><span class="w"> </span><span class="o">--</span><span class="n">baseline</span><span class="w"> </span><span class="n">main</span>
</code></pre></div>
<p>which will automate criterion reporting differences to the previously captured baseline</p>
</blockquote>



<a name="527706502"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527706502" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527706502">(Jul 08 2025 at 14:35)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527708088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527708088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527708088">(Jul 08 2025 at 14:41)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527714741"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527714741" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527714741">(Jul 08 2025 at 15:07)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527745305"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527745305" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527745305">(Jul 08 2025 at 17:43)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527746140"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746140" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746140">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527746171"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746171" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746171">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-2998084571">PR review</a>.</p>



<a name="527746175"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746175" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746175">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192799809">PR review comment</a>:</p>
<blockquote>
<p>I think this wants to further type-check that the payload type matches <code>T</code>, e.g. <code>T::typecheck(...)</code></p>
</blockquote>



<a name="527746176"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746176" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746176">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192823216">PR review comment</a>:</p>
<blockquote>
<p>Would it be possible to change all these <code>watch_*</code> methods to <code>async fn watch(&amp;mut self) { ... }</code>? That I think is a simple signature to model the various interactions here:</p>
<ul>
<li>By taking <code>&amp;mut self</code> it's effectively "taking ownership", aka preventing anything else happening.</li>
<li><code>Watch::into_inner</code> is now dropping the returned future.</li>
</ul>
</blockquote>



<a name="527746177"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746177" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746177">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192806179">PR review comment</a>:</p>
<blockquote>
<p>Here "write end dropped without writing" is a documentation-of-eld, right?</p>
</blockquote>



<a name="527746178"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746178" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746178">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192815489">PR review comment</a>:</p>
<blockquote>
<p>Along the lines of a comment about <code>async fn</code> above, I think this would be much clearer as a loop over the buffer calling <code>self.write</code> rather than via recursion.</p>
</blockquote>



<a name="527746179"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746179" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746179">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192812847">PR review comment</a>:</p>
<blockquote>
<p>Wherever possible I personally find it much easier to reason about/read <code>async fn</code> signatures rather than those returning <code>impl Future</code>. Would it be possible to change this, and a number of other functions in this file that just return <code>impl Future</code> to <code>async fn</code>? I believe the <code>Send</code>-ness of the future here will be correctly inferred.</p>
</blockquote>



<a name="527746180"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746180" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746180">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192827351">PR review comment</a>:</p>
<blockquote>
<p>Like writers above, could this be an <code>async fn</code> with <code>&amp;mut self</code> as a receiver?</p>
</blockquote>



<a name="527746181"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746181" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746181">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192826382">PR review comment</a>:</p>
<blockquote>
<p>Similar to above the payload here needs to be type-checked against <code>T</code></p>
</blockquote>



<a name="527746182"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746182" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746182">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192825848">PR review comment</a>:</p>
<blockquote>
<p>Similar to futures above I think this <code>rep</code> needs to be type-checked against <code>T</code></p>
</blockquote>



<a name="527746183"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746183" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746183">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192848643">PR review comment</a>:</p>
<blockquote>
<p>This trait, and <code>ReadBuffer</code> below, show up in public trait bounds so these need to be public documented traits. Ideally with links to what methods use them and such.</p>
</blockquote>



<a name="527746184"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746184" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746184">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192819114">PR review comment</a>:</p>
<blockquote>
<p>Would it be possible to have this be <code>&amp;mut self</code>? I realize that would mean changing how "things are dropped" is modeled but personally I find that style of ownership much easier to work with than the move-in-and-move-out style this is currently using.</p>
</blockquote>



<a name="527746185"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746185" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746185">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192907130">PR review comment</a>:</p>
<blockquote>
<p>FWIW I find the terminology here pretty confusing. I understand you pass a <code>ReadBuffer</code> to a read operation, but the only thing you can do with a <code>ReadBuffer</code> is write to it. I have not spent much time trying to find better names, but I wanted to write this down nonetheless.</p>
</blockquote>



<a name="527746186"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746186" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746186">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192850468">PR review comment</a>:</p>
<blockquote>
<p>My understanding is that this is not intrinsic to the feature, is that right? This is only here for the <code>{Take,Read,Write}Buffer</code> implementations?</p>
<p>If so can this be made an optional feature to avoid requiring it?</p>
</blockquote>



<a name="527746189"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527746189" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527746189">(Jul 08 2025 at 17:49)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2192789544">PR review comment</a>:</p>
<blockquote>
<p>There's no protections here that <code>T</code> is correct?</p>
</blockquote>



<a name="527954253"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527954253" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527954253">(Jul 09 2025 at 19:42)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="527964087"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527964087" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527964087">(Jul 09 2025 at 20:52)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3003050926">PR review</a>.</p>



<a name="527964088"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527964088" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527964088">(Jul 09 2025 at 20:52)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2195950479">PR review comment</a>:</p>
<blockquote>
<p>I've replaced the <code>Arc</code> with code that removes the task when the future is resolved or dropped.  I've also opened <a href="https://github.com/bytecodealliance/wasmtime/issues/11209">https://github.com/bytecodealliance/wasmtime/issues/11209</a> to track future optimization work.</p>
</blockquote>



<a name="527970968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/527970968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#527970968">(Jul 09 2025 at 21:43)</a>:</h4>
<p>dicej updated <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<a name="528354148"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354148" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354148">(Jul 11 2025 at 14:41)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2200908901">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11218">https://github.com/bytecodealliance/wasmtime/issues/11218</a></p>
</blockquote>



<a name="528354149"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354149" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354149">(Jul 11 2025 at 14:41)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3010584896">PR review</a>.</p>



<a name="528354330"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354330" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354330">(Jul 11 2025 at 14:42)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3010588017">PR review</a>.</p>



<a name="528354331"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354331" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354331">(Jul 11 2025 at 14:42)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2200911050">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11219">https://github.com/bytecodealliance/wasmtime/issues/11219</a></p>
</blockquote>



<a name="528354374"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354374" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354374">(Jul 11 2025 at 14:43)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3010588674">PR review</a>.</p>



<a name="528354376"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354376" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354376">(Jul 11 2025 at 14:43)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2200911523">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11219">https://github.com/bytecodealliance/wasmtime/issues/11219</a></p>
</blockquote>



<a name="528354408"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354408" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354408">(Jul 11 2025 at 14:43)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3010589166">PR review</a>.</p>



<a name="528354410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354410">(Jul 11 2025 at 14:43)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2200911868">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11219">https://github.com/bytecodealliance/wasmtime/issues/11219</a></p>
</blockquote>



<a name="528354466"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354466" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354466">(Jul 11 2025 at 14:43)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3010590004">PR review</a>.</p>



<a name="528354467"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354467" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354467">(Jul 11 2025 at 14:43)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2200912478">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11219">https://github.com/bytecodealliance/wasmtime/issues/11219</a></p>
</blockquote>



<a name="528354866"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354866" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354866">(Jul 11 2025 at 14:45)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3010596105">PR review</a>.</p>



<a name="528354870"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528354870" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528354870">(Jul 11 2025 at 14:45)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2200916508">PR review comment</a>:</p>
<blockquote>
<p>Yeah, I struggled with the names of <code>WriteBuffer</code> and <code>ReadBuffer</code>, too.  What about <code>SourceBuffer</code> and <code>DestinationBuffer</code> instead?</p>
</blockquote>



<a name="528384770"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528384770" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528384770">(Jul 11 2025 at 17:56)</a>:</h4>
<p>alexcrichton created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201449330">PR review comment</a>:</p>
<blockquote>
<p>I'm going to defer this to <a href="https://github.com/bytecodealliance/wasmtime/issues/11223">https://github.com/bytecodealliance/wasmtime/issues/11223</a></p>
</blockquote>



<a name="528384771"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528384771" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528384771">(Jul 11 2025 at 17:56)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011392872">PR review</a>.</p>



<a name="528385409"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528385409" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528385409">(Jul 11 2025 at 18:01)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011403387">PR review</a>.</p>



<a name="528385410"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528385410" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528385410">(Jul 11 2025 at 18:01)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201456537">PR review comment</a>:</p>
<blockquote>
<p>I've opened an issue for this: <a href="https://github.com/bytecodealliance/wasmtime/issues/11222">https://github.com/bytecodealliance/wasmtime/issues/11222</a></p>
</blockquote>



<a name="528385431"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528385431" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528385431">(Jul 11 2025 at 18:01)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011403696">PR review</a>.</p>



<a name="528385432"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528385432" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528385432">(Jul 11 2025 at 18:01)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201456743">PR review comment</a>:</p>
<blockquote>
<p>I've opened an issue for this: <a href="https://github.com/bytecodealliance/wasmtime/issues/11222">https://github.com/bytecodealliance/wasmtime/issues/11222</a></p>
</blockquote>



<a name="528385441"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528385441" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528385441">(Jul 11 2025 at 18:01)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011403877">PR review</a>.</p>



<a name="528385443"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528385443" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528385443">(Jul 11 2025 at 18:01)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201456851">PR review comment</a>:</p>
<blockquote>
<p>I've opened an issue for this: <a href="https://github.com/bytecodealliance/wasmtime/issues/11222">https://github.com/bytecodealliance/wasmtime/issues/11222</a></p>
</blockquote>



<a name="528402968"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528402968" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528402968">(Jul 11 2025 at 20:34)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011907516">PR review</a>.</p>



<a name="528402969"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528402969" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528402969">(Jul 11 2025 at 20:34)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201797728">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11219">https://github.com/bytecodealliance/wasmtime/issues/11219</a></p>
</blockquote>



<a name="528403048"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528403048" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528403048">(Jul 11 2025 at 20:35)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011909605">PR review</a>.</p>



<a name="528403049"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528403049" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528403049">(Jul 11 2025 at 20:35)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201799026">PR review comment</a>:</p>
<blockquote>
<p>I've opened an issue for this: <a href="https://github.com/bytecodealliance/wasmtime/issues/11222">https://github.com/bytecodealliance/wasmtime/issues/11222</a></p>
</blockquote>



<a name="528405739"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528405739" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528405739">(Jul 11 2025 at 21:00)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011972443">PR review</a>.</p>



<a name="528405740"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528405740" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528405740">(Jul 11 2025 at 21:00)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201842056">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11226">https://github.com/bytecodealliance/wasmtime/issues/11226</a></p>
</blockquote>



<a name="528405781"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528405781" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528405781">(Jul 11 2025 at 21:01)</a>:</h4>
<p>dicej created <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#discussion_r2201842793">PR review comment</a>:</p>
<blockquote>
<p>Issue filed: <a href="https://github.com/bytecodealliance/wasmtime/issues/11226">https://github.com/bytecodealliance/wasmtime/issues/11226</a></p>
</blockquote>



<a name="528405783"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528405783" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528405783">(Jul 11 2025 at 21:01)</a>:</h4>
<p>dicej submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011973812">PR review</a>.</p>



<a name="528406256"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528406256" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528406256">(Jul 11 2025 at 21:05)</a>:</h4>
<p>alexcrichton submitted <a href="https://github.com/bytecodealliance/wasmtime/pull/11127#pullrequestreview-3011989618">PR review</a>:</p>
<blockquote>
<p>Ok I believe we've filed issues for follow-up tasks but otherwise this is an off-by-default feature and in a pretty good spot otherwise, so I'm going to flag for merge. Thanks again @dicej!</p>
</blockquote>



<a name="528408704"></a>
<h4><a href="https://bytecodealliance.zulipchat.com#narrow/stream/225357-git-wasmtime/topic/wasmtime%20/%20PR%20%2311127%20implement%20Component%20Model%20async%20ABI/near/528408704" class="zl"><img src="https://bytecodealliance.github.io/zulip-archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wasmtime GitHub notifications bot <a href="https://bytecodealliance.github.io/zulip-archive/stream/225357-git-wasmtime/topic/wasmtime.20.2F.20PR.20.2311127.20implement.20Component.20Model.20async.20ABI.html#528408704">(Jul 11 2025 at 21:29)</a>:</h4>
<p>alexcrichton merged <a href="https://github.com/bytecodealliance/wasmtime/pull/11127">PR #11127</a>.</p>



<hr><p>Last updated: Feb 22 2026 at 11:05 UTC</p>
</html>