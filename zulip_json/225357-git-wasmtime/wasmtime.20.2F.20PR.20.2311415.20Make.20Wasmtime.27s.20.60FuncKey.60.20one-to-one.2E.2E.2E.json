[
    {
        "content": "<p>fitzgen opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a> from <code>fitzgen:inlining-fuzz-bugs</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p><code>FuncKey</code>, which used to be called <code>CompileKey</code>, is now one-to-one with <code>cranelift_codegen::ir::UserExternalName</code>, and is used for not just identifying compilation objects but also relocations and call-graph edges. This allows us to determine the <code>StaticModuleIndex</code> and <code>DefinedFuncIndex</code> pair for any <code>cranelift_codegen::ir::FuncRef</code>, regardless of inlining depth, which fixes some fuzz bugs on OSS-Fuzz.</p>\n<p>This continues pushing on the idea that Wasmtime's compilation orchestration and linking should be relatively agnostic to the kinds of things it is actually compiling and linking, allowing us to tweak, add, and remove new kinds of <code>FuncKey</code>s more easily. Adding a new <code>FuncKey</code> should not require modifying relocation resolution, for example, just a little bit of code to run the associated compilation and optionally some code to extract metadata into our final artifacts for querying at runtime. Everything in between should Just Continue Working. We still aren't all the way there yet, but this does bring us a little bit closer.</p>\n<p>Finally, in Cranelift's inlining pass, this adds a check that a block is inserted in the layout before attempting to remove it from the layout, which would otherwise cause panics. This was triggered by multi-level inlining and now-unreachable blocks in the inner callees.</p>\n<p>I'll note that this does update basically all of the disas tests, or at least nearly all of them that make function calls. This is because the namespace/index numbering pair changed slightly to align with <code>FuncKey</code>, but that should pretty much be the only changes.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 533880060,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754952830
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/abrown\">abrown</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 533880061,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754952830
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 533880063,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754952831
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 533880064,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754952831
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 533880065,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754952831
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#pullrequestreview-3108001915\">PR review</a>.</p>",
        "id": 533880523,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754953081
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#discussion_r2268182476\">PR review comment</a>:</p>\n<blockquote>\n<p>Whoops, I need to fill out this comment</p>\n</blockquote>",
        "id": 533880524,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754953081
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 533881399,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754953614
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#issuecomment-3177477146\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @saulecabrera</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"cranelift\", \"wasmtime:api\", \"winch\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>saulecabrera: winch</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 533895204,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754965361
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#pullrequestreview-3108418824\">PR review</a>.</p>",
        "id": 533899656,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754968836
    },
    {
        "content": "<p>bjorn3 submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#pullrequestreview-3109379592\">PR review</a>.</p>",
        "id": 533936836,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754989259
    },
    {
        "content": "<p>bjorn3 created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#discussion_r2269187875\">PR review comment</a>:</p>\n<blockquote>\n<p>Maybe print the indexes as hex without <code>0x</code> prefix? <code>format!(\"u{namespace:x}:{index:x}\")</code></p>\n</blockquote>",
        "id": 533936838,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1754989260
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#pullrequestreview-3111774759\">PR review</a>.</p>",
        "id": 534014992,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755015548
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415#discussion_r2270482445\">PR review comment</a>:</p>\n<blockquote>\n<p>This would require also updating the CLIF parser, and I'd rather not get into that in this PR, as it is fairly unrelated.</p>\n</blockquote>",
        "id": 534014994,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755015548
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 534015502,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755015706
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 534019036,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755016979
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 534019907,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755017247
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 534033448,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755022974
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 534033449,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755022974
    },
    {
        "content": "<p>fitzgen merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11415\">PR #11415</a>.</p>",
        "id": 534038363,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1755025041
    }
]