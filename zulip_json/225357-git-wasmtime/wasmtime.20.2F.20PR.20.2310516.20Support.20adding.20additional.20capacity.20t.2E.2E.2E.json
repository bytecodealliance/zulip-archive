[
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/dicej\">dicej</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 509792849,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743627579
    },
    {
        "content": "<p>fitzgen opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a> from <code>fitzgen:freelist-add-capacity</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Split out from <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10503\">https://github.com/bytecodealliance/wasmtime/pull/10503</a></p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 509792850,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743627579
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 509792851,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743627579
    },
    {
        "content": "<p>FrankReh submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737618694\">PR review</a>.</p>",
        "id": 509795485,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743628605
    },
    {
        "content": "<p>FrankReh created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025617741\">PR review comment</a>:</p>\n<blockquote>\n<p>\"and free_list way we\" I was not able to parse.</p>\n</blockquote>",
        "id": 509795486,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743628605
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 509796524,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629009
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737634126\">PR review</a>.</p>",
        "id": 509796780,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629112
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025627092\">PR review comment</a>:</p>\n<blockquote>\n<p>I just reversed these changes, so that it still calls <code>reset</code>, since <code>reset</code> can't be removed until the rest of the changes from #10503 are present. Will make sure I don't accidentally remove words from the comment somehow when eventually inlining what used to be <code>reset</code> in that PR.</p>\n</blockquote>",
        "id": 509796781,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629113
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737630035\">PR review</a>.</p>",
        "id": 509797093,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629241
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025624330\">PR review comment</a>:</p>\n<blockquote>\n<p>Could the tests below exercise this new method?</p>\n</blockquote>",
        "id": 509797094,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629241
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025625054\">PR review comment</a>:</p>\n<blockquote>\n<p>To confirm, there's still a test below testing this behavior and that it fails?</p>\n</blockquote>",
        "id": 509797095,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629241
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025627551\">PR review comment</a>:</p>\n<blockquote>\n<p>If allocations could previously go up to <code>old_cap</code>, shouldn't this round up instead of round down?</p>\n</blockquote>",
        "id": 509797096,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629241
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737644498\">PR review</a>.</p>",
        "id": 509797579,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629442
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025632568\">PR review comment</a>:</p>\n<blockquote>\n<p>Correct, we just return an <code>Ok(None)</code> (meaning that the allocation might succeed after growth/gc) instead of <code>Err(_)</code> (meaning that the allocation will never succeed no matter what)</p>\n</blockquote>",
        "id": 509797580,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629442
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737657785\">PR review</a>.</p>",
        "id": 509798595,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629929
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025640289\">PR review comment</a>:</p>\n<blockquote>\n<p>No, because the old capacity was also rounded down the the alignment (all allocations are also a multiple of the alignment) so the first newly allocatable index for our additional capacity is that old capacity rounded down.</p>\n</blockquote>",
        "id": 509798596,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743629929
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 509799072,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743630193
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737666082\">PR review</a>.</p>",
        "id": 509799081,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743630199
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025644742\">PR review comment</a>:</p>\n<blockquote>\n<p>Done</p>\n</blockquote>",
        "id": 509799083,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743630199
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 509799310,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743630311
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2737683147\">PR review</a>.</p>",
        "id": 509800595,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743630920
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2025656409\">PR review comment</a>:</p>\n<blockquote>\n<p>Should this assert that old_cap is already aligned in that case? It mostly just seems counter-inutitive to me that you'd round down the end to figure out the index of the next block, I'd expect that you'd either round up or assert rounding isn't necessary</p>\n</blockquote>",
        "id": 509800596,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743630920
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#issuecomment-2773978709\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"wasmtime:api\", \"wasmtime:ref-types\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>fitzgen: wasmtime:ref-types</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 509812923,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743637505
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2744622967\">PR review</a>.</p>",
        "id": 510334586,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743829985
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2029704159\">PR review comment</a>:</p>\n<blockquote>\n<p>If we keep <code>self.capacity</code> aligned down to our alignment, then a sequence of 100 <code>add_capacity(1)</code> calls will never actually result in the <code>FreeList</code> thinking it has capacity for an allocation, even though it actually should. That is, <code>self.capacity = round_down_to_align(self.capacity + additional)</code> will always result in <code>self.capacity ==0</code> when <code>self.capacity</code> is initially <code>0</code> and <code>additional</code> is <code>1</code>, even when it is called in a loop.</p>\n<p>We have to keep track of the actual capacity, and just do the rounding when adding blocks into the free list.</p>\n</blockquote>",
        "id": 510334587,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743829985
    },
    {
        "content": "<p>fitzgen edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2029704159\">PR review comment</a>.</p>",
        "id": 510334631,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1743830016
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2747104412\">PR review</a>.</p>",
        "id": 510692157,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744037023
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2031409383\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah ok yeah that makes sense, I was missing that subtelty. Mind adding some comments to that effect to this?</p>\n</blockquote>",
        "id": 510692160,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744037023
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 510726434,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744046107
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#pullrequestreview-2747544942\">PR review</a>.</p>",
        "id": 510726561,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744046153
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516#discussion_r2031675679\">PR review comment</a>:</p>\n<blockquote>\n<p>Added</p>\n</blockquote>",
        "id": 510726562,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744046153
    },
    {
        "content": "<p>fitzgen has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 510726638,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744046164
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 510729427,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744047054
    },
    {
        "content": "<p>fitzgen merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10516\">PR #10516</a>.</p>",
        "id": 510735540,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744049036
    }
]