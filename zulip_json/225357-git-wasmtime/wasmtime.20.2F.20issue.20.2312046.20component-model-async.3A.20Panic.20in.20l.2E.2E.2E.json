[
    {
        "content": "<p>alexcrichton assigned dicej to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12046\">issue #12046</a>.</p>",
        "id": 558245055,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1763568467
    },
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12046\">issue #12046</a>:</p>\n<blockquote>\n<p>(sorry bad bug title)</p>\n<p>This input:</p>\n<p>&lt;details&gt;</p>\n<p>&lt;summary&gt;&lt;code&gt;test.wast&lt;/code&gt;&lt;/summary&gt;</p>\n<div class=\"codehilite\" data-code-language=\"wasm\"><pre><span></span><code>(component\n  (core module $libc (;0;)\n    (type $#type0 (;0;) (func (param i32 i32 i32 i32) (result i32)))\n    (memory $#memory0 (;0;) 1)\n    (global $last (;0;) (mut i32) i32.const 8)\n    (export \"memory\" (memory $#memory0))\n    (export \"realloc\" (func $realloc))\n    (func $realloc (;0;) (type $#type0) (param $old_ptr i32) (param $old_size i32) (param $align i32) (param $new_size i32) (result i32)\n      (local $ret i32)\n      local.get $old_ptr\n      if $#label0\n        local.get $old_size\n        local.get $new_size\n        i32.gt_u\n        if $#label1\n          local.get $old_ptr\n          return\n        end\n      end\n      global.get $last\n      local.get $align\n      i32.const -1\n      i32.add\n      i32.add\n      local.get $align\n      i32.const -1\n      i32.add\n      i32.const -1\n      i32.xor\n      i32.and\n      global.set $last\n      global.get $last\n      local.set $ret\n      global.get $last\n      local.get $new_size\n      i32.add\n      global.set $last\n      loop $loop\n        memory.size\n        i32.const 65536\n        i32.mul\n        global.get $last\n        i32.lt_u\n        if $#label1\n          i32.const 1\n          memory.grow\n          i32.const -1\n          i32.eq\n          if $#label2\n            unreachable\n          end\n          br $loop\n        end\n      end\n      local.get $ret\n      i32.const 222\n      local.get $new_size\n      memory.fill\n      local.get $old_ptr\n      if $#label0\n        local.get $ret\n        local.get $old_ptr\n        local.get $old_size\n        memory.copy\n      end\n      local.get $ret\n    )\n  )\n\n  (component $caller\n    (type $t5 (list u16))\n    (type $t0 (tuple $t5 string string bool s16))\n    (type $sig (func async (param \"p0\" $t0) (param \"p1\" $t0) (result $t0)))\n    (import \"echo-import\" (func $f (type $sig)))\n\n    (core instance $libc (instantiate $libc))\n    (core func $f_lower\n      (canon lower\n        (func $f)\n        (memory $libc \"memory\")\n        (realloc (func $libc \"realloc\"))\n        string-encoding=latin1+utf16\n      )\n    )\n\n    (core module $m\n      (type $import (func (param i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32)))\n      (type $#type2 (func (param i32 i32 i32 i32) (result i32)))\n      (import \"libc\" \"realloc\" (func $realloc (type $#type2)))\n      (import \"host\" \"echo-import\" (func $host (type $import)))\n      (func (export \"echo-export\") (param $retptr i32) (param $argptr i32) (param $#local2 i32) (param $#local3 i32) (param $#local4 i32) (param $#local5 i32) (param $#local6 i32) (param $#local7 i32) (param $#local8 i32) (param $#local9 i32) (param $#local10 i32) (param $#local11 i32) (param $#local12 i32) (param $#local13 i32) (param $#local14 i32) (param $#local15 i32) (result i32)\n        (local $#local16 i32) (local $#local17 i32)\n        local.get $retptr\n        local.get $argptr\n        local.get $#local2\n        local.get $#local3\n        local.get $#local4\n        local.get $#local5\n        local.get $#local6\n        local.get $#local7\n        local.get $#local8\n        local.get $#local9\n        local.get $#local10\n        local.get $#local11\n        local.get $#local12\n        local.get $#local13\n        local.get $#local14\n        local.get $#local15\n        i32.const 0\n        i32.const 0\n        i32.const 4\n        i32.const 28\n        call $realloc\n        local.set $#local16\n        local.get $#local16\n        call $host\n        local.get $#local16\n      )\n    )\n    (core instance $i (instantiate $m\n      (with \"libc\" (instance $libc))\n      (with \"host\" (instance (export \"echo-import\" (func $f_lower))))\n    ))\n    (func (export \"echo-export\") (type $sig)\n      (canon lift\n        (core func $i \"echo-export\")\n        (memory $libc \"memory\")\n        (realloc (func $libc \"realloc\"))\n        string-encoding=latin1+utf16)\n    )\n  )\n\n  (component $callee\n    (type $t0 (tuple (list u16) string string bool s16))\n    (type $export_sig (func async (param \"p0\" $t0) (param \"p1\" $t0) (result $t0)))\n    (core instance $libc (instantiate $libc))\n    (core module $m\n      (func (export \"echo-export\") (param i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32) (result i32)\n        unreachable\n      )\n      (func (export \"callback\") (param i32 i32 i32) (result i32)\n        unreachable\n      )\n    )\n    (core instance $i (;3;) (instantiate $m\n        (with \"libc\" (instance $libc))\n      )\n    )\n    (func (export \"echo-export\") (type $export_sig)\n      (canon lift\n        (core func $i \"echo-export\")\n        (memory $libc \"memory\")\n        (realloc (func $libc \"realloc\"))\n        string-encoding=utf8\n        async\n        (callback (func $i \"callback\"))\n      )\n    )\n  )\n\n  (instance $c1 (instantiate $callee))\n  (instance $c2 (instantiate $caller\n    (with \"echo-import\" (func $c1 \"echo-export\"))\n  ))\n  (export \"echo-export\" (func $c2 \"echo-export\"))\n)\n\n(assert_trap\n  (invoke \"echo-export\"\n    (tuple.const\n      (list.const)\n      (str.const \"\")\n      (str.const \"\")\n      (bool.const false)\n      (s16.const 0)\n    )\n    (tuple.const\n      (list.const )\n      (str.const \"\")\n      (str.const \"\")\n      (bool.const false)\n      (s16.const 0)\n    )\n  )\n  \"unreachable\")\n</code></pre></div>\n<p>&lt;/details&gt;</p>\n<p>yields:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">W</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">-</span><span class=\"k\">async</span>\n<span class=\"w\">    </span><span class=\"n\">Finished</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">dev</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">profile</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">unoptimized</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">debuginfo</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">0.10</span><span class=\"n\">s</span>\n<span class=\"w\">     </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">debug</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">W</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">-</span><span class=\"k\">async</span><span class=\"err\">`</span>\n\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mi\">2543961</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">alex</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">/</span><span class=\"n\">concurrent</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">2120</span><span class=\"p\">:</span><span class=\"mi\">37</span><span class=\"p\">:</span>\n<span class=\"nc\">range</span><span class=\"w\"> </span><span class=\"n\">end</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">slice</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"mi\">16</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 558245067,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1763568469
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the fuzz-bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12046\">Issue #12046</a>.</p>",
        "id": 558245070,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1763568469
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12046\">issue #12046</a>:</p>\n<blockquote>\n<p>(sorry bad bug title)</p>\n<p>This input:</p>\n<p>&lt;details&gt;</p>\n<p>&lt;summary&gt;&lt;code&gt;test.wast&lt;/code&gt;&lt;/summary&gt;</p>\n<div class=\"codehilite\" data-code-language=\"wasm\"><pre><span></span><code>(component\n  (core module $libc (;0;)\n    (type $#type0 (;0;) (func (param i32 i32 i32 i32) (result i32)))\n    (memory $#memory0 (;0;) 1)\n    (global $last (;0;) (mut i32) i32.const 8)\n    (export \"memory\" (memory $#memory0))\n    (export \"realloc\" (func $realloc))\n    (func $realloc (;0;) (type $#type0) (param $old_ptr i32) (param $old_size i32) (param $align i32) (param $new_size i32) (result i32)\n      (local $ret i32)\n      local.get $old_ptr\n      if $#label0\n        local.get $old_size\n        local.get $new_size\n        i32.gt_u\n        if $#label1\n          local.get $old_ptr\n          return\n        end\n      end\n      global.get $last\n      local.get $align\n      i32.const -1\n      i32.add\n      i32.add\n      local.get $align\n      i32.const -1\n      i32.add\n      i32.const -1\n      i32.xor\n      i32.and\n      global.set $last\n      global.get $last\n      local.set $ret\n      global.get $last\n      local.get $new_size\n      i32.add\n      global.set $last\n      loop $loop\n        memory.size\n        i32.const 65536\n        i32.mul\n        global.get $last\n        i32.lt_u\n        if $#label1\n          i32.const 1\n          memory.grow\n          i32.const -1\n          i32.eq\n          if $#label2\n            unreachable\n          end\n          br $loop\n        end\n      end\n      local.get $ret\n      i32.const 222\n      local.get $new_size\n      memory.fill\n      local.get $old_ptr\n      if $#label0\n        local.get $ret\n        local.get $old_ptr\n        local.get $old_size\n        memory.copy\n      end\n      local.get $ret\n    )\n  )\n\n  (component $caller\n    (type $t5 (list u16))\n    (type $t0 (tuple $t5 string string bool s16))\n    (type $sig (func async (param \"p0\" $t0) (param \"p1\" $t0) (result $t0)))\n    (import \"echo-import\" (func $f (type $sig)))\n\n    (core instance $libc (instantiate $libc))\n    (core func $f_lower\n      (canon lower\n        (func $f)\n        (memory $libc \"memory\")\n        (realloc (func $libc \"realloc\"))\n        string-encoding=latin1+utf16\n      )\n    )\n\n    (core module $m\n      (type $import (func (param i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32)))\n      (type $#type2 (func (param i32 i32 i32 i32) (result i32)))\n      (import \"libc\" \"realloc\" (func $realloc (type $#type2)))\n      (import \"host\" \"echo-import\" (func $host (type $import)))\n      (func (export \"echo-export\") (param $retptr i32) (param $argptr i32) (param $#local2 i32) (param $#local3 i32) (param $#local4 i32) (param $#local5 i32) (param $#local6 i32) (param $#local7 i32) (param $#local8 i32) (param $#local9 i32) (param $#local10 i32) (param $#local11 i32) (param $#local12 i32) (param $#local13 i32) (param $#local14 i32) (param $#local15 i32) (result i32)\n        (local $#local16 i32) (local $#local17 i32)\n        local.get $retptr\n        local.get $argptr\n        local.get $#local2\n        local.get $#local3\n        local.get $#local4\n        local.get $#local5\n        local.get $#local6\n        local.get $#local7\n        local.get $#local8\n        local.get $#local9\n        local.get $#local10\n        local.get $#local11\n        local.get $#local12\n        local.get $#local13\n        local.get $#local14\n        local.get $#local15\n        i32.const 0\n        i32.const 0\n        i32.const 4\n        i32.const 28\n        call $realloc\n        local.set $#local16\n        local.get $#local16\n        call $host\n        local.get $#local16\n      )\n    )\n    (core instance $i (instantiate $m\n      (with \"libc\" (instance $libc))\n      (with \"host\" (instance (export \"echo-import\" (func $f_lower))))\n    ))\n    (func (export \"echo-export\") (type $sig)\n      (canon lift\n        (core func $i \"echo-export\")\n        (memory $libc \"memory\")\n        (realloc (func $libc \"realloc\"))\n        string-encoding=latin1+utf16)\n    )\n  )\n\n  (component $callee\n    (type $t0 (tuple (list u16) string string bool s16))\n    (type $export_sig (func async (param \"p0\" $t0) (param \"p1\" $t0) (result $t0)))\n    (core instance $libc (instantiate $libc))\n    (core module $m\n      (func (export \"echo-export\") (param i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32 i32) (result i32)\n        unreachable\n      )\n      (func (export \"callback\") (param i32 i32 i32) (result i32)\n        unreachable\n      )\n    )\n    (core instance $i (;3;) (instantiate $m\n        (with \"libc\" (instance $libc))\n      )\n    )\n    (func (export \"echo-export\") (type $export_sig)\n      (canon lift\n        (core func $i \"echo-export\")\n        (memory $libc \"memory\")\n        (realloc (func $libc \"realloc\"))\n        string-encoding=utf8\n        async\n        (callback (func $i \"callback\"))\n      )\n    )\n  )\n\n  (instance $c1 (instantiate $callee))\n  (instance $c2 (instantiate $caller\n    (with \"echo-import\" (func $c1 \"echo-export\"))\n  ))\n  (export \"echo-export\" (func $c2 \"echo-export\"))\n)\n\n(assert_trap\n  (invoke \"echo-export\"\n    (tuple.const\n      (list.const)\n      (str.const \"\")\n      (str.const \"\")\n      (bool.const false)\n      (s16.const 0)\n    )\n    (tuple.const\n      (list.const )\n      (str.const \"\")\n      (str.const \"\")\n      (bool.const false)\n      (s16.const 0)\n    )\n  )\n  \"unreachable\")\n</code></pre></div>\n<p>&lt;/details&gt;</p>\n<p>yields:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">W</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">-</span><span class=\"k\">async</span>\n<span class=\"w\">    </span><span class=\"n\">Finished</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">dev</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">profile</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">unoptimized</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">debuginfo</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">0.10</span><span class=\"n\">s</span>\n<span class=\"w\">     </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">debug</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">W</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">-</span><span class=\"k\">async</span><span class=\"err\">`</span>\n\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"mi\">2543961</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">alex</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">runtime</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">/</span><span class=\"n\">concurrent</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">2120</span><span class=\"p\">:</span><span class=\"mi\">37</span><span class=\"p\">:</span>\n<span class=\"nc\">range</span><span class=\"w\"> </span><span class=\"n\">end</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">slice</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"mi\">16</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 558466465,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1763653953
    }
]