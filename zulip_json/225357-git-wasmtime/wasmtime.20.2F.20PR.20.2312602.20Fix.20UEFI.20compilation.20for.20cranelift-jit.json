[
    {
        "content": "<p>RossComputerGuy opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a> from <code>RossComputerGuy:fix/jit-uefi</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n<p>Fixes enough of the errors to get cranelift-jit compiled to UEFI via:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">RUSTFLAGS</span><span class=\"o\">=</span><span class=\"s\">\"--cfg uefi_std\"</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">aarch64</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">uefi</span>\n</code></pre></div>\n<p>Requires changes to <code>region-rs</code> but it hasn't been touched in 2 years. <a href=\"https://github.com/darfink/region-rs/pull/39\">https://github.com/darfink/region-rs/pull/39</a></p>\n</blockquote>",
        "id": 574204052,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771291471
    },
    {
        "content": "<p>RossComputerGuy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>.</p>",
        "id": 574204958,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771292395
    },
    {
        "content": "<p>github-actions[bot] added the label <code>cranelift</code> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>.</p>",
        "id": 574212894,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771299248
    },
    {
        "content": "<p>RossComputerGuy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>.</p>",
        "id": 574217826,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771303896
    },
    {
        "content": "<p>RossComputerGuy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3912269050\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">413</span><span class=\"w\"> </span><span class=\"n\">bb</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">param</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">regs</span><span class=\"w\"> </span><span class=\"n\">ValueRegs</span><span class=\"p\">(</span><span class=\"n\">v192</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">422</span><span class=\"w\"> </span><span class=\"n\">bb</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"n\">inst0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">UnaryImm</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">opcode</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Iconst</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">imm</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Imm64</span><span class=\"p\">(</span><span class=\"mi\">37</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">}):</span><span class=\"w\"> </span><span class=\"nc\">result</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"n\">regs</span><span class=\"w\"> </span><span class=\"n\">ValueRegs</span><span class=\"p\">(</span><span class=\"n\">v193</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">422</span><span class=\"w\"> </span><span class=\"n\">bb</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"n\">inst1</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">Binary</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">opcode</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Iadd</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">v1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">}):</span><span class=\"w\"> </span><span class=\"nc\">result</span><span class=\"w\"> </span><span class=\"n\">v2</span><span class=\"w\"> </span><span class=\"n\">regs</span><span class=\"w\"> </span><span class=\"n\">ValueRegs</span><span class=\"p\">(</span><span class=\"n\">v194</span><span class=\"p\">)</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">493</span><span class=\"w\"> </span><span class=\"n\">bb</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"n\">inst0</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">color</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">502</span><span class=\"w\">  </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">constant</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">37</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">493</span><span class=\"w\"> </span><span class=\"n\">bb</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"n\">inst1</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">color</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">493</span><span class=\"w\"> </span><span class=\"n\">bb</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"n\">inst2</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">color</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">496</span><span class=\"w\">  </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">side</span><span class=\"o\">-</span><span class=\"n\">effecting</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">incrementing</span><span class=\"w\"> </span><span class=\"n\">color</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"n\">inst</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1313</span><span class=\"w\"> </span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"n\">used</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">old</span><span class=\"w\"> </span><span class=\"n\">state</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">Once</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1313</span><span class=\"w\"> </span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"w\"> </span><span class=\"n\">used</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">old</span><span class=\"w\"> </span><span class=\"n\">state</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">Once</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1313</span><span class=\"w\"> </span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"n\">v2</span><span class=\"w\"> </span><span class=\"n\">used</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">old</span><span class=\"w\"> </span><span class=\"n\">state</span><span class=\"w\"> </span><span class=\"n\">Unused</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">Once</span>\n<span class=\"p\">[</span><span class=\"n\">DEBUG</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">compile</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">35</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">CLIF</span><span class=\"w\"> </span><span class=\"n\">instructions</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">lower</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"p\">[</span><span class=\"n\">DEBUG</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">compile</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">CLIF</span><span class=\"w\"> </span><span class=\"n\">blocks</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">lower</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">1140</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">lower</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">function</span><span class=\"w\"> </span><span class=\"n\">u0</span><span class=\"p\">:</span><span class=\"mi\">0</span><span class=\"p\">(</span><span class=\"kt\">i32</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">i32</span><span class=\"w\"> </span><span class=\"nc\">tail</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"n\">block0</span><span class=\"p\">(</span><span class=\"n\">v0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kt\">i32</span><span class=\"p\">):</span>\n<span class=\"w\">    </span><span class=\"nc\">v1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">iconst</span><span class=\"p\">.</span><span class=\"kt\">i32</span><span class=\"w\"> </span><span class=\"mi\">37</span>\n<span class=\"w\">    </span><span class=\"n\">v2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">iadd</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">v0</span><span class=\"w\">  </span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">37</span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">v2</span>\n<span class=\"p\">}</span>\n\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">776</span><span class=\"w\"> </span><span class=\"n\">lower_clif_block</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">block</span><span class=\"w\"> </span><span class=\"n\">block0</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"n\">inst2</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">MultiAry</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">opcode</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Return</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">EntityList</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">PhantomData</span><span class=\"o\">&lt;</span><span class=\"n\">cranelift_codegen</span><span class=\"p\">::</span><span class=\"n\">ir</span><span class=\"p\">::</span><span class=\"n\">entities</span><span class=\"p\">::</span><span class=\"n\">Value</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"p\">})</span><span class=\"w\"> </span><span class=\"n\">is_branch</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"w\"> </span><span class=\"n\">side_effect</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"w\"> </span><span class=\"n\">value_needed</span><span class=\"w\"> </span><span class=\"kc\">false</span>\n<span class=\"p\">[</span><span class=\"n\">TRACE</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">cranelift</span><span class=\"o\">/</span><span class=\"n\">codegen</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">machinst</span><span class=\"o\">/</span><span class=\"n\">lower</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">810</span><span class=\"w\"> </span><span class=\"n\">lowering</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">inst</span><span class=\"w\"> </span><span class=\"n\">inst2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">return</span><span class=\"w\"> </span><span class=\"n\">v2</span>\n\n\n<span class=\"n\">Synchronous</span><span class=\"w\"> </span><span class=\"n\">Exception</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"mh\">0x000000014043BF50</span>\n\n\n<span class=\"n\">Synchronous</span><span class=\"w\"> </span><span class=\"n\">Exception</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"mh\">0x000000014043BF50</span>\n</code></pre></div>\n<p>It seems the example crashes in UEFI. May need help figuring this problem out.</p>\n</blockquote>",
        "id": 574217879,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771303950
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915913601\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>@RossComputerGuy thanks for the PR.</p>\n<p>Unfortunately I don't think there is much that we can go on regarding your observed crash. The quoted log shows normal compilation followed by \"synchronous exception\", nothing in-between, and you've told us nothing about your environment or what you're trying to do.</p>\n<p>I can make some educated guesses -- e.g., have you set pages to have execute permission? Is that a thing in your environment (do you have paging enabled)? Are you properly managing other requirements of the ABI (e.g. stack alignment)? Does the code that you're compiling have any bugs that could result in a bad memory access?</p>\n<p>Basically, for an actionable bug report, we need: (i) information about what you're trying to do; (ii) information about what happened; (iii) information about why you believe something else should have happened; (iv) whatever investigation you've done that narrows down where this divergence is occurring, ideally pointing in the direction of a Cranelift issue. Thanks!</p>\n</blockquote>",
        "id": 574341712,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771347751
    },
    {
        "content": "<p>RossComputerGuy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915923405\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>I did narrow it down to this block:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/f6418005cd282f32840483709c448cf2e8ac808a/cranelift/jit/examples/jit-minimal.rs#L30-L54\">https://github.com/bytecodealliance/wasmtime/blob/f6418005cd282f32840483709c448cf2e8ac808a/cranelift/jit/examples/jit-minimal.rs#L30-L54</a></p>\n<p>I'll see if I can get more details.</p>\n</blockquote>",
        "id": 574342402,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771347881
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915940746\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>OK, thanks. That's a function body that returns <code>x + 37</code>, and it compiles to reasonable (and correct) machine code in Cranelift. I suspect there is something wrong with your execution environment in general, which is why I was asking about execute permissions, stack alignment, paging, and all of that.</p>\n</blockquote>",
        "id": 574343771,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771348112
    },
    {
        "content": "<p>RossComputerGuy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915953120\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>Yes but isn't that block not even executing anything? I thought that's just doing codegen. I do have <code>region</code> set up to work with paging which hopefully is correct. The problem is UEFI doesn't really have stack traces so it's hard to figure out what is going awry.</p>\n</blockquote>",
        "id": 574344383,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771348276
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915965848\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>target-lexicon's default_calling_convention method doesn't look like it handles uefi. Maybe that is the issue? On x86_64 uefi uses the windows callconv.</p>\n</blockquote>",
        "id": 574345015,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771348445
    },
    {
        "content": "<p>RossComputerGuy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915971170\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>That is correct, however this is aarch64 that I am compiling for.</p>\n</blockquote>",
        "id": 574345287,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771348513
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915974512\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>Ah, I see, I thought you meant you had narrowed down the exception to the code produced by that IR emission sequence. You mean literally there is a crash in that IR emission sequence...</p>\n<p>Do you have a panic handler that can print a panic message at least?</p>\n</blockquote>",
        "id": 574345452,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771348558
    },
    {
        "content": "<p>RossComputerGuy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602#issuecomment-3915984302\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12602\">PR #12602</a>:</p>\n<blockquote>\n<p>Yeah no, it doesn't even get to the point of emitting the binary. I haven't attached a panic handler but I will. I know there's also a UEFI debug protocol which should allow me to attach into the interrupt vector so hopefully I can catch exceptions and deal with them.</p>\n</blockquote>",
        "id": 574345908,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771348683
    }
]