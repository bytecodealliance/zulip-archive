[
    {
        "content": "<p>bongjunj opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849\">PR #10849</a> from <code>bongjunj:icmp-xor</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n<p>This adds new rules to the mid-end optimizer.<br>\nRules are verified with crocus.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">crocus</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"p\">.</span><span class=\"n\">isle</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">simplify</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">noprelude</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">codegen</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">codegen</span><span class=\"o\">-</span><span class=\"n\">dir</span><span class=\"o\">&gt;</span>\n</code></pre></div>\n<p>&lt;details&gt;<br>\n&lt;summary&gt;proof.isle&lt;/summary&gt;</p>\n<div class=\"codehilite\" data-code-language=\"isle\"><pre><span></span><code>(rule (simplify (icmp cty (IntCC.NotEqual) x (bxor bty x y))) (subsume (icmp cty (IntCC.NotEqual) y (iconst_u bty 0))))\n; (rule (simplify (icmp cty (IntCC.NotEqual) x (bxor bty x y))) (subsume (icmp cty (IntCC.NotEqual) y (iconst_u bty 0))))\n(type Type (primitive Type))\n(type Value (primitive Value))\n(type Imm64 (primitive Imm64))\n(type IntCC extern\n    (enum\n        Equal\n        NotEqual\n        SignedGreaterThan\n        SignedGreaterThanOrEqual\n        SignedLessThan\n        SignedLessThanOrEqual\n        UnsignedGreaterThan\n        UnsignedGreaterThanOrEqual\n        UnsignedLessThan\n        UnsignedLessThanOrEqual))\n\n(model IntCC (enum\n    (Equal #x00)\n    (NotEqual #x01)\n    (SignedGreaterThan #x02)\n    (SignedGreaterThanOrEqual #x03)\n    (SignedLessThan #x04)\n    (SignedLessThanOrEqual #x05)\n    (UnsignedGreaterThan #x06)\n    (UnsignedGreaterThanOrEqual #x07)\n    (UnsignedLessThan #x08)\n    (UnsignedLessThanOrEqual #x09)))\n\n(spec (bxor ty x y)\n    (provide (= (bvxor x y) result))\n    (require\n        (= ty (widthof x))\n        (= (widthof x) (widthof y))))\n(decl bxor (Type Value Value) Value)\n(extern extractor bxor bxor)\n(extern constructor bxor bxor)\n\n(spec (icmp ty cc x y)\n    (provide\n        (= result\n            (switch cc\n                ((IntCC.Equal)                        (if (= x y)       #x01 #x00))\n                ((IntCC.NotEqual)                     (if (not (= x y)) #x01 #x00))\n                ((IntCC.SignedGreaterThan)            (if (bvsgt x y)   #x01 #x00))\n                ((IntCC.SignedGreaterThanOrEqual)     (if (bvsge x y)   #x01 #x00))\n                ((IntCC.SignedLessThan)               (if (bvslt x y)   #x01 #x00))\n                ((IntCC.SignedLessThanOrEqual)        (if (bvsle x y)   #x01 #x00))\n                ((IntCC.UnsignedGreaterThan)          (if (bvugt x y)   #x01 #x00))\n                ((IntCC.UnsignedGreaterThanOrEqual)   (if (bvuge x y)   #x01 #x00))\n                ((IntCC.UnsignedLessThan)             (if (bvult x y)   #x01 #x00))\n                ((IntCC.UnsignedLessThanOrEqual)      (if (bvule x y)   #x01 #x00)))))\n    (require\n        (= ty 8)\n        (= (widthof x) (widthof y))\n        (= (widthof x) 64)\n        (or\n            (= cc (IntCC.Equal))\n            (= cc (IntCC.NotEqual))\n            (= cc (IntCC.UnsignedGreaterThanOrEqual))\n            (= cc (IntCC.UnsignedGreaterThan))\n            (= cc (IntCC.UnsignedLessThanOrEqual))\n            (= cc (IntCC.UnsignedLessThan))\n            (= cc (IntCC.SignedGreaterThanOrEqual))\n            (= cc (IntCC.SignedGreaterThan))\n            (= cc (IntCC.SignedLessThanOrEqual))\n            (= cc (IntCC.SignedLessThan)))))\n\n(decl icmp (Type IntCC Value Value) Value)\n(extern extractor icmp icmp)\n(extern constructor icmp icmp)\n\n(spec (iconst ty arg)\n    (provide (= arg (zero_ext 64 result)))\n    (require (= ty (widthof arg))))\n(decl iconst (Type Imm64) Value)\n(extern constructor iconst iconst)\n(extern extractor iconst iconst)\n\n(spec (imm64 x) (provide (= x result)))\n(decl imm64 (u64) Imm64)\n(extern constructor imm64 imm64)\n\n(spec (subsume x) (provide (= result x)))\n(decl subsume (Value) Value)\n(extern constructor subsume subsume)\n\n(spec (iconst_u ty arg)\n    (provide (= arg (zero_ext 64 result))))\n(decl iconst_u (Type u64) Value)\n(extern constructor iconst_u iconst_u)\n\n(spec (simplify x) (provide (= x result)))\n(instantiate simplify\n    ((args (bv 8))  (ret (bv 8))  (canon (bv 8))))\n(decl simplify (Value) Value)\n</code></pre></div>\n<p>&lt;/details&gt;</p>\n</blockquote>",
        "id": 520821815,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748417192
    },
    {
        "content": "<p><strong>bongjunj</strong> requested <a href=\"https://github.com/cfallin\">cfallin</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849\">PR #10849</a>.</p>",
        "id": 520821816,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748417192
    },
    {
        "content": "<p><strong>bongjunj</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849\">PR #10849</a>.</p>",
        "id": 520821817,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748417192
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849#issuecomment-2915684008\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849\">PR #10849</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @cfallin, @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"cranelift\", \"isle\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>cfallin: isle</li>\n<li>fitzgen: isle</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 520847831,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748425582
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849#pullrequestreview-2875900682\">PR review</a>:</p>\n<blockquote>\n<p>LGTM, and thanks for the formal verification as well!</p>\n</blockquote>",
        "id": 520943163,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748453526
    },
    {
        "content": "<p>cfallin merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10849\">PR #10849</a>.</p>",
        "id": 520946289,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748454754
    }
]