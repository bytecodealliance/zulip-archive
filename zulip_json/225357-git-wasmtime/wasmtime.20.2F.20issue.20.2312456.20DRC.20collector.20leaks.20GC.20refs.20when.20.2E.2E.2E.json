[
    {
        "content": "<p>zzjas opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456\">issue #12456</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#[test]</span>\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">struct_new_init_failure_no_leak</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"p\">::</span><span class=\"n\">gc_store</span><span class=\"p\">()</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">ty</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">StructType</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">store</span><span class=\"p\">.</span><span class=\"n\">engine</span><span class=\"p\">(),</span>\n<span class=\"w\">        </span><span class=\"p\">[</span>\n<span class=\"w\">            </span><span class=\"n\">FieldType</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">Mutability</span><span class=\"p\">::</span><span class=\"n\">Var</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">StorageType</span><span class=\"p\">::</span><span class=\"n\">ValType</span><span class=\"p\">(</span><span class=\"n\">ValType</span><span class=\"p\">::</span><span class=\"n\">EXTERNREF</span><span class=\"p\">)),</span>\n<span class=\"w\">            </span><span class=\"n\">FieldType</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">Mutability</span><span class=\"p\">::</span><span class=\"n\">Var</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">StorageType</span><span class=\"p\">::</span><span class=\"n\">ValType</span><span class=\"p\">(</span><span class=\"n\">ValType</span><span class=\"p\">::</span><span class=\"n\">EXTERNREF</span><span class=\"p\">)),</span>\n<span class=\"w\">        </span><span class=\"p\">],</span>\n<span class=\"w\">    </span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">pre</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">StructRefPre</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">ty</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">dropped</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Arc</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">AtomicBool</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"kc\">false</span><span class=\"p\">));</span>\n<span class=\"w\">    </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">RootScope</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">good</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ExternRef</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">SetFlagOnDrop</span><span class=\"p\">(</span><span class=\"n\">dropped</span><span class=\"p\">.</span><span class=\"n\">clone</span><span class=\"p\">()))</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"c1\">// Create an unrooted ref by letting its scope expire.</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">bad</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">tmp</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">RootScope</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"p\">);</span>\n<span class=\"w\">            </span><span class=\"n\">ExternRef</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">tmp</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"k\">u32</span><span class=\"p\">)</span><span class=\"o\">?</span>\n<span class=\"w\">        </span><span class=\"p\">};</span>\n<span class=\"w\">        </span><span class=\"fm\">assert!</span><span class=\"p\">(</span><span class=\"n\">StructRef</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span>\n<span class=\"w\">            </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"p\">,</span>\n<span class=\"w\">            </span><span class=\"o\">&amp;</span><span class=\"n\">pre</span><span class=\"p\">,</span>\n<span class=\"w\">            </span><span class=\"o\">&amp;</span><span class=\"p\">[</span><span class=\"n\">Val</span><span class=\"p\">::</span><span class=\"n\">ExternRef</span><span class=\"p\">(</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">good</span><span class=\"p\">)),</span><span class=\"w\"> </span><span class=\"n\">Val</span><span class=\"p\">::</span><span class=\"n\">ExternRef</span><span class=\"p\">(</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">bad</span><span class=\"p\">))],</span>\n<span class=\"w\">        </span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">is_err</span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">.</span><span class=\"n\">gc</span><span class=\"p\">(</span><span class=\"nb\">None</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">assert!</span><span class=\"p\">(</span><span class=\"n\">dropped</span><span class=\"p\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">SeqCst</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"s\">\"field 0 externref was leaked\"</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"nb\">Ok</span><span class=\"p\">(())</span>\n<span class=\"p\">}</span>\n\n<span class=\"cp\">#[test]</span>\n<span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">array_new_fixed_init_failure_no_leak</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"p\">()</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"p\">::</span><span class=\"n\">gc_store</span><span class=\"p\">()</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">ty</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ArrayType</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">store</span><span class=\"p\">.</span><span class=\"n\">engine</span><span class=\"p\">(),</span>\n<span class=\"w\">        </span><span class=\"n\">FieldType</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">Mutability</span><span class=\"p\">::</span><span class=\"n\">Var</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">StorageType</span><span class=\"p\">::</span><span class=\"n\">ValType</span><span class=\"p\">(</span><span class=\"n\">ValType</span><span class=\"p\">::</span><span class=\"n\">EXTERNREF</span><span class=\"p\">)),</span>\n<span class=\"w\">    </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">pre</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ArrayRefPre</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">ty</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">dropped</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Arc</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"n\">AtomicBool</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"kc\">false</span><span class=\"p\">));</span>\n<span class=\"w\">    </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">RootScope</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">good</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ExternRef</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">SetFlagOnDrop</span><span class=\"p\">(</span><span class=\"n\">dropped</span><span class=\"p\">.</span><span class=\"n\">clone</span><span class=\"p\">()))</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"c1\">// Create an unrooted ref by letting its scope expire.</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">bad</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">            </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">tmp</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">RootScope</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"p\">);</span>\n<span class=\"w\">            </span><span class=\"n\">ExternRef</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">tmp</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"k\">u32</span><span class=\"p\">)</span><span class=\"o\">?</span>\n<span class=\"w\">        </span><span class=\"p\">};</span>\n<span class=\"w\">        </span><span class=\"fm\">assert!</span><span class=\"p\">(</span><span class=\"n\">ArrayRef</span><span class=\"p\">::</span><span class=\"n\">new_fixed</span><span class=\"p\">(</span>\n<span class=\"w\">            </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">scope</span><span class=\"p\">,</span>\n<span class=\"w\">            </span><span class=\"o\">&amp;</span><span class=\"n\">pre</span><span class=\"p\">,</span>\n<span class=\"w\">            </span><span class=\"o\">&amp;</span><span class=\"p\">[</span><span class=\"n\">Val</span><span class=\"p\">::</span><span class=\"n\">ExternRef</span><span class=\"p\">(</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">good</span><span class=\"p\">)),</span><span class=\"w\"> </span><span class=\"n\">Val</span><span class=\"p\">::</span><span class=\"n\">ExternRef</span><span class=\"p\">(</span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">bad</span><span class=\"p\">))],</span>\n<span class=\"w\">        </span><span class=\"p\">)</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">is_err</span><span class=\"p\">());</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"p\">.</span><span class=\"n\">gc</span><span class=\"p\">(</span><span class=\"nb\">None</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"fm\">assert!</span><span class=\"p\">(</span><span class=\"n\">dropped</span><span class=\"p\">.</span><span class=\"n\">load</span><span class=\"p\">(</span><span class=\"n\">SeqCst</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"s\">\"element 0 externref was leaked\"</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"nb\">Ok</span><span class=\"p\">(())</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<p>Append the above two test cases to <code>tests/all/gc.rs</code>.</p>\n<p>Run <code>cargo test --test all -- gc::struct_new_init_failure_no_leak gc::array_new_fixed_init_failure_no_leak</code></p>\n<h3>Expected Results</h3>\n<p>The <code>dropped</code> should have been collected and the tests should pass.</p>\n<h3>Actual Results</h3>\n<p>The <code>dropped</code> not collected and the tests fail.</p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: ab1ab705dd93e7c944c13d4d4b2683e049f4ff73</p>\n<h3>Extra Info</h3>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/43832481378bc067eadeaa0fb8434c6b71bc22e1/crates/wasmtime/src/runtime/vm/gc/enabled/drc.rs#L860-L862\">https://github.com/bytecodealliance/wasmtime/blob/43832481378bc067eadeaa0fb8434c6b71bc22e1/crates/wasmtime/src/runtime/vm/gc/enabled/drc.rs#L860-L862</a></p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/43832481378bc067eadeaa0fb8434c6b71bc22e1/crates/wasmtime/src/runtime/vm/gc/enabled/drc.rs#L884-L886\">https://github.com/bytecodealliance/wasmtime/blob/43832481378bc067eadeaa0fb8434c6b71bc22e1/crates/wasmtime/src/runtime/vm/gc/enabled/drc.rs#L884-L886</a></p>\n<p>Here the <code>dealloc_uninit_struct_or_exn</code> and <code>dealloc_uninit_array</code> free the object's memory but do not decrement the reference counts of already-initialized GC reference fields.</p>\n<p>When <code>StructRef::new</code> or <code>ArrayRef::new_fixed</code> fails partway through field/element initialization, this causes those referenced objects to leak permanently.</p>\n<p>The two test cases trigger this path by creating struct/array ref with one good field/element and one bad field/element.</p>\n<p>I think the fix might look like this:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">gc_ref</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">VMGcRef</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">arrayref</span><span class=\"p\">.</span><span class=\"n\">into</span><span class=\"p\">();</span>\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">children</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">Vec</span><span class=\"p\">::</span><span class=\"n\">new</span><span class=\"p\">();</span>\n<span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">trace_gc_ref</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">gc_ref</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">children</span><span class=\"p\">);</span>\n<span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">child</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">children</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">dec_ref_and_maybe_dealloc</span><span class=\"p\">(</span><span class=\"n\">host_data_table</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">child</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n<span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">dealloc</span><span class=\"p\">(</span><span class=\"n\">gc_ref</span><span class=\"p\">);</span>\n</code></pre></div>\n<p>but it's not a trivial one-liner:</p>\n<ol>\n<li>To call <code>trace_gc_ref</code>, allocation functions (<code>alloc_uninit_struct_or_exn</code> and <code>alloc_uninit_array</code>) might need to zero-fill the fields since uninitialized GC ref fields may contain stale data from previous allocations.</li>\n<li>To call <code>dec_ref_and_maybe_dealloc</code>, <code>&amp;mut ExternRefHostDataTable</code> is needed to clean up externref host data but <code>dealloc_uninit_struct_or_exn</code> / <code>dealloc_uninit_array</code> don't pass this table through now.</li>\n</ol>\n<p>As always, I'm happy to help prepare a fix, but since the fix is not trivial and it's GC code, maybe someone who knows this code better can help.</p>\n<p>Thanks for looking into this!</p>\n</blockquote>",
        "id": 570440546,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769555716
    },
    {
        "content": "<p><a href=\"https://github.com/zzjas\">zzjas</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456\">Issue #12456</a>.</p>",
        "id": 570440548,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769555717
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the wasm-proposal:gc label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456\">Issue #12456</a>.</p>",
        "id": 570655507,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769632669
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456#issuecomment-3813819343\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456\">issue #12456</a>:</p>\n<blockquote>\n<p>thanks @zzjas for the bug report, this is very thorough and much appreciated!</p>\n<p>cc @fitzgen you're likely interested in this</p>\n</blockquote>",
        "id": 570655569,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769632697
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456#issuecomment-3814306896\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456\">issue #12456</a>:</p>\n<blockquote>\n<p>Yeah we should handle this. Looks like you diagnosed the bug correctly.</p>\n<p>I don't have time at the moment to fix it myself, but if you want to whip up a patch @zzjas, I'm happy to review it!</p>\n</blockquote>",
        "id": 570673960,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769640245
    },
    {
        "content": "<p>zzjas <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456#issuecomment-3814511703\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12456\">issue #12456</a>:</p>\n<blockquote>\n<p>Thank you both!</p>\n<blockquote>\n<p>if you want to whip up a patch @zzjas, I'm happy to review it!</p>\n</blockquote>\n<p>I'll work on the fix a bit later this week.</p>\n</blockquote>",
        "id": 570679939,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769643658
    }
]