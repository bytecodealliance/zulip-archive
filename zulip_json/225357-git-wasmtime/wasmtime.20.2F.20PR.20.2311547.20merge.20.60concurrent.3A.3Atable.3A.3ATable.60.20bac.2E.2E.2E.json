[
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536323489,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756248960
    },
    {
        "content": "<p>dicej opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a> from <code>dicej:deduplicate-resource-table</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>When I started implementing component model async support, I copied <code>resource_table.rs</code> to <code>concurrent/table.rs</code> and made some modifications.  Now I'm unifying the implementations to reduce duplication.</p>\n<ul>\n<li>\n<p><code>concurrent/table.rs</code> now only contains the <code>TableId</code> type and the <code>TableDebug</code> trait; the <code>Table</code> type has been merged into <code>ResourceTable</code>.</p>\n</li>\n<li>\n<p><code>TableId</code> can be thought of as a lightweight variation of <code>Resource</code> representing handles which can't be borrowed.  It also implements <code>Copy</code>, <code>Hash</code>, <code>Debug</code>, etc. for convenience, and can be converted to and from <code>Resource</code>.</p>\n</li>\n<li>\n<p><code>ResourceTable</code> now has <code>enable_debug</code>, <code>is_empty</code>, <code>add_child</code>, <code>remove_child</code>, and <code>iter_mut</code> methods.</p>\n</li>\n<li>\n<p><code>ConcurrentState::table</code> is now of type <code>Mutex&lt;ResourceTable&gt;</code>; the <code>Mutex</code> wrapper is needed to ensure the field is <code>Sync</code>, but we never lock it.</p>\n</li>\n</ul>\n<p>Fixes #11190</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 536323490,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756248961
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536323491,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756248961
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536416931,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756300219
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536418159,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756300594
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304149879\">PR review comment</a>:</p>\n<blockquote>\n<p>I'd probably say go ahead and remove this and only have <code>get_mut</code> for now</p>\n</blockquote>",
        "id": 536436095,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756305682
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#pullrequestreview-3160097684\">PR review</a>.</p>",
        "id": 536436096,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756305682
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304148125\">PR review comment</a>:</p>\n<blockquote>\n<p>Could this replace <code>Mutex</code> with <code>AlwaysMut</code> added in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11453\">https://github.com/bytecodealliance/wasmtime/pull/11453</a>?</p>\n</blockquote>",
        "id": 536436097,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756305682
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304155331\">PR review comment</a>:</p>\n<blockquote>\n<p>While this is true of indices we hand out to wasm itself, I think this can be removed now? I think that this was required before merging the wasm-facing tables together but nowadays I think this should be unnecessary</p>\n</blockquote>",
        "id": 536436098,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756305683
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304159238\">PR review comment</a>:</p>\n<blockquote>\n<p>Have you used per-table debugging in the past? If not how about moving this to a <code>const</code> in this module? That way it can still be easily flipped but won't take up space at runtime</p>\n</blockquote>",
        "id": 536436099,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756305683
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#pullrequestreview-3160154651\">PR review</a>.</p>",
        "id": 536437349,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306057
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304190994\">PR review comment</a>:</p>\n<blockquote>\n<p>You're right that this was originally a hack because I was handing these handles directly to guests in an early draft.  Once I stopped doing that, I removed the hack, but later I added it back in -- not because we were handing these handles to guest, but because I found it useful e.g. <a href=\"https://github.com/bytecodealliance/wasmtime/blob/1f6c3aadaa3c018e379310513d70eaebdd6571aa/crates/wasmtime/src/runtime/component/concurrent/futures_and_streams.rs#L680-L681\">here</a>.</p>\n<p>In other words, it's not strictly necessary, but it could help us catch our own mistakes more easily.</p>\n</blockquote>",
        "id": 536437352,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306057
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304196768\">PR review comment</a>:</p>\n<blockquote>\n<p>Could <code>u32::MAX</code> be used there instead? It's effectively a nice property of container-like data structures that creation doesn't require allocation, so that's what I'd like to shoot for here</p>\n</blockquote>",
        "id": 536437697,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306143
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#pullrequestreview-3160162271\">PR review</a>.</p>",
        "id": 536437701,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306143
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304210573\">PR review comment</a>:</p>\n<blockquote>\n<p>I'm using it in some parts of <code>concurrent-async-tests</code> and did it this way because I didn't want a static or const to bleed over into other tests where it wasn't meant to be enabled, but I guess it's not that important.  Maybe I'll just change the <code>self.debug</code> checks to <code>cfg!(debug_assertions)</code>.</p>\n</blockquote>",
        "id": 536438369,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306335
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#pullrequestreview-3160180880\">PR review</a>.</p>",
        "id": 536438370,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306335
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#pullrequestreview-3160208654\">PR review</a>.</p>",
        "id": 536439419,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306612
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547#discussion_r2304229936\">PR review comment</a>:</p>\n<blockquote>\n<p>That seems reasonable to me as well yeah <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n</blockquote>",
        "id": 536439421,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756306612
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536444711,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756308055
    },
    {
        "content": "<p>dicej has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536444847,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756308089
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536450771,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756309787
    },
    {
        "content": "<p>dicej has disabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536454546,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756311043
    },
    {
        "content": "<p>dicej merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11547\">PR #11547</a>.</p>",
        "id": 536460517,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756313102
    }
]