[
    {
        "content": "<p>rvolosatovs opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11246\">issue #11246</a>:</p>\n<blockquote>\n<h3>Steps to Reproduce</h3>\n<p>apply:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/src/p3/bindings.rs b/crates/wasi/src/p3/bindings.rs</span>\n<span class=\"gh\">index 864d1eb8a4..02651057b8 100644</span>\n<span class=\"gd\">--- a/crates/wasi/src/p3/bindings.rs</span>\n<span class=\"gi\">+++ b/crates/wasi/src/p3/bindings.rs</span>\n<span class=\"gu\">@@ -38,50 +38,6 @@</span>\n<span class=\"w\"> </span>//!     },\n<span class=\"w\"> </span>//!     concurrent_exports: true,\n<span class=\"w\"> </span>//!     concurrent_imports: true,\n<span class=\"gd\">-//!     async: {</span>\n<span class=\"gd\">-//!         only_imports: [</span>\n<span class=\"gd\">-//!             \"wasi:cli/stdin@0.3.0#get-stdin\",</span>\n<span class=\"gd\">-//!             \"wasi:cli/stdout@0.3.0#set-stdout\",</span>\n<span class=\"gd\">-//!             \"wasi:cli/stderr@0.3.0#set-stderr\",</span>\n<span class=\"gd\">-//!             \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-for\",</span>\n<span class=\"gd\">-//!             \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-until\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[method]descriptor.read-via-stream\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.write-via-stream\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.append-via-stream\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.advise\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync-data\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-flags\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-type\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-size\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.read-directory\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.create-directory-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.link-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.open-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.readlink-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.remove-directory-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.rename-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.symlink-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.unlink-file-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.is-same-object\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash-at\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/ip-name-lookup@0.3.0#[async]resolve-addresses\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]tcp-socket.connect\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]tcp-socket.send\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]udp-socket.receive\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]udp-socket.send\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]tcp-socket.bind\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]tcp-socket.listen\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]tcp-socket.receive\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]udp-socket.bind\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]udp-socket.connect\",</span>\n<span class=\"gd\">-//!         ],</span>\n<span class=\"gd\">-//!     },</span>\n<span class=\"w\"> </span>//! });\n<span class=\"w\"> </span>//!\n<span class=\"w\"> </span>//! struct MyState {\n<span class=\"gu\">@@ -123,50 +79,6 @@ mod generated {</span>\n<span class=\"w\"> </span>        trappable_imports: true,\n<span class=\"w\"> </span>        concurrent_exports: true,\n<span class=\"w\"> </span>        concurrent_imports: true,\n<span class=\"gd\">-        async: {</span>\n<span class=\"gd\">-            only_imports: [</span>\n<span class=\"gd\">-                \"wasi:cli/stdin@0.3.0#get-stdin\",</span>\n<span class=\"gd\">-                \"wasi:cli/stdout@0.3.0#set-stdout\",</span>\n<span class=\"gd\">-                \"wasi:cli/stderr@0.3.0#set-stderr\",</span>\n<span class=\"gd\">-                \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-for\",</span>\n<span class=\"gd\">-                \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-until\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[method]descriptor.read-via-stream\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.write-via-stream\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.append-via-stream\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.advise\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync-data\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-flags\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-type\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-size\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.read-directory\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.create-directory-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.link-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.open-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.readlink-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.remove-directory-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.rename-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.symlink-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.unlink-file-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.is-same-object\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash-at\",</span>\n<span class=\"gd\">-                \"wasi:sockets/ip-name-lookup@0.3.0#[async]resolve-addresses\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]tcp-socket.connect\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]tcp-socket.send\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]udp-socket.receive\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]udp-socket.send\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]tcp-socket.bind\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]tcp-socket.listen\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]tcp-socket.receive\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]udp-socket.bind\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]udp-socket.connect\",</span>\n<span class=\"gd\">-            ],</span>\n<span class=\"gd\">-        },</span>\n<span class=\"w\"> </span>    });\n<span class=\"w\"> </span>}\n<span class=\"w\"> </span>pub use self::generated::LinkOptions;\n</code></pre></div>\n<p>to:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">b8322817e</span><span class=\"w\"> </span><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"n\">latest</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">main</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">writing</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">sL</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"p\">:</span><span class=\"c1\">//github.com/bytecodealliance/wasmtime/pull/11221.patch | git am -3</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">sL</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"p\">:</span><span class=\"c1\">//github.com/bytecodealliance/wasmtime/pull/11244.patch | git am -3</span>\n</code></pre></div>\n<p>or, potentially, latest <code>main</code> if/when #11221 and <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11244\">https://github.com/bytecodealliance/wasmtime/pull/11244</a> are merged</p>\n<p>then:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">wasi</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">p3</span>\n</code></pre></div>\n<h3>Expected Results</h3>\n<p>Success</p>\n<h3>Actual Results</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0405</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">cannot</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">HostConcurrent</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">monotonic_clock</span><span class=\"err\">`</span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">wasi</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">p3</span><span class=\"o\">/</span><span class=\"n\">clocks</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">45</span><span class=\"p\">:</span><span class=\"mi\">26</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"k\">impl</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">monotonic_clock</span><span class=\"p\">::</span><span class=\"n\">HostConcurrent</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">WasiClocks</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                          </span><span class=\"o\">^^^^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">monotonic_clock</span><span class=\"err\">`</span>\n</code></pre></div>\n<p>even though functions are marked as <code>async</code>: <a href=\"https://github.com/rvolosatovs/wasmtime/blob/c822293b26a1f2720d5a4cd035a59a66d4512e90/crates/wasi/src/p3/wit/deps/clocks/monotonic-clock.wit#L34-L44\">https://github.com/rvolosatovs/wasmtime/blob/c822293b26a1f2720d5a4cd035a59a66d4512e90/crates/wasi/src/p3/wit/deps/clocks/monotonic-clock.wit#L34-L44</a></p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 2b8322817e with patches</p>\n<p>Operating system: MacOS</p>\n<p>Architecture: aarch64-darwin</p>\n</blockquote>",
        "id": 528889642,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1752593942
    },
    {
        "content": "<p><a href=\"https://github.com/rvolosatovs\">rvolosatovs</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11246\">Issue #11246</a>.</p>",
        "id": 528889644,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1752593942
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the wasm-proposal:component-model-async label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11246\">Issue #11246</a>.</p>",
        "id": 528895395,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1752595745
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> removed the bug label from <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11246\">Issue #11246</a>.</p>",
        "id": 528895400,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1752595746
    },
    {
        "content": "<p>alexcrichton assigned alexcrichton to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11246\">issue #11246</a>.</p>",
        "id": 530835333,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1753471453
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11246\">issue #11246</a>:</p>\n<blockquote>\n<h3>Steps to Reproduce</h3>\n<p>apply:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git a/crates/wasi/src/p3/bindings.rs b/crates/wasi/src/p3/bindings.rs</span>\n<span class=\"gh\">index 864d1eb8a4..02651057b8 100644</span>\n<span class=\"gd\">--- a/crates/wasi/src/p3/bindings.rs</span>\n<span class=\"gi\">+++ b/crates/wasi/src/p3/bindings.rs</span>\n<span class=\"gu\">@@ -38,50 +38,6 @@</span>\n<span class=\"w\"> </span>//!     },\n<span class=\"w\"> </span>//!     concurrent_exports: true,\n<span class=\"w\"> </span>//!     concurrent_imports: true,\n<span class=\"gd\">-//!     async: {</span>\n<span class=\"gd\">-//!         only_imports: [</span>\n<span class=\"gd\">-//!             \"wasi:cli/stdin@0.3.0#get-stdin\",</span>\n<span class=\"gd\">-//!             \"wasi:cli/stdout@0.3.0#set-stdout\",</span>\n<span class=\"gd\">-//!             \"wasi:cli/stderr@0.3.0#set-stderr\",</span>\n<span class=\"gd\">-//!             \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-for\",</span>\n<span class=\"gd\">-//!             \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-until\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[method]descriptor.read-via-stream\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.write-via-stream\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.append-via-stream\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.advise\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync-data\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-flags\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-type\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-size\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.read-directory\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.create-directory-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.link-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.open-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.readlink-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.remove-directory-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.rename-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.symlink-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.unlink-file-at\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.is-same-object\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash\",</span>\n<span class=\"gd\">-//!             \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash-at\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/ip-name-lookup@0.3.0#[async]resolve-addresses\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]tcp-socket.connect\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]tcp-socket.send\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]udp-socket.receive\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[async method]udp-socket.send\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]tcp-socket.bind\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]tcp-socket.listen\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]tcp-socket.receive\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]udp-socket.bind\",</span>\n<span class=\"gd\">-//!             \"wasi:sockets/types@0.3.0#[method]udp-socket.connect\",</span>\n<span class=\"gd\">-//!         ],</span>\n<span class=\"gd\">-//!     },</span>\n<span class=\"w\"> </span>//! });\n<span class=\"w\"> </span>//!\n<span class=\"w\"> </span>//! struct MyState {\n<span class=\"gu\">@@ -123,50 +79,6 @@ mod generated {</span>\n<span class=\"w\"> </span>        trappable_imports: true,\n<span class=\"w\"> </span>        concurrent_exports: true,\n<span class=\"w\"> </span>        concurrent_imports: true,\n<span class=\"gd\">-        async: {</span>\n<span class=\"gd\">-            only_imports: [</span>\n<span class=\"gd\">-                \"wasi:cli/stdin@0.3.0#get-stdin\",</span>\n<span class=\"gd\">-                \"wasi:cli/stdout@0.3.0#set-stdout\",</span>\n<span class=\"gd\">-                \"wasi:cli/stderr@0.3.0#set-stderr\",</span>\n<span class=\"gd\">-                \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-for\",</span>\n<span class=\"gd\">-                \"wasi:clocks/monotonic-clock@0.3.0#[async]wait-until\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[method]descriptor.read-via-stream\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.write-via-stream\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.append-via-stream\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.advise\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync-data\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-flags\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.get-type\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-size\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.read-directory\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.sync\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.create-directory-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.stat-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.set-times-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.link-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.open-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.readlink-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.remove-directory-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.rename-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.symlink-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.unlink-file-at\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.is-same-object\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash\",</span>\n<span class=\"gd\">-                \"wasi:filesystem/types@0.3.0#[async method]descriptor.metadata-hash-at\",</span>\n<span class=\"gd\">-                \"wasi:sockets/ip-name-lookup@0.3.0#[async]resolve-addresses\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]tcp-socket.connect\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]tcp-socket.send\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]udp-socket.receive\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[async method]udp-socket.send\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]tcp-socket.bind\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]tcp-socket.listen\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]tcp-socket.receive\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]udp-socket.bind\",</span>\n<span class=\"gd\">-                \"wasi:sockets/types@0.3.0#[method]udp-socket.connect\",</span>\n<span class=\"gd\">-            ],</span>\n<span class=\"gd\">-        },</span>\n<span class=\"w\"> </span>    });\n<span class=\"w\"> </span>}\n<span class=\"w\"> </span>pub use self::generated::LinkOptions;\n</code></pre></div>\n<p>to:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">b8322817e</span><span class=\"w\"> </span><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"n\">latest</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">main</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">writing</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">sL</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"p\">:</span><span class=\"c1\">//github.com/bytecodealliance/wasmtime/pull/11221.patch | git am -3</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">sL</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"p\">:</span><span class=\"c1\">//github.com/bytecodealliance/wasmtime/pull/11244.patch | git am -3</span>\n</code></pre></div>\n<p>or, potentially, latest <code>main</code> if/when #11221 and <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11244\">https://github.com/bytecodealliance/wasmtime/pull/11244</a> are merged</p>\n<p>then:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">wasi</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"n\">p3</span>\n</code></pre></div>\n<h3>Expected Results</h3>\n<p>Success</p>\n<h3>Actual Results</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0405</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"nc\">cannot</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">HostConcurrent</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">monotonic_clock</span><span class=\"err\">`</span>\n<span class=\"w\">  </span><span class=\"o\">-</span><span class=\"p\">-&gt;</span><span class=\"w\"> </span><span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">wasi</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">p3</span><span class=\"o\">/</span><span class=\"n\">clocks</span><span class=\"o\">/</span><span class=\"n\">host</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">45</span><span class=\"p\">:</span><span class=\"mi\">26</span>\n<span class=\"w\">   </span><span class=\"o\">|</span>\n<span class=\"mi\">45</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"k\">impl</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">monotonic_clock</span><span class=\"p\">::</span><span class=\"n\">HostConcurrent</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">WasiClocks</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                          </span><span class=\"o\">^^^^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">monotonic_clock</span><span class=\"err\">`</span>\n</code></pre></div>\n<p>even though functions are marked as <code>async</code>: <a href=\"https://github.com/rvolosatovs/wasmtime/blob/c822293b26a1f2720d5a4cd035a59a66d4512e90/crates/wasi/src/p3/wit/deps/clocks/monotonic-clock.wit#L34-L44\">https://github.com/rvolosatovs/wasmtime/blob/c822293b26a1f2720d5a4cd035a59a66d4512e90/crates/wasi/src/p3/wit/deps/clocks/monotonic-clock.wit#L34-L44</a></p>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 2b8322817e with patches</p>\n<p>Operating system: MacOS</p>\n<p>Architecture: aarch64-darwin</p>\n</blockquote>",
        "id": 531437026,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1753728917
    }
]