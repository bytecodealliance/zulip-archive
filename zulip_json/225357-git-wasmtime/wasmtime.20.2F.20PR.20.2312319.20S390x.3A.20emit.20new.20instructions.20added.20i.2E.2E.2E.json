[
    {
        "content": "<p>theotherjimmy opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a> from <code>theotherjimmy:s390x-z17</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Z17 (arch15) includes some instructions that allow us to encode some more complicated operations in fewer instructions. This PR adds support to cranelift-codegen to emit these newer instructions when appropriate.</p>\n<p>Further, Z17 includes a VBLEND instruction that mimics the same instruction on x64. Since this is no longer an x64-exclusive instruction type, I've renamed the appropriate stuff within cranelift codegen to reflect that this is not ISA-specific anymore.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 567574846,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768233431
    },
    {
        "content": "<p><strong>theotherjimmy</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 567574847,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768233431
    },
    {
        "content": "<p><strong>theotherjimmy</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 567574848,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768233432
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 567576238,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768233724
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 567581323,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768234812
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 567582935,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768235183
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#issuecomment-3739746878\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @cfallin, @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"cranelift\", \"cranelift:area:aarch64\", \"cranelift:area:x64\", \"cranelift:meta\", \"isle\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>cfallin: isle</li>\n<li>fitzgen: isle</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 567603576,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768240056
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#issuecomment-3740463910\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>:</p>\n<blockquote>\n<p>I'm going to shift review of this over to @uweigand </p>\n</blockquote>",
        "id": 567642103,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768251539
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#issuecomment-3740465339\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>:</p>\n<blockquote>\n<p>or,  well, I can't officially do that, but @uweigand I'm happy to rubber-stamp once you've approved</p>\n</blockquote>",
        "id": 567642197,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768251567
    },
    {
        "content": "<p>uweigand submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3656251933\">PR review</a>:</p>\n<blockquote>\n<p>Looks mostly good to me, but see inline comments.</p>\n<p>In addition to what is implemented here, we now <em>could</em> implement vector integer division for 32-bit and 64-bit integer vectors - but there is currently no ISLE to even express this.</p>\n</blockquote>",
        "id": 567790703,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768317361
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686844858\">PR review comment</a>:</p>\n<blockquote>\n<p>Not sure what if any canonicalization is done at the ISLE level here, but these four don't cover all possible combinations.  E.g. <code>(band x (band (bnot y) z))</code> is not covered.</p>\n<p>I guess a more fundamental question is which combinations we should be covering.  For example, why cover and-not with three inputs but not or-not?</p>\n</blockquote>",
        "id": 567790705,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768317361
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686781612\">PR review comment</a>:</p>\n<blockquote>\n<p>We should also test the encoding for VBLEND and VEVAL here.</p>\n</blockquote>",
        "id": 567790706,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768317361
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686857829\">PR review comment</a>:</p>\n<blockquote>\n<p>We should also add z17 insns to the disassembler, but that is of course a different patch.</p>\n</blockquote>",
        "id": 567790707,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768317361
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686792533\">PR review comment</a>:</p>\n<blockquote>\n<p>I think we need to fix this before committing.   (Also, there probably should be run-time test validating the correct behaviour like for other divison operations.)</p>\n</blockquote>",
        "id": 567790708,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768317361
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2686860437\">PR review comment</a>:</p>\n<blockquote>\n<p>Should this function also be renamed to lose the <code>x86</code> then?</p>\n</blockquote>",
        "id": 567790709,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768317361
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3656661833\">PR review</a>.</p>",
        "id": 567805854,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768320907
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2687109358\">PR review comment</a>:</p>\n<blockquote>\n<p>I stopped because I realized this would add hundreds of rules to get correct, and ran out of steam pretty quickly. I think it's an open question: what should we encode? what 3-input binary operations are actually used?</p>\n</blockquote>",
        "id": 567805856,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768320907
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 567833305,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768328797
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3657228369\">PR review</a>.</p>",
        "id": 567833361,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768328819
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2687579761\">PR review comment</a>:</p>\n<blockquote>\n<p>Done.</p>\n</blockquote>",
        "id": 567833364,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768328819
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3657229402\">PR review</a>.</p>",
        "id": 567833424,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768328832
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2687580773\">PR review comment</a>:</p>\n<blockquote>\n<p>Added tests.</p>\n</blockquote>",
        "id": 567833425,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768328832
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 569587757,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769115634
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3694588051\">PR review</a>.</p>",
        "id": 569588372,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769115867
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2718626800\">PR review comment</a>:</p>\n<blockquote>\n<p>I made a python script to handle this, and committed the results. My thinking is this:</p>\n<ul>\n<li>This only has to happen once</li>\n<li>It would be better to have the results interspersed in the file near their 2-input counterparts for better</li>\n</ul>\n</blockquote>",
        "id": 569588373,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769115867
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3694590587\">PR review</a>.</p>",
        "id": 569588510,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769115918
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2718629131\">PR review comment</a>:</p>\n<blockquote>\n<p>Is the integer overflow we're checking for diving <code>INTMIN</code> by <code>-1</code>?</p>\n</blockquote>",
        "id": 569588511,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769115918
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3694735206\">PR review</a>.</p>",
        "id": 569594261,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769118329
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2718752503\">PR review comment</a>:</p>\n<blockquote>\n<p>That's a yes. I missed that bit of the instruction description.</p>\n</blockquote>",
        "id": 569594262,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769118330
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 569752862,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769184625
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3698340362\">PR review</a>.</p>",
        "id": 569753025,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769184678
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2721872164\">PR review comment</a>:</p>\n<blockquote>\n<p>Fixed.</p>\n</blockquote>",
        "id": 569753027,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769184679
    },
    {
        "content": "<p>uweigand submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3717140171\">PR review</a>:</p>\n<blockquote>\n<p>This looks all good to me now, except for the <code>srem</code> implementation - see inline comment.</p>\n</blockquote>",
        "id": 570579265,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769611962
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2737010061\">PR review comment</a>:</p>\n<blockquote>\n<p>The <code>sdiv</code> case looks good now, but the <code>srem</code> case is wrong - in the case of division of INT_MIN by -1, only the quotient overflows, not the remainder.  The remainder in this case is simply zero, just as with any division by -1.  See the comment above and the <code>maybe_avoid_srem_overflow</code> helper.  I think this can be implemented following the same logic for $I128 as well.</p>\n</blockquote>",
        "id": 570579268,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769611962
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 570853010,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769706939
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3724042454\">PR review</a>.</p>",
        "id": 570853111,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769706959
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#discussion_r2742700604\">PR review comment</a>:</p>\n<blockquote>\n<p>I missed that. Fixed in the just-pushed series.</p>\n</blockquote>",
        "id": 570853114,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769706959
    },
    {
        "content": "<p>uweigand submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3746960200\">PR review</a>:</p>\n<blockquote>\n<p>Thanks, this version LGTM now!</p>\n</blockquote>",
        "id": 571735827,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770144050
    },
    {
        "content": "<p>cfallin submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319#pullrequestreview-3747008120\">PR review</a>:</p>\n<blockquote>\n<p>Rubber-stamping based on Ulrich's review -- thanks!</p>\n</blockquote>",
        "id": 571737644,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770144658
    },
    {
        "content": "<p>cfallin added <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319 S390x: emit new instructions added in z17</a> to the merge queue.</p>",
        "id": 571737692,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770144670
    },
    {
        "content": "<p>cfallin merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319</a>.</p>",
        "id": 571742393,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770146128
    },
    {
        "content": "<p>cfallin removed <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12319\">PR #12319 S390x: emit new instructions added in z17</a> from the merge queue.</p>",
        "id": 571742396,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770146129
    }
]