[
    {
        "content": "<p>jiang1997 opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a> from <code>jiang1997:structnew-limit-guard</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>libFuzzer can mutate serialized bytes to create states where operations reference non-existent resources (LocalGet with num_params=0, etc). This caused panics when fixup() tried to normalize indices via modulo.</p>\n<p>Fix by replacing these operations with equivalent ones before fixup():</p>\n<ul>\n<li>LocalGet/GlobalGet → Null (when params/globals = 0)</li>\n<li>LocalSet/GlobalSet → Drop (when params/globals = 0)</li>\n<li>StructNew → Drop (when max_types = 0)</li>\n</ul>\n<p>This preserves stack effects and ensures generated Wasm is always valid.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 544318286,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760186723
    },
    {
        "content": "<p><strong>jiang1997</strong> requested <a href=\"https://github.com/fitzgen\">fitzgen</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>.</p>",
        "id": 544318289,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760186723
    },
    {
        "content": "<p><strong>jiang1997</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers\">wasmtime-fuzz-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>.</p>",
        "id": 544318290,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760186724
    },
    {
        "content": "<p>jiang1997 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>.</p>",
        "id": 544320259,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760188165
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837#issuecomment-3393392407\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"fuzzing\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>fitzgen: fuzzing</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 544326548,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760193881
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837#pullrequestreview-3332538137\">PR review</a>:</p>\n<blockquote>\n<p>Thanks! A couple things to address below before we merge this.</p>\n</blockquote>",
        "id": 544600311,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760377982
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837#discussion_r2426979369\">PR review comment</a>:</p>\n<blockquote>\n<p>Because this is inside a submodule of the module where <code>TableOps::fixup</code> is defined, we can just call it directly, instead of doing it indirectly via <code>to_wasm_binary</code> and then ignoring the resulting Wasm binary:</p>\n<p><div class=\"codehilite\" data-code-language=\"suggestion\"><pre><span></span><code>        ops.fixup();\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 544600312,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760377982
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837#discussion_r2426974838\">PR review comment</a>:</p>\n<blockquote>\n<p><em>If</em> we are going to attempt to replace invalid ops with new ones that have the same type signature (i.e. pop the same operand types from the stack and then push the same type of results) then we should actually do that for <code>StructNew</code>: insert <code>fields.len()</code> <code>drop</code> instructions (currently always 0 since the struct support is still WIP) and then a <code>ref.null struct</code> instruction to produce the ~same result type (will be abstract instead of concrete, but this is the closest we can get without defining concrete types).</p>\n<p>But I could see this code becoming a little bit of a hassle/burden as time goes on and we extend this fuzz target to cover all of the GC proposal. So another option would be to simply continue to the next iteration of the loop in these cases, and let each <code>op.fixup(...)</code> call deal with the fallout of the changes to the operand stack (since they have to do that anyways due to random mutations to the op sequence).</p>\n</blockquote>",
        "id": 544600313,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760377982
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837#issuecomment-3398519009\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>:</p>\n<blockquote>\n<p>cc @khagankhan </p>\n</blockquote>",
        "id": 544600347,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760377999
    },
    {
        "content": "<p>jiang1997 updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>.</p>",
        "id": 544806729,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760463856
    },
    {
        "content": "<p>jiang1997 edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>:</p>\n<blockquote>\n<p>Fix by filtering out problematic operations before fixup() runs:</p>\n<ul>\n<li>Skip StructNew when max_types = 0</li>\n<li>Skip LocalGet/LocalSet when num_params = 0</li>\n<li>Skip GlobalGet/GlobalSet when num_globals = 0</li>\n</ul>\n<p>This prevents the division by zero and ensures generated Wasm is valid.</p>\n</blockquote>",
        "id": 544806804,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760463894
    },
    {
        "content": "<p><strong>jiang1997</strong> requested <a href=\"https://github.com/fitzgen\">fitzgen</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837\">PR #11837</a>.</p>",
        "id": 544809422,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760464858
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11837#pullrequestreview-3336898386\">PR review</a>:</p>\n<blockquote>\n<p>Thanks!</p>\n</blockquote>",
        "id": 544811284,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760465524
    }
]