[
    {
        "content": "<p>yamt opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>currently the example outputs something like</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"n\">results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"n\">top</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">885</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.3958259</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">904</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.36464667</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">84</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.010480272</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">911</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.0082290545</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">741</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.0072448305</span><span class=\"p\">)]</span>\n<span class=\"n\">spacetanuki</span><span class=\"o\">%</span>\n</code></pre></div>\n<p>but it's quite wrong because of dimension mismatch.<br>\nie. while the model expects 3x244x244, the file is 244x244x3.</p>\n<p>if i transpose tensor.bgr to 3x244x244, it produces:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"n\">results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"n\">top</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">963</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.7113058</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">762</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.070707425</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">909</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.036355816</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">926</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.01545616</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">567</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.015344027</span><span class=\"p\">)]</span>\n</code></pre></div>\n<p>it's more reasonable and similar to what i got when running the same model with <a href=\"https://github.com/openvinotoolkit/open_model_zoo/tree/master/demos/classification_demo/python\">https://github.com/openvinotoolkit/open_model_zoo/tree/master/demos/classification_demo/python</a>. (see the below screenshot)</p>\n<p>&lt;img width=\"752\" alt=\"Image\" src=\"<a href=\"https://github.com/user-attachments/assets/050d3860-f60f-4263-97a2-75f1b73434db\">https://github.com/user-attachments/assets/050d3860-f60f-4263-97a2-75f1b73434db</a>\" /&gt;</p>\n</blockquote>",
        "id": 521240677,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748591502
    },
    {
        "content": "<p>yamt edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>currently the example outputs something like</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"n\">results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"n\">top</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">885</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.3958259</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">904</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.36464667</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">84</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.010480272</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">911</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.0082290545</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">741</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.0072448305</span><span class=\"p\">)]</span>\n<span class=\"n\">spacetanuki</span><span class=\"o\">%</span>\n</code></pre></div>\n<p>but it's quite wrong because of dimension mismatch.<br>\nie. while the model expects 3x244x244, the file is 244x244x3.</p>\n<p>if i transpose tensor.bgr to 3x244x244, it produces:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Found</span><span class=\"w\"> </span><span class=\"n\">results</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"n\">top</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">963</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.7113058</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">762</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.070707425</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">909</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.036355816</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">926</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.01545616</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">InferenceResult</span><span class=\"p\">(</span><span class=\"mi\">567</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">0.015344027</span><span class=\"p\">)]</span>\n</code></pre></div>\n<p>it's more reasonable and similar to what i got when running the same model with <a href=\"https://github.com/openvinotoolkit/open_model_zoo/tree/master/demos/classification_demo/python\">https://github.com/openvinotoolkit/open_model_zoo/tree/master/demos/classification_demo/python</a>. (see the below screenshot)</p>\n<p>&lt;img width=\"752\" alt=\"Image\" src=\"<a href=\"https://github.com/user-attachments/assets/050d3860-f60f-4263-97a2-75f1b73434db\">https://github.com/user-attachments/assets/050d3860-f60f-4263-97a2-75f1b73434db</a>\" /&gt;</p>\n</blockquote>",
        "id": 521240719,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748591515
    },
    {
        "content": "<p>abrown <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2923753534\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>You're probably right that there could some mismatch in the artifact we're using for these examples. This example is quite old and things may have changed in the interim. What steps are you using to reproduce? And everything works if you just regenerate the <code>.bgr</code> file--what tool did you end up using?</p>\n</blockquote>",
        "id": 521387575,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748649606
    },
    {
        "content": "<p>yamt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2927998250\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<blockquote>\n<p>You're probably right that there could some mismatch in the artifact we're using for these examples. This example is quite old and things may have changed in the interim.</p>\n</blockquote>\n<p>i guess it has always been broken as the example output in README.md seems wrong.</p>\n<blockquote>\n<p>What steps are you using to reproduce? And everything works if you just regenerate the <code>.bgr</code> file--what tool did you end up using?</p>\n</blockquote>\n<p>steps to reproduce the issue:</p>\n<ol>\n<li>download files as following the README.md.</li>\n<li>cargo build --target wasm32-wasip1</li>\n<li><code>export DYLD_LIBRARY_PATH=\"$(brew --prefix)/lib\" wasmtime run --wasi=nn --dir=fixture target/wasm32-wasip1/debug/wasi-nn-example.wasm</code> (wasmtime and openvino are from homebrew)</li>\n</ol>\n<p>fix:</p>\n<p>\"fix\" the bgr file with the following onetime-use C program (i will attach the resulted bgr file as well)</p>\n<div class=\"codehilite\" data-code-language=\"C\"><pre><span></span><code><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;stdlib.h&gt;</span>\n<span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;unistd.h&gt;</span>\n\n<span class=\"kt\">int</span>\n<span class=\"nf\">main</span><span class=\"p\">()</span>\n<span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"cm\">/* transpose 224x224x3 to 3x224x224 */</span>\n\n<span class=\"w\">        </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">224</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">224</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"kt\">float</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">malloc</span><span class=\"p\">(</span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"kt\">float</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"n\">p2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">malloc</span><span class=\"p\">(</span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"n\">read</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">                        </span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">;</span>\n<span class=\"w\">                        </span><span class=\"kt\">float</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">];</span>\n<span class=\"w\">                        </span><span class=\"kt\">float</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">];</span>\n<span class=\"w\">                        </span><span class=\"kt\">float</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">];</span>\n<span class=\"w\">                        </span><span class=\"n\">p2</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"p\">;</span>\n<span class=\"w\">                        </span><span class=\"n\">p2</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"p\">;</span>\n<span class=\"w\">                        </span><span class=\"n\">p2</span><span class=\"p\">[</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"p\">;</span>\n<span class=\"w\">                </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"p\">}</span>\n<span class=\"w\">        </span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">p2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">height</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">width</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">);</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p><a href=\"https://github.com/user-attachments/files/20542736/tensor.bgr.zip\">tensor.bgr.zip</a><br>\n</p>\n</blockquote>",
        "id": 521607345,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1748816002
    },
    {
        "content": "<p>rahulchaphalkar <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2960584304\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>@yamt I had a chance to look at this, and you are right about the layout mismatch -<br>\nThe mobilenet model we use has an input tensor expectation of NCHW (1, 3, 224, 224) as <a href=\"https://download.01.org/openvinotoolkit/fixtures/mobilenet/mobilenet.xml\">seen here</a>, while the image is NHWC.</p>\n<p>The one place where we know this works is in <a href=\"https://github.com/intel/openvino-rs/blob/v0.8.0/crates/openvino/tests/classify-mobilenet.rs\">openvino-rs crate test</a>, and thats the only place we actually test the output results. Here we can also see some explicit layout setups that make this work as we expect.</p>\n<p>Given this, I'll make some changes soon addressing some of these things -</p>\n<ul>\n<li>Update example to use witx/wit directly and not wasi-nn layer. Currently this uses a very outdated wasi-nn binding layer.</li>\n<li>Introduce checks if possible in <code>test-programs</code> for checking if output matches the expected results, so things like these will be caught</li>\n<li>Update the image to the right format</li>\n</ul>\n</blockquote>",
        "id": 523370438,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1749589645
    },
    {
        "content": "<p>yamt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2961005730\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>thank you for taking a look.</p>\n<blockquote>\n<p>Update example to use witx/wit directly and not wasi-nn layer. Currently this uses a very outdated wasi-nn binding layer.</p>\n</blockquote>\n<p>do you mean to migrate to a newer wasi-nn abi?<br>\nwell, i'm not happy with it because i was using this example to test other implementation (wamr) which implements an ancient version of the abi. i understand it isn't your business though...<br>\n</p>\n</blockquote>",
        "id": 523399755,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1749607308
    },
    {
        "content": "<p>rahulchaphalkar <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2963961326\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>Currently, the example uses these<a href=\"https://crates.io/crates/wasi-nn/0.1.0\"> wasi-nn rust bindings</a> 0.1.0, which is from 2021, so I was thinking of updating it to either use WIT directly <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/nn_wit_image_classification_openvino.rs\">like here</a>, or WITX <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/nn_witx_image_classification_openvino.rs\">like here</a>.<br>\nBut I understand that you actually need this older wasi-nn bindings for your use case?<br>\nIn that case, I can simply update the image to be right dimensions, and make other changes to tests to check output is correct, and let this example be the way it is for now.</p>\n</blockquote>",
        "id": 523627314,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1749671085
    },
    {
        "content": "<p>yamt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2964494388\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<blockquote>\n<p>Currently, the example uses these<a href=\"https://crates.io/crates/wasi-nn/0.1.0\"> wasi-nn rust bindings</a> 0.1.0, which is from 2021, so I was thinking of updating it to either use WIT directly <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/nn_wit_image_classification_openvino.rs\">like here</a>, or WITX <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/test-programs/src/bin/nn_witx_image_classification_openvino.rs\">like here</a>.</p>\n</blockquote>\n<p>the witx one there still seems like a wrapper around the wasi-nn rust bindings. it's newer than 0.1.0 though.<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/a8e0d07000133191659d76aba52f2893fa32792f/crates/test-programs/Cargo.toml#L15\">https://github.com/bytecodealliance/wasmtime/blob/a8e0d07000133191659d76aba52f2893fa32792f/crates/test-programs/Cargo.toml#L15</a></p>\n<p>do you mean to use wiggle?</p>\n<blockquote>\n<p>But I understand that you actually need this older wasi-nn bindings for your use case?</p>\n</blockquote>\n<p>i don't care wasi-nn rust bindings or its version.<br>\ni do care wasi-nn version. (i want to use witx-based one for now.)</p>\n<p>having said that, as there are siblings of this test available here and there<br>\n(eg. <a href=\"https://github.com/second-state/WasmEdge-WASINN-examples/tree/master/openvino-mobilenet-raw\">https://github.com/second-state/WasmEdge-WASINN-examples/tree/master/openvino-mobilenet-raw</a>)<br>\nthe version used in this instance isn't critical to me.</p>\n</blockquote>",
        "id": 523650732,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1749682727
    },
    {
        "content": "<p>rahulchaphalkar <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2968058381\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<p>Yes, the witx one would be updated to <code>0.6.0</code> wasi-nn rust bindings from current <code>0.1.0</code> for this example, similar to the tests.</p>\n</blockquote>",
        "id": 523826565,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1749759728
    },
    {
        "content": "<p>yamt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-2968421228\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<blockquote>\n<p>Yes, the witx one would be updated to <code>0.6.0</code> wasi-nn rust bindings from current <code>0.1.0</code> for this example, similar to the tests.</p>\n</blockquote>\n<p>ok. it makes sense. thank you.</p>\n</blockquote>",
        "id": 523847156,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1749770488
    },
    {
        "content": "<p>abrown <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867#issuecomment-3014082544\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10867\">issue #10867</a>:</p>\n<blockquote>\n<blockquote>\n<p>Introduce checks if possible in test-programs for checking if output matches the expected results, so things like these will be caught</p>\n</blockquote>\n<p>In talking to @rahulchaphalkar today, I think this comment is a good idea: we should audit the results coming out of these test programs against the results one would get natively. Then we can be a bit more sure that we've configured things correctly prior to inference. And doing this for the test programs could naturally spill over into auditing the examples, too, where I believe this whole issue came up.</p>\n</blockquote>",
        "id": 526138384,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1751050560
    }
]