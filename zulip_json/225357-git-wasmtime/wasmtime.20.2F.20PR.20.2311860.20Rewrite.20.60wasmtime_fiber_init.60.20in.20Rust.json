[
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a> from <code>alexcrichton:rewrite-wasmtime-fiber-init</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>This commit updates all implementations of <code>wasmtime_fiber_init</code> to be defined in Rust rather than purely in inline assembly. There was never a need to define this function in inline assembly and as far as I can remember I did this originally for consistency with the other functions. The motivation for this PR is to avoid the need to figure out how to do PIC-relative addressing in <code>wasmtime_fiber_init</code> to get the symbol address of <code>wasmtime_fiber_start</code>. This has apparently never worked on i686 platforms and this is now becoming a problem on nightly Rust where LLD complains about this (and presumably the default linker didn't?).</p>\n<p>In rewriting these functions I additionally fixed a few minor issues:</p>\n<ul>\n<li>On AArch64 the registers are now ordered differently to make the order more consistent on the stack.</li>\n<li>On s390x the unix.rs-specified 16-bytes-at-the-top-of-the-stack is now separate from the 160-byte register save area as opposed to having it folded into the same.</li>\n</ul>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 544858657,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760489873
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/dicej\">dicej</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a>.</p>",
        "id": 544858658,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760489873
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a>.</p>",
        "id": 544858659,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760489873
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860#issuecomment-3404141737\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a>:</p>\n<blockquote>\n<p>Specifically <a href=\"https://github.com/bytecodealliance/wasmtime/blob/021552326344322330c471a832dbbce5ced990cc/crates/fiber/src/stackswitch/x86.rs#L62\">this assembly sequence</a> is not how to do PIC addressing on i686. Somehow the default bfd linker papered over this but <a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/18511450834/job/52753143269?pr=11856\">LLD does not like this</a>. Rather than figuring out the inline assembly, which I always dread, I instead rewrote all the functions in Rust to make them easier to understand (and also force rustc to figure out PIC for me)</p>\n</blockquote>",
        "id": 544858784,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760489988
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860#pullrequestreview-3340421301\">PR review</a>.</p>",
        "id": 544969158,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760534969
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860#discussion_r2432573162\">PR review comment</a>:</p>\n<blockquote>\n<p>Are the <code>// rdi</code>, <code>// rsi</code>, and <code>// rdx</code> comments relevant any more given this is no longer a naked function?</p>\n</blockquote>",
        "id": 544969160,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760534970
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a>.</p>",
        "id": 544986086,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760538948
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860#discussion_r2432823282\">PR review comment</a>:</p>\n<blockquote>\n<p>Oops, nope forgot to remove them</p>\n</blockquote>",
        "id": 544986139,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760538959
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860#pullrequestreview-3340770660\">PR review</a>.</p>",
        "id": 544986140,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760538959
    },
    {
        "content": "<p>alexcrichton has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a>.</p>",
        "id": 544986158,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760538963
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11860\">PR #11860</a>.</p>",
        "id": 544997343,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760541687
    }
]