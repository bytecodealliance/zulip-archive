[
    {
        "content": "<p>fitzgen opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a> from <code>fitzgen:oom-arc-and-oom-box</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>These types mirror their <code>std</code>/<code>alloc</code> counterparts, but only provide fallible constructors and properly handle OOM by returning <code>Err(OutOfMemory)</code>.</p>\n<p>Note that stable Rust doesn't actually give us any method to build fallible allocation for <code>Arc&lt;T&gt;</code>, and we do not wish to fork <code>Arc&lt;T&gt;</code> since it is full of very subtle unsafe code, so <code>OomArc::new</code> is only actually fallible in practice when using nightly Rust and setting <code>RUSTFLAGS=\"--cfg arc_try_new\"</code> during the build. We use a custom <code>cfg</code>, rather than a cargo feature, so that <code>cargo test --all-features --workspace</code> (which is morally what CI does) continues to Just Work in the workspace, same as we do for e.g. Pulley's usage of the nightly Rust tail calls feature.</p>\n<p>Part of <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12069\">https://github.com/bytecodealliance/wasmtime/issues/12069</a></p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 568297137,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768505881
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 568297142,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768505881
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 568297143,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768505881
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers\">wasmtime-fuzz-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 568297144,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768505882
    },
    {
        "content": "<p><strong>fitzgen</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 568297145,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768505882
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 568308794,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768510083
    },
    {
        "content": "<p>github-actions[bot] added the label <code>fuzzing</code> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 568316932,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768513632
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#issuecomment-3757034950\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"fuzzing\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>fitzgen: fuzzing</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 568316996,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768513670
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#pullrequestreview-3667874546\">PR review</a>:</p>\n<blockquote>\n<p>WDYT abuot only having top-level functions for fallible <code>Box</code> and <code>Arc</code> allocation, maybe also with extension traits if we really want? Unlike the collections once a <code>Box</code> or <code>Arc</code> is created there's no need to have a custom wrapper to ensure that only oom-handling methods are called, so maintaining these wrappers may not be necessary if we accept that fuzzing will find <code>Box::new</code> and we know what to replace it with</p>\n</blockquote>",
        "id": 568321492,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768515699
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#pullrequestreview-3667879337\">PR review</a>.</p>",
        "id": 568321665,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768515758
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#discussion_r2696172998\">PR review comment</a>:</p>\n<blockquote>\n<p>I think I'd like to push back a bit harder on this. Can you share some disassemblies or such you've been looking at to motivate this helper? I'm really worried about pessimizing the fast path due to the use of an un-inlinable-closure here</p>\n</blockquote>",
        "id": 568321667,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768515759
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#pullrequestreview-3672464553\">PR review</a>.</p>",
        "id": 568511429,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768592792
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#discussion_r2699764338\">PR review comment</a>:</p>\n<blockquote>\n<p>IIRC, I was previously testing with <code>.context()</code> chaining.</p>\n<p>I also just tested <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=release&amp;edition=2024&amp;gist=cc14fbb3346135156a3443a514ea894b\">this</a> which reflects the allocation case here, but I actually get identical disassemblies with and without the annotations on <code>fn out_of_line_slow_path</code>. So at minimum it seems like we can remove it here.</p>\n<p>Going to revisit the context chaining in a minute.</p>\n</blockquote>",
        "id": 568511431,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768592793
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#pullrequestreview-3672521212\">PR review</a>.</p>",
        "id": 568514360,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768593869
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#discussion_r2699811888\">PR review comment</a>:</p>\n<blockquote>\n<p>This program:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#![crate_type = </span><span class=\"s\">\"cdylib\"</span><span class=\"cp\">]</span>\n\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">ptr</span><span class=\"p\">::</span><span class=\"n\">NonNull</span><span class=\"p\">;</span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::{</span><span class=\"n\">Context</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">try_new_uninit_box</span><span class=\"p\">};</span>\n\n<span class=\"cp\">#[unsafe(no_mangle)]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"s\">\"C\"</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"w\"> </span><span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kt\">usize</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">out_ptr</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">NonNull</span><span class=\"o\">&lt;</span><span class=\"kt\">u8</span><span class=\"o\">&gt;</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">res</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"nb\">Box</span><span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;&gt;</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">uninit</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">try_new_uninit_box</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;</span><span class=\"p\">().</span><span class=\"n\">context</span><span class=\"p\">(</span><span class=\"s\">\"failed to allocate Box&lt;usize&gt;\"</span><span class=\"p\">)</span><span class=\"o\">?</span><span class=\"p\">;</span>\n<span class=\"w\">        </span><span class=\"nb\">Ok</span><span class=\"p\">(</span><span class=\"nb\">Box</span><span class=\"p\">::</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">uninit</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"p\">))</span>\n<span class=\"w\">    </span><span class=\"p\">})();</span>\n<span class=\"w\">    </span><span class=\"k\">unsafe</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">out_ptr</span><span class=\"p\">.</span><span class=\"n\">cast</span><span class=\"p\">().</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">res</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>With <code>out_of_line_slow_path</code></p>\n<p>&lt;details&gt;</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"mi\">0000000000007</span><span class=\"n\">fe0</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">&gt;</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fe0</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">41</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"w\">                   </span><span class=\"n\">push</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">r14</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fe2</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">53</span><span class=\"w\">                      </span><span class=\"n\">push</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">rbx</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fe3</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"w\"> </span><span class=\"n\">ec</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"w\">             </span><span class=\"n\">sub</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x18</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rsp</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fe7</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">f3</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rsi</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rbx</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fea</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">49</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">fe</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rdi</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">r14</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fed</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">bf</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x8</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">edi</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">ff2</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">ff</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"w\"> </span><span class=\"mi\">90</span><span class=\"w\"> </span><span class=\"n\">df</span><span class=\"w\"> </span><span class=\"mi\">03</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">       </span><span class=\"n\">call</span><span class=\"w\">   </span><span class=\"o\">*</span><span class=\"mh\">0x3df90</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rip</span><span class=\"p\">)</span><span class=\"w\">        </span><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"n\">f88</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">malloc</span><span class=\"o\">@</span><span class=\"n\">GLIBC_2</span><span class=\"p\">.</span><span class=\"mf\">2.5</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">ff8</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"w\"> </span><span class=\"n\">c0</span><span class=\"w\">                </span><span class=\"n\">test</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rax</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">ffb</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">74</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">b</span><span class=\"w\">                   </span><span class=\"n\">je</span><span class=\"w\">     </span><span class=\"mi\">8018</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">+</span><span class=\"mh\">0x38</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">ffd</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">31</span><span class=\"w\"> </span><span class=\"n\">c9</span><span class=\"w\">                   </span><span class=\"n\">xor</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">ecx</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">ecx</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"n\">fff</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">f6</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"mi\">01</span><span class=\"w\">                </span><span class=\"n\">test</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x1</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">cl</span>\n<span class=\"w\">    </span><span class=\"mi\">8002</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">75</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"w\">                   </span><span class=\"n\">jne</span><span class=\"w\">    </span><span class=\"mi\">802</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">+</span><span class=\"mh\">0x4d</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">8004</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">4</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">r14</span><span class=\"p\">,(</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">8007</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">31</span><span class=\"w\"> </span><span class=\"n\">c9</span><span class=\"w\">                   </span><span class=\"n\">xor</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">ecx</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">ecx</span>\n<span class=\"w\">    </span><span class=\"mi\">8009</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">b</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rcx</span><span class=\"p\">,(</span><span class=\"o\">%</span><span class=\"n\">rbx</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">800</span><span class=\"n\">c</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\">             </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"mh\">0x8</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rbx</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">8010</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"w\"> </span><span class=\"n\">c4</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"w\">             </span><span class=\"n\">add</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x18</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rsp</span>\n<span class=\"w\">    </span><span class=\"mi\">8014</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">5</span><span class=\"n\">b</span><span class=\"w\">                      </span><span class=\"n\">pop</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rbx</span>\n<span class=\"w\">    </span><span class=\"mi\">8015</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">41</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"n\">e</span><span class=\"w\">                   </span><span class=\"n\">pop</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">r14</span>\n<span class=\"w\">    </span><span class=\"mi\">8017</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">c3</span><span class=\"w\">                      </span><span class=\"n\">ret</span>\n<span class=\"w\">    </span><span class=\"mi\">8018</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">bf</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x8</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">edi</span>\n<span class=\"w\">    </span><span class=\"mi\">801</span><span class=\"n\">d</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">e8</span><span class=\"w\"> </span><span class=\"n\">ee</span><span class=\"w\"> </span><span class=\"n\">fe</span><span class=\"w\"> </span><span class=\"n\">ff</span><span class=\"w\"> </span><span class=\"n\">ff</span><span class=\"w\">          </span><span class=\"n\">call</span><span class=\"w\">   </span><span class=\"mi\">7</span><span class=\"n\">f10</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">boxed</span><span class=\"p\">::</span><span class=\"n\">try_alloc</span><span class=\"p\">::</span><span class=\"n\">out_of_line_slow_path</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">result</span><span class=\"p\">::</span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">ptr</span><span class=\"p\">::</span><span class=\"n\">non_null</span><span class=\"p\">::</span><span class=\"n\">NonNull</span><span class=\"o\">&lt;</span><span class=\"kt\">u8</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">oom</span><span class=\"p\">::</span><span class=\"n\">OutOfMemory</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">boxed</span><span class=\"p\">::</span><span class=\"n\">try_alloc</span><span class=\"p\">::{</span><span class=\"n\">closure</span><span class=\"p\">#</span><span class=\"mi\">0</span><span class=\"p\">}</span><span class=\"o\">&gt;&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">8022</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rcx</span>\n<span class=\"w\">    </span><span class=\"mi\">8025</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">d0</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rdx</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rax</span>\n<span class=\"w\">    </span><span class=\"mi\">8028</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">f6</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"mi\">01</span><span class=\"w\">                </span><span class=\"n\">test</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x1</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">cl</span>\n<span class=\"w\">    </span><span class=\"mi\">802</span><span class=\"n\">b</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">74</span><span class=\"w\"> </span><span class=\"n\">d7</span><span class=\"w\">                   </span><span class=\"n\">je</span><span class=\"w\">     </span><span class=\"mi\">8004</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">+</span><span class=\"mh\">0x24</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">802</span><span class=\"n\">d</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">04</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"w\">             </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,(</span><span class=\"o\">%</span><span class=\"n\">rsp</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">8031</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"w\"> </span><span class=\"n\">e0</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"mi\">03</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">    </span><span class=\"n\">lea</span><span class=\"w\">    </span><span class=\"mh\">0x33ae0</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rip</span><span class=\"p\">),</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"w\">        </span><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">bb18</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">_fini</span><span class=\"o\">+</span><span class=\"mh\">0x23fc</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">8038</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"mh\">0x8</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rsp</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">803</span><span class=\"n\">d</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"n\">c7</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">    </span><span class=\"n\">movq</span><span class=\"w\">   </span><span class=\"cp\">$</span><span class=\"mh\">0x1d</span><span class=\"p\">,</span><span class=\"mh\">0x10</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rsp</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">8044</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span>\n<span class=\"w\">    </span><span class=\"mi\">8046</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">e7</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rsp</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rdi</span>\n<span class=\"w\">    </span><span class=\"mi\">8049</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">e8</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"n\">b0</span><span class=\"w\"> </span><span class=\"n\">ff</span><span class=\"w\"> </span><span class=\"n\">ff</span><span class=\"w\">          </span><span class=\"n\">call</span><span class=\"w\">   </span><span class=\"mi\">3060</span><span class=\"w\"> </span><span class=\"o\">&lt;&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">result</span><span class=\"p\">::</span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">context</span><span class=\"p\">::</span><span class=\"n\">Context</span><span class=\"o\">&lt;</span><span class=\"n\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">::</span><span class=\"n\">context</span><span class=\"p\">::</span><span class=\"n\">out_of_line_slow_path</span><span class=\"p\">::</span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">result</span><span class=\"p\">::</span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">alloc</span><span class=\"p\">::</span><span class=\"n\">boxed</span><span class=\"p\">::</span><span class=\"nb\">Box</span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">mem</span><span class=\"p\">::</span><span class=\"n\">maybe_uninit</span><span class=\"p\">::</span><span class=\"n\">MaybeUninit</span><span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">error</span><span class=\"p\">::</span><span class=\"n\">Error</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">result</span><span class=\"p\">::</span><span class=\"nb\">Result</span><span class=\"o\">&lt;</span><span class=\"n\">alloc</span><span class=\"p\">::</span><span class=\"n\">boxed</span><span class=\"p\">::</span><span class=\"nb\">Box</span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">mem</span><span class=\"p\">::</span><span class=\"n\">maybe_uninit</span><span class=\"p\">::</span><span class=\"n\">MaybeUninit</span><span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">oom</span><span class=\"p\">::</span><span class=\"n\">OutOfMemory</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">context</span><span class=\"p\">::</span><span class=\"n\">Context</span><span class=\"o\">&lt;</span><span class=\"n\">alloc</span><span class=\"p\">::</span><span class=\"n\">boxed</span><span class=\"p\">::</span><span class=\"nb\">Box</span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">mem</span><span class=\"p\">::</span><span class=\"n\">maybe_uninit</span><span class=\"p\">::</span><span class=\"n\">MaybeUninit</span><span class=\"o\">&lt;</span><span class=\"kt\">usize</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">wasmtime_internal_error</span><span class=\"p\">::</span><span class=\"n\">oom</span><span class=\"p\">::</span><span class=\"n\">OutOfMemory</span><span class=\"o\">&gt;&gt;</span><span class=\"p\">::</span><span class=\"n\">context</span><span class=\"o\">&lt;&amp;</span><span class=\"kt\">str</span><span class=\"o\">&gt;</span><span class=\"p\">::{</span><span class=\"n\">closure</span><span class=\"p\">#</span><span class=\"mi\">0</span><span class=\"p\">}</span><span class=\"o\">&gt;&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">804</span><span class=\"n\">e</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">b9</span><span class=\"w\"> </span><span class=\"mi\">01</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x1</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">ecx</span>\n<span class=\"w\">    </span><span class=\"mi\">8053</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">eb</span><span class=\"w\"> </span><span class=\"n\">b4</span><span class=\"w\">                   </span><span class=\"n\">jmp</span><span class=\"w\">    </span><span class=\"mi\">8009</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">+</span><span class=\"mh\">0x29</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">8055</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">e8</span><span class=\"w\"> </span><span class=\"mi\">09</span><span class=\"w\"> </span><span class=\"n\">b4</span><span class=\"w\"> </span><span class=\"n\">ff</span><span class=\"w\"> </span><span class=\"n\">ff</span><span class=\"w\">          </span><span class=\"n\">call</span><span class=\"w\">   </span><span class=\"mi\">3463</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">panic_cannot_unwind</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">805</span><span class=\"n\">a</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">       </span><span class=\"n\">nopw</span><span class=\"w\">   </span><span class=\"mh\">0x0</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>&lt;/details&gt;</p>\n<p>Without <code>out_of_line_slow_path</code>:</p>\n<p>&lt;details&gt;</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"mi\">0000000000001100</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">&gt;</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">1100</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">41</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"w\">                   </span><span class=\"n\">push</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">r14</span>\n<span class=\"w\">    </span><span class=\"mi\">1102</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">53</span><span class=\"w\">                      </span><span class=\"n\">push</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">rbx</span>\n<span class=\"w\">    </span><span class=\"mi\">1103</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">50</span><span class=\"w\">                      </span><span class=\"n\">push</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">rax</span>\n<span class=\"w\">    </span><span class=\"mi\">1104</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">f3</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rsi</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rbx</span>\n<span class=\"w\">    </span><span class=\"mi\">1107</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">49</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"n\">fe</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rdi</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">r14</span>\n<span class=\"w\">    </span><span class=\"mi\">110</span><span class=\"n\">a</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">bf</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x8</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">edi</span>\n<span class=\"w\">    </span><span class=\"mi\">110</span><span class=\"n\">f</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">ff</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"w\"> </span><span class=\"n\">d3</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">       </span><span class=\"n\">call</span><span class=\"w\">   </span><span class=\"o\">*</span><span class=\"mh\">0x2ed3</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rip</span><span class=\"p\">)</span><span class=\"w\">        </span><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">fe8</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">malloc</span><span class=\"o\">@</span><span class=\"n\">GLIBC_2</span><span class=\"p\">.</span><span class=\"mf\">2.5</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">1115</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"w\"> </span><span class=\"n\">c0</span><span class=\"w\">                </span><span class=\"n\">test</span><span class=\"w\">   </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rax</span>\n<span class=\"w\">    </span><span class=\"mi\">1118</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">74</span><span class=\"w\"> </span><span class=\"mi\">07</span><span class=\"w\">                   </span><span class=\"n\">je</span><span class=\"w\">     </span><span class=\"mi\">1121</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">+</span><span class=\"mh\">0x21</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">111</span><span class=\"n\">a</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">4</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">r14</span><span class=\"p\">,(</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">111</span><span class=\"n\">d</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">31</span><span class=\"w\"> </span><span class=\"n\">c9</span><span class=\"w\">                   </span><span class=\"n\">xor</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">ecx</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">ecx</span>\n<span class=\"w\">    </span><span class=\"mi\">111</span><span class=\"n\">f</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">eb</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">a</span><span class=\"w\">                   </span><span class=\"n\">jmp</span><span class=\"w\">    </span><span class=\"mi\">112</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">foo</span><span class=\"o\">+</span><span class=\"mh\">0x2b</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">1121</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">b9</span><span class=\"w\"> </span><span class=\"mi\">01</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x1</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">ecx</span>\n<span class=\"w\">    </span><span class=\"mi\">1126</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">b8</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">          </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x11</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">eax</span>\n<span class=\"w\">    </span><span class=\"mi\">112</span><span class=\"n\">b</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">b</span><span class=\"w\">                </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rcx</span><span class=\"p\">,(</span><span class=\"o\">%</span><span class=\"n\">rbx</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">112</span><span class=\"n\">e</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\">             </span><span class=\"n\">mov</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"mh\">0x8</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rbx</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"mi\">1132</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"w\"> </span><span class=\"n\">c4</span><span class=\"w\"> </span><span class=\"mi\">08</span><span class=\"w\">             </span><span class=\"n\">add</span><span class=\"w\">    </span><span class=\"cp\">$</span><span class=\"mh\">0x8</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rsp</span>\n<span class=\"w\">    </span><span class=\"mi\">1136</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">5</span><span class=\"n\">b</span><span class=\"w\">                      </span><span class=\"n\">pop</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">rbx</span>\n<span class=\"w\">    </span><span class=\"mi\">1137</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">41</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"n\">e</span><span class=\"w\">                   </span><span class=\"n\">pop</span><span class=\"w\">    </span><span class=\"o\">%</span><span class=\"n\">r14</span>\n<span class=\"w\">    </span><span class=\"mi\">1139</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"nc\">c3</span><span class=\"w\">                      </span><span class=\"n\">ret</span>\n<span class=\"w\">    </span><span class=\"mi\">113</span><span class=\"n\">a</span><span class=\"p\">:</span><span class=\"w\">   </span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"mi\">00</span><span class=\"w\">       </span><span class=\"n\">nopw</span><span class=\"w\">   </span><span class=\"mh\">0x0</span><span class=\"p\">(</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"o\">%</span><span class=\"n\">rax</span><span class=\"p\">,</span><span class=\"mi\">1</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>&lt;/details&gt;</p>\n<p>So yeah, looks like it isn't helpful here either, and if I can't consistently observes better codegen then we should definitely default to not constraining the compiler and removing this macro. I'll remove it from this PR and do another for the existing usage in <code>main</code>.</p>\n</blockquote>",
        "id": 568514400,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768593886
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#issuecomment-3774759927\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>:</p>\n<blockquote>\n<blockquote>\n<p>WDYT abuot only having top-level functions for fallible <code>Box</code> and <code>Arc</code> allocation, maybe also with extension traits if we really want? Unlike the collections once a <code>Box</code> or <code>Arc</code> is created there's no need to have a custom wrapper to ensure that only oom-handling methods are called, so maintaining these wrappers may not be necessary if we accept that fuzzing will find <code>Box::new</code> and we know what to replace it with</p>\n</blockquote>\n<p>Seems fine by me. Will update in a bit.</p>\n</blockquote>",
        "id": 569119683,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768940231
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 569124744,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768942026
    },
    {
        "content": "<p>fitzgen updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 569126100,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768942591
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#issuecomment-3774932648\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>:</p>\n<blockquote>\n<p>@alexcrichton this should be ready for review again</p>\n</blockquote>",
        "id": 569126830,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768942893
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361#pullrequestreview-3687687619\">PR review</a>.</p>",
        "id": 569276331,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769007398
    },
    {
        "content": "<p>fitzgen added <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361 Introduce <code>wasmtime_environ::collections::{OomArc, OomBox}</code></a> to the merge queue</p>",
        "id": 569328882,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769020826
    },
    {
        "content": "<p>fitzgen merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361</a>.</p>",
        "id": 569333773,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769022317
    },
    {
        "content": "<p>fitzgen removed <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12361\">PR #12361 Introduce <code>wasmtime_environ::collections::{OomArc, OomBox}</code></a> from the merge queue</p>",
        "id": 569333776,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769022318
    }
]