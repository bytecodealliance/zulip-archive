[
    {
        "content": "<p>badeend opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a> from <code>badeend:implicit-binds</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>In 0.2, implicit binds were explicitly forbidden, because that would bypass the concept of network handles.<br>\n0.3 doesn't have network handles and sockets are allowed to perform implicit binds again. This affects:</p>\n<ul>\n<li><code>tcp-socket::listen</code> (documented <a href=\"https://github.com/WebAssembly/WASI/blob/b7ef60b50d95f9a56ee02f3f4c096a3f902d7a17/proposals/sockets/wit-0.3.0-draft/types.wit#L229-L230\">here</a>)</li>\n<li><code>udp-socket::connect</code> (documented <a href=\"https://github.com/WebAssembly/WASI/blob/b7ef60b50d95f9a56ee02f3f4c096a3f902d7a17/proposals/sockets/wit-0.3.0-draft/types.wit#L542-L544\">here</a>)</li>\n<li><code>udp-socket::send</code></li>\n</ul>\n<p>Eventually, this will also allow us to remove the double bookkeeping <a href=\"https://github.com/WebAssembly/wasi-libc/blob/98f9a6adf3bfbf5090e6042283a6a42f13c734af/libc-bottom-half/sources/wasip2_udp.c#L266-L272\">like this</a> from wasi-libc.</p>\n</blockquote>",
        "id": 565596969,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766958524
    },
    {
        "content": "<p><strong>badeend</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers\">wasmtime-wasi-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 565596970,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766958524
    },
    {
        "content": "<p><strong>badeend</strong> requested <a href=\"https://github.com/dicej\">dicej</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 565596971,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766958525
    },
    {
        "content": "<p><strong>badeend</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 565596973,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766958525
    },
    {
        "content": "<p>badeend updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 565597191,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766958899
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225#pullrequestreview-3627283576\">PR review</a>:</p>\n<blockquote>\n<p>Thanks for the comprehensive tests and the implementation here, much appreciated!</p>\n</blockquote>",
        "id": 566378521,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767626562
    },
    {
        "content": "<p>badeend updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 566437379,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767646679
    },
    {
        "content": "<p>badeend updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 566437784,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767646847
    },
    {
        "content": "<p>badeend <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225#issuecomment-3712120298\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>:</p>\n<blockquote>\n<p>Interesting. I was under the impression that implicit bind was a well-known universal behavior, but after some more research it appears to be a bit more nuanced than I thought. I've added a comment in the code with my findings.</p>\n<p>But practically, <a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/20720044828/job/59481090812\">Linux</a> &amp; <a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/20720044828/job/59481090855\">MacOS</a> both successfully ran to completion with:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">p3</span><span class=\"p\">::</span><span class=\"n\">p3_sockets_tcp_listen</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">ok</span>\n</code></pre></div>\n<p>So they perform an implicit bind as expected (but not clearly documented). I assume this behavior extrapolates to other *BSD flavors.</p>\n<p>But apparently, Windows _requires_ <code>bind</code> to be called before <code>listen</code>. To take away any potential platform-specific differences, I've updated the code to always perform the \"implicit\" bind ourselves in case the socket wasn't explicitly bound by the guest.</p>\n<p>Assuming this actually fixes the CI problems, I'll open a PR for a spec change to add a clarification on the <code>listen</code> method.</p>\n<p>@alexcrichton Could you review <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225/commits/b9668c6c7be2184f584aa26ae960ae389bd5e658\">the changes I just added</a>?</p>\n</blockquote>",
        "id": 566440151,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767647895
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225#issuecomment-3712151211\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>:</p>\n<blockquote>\n<p>Sounds right to me yeah, and thanks for investigating!</p>\n</blockquote>",
        "id": 566441594,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767648579
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12225\">PR #12225</a>.</p>",
        "id": 566444351,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767649964
    }
]