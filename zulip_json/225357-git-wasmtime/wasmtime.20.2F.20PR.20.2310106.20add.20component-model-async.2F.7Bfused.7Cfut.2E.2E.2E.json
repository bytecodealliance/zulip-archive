[
    {
        "content": "<p>dicej edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>.</p>",
        "id": 503339647,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114068
    },
    {
        "content": "<p>dicej edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>:</p>\n<blockquote>\n<p>This is another piece of #9582 which I'm splitting out to make review easier.</p>\n<p>The fused.wast test exercises fused adapter generation for various flavors of<br>\nintercomponent async-&gt;async, async-&gt;sync, and sync-&gt;async calls.</p>\n<p>The futures.wast and streams.wast tests exercise the various intrinsics<br>\n(e.g. <code>stream.read</code>, <code>future.close_writable</code>, etc.) involving <code>future</code>s and<br>\n<code>stream</code>s.</p>\n<p>The remaining changes fill in some TODOs to make the tests pass, plus plumbing<br>\nfor a few intrinsics which aren't needed for these tests but which set the<br>\nfoundation for future tests.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 503339788,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114110
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658648181\">PR review</a>.</p>",
        "id": 503340369,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114303
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980041652\">PR review comment</a>:</p>\n<blockquote>\n<p>I've reworked this code and added clarifying comments.</p>\n</blockquote>",
        "id": 503340371,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114304
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658655154\">PR review</a>.</p>",
        "id": 503341093,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114522
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980046105\">PR review comment</a>:</p>\n<blockquote>\n<p>I've refactored the code to no longer use global variables to stash params and results, so this code no longer exists.</p>\n</blockquote>",
        "id": 503341095,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114522
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658655973\">PR review</a>.</p>",
        "id": 503341153,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114549
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980046637\">PR review comment</a>:</p>\n<blockquote>\n<p>This code no longer exists, so marking this resolved.</p>\n</blockquote>",
        "id": 503341157,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114549
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658659879\">PR review</a>.</p>",
        "id": 503341364,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114611
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980049220\">PR review comment</a>:</p>\n<blockquote>\n<p>TIL about declarative element segments.  I've added a TODO comment.</p>\n</blockquote>",
        "id": 503341365,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114611
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658664254\">PR review</a>.</p>",
        "id": 503341540,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114672
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980052017\">PR review comment</a>:</p>\n<blockquote>\n<p>I've refactored this to avoid using globals, and have added explanatory comments to the new code.</p>\n</blockquote>",
        "id": 503341541,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114672
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658671154\">PR review</a>.</p>",
        "id": 503341891,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114791
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980055388\">PR review comment</a>:</p>\n<blockquote>\n<p>I've added doc comments to <code>fact.rs</code> to describe the purpose of these intrinsics.  Let me know if they need more work.</p>\n</blockquote>",
        "id": 503341894,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114791
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658672452\">PR review</a>.</p>",
        "id": 503342004,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114811
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980056076\">PR review comment</a>:</p>\n<blockquote>\n<p>The globals are gone <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> </p>\n</blockquote>",
        "id": 503342005,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741114812
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2658695219\">PR review</a>.</p>",
        "id": 503343081,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741115161
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980067648\">PR review comment</a>:</p>\n<blockquote>\n<p>The globals are gone, and I've added a bunch of comments; let me know if further clarification is needed.</p>\n</blockquote>",
        "id": 503343084,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741115162
    },
    {
        "content": "<p>dicej <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#issuecomment-2698808062\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>:</p>\n<blockquote>\n<p>@alexcrichton I've rebooted this PR based on the latest code in the <code>wasip3-prototyping</code> repo.  There are lot more comments in the fused adapter code now; let me know if more are needed or the existing ones are unclear.</p>\n<p>This PR now includes two more tests (<code>streams.wast</code> and <code>futures.wast</code>) and the <code>wasmtime-cranelift</code> and <code>wasmtime-environ</code> intrinsic plumbing needed to make them pass.  All the intrinsics follow the same pattern, and the Cranelift codegen for them share a lot of code, so I figure putting them all in a single PR might be easiest.  Let me know if it's too much.</p>\n</blockquote>",
        "id": 503356293,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741119466
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#issuecomment-2699008855\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"fuzzing\", \"wasmtime:api\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>fitzgen: fuzzing</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 503370443,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741124684
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2659116922\">PR review</a>:</p>\n<blockquote>\n<p>Thanks for adding these comments!</p>\n</blockquote>",
        "id": 503374127,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126089
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980276966\">PR review comment</a>:</p>\n<blockquote>\n<p>Mind tagging this with #10143?</p>\n</blockquote>",
        "id": 503374128,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126089
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980275676\">PR review comment</a>:</p>\n<blockquote>\n<p>I think this could return <code>&amp;CanonicalAbiInfo::ZERO</code> here</p>\n</blockquote>",
        "id": 503374129,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126089
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980275965\">PR review comment</a>:</p>\n<blockquote>\n<p>Would it be possible to avoid the <code>.clone()</code> and return the <code>&amp;CanonicalAbiInfo</code> here with the change above?</p>\n</blockquote>",
        "id": 503374130,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980279259\">PR review comment</a>:</p>\n<blockquote>\n<p>To avoid a possible mismatch where this doesn't actually match teh value of <code>call</code> below, could the results of the call be introspected with Cranelift APIs to learn the type?</p>\n</blockquote>",
        "id": 503374132,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980287119\">PR review comment</a>:</p>\n<blockquote>\n<p>Mind documenting this parameter above? (perhaps documenting that it's currently-unused but soon-to-be-used as well)</p>\n</blockquote>",
        "id": 503374133,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980304241\">PR review comment</a>:</p>\n<blockquote>\n<p>Mind adding a comment here clarifying that this is just an optimization and it's always valid to return <code>None</code> here?</p>\n</blockquote>",
        "id": 503374134,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980292443\">PR review comment</a>:</p>\n<blockquote>\n<p>How come Send popped up here and Send/Sync above?</p>\n</blockquote>",
        "id": 503374135,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980303647\">PR review comment</a>:</p>\n<blockquote>\n<p>Or, somewhat alternatively, I'm a bit uneasy having the return type imply the meaning of the value of the return in terms of whether it traps or not. Another option would be to thread around <code>TrapSentinel</code> perhaps? (or something akin to that)</p>\n</blockquote>",
        "id": 503374136,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980301664\">PR review comment</a>:</p>\n<blockquote>\n<p>While you're here mind extracting this <code>fn(...) -&gt; ...</code> signature to something like <code>type GetLibcallFn = fn(...) -&gt; ...</code> and replacing the signatures throughout this file with <code>get_libcall: GetLibcallFn</code>?</p>\n</blockquote>",
        "id": 503374137,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980305122\">PR review comment</a>:</p>\n<blockquote>\n<p>If you can comment pointing to a location in the fact trampoline bits to where these constants come from (and vice versa ideally) that'd be good to keep the two in sync. (and/or extracting this to constants or similar)</p>\n</blockquote>",
        "id": 503374138,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980306513\">PR review comment</a>:</p>\n<blockquote>\n<p>Similar to down below handling these canonical ABI arguments I think would be good to have as helper functions</p>\n</blockquote>",
        "id": 503374139,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126090
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980300786\">PR review comment</a>:</p>\n<blockquote>\n<p>Processing/loading these two values is done here and a few times below, mind extracting them to a helper?</p>\n</blockquote>",
        "id": 503374141,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741126091
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2659402630\">PR review</a>.</p>",
        "id": 503383953,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741130353
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980408464\">PR review comment</a>:</p>\n<blockquote>\n<p>Would you mind sketching out how to introspect the result type from the Cranelift APIs?  The surface area is pretty huge, and I'm not sure what to search for.</p>\n</blockquote>",
        "id": 503383954,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741130353
    },
    {
        "content": "<p>dicej <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#issuecomment-2699219494\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>:</p>\n<blockquote>\n<p>Thanks for the review, @alexcrichton!  I'll address your feedback first thing tomorrow.</p>\n</blockquote>",
        "id": 503384002,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741130381
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2659450896\">PR review</a>.</p>",
        "id": 503386700,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741131730
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1980433017\">PR review comment</a>:</p>\n<blockquote>\n<p>You'll want <code>value_type</code> the method, like this -- <a href=\"https://github.com/bytecodealliance/wasmtime/blob/132a490d72e6381c593a409aeca50a765b54ca28/crates/cranelift/src/translate/table.rs#L66\">https://github.com/bytecodealliance/wasmtime/blob/132a490d72e6381c593a409aeca50a765b54ca28/crates/cranelift/src/translate/table.rs#L66</a> (there's a number of hits you can explore throughout <code>crates/cranelift</code> too, this is just a random one)</p>\n</blockquote>",
        "id": 503386701,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741131730
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2661434160\">PR review</a>.</p>",
        "id": 503544054,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741187529
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1981596076\">PR review comment</a>:</p>\n<blockquote>\n<p>Yes, I was able to do this, but I ended up needing to clone it at the call site anyway to avoid conflicting borrows of <code>self</code> (which perhaps could be resolved via some kind of split borrow approach with heavy refactoring, but doesn't seem worth it in this case).</p>\n</blockquote>",
        "id": 503544056,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741187529
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2661438315\">PR review</a>.</p>",
        "id": 503544326,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741187588
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1981598249\">PR review comment</a>:</p>\n<blockquote>\n<p>I'll revert the changes to this file; they're not needed (yet).</p>\n</blockquote>",
        "id": 503544328,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741187588
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>.</p>",
        "id": 503572660,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741193284
    },
    {
        "content": "<p>dicej has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>.</p>",
        "id": 503572992,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741193365
    },
    {
        "content": "<p>dicej merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106\">PR #10106</a>.</p>",
        "id": 503582902,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741195380
    },
    {
        "content": "<p>FrankReh submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2665209403\">PR review</a>.</p>",
        "id": 503853629,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741283073
    },
    {
        "content": "<p>FrankReh created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1983805735\">PR review comment</a>:</p>\n<blockquote>\n<p>\"will block\"</p>\n</blockquote>",
        "id": 503853633,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741283074
    },
    {
        "content": "<p>FrankReh submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2665230317\">PR review</a>.</p>",
        "id": 503855339,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741283587
    },
    {
        "content": "<p>FrankReh created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1983817061\">PR review comment</a>:</p>\n<blockquote>\n<p>to be exported to the host which host to lift the parameters ... maybe correct but I didn't know how to parse that part of the sentence.</p>\n</blockquote>",
        "id": 503855342,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741283587
    },
    {
        "content": "<p>FrankReh submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2665240494\">PR review</a>.</p>",
        "id": 503856358,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741283870
    },
    {
        "content": "<p>FrankReh created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1983823448\">PR review comment</a>:</p>\n<blockquote>\n<p>the the</p>\n</blockquote>",
        "id": 503856366,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741283871
    },
    {
        "content": "<p>FrankReh submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#pullrequestreview-2665249471\">PR review</a>.</p>",
        "id": 503857330,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741284122
    },
    {
        "content": "<p>FrankReh created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10106#discussion_r1983828755\">PR review comment</a>:</p>\n<blockquote>\n<p>exported to the host which host to lift ... apologies if this makes sense to folks more in the know, maybe just hard for me to decipher</p>\n</blockquote>",
        "id": 503857333,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741284122
    }
]