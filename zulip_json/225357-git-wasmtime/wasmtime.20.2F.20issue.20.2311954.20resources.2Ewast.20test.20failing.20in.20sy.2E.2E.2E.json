[
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Fuzzing overnight plus some bisection locally shows that after <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11751\">https://github.com/bytecodealliance/wasmtime/pull/11751</a> and with <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11953\">https://github.com/bytecodealliance/wasmtime/pull/11953</a> applied the following fails locally</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"k\">async</span><span class=\"o\">=</span><span class=\"kc\">false</span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">cli</span><span class=\"w\"> </span><span class=\"n\">v39</span><span class=\"p\">.</span><span class=\"mf\">0.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">alex</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"n\">Finished</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">dev</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">profile</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">unoptimized</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">debuginfo</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">3.18</span><span class=\"n\">s</span>\n<span class=\"w\">     </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">debug</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"k\">async</span><span class=\"o\">=</span><span class=\"kc\">false</span><span class=\"err\">`</span>\n<span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">script</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"o\">'</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">directive</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"p\">:</span><span class=\"mi\">28</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">           </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"mh\">0x5d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n<span class=\"w\">       </span><span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n</code></pre></div>\n<p>cc @TartanLlama would you be up for investigating this?</p>\n</blockquote>",
        "id": 547643665,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1761722908
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the fuzz-bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">Issue #11954</a>.</p>",
        "id": 547643667,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1761722908
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the wasm-proposal:component-threading label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">Issue #11954</a>.</p>",
        "id": 547643668,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1761722908
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3460406678\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Will do!</p>\n</blockquote>",
        "id": 547656580,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1761727582
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3460612779\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Ah, so this is a case where disabling async changes the handle values of the resources because there's no longer an implicit thread created upon the export call. The test relies upon the resource handle being <code>2</code>, with the implicit thread filling in the <code>1</code> slot.</p>\n</blockquote>",
        "id": 547668705,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1761730926
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3460633468\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>I guess the spec-consistent behaviour would be to add an entry into the table on sync export calls that will never be used. What do you think?</p>\n</blockquote>",
        "id": 547670031,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1761731264
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3476595423\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Oof that's tricky! Your intuition matches mine though where a dummy handle feels the way to go here for when threading is disabled in Wasmtime.</p>\n</blockquote>",
        "id": 548325063,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1762018390
    },
    {
        "content": "<p>tschneidereit <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3571654841\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Instead of landing #12081, should we consider reverting the changes that regressed this until it's fixed? I'd be pretty concerned if we lose fuzzing support for things that we ship at tier-1 for an unknown period of time.</p>\n<p>@TartanLlama do you think this is something you could take on before too long? Alternatively, could we revert the changes that break fuzzing until that can be addressed?</p>\n</blockquote>",
        "id": 559093534,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764001588
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3571830320\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>@tschneidereit I can probably get a fix for this tomorrow</p>\n</blockquote>",
        "id": 559103960,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764003948
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3575948702\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Reasoning through what's required here has led me to the fact that we need more machinery added into sync-&gt;sync fused adaptors in general for co-op threading bookkeeping, so I won't have a fix for this as fast as I hoped, but this will be my main focus for this week.</p>\n</blockquote>",
        "id": 560171060,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764081236
    },
    {
        "content": "<p>TartanLlama deleted a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3575948702\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Reasoning through what's required here has led me to the fact that we need more machinery added into sync-&gt;sync fused adaptors in general for co-op threading bookkeeping, so I won't have a fix for this as fast as I hoped, but this will be my main focus for this week.</p>\n</blockquote>",
        "id": 560172630,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764081610
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954#issuecomment-3575997041\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Reasoning this through has made me realise there needs to be more in the sync-&gt;sync fused adaptors to support co-op threading, so I won't have a fix as fast as I hoped. This will be my focus for this week though.</p>\n</blockquote>",
        "id": 560173877,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764081914
    },
    {
        "content": "<p>dicej assigned TartanLlama to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>.</p>",
        "id": 566764233,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767800976
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11954\">issue #11954</a>:</p>\n<blockquote>\n<p>Fuzzing overnight plus some bisection locally shows that after <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11751\">https://github.com/bytecodealliance/wasmtime/pull/11751</a> and with <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11953\">https://github.com/bytecodealliance/wasmtime/pull/11953</a> applied the following fails locally</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">cargo</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"k\">async</span><span class=\"o\">=</span><span class=\"kc\">false</span>\n<span class=\"w\">   </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">cli</span><span class=\"w\"> </span><span class=\"n\">v39</span><span class=\"p\">.</span><span class=\"mf\">0.0</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"o\">/</span><span class=\"n\">Users</span><span class=\"o\">/</span><span class=\"n\">alex</span><span class=\"o\">/</span><span class=\"n\">code</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"p\">)</span>\n<span class=\"w\">    </span><span class=\"n\">Finished</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">dev</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">profile</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"n\">unoptimized</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"n\">debuginfo</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">3.18</span><span class=\"n\">s</span>\n<span class=\"w\">     </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">debug</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"k\">async</span><span class=\"o\">=</span><span class=\"kc\">false</span><span class=\"err\">`</span>\n<span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">script</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"o\">'</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">directive</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"o\">/</span><span class=\"n\">misc_testsuite</span><span class=\"o\">/</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">model</span><span class=\"o\">/</span><span class=\"n\">resources</span><span class=\"p\">.</span><span class=\"n\">wast</span><span class=\"p\">:</span><span class=\"mi\">28</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">           </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"mh\">0x5d</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">&gt;</span>\n<span class=\"w\">       </span><span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n</code></pre></div>\n<p>cc @TartanLlama would you be up for investigating this?</p>\n</blockquote>",
        "id": 571999343,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770235597
    }
]