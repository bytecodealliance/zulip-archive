[
    {
        "content": "<p>dicej opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a> from <code>dicej:better-may-block-tracking</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Previously, we weren't updating or checking the may-block status of a task across sync-to-sync, guest-to-guest calls, meaning we were allowing blocking in cases we shouldn't have.</p>\n<p>This fixes that by adding a new <code>task_may_block</code> field to <code>VMComponentContext</code>, plus code to update it every time we switch threads or do a sync-to-sync, guest-to-guest call.  We use that field as the source of truth about whether a blocking operation is permitted.</p>\n<p>I've updated various tests to match, and Luke has an item on his to-do list to add sad-path coverage for various cases to the upstream <code>component-model</code> test suite.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 566846685,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767831670
    },
    {
        "content": "<p><strong>dicej</strong> has marked <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a> as ready for review.</p>",
        "id": 566846702,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767831678
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 566846705,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767831679
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 566846706,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767831679
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 566846707,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767831679
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 566860868,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767842971
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282#pullrequestreview-3640054025\">PR review</a>:</p>\n<blockquote>\n<p>Test-wise, to confirm, you feel that the upstream spec tests adequately cover this? And/or the test updates that were required here? Or should some dedicated tests be written as well?</p>\n</blockquote>",
        "id": 566976088,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767887634
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282#discussion_r2672895493\">PR review comment</a>:</p>\n<blockquote>\n<p>While technically this should work, I think this'll want to be <code>ret.ptr.size_of_vmglobal_definition()</code> because we view this allocation region as a global, right?</p>\n</blockquote>",
        "id": 566976090,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767887634
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282#discussion_r2672894150\">PR review comment</a>:</p>\n<blockquote>\n<p>Can you update the comment at the top of the file to  match this pseudo-struct?</p>\n</blockquote>",
        "id": 566976091,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767887634
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282#discussion_r2672908677\">PR review comment</a>:</p>\n<blockquote>\n<p>The old <code>InstanceFlags</code> structure is pretty unsafe due to retaining a long-lived pointer disconnected from the <code>ComponentInstance</code>, so ideally we wouldn't model this after that if we don't need to. Would it be possible to have safe get/set/as_raw methods on <code>ComponentInstance</code> and avoid having this type entirely?</p>\n</blockquote>",
        "id": 566976092,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767887634
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 567019122,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767901319
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 567022621,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767902525
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 567026755,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767904012
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 567027984,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767904462
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 567030724,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767905447
    },
    {
        "content": "<p>dicej merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>.</p>",
        "id": 567045136,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767912022
    },
    {
        "content": "<p>dicej <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282#issuecomment-3729435303\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>:</p>\n<blockquote>\n<blockquote>\n<p>Test-wise, to confirm, you feel that the upstream spec tests adequately cover this? And/or the test updates that were required here? Or should some dedicated tests be written as well?</p>\n</blockquote>\n<p>(Sorry, I forgot to respond to this earlier)</p>\n<p>We _do_ need dedicated tests for this, and I've added an item to @lukewagner's \"WAST-as-a-service\" backlog to cover that.</p>\n</blockquote>",
        "id": 567169697,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767973195
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282#issuecomment-3729463859\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12282\">PR #12282</a>:</p>\n<blockquote>\n<p>Makes sense, but while that makes sense for retroactively testing things I'd prefer to try to ensure that we are also writing <code>*.wast</code> tests for new things or anything our vision is currently set on. I don't think, for example, that Luke should be the one-and-only person writing those <code>*.wast</code> tests</p>\n</blockquote>",
        "id": 567171415,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767973683
    }
]