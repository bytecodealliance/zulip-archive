[
    {
        "content": "<p>benbrandt opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10638\">issue #10638</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p><code>wasmtime::Config::cache_config</code> for loading a <code>CacheConfig</code> from a struct instead of a file.</p>\n<h4>Benefit</h4>\n<p>Right now, in order to use the cache, you have to provide a path to a file with the needed configuration.</p>\n<p>However, there are cases where the wasmtime is embedded, rather than the CLI, where the cache is still helpful. It would be more convenient to create the configuration programmatically rather than loaded from a file, to allow the application to determine the cache setup based on its own configuration.</p>\n<h4>Implementation</h4>\n<ol>\n<li>\n<p>Expose <code>wasmtime_cache::CacheConfig</code> from <code>wasmtime</code></p>\n</li>\n<li>\n<p>Add setters for <code>wasmtime_cache::CacheConfig</code> so individual fields can be configured.</p>\n</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">cache_config</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_cache</span><span class=\"p\">::</span><span class=\"n\">CacheConfig</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"n\">cache_config</span><span class=\"p\">.</span><span class=\"n\">with_directory</span><span class=\"p\">(</span><span class=\"s\">\"/path/to/cache\"</span><span class=\"p\">);</span>\n</code></pre></div>\n<ol start=\"3\">\n<li>Add <code>cache_config</code> method to set this config on the <code>wasmtime::Config</code></li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">config</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Config</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"n\">cache_config</span><span class=\"p\">(</span><span class=\"n\">cache_config</span><span class=\"p\">);</span>\n</code></pre></div>\n<h4>Alternatives</h4>\n<p>Based on <a href=\"https://docs.rs/wasmtime/latest/src/wasmtime/config.rs.html#1369-1372\">the implementation for the method to load from a file</a>, this seems like a straightforward way to allow for a wasmtime user to create their own cache.</p>\n<p>If there are other ideas, we could explore those instead.<br>\n</p>\n</blockquote>",
        "id": 513606243,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1745327448
    },
    {
        "content": "<p>benbrandt <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10638#issuecomment-2821287564\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10638\">issue #10638</a>:</p>\n<blockquote>\n<p>I forgot to mention, but I am open to doing the implementation (with any necessary pointers), but wanted to get feedback on the idea before submitting the PR</p>\n</blockquote>",
        "id": 513606436,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1745327497
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10638#issuecomment-2821549679\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10638\">issue #10638</a>:</p>\n<blockquote>\n<p>I think this'd be a great idea to have, thanks for filing an issue and working on this!</p>\n<p>The only thing I'd suggest is that we wouldn't want users to have to depend on the <code>wasmtime-cache</code> crate itself, so we'd reexport as <code>wasmtime::CacheConfig</code> to have accessible from the main <code>wasmtime</code> crate. Otherwise though  definitley agreed it'd be best to support progammatic configuration instead of exclusively file-based configuration.</p>\n</blockquote>",
        "id": 513627557,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1745332597
    },
    {
        "content": "<p>benbrandt closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10638\">issue #10638</a>:</p>\n<blockquote>\n<h4>Feature</h4>\n<p><code>wasmtime::Config::cache_config</code> for loading a <code>CacheConfig</code> from a struct instead of a file.</p>\n<h4>Benefit</h4>\n<p>Right now, in order to use the cache, you have to provide a path to a file with the needed configuration.</p>\n<p>However, there are cases where the wasmtime is embedded, rather than the CLI, where the cache is still helpful. It would be more convenient to create the configuration programmatically rather than loaded from a file, to allow the application to determine the cache setup based on its own configuration.</p>\n<h4>Implementation</h4>\n<ol>\n<li>\n<p>Expose <code>wasmtime_cache::CacheConfig</code> from <code>wasmtime</code></p>\n</li>\n<li>\n<p>Add setters for <code>wasmtime_cache::CacheConfig</code> so individual fields can be configured.</p>\n</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">cache_config</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_cache</span><span class=\"p\">::</span><span class=\"n\">CacheConfig</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"n\">cache_config</span><span class=\"p\">.</span><span class=\"n\">with_directory</span><span class=\"p\">(</span><span class=\"s\">\"/path/to/cache\"</span><span class=\"p\">);</span>\n</code></pre></div>\n<ol start=\"3\">\n<li>Add <code>cache_config</code> method to set this config on the <code>wasmtime::Config</code></li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">config</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">Config</span><span class=\"p\">::</span><span class=\"n\">default</span><span class=\"p\">();</span>\n<span class=\"n\">config</span><span class=\"p\">.</span><span class=\"n\">cache_config</span><span class=\"p\">(</span><span class=\"n\">cache_config</span><span class=\"p\">);</span>\n</code></pre></div>\n<h4>Alternatives</h4>\n<p>Based on <a href=\"https://docs.rs/wasmtime/latest/src/wasmtime/config.rs.html#1369-1372\">the implementation for the method to load from a file</a>, this seems like a straightforward way to allow for a wasmtime user to create their own cache.</p>\n<p>If there are other ideas, we could explore those instead.<br>\n</p>\n</blockquote>",
        "id": 515137972,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1745953086
    }
]