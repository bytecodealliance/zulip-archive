[
    {
        "content": "<p>gaaraw opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520\">issue #11520</a>:</p>\n<blockquote>\n<h3>Phenomenon description</h3>\n<p>Hello, when I use multiple runtime tools in the terminal, I notice different behavior for the same wasm program. The specific performance is as follows:</p>\n<p><strong>wasmtime:</strong><br>\nOutput：</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">work</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">default</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">           </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"mh\">0xd8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">&gt;</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"mh\">0xb6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Pointer</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">aligned</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Region</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">len</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"p\">}</span>\n</code></pre></div>\n<p>exit code: 1</p>\n<p><strong>wasmer / wasmedge / wamr:</strong><br>\nNo output<br>\nexit code: 0</p>\n<h3>Test Case</h3>\n<p><a href=\"https://github.com/user-attachments/files/21956524/test_case.zip\">test_case.zip</a></p>\n<h3>Steps to Reproduce</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">file</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">wasmer</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">wasmedge</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">jit</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">iwasm</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n</code></pre></div>\n<h3>Versions and Environment</h3>\n<p>The runtime tools are all built on release and use JIT mode.</p>\n<ul>\n<li>wasmtime: 35.0.0 (9c2e6f17c 2025-06-17)</li>\n<li>wasmer: 6.0.1</li>\n<li>wasmedge: 0.14.1</li>\n<li>WAMR: iwasm 2.4.0</li>\n<li>Host OS: Ubuntu 22.04.5 LTS x64</li>\n<li>CPU: 11th Gen Intel® Core™ i7-11700 @ 2.50GHz × 16</li>\n</ul>\n<h3>Extra Info</h3>\n<p>If you need any other relevant information, please let me know and I will do my best to provide it. Looking forward to your reply! Thank you!</p>\n</blockquote>",
        "id": 535895095,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756032522
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520#issuecomment-3218013558\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520\">issue #11520</a>:</p>\n<blockquote>\n<p>Wasmer, wasmedge and wamr are probably just more lenient around unaligned pointers. Wasmtime does check that pointers passed to wasi that should be aligned are actually aligned.</p>\n</blockquote>",
        "id": 535895161,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756032648
    },
    {
        "content": "<p>gaaraw <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520#issuecomment-3218023741\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520\">issue #11520</a>:</p>\n<blockquote>\n<p>So the reason is that other runtime tools don't strictly do alignment checks. Is this kind of leniency of them allowed?</p>\n</blockquote>",
        "id": 535895809,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756033697
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520#issuecomment-3218025719\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520\">issue #11520</a>:</p>\n<blockquote>\n<p>wasip1 doesn't have a good specification, so whether or not it is allowed to not check for alignment is kind of undefined I think.</p>\n</blockquote>",
        "id": 535895936,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756033913
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520\">issue #11520</a>:</p>\n<blockquote>\n<h3>Phenomenon description</h3>\n<p>Hello, when I use multiple runtime tools in the terminal, I notice different behavior for the same wasm program. The specific performance is as follows:</p>\n<p><strong>wasmtime:</strong><br>\nOutput：</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">work</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"err\">`</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">invoke</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">default</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">           </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"mh\">0xd8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">&gt;</span>\n<span class=\"w\">           </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\">     </span><span class=\"mh\">0xb6</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">unknown</span><span class=\"o\">&gt;!&lt;</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">&gt;</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Pointer</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">aligned</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Region</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">len</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"p\">}</span>\n</code></pre></div>\n<p>exit code: 1</p>\n<p><strong>wasmer / wasmedge / wamr:</strong><br>\nNo output<br>\nexit code: 0</p>\n<h3>Test Case</h3>\n<p><a href=\"https://github.com/user-attachments/files/21956524/test_case.zip\">test_case.zip</a></p>\n<h3>Steps to Reproduce</h3>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">file</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">wasmer</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">wasmedge</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">enable</span><span class=\"o\">-</span><span class=\"n\">jit</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"o\">/</span><span class=\"n\">path</span><span class=\"o\">/</span><span class=\"n\">to</span><span class=\"o\">/</span><span class=\"n\">iwasm</span><span class=\"w\"> </span><span class=\"n\">test_case</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n</code></pre></div>\n<h3>Versions and Environment</h3>\n<p>The runtime tools are all built on release and use JIT mode.</p>\n<ul>\n<li>wasmtime: 35.0.0 (9c2e6f17c 2025-06-17)</li>\n<li>wasmer: 6.0.1</li>\n<li>wasmedge: 0.14.1</li>\n<li>WAMR: iwasm 2.4.0</li>\n<li>Host OS: Ubuntu 22.04.5 LTS x64</li>\n<li>CPU: 11th Gen Intel® Core™ i7-11700 @ 2.50GHz × 16</li>\n</ul>\n<h3>Extra Info</h3>\n<p>If you need any other relevant information, please let me know and I will do my best to provide it. Looking forward to your reply! Thank you!</p>\n</blockquote>",
        "id": 536036449,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756131774
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520#issuecomment-3220507334\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11520\">issue #11520</a>:</p>\n<blockquote>\n<p>Yes as @bjorn3 mentioned this is expected behavior. If you're fuzzing WASIp1 we recommend <a href=\"https://docs.wasmtime.dev/contributing-fuzzing.html#divergent-webassembly-behavior-across-runtimes\">not doing so</a></p>\n</blockquote>",
        "id": 536036452,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1756131775
    }
]