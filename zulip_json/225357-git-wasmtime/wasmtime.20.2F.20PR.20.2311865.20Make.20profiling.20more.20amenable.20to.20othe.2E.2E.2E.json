[
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/pchickey\">pchickey</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865\">PR #11865</a>.</p>",
        "id": 545017164,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760547312
    },
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865\">PR #11865</a> from <code>alexcrichton:multi-engine-profiling</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Both the perfmap and jitdump protocols for profiling JITs require that there's a single file with metadata per-process. This has the unfortunate side effect of if there are multiple engines in the same process there's no real way for them to coordinate when writing out records to this file. In an attempt to at least try to synchronize this commit updates these two implementations to issue a single <code>write</code> syscall with the full contents of the record to a file opened in <code>O_APPEND</code> mode.</p>\n<p>If all the stars align and a partial write doesn't happen then that means we're doing our best effort to cooperate with other engines in the same process. If a partial write happens the decision in this PR is to go ahead and retry the rest of the write (using the <code>write_all</code> helper). This is a tradeoff where it makes the single-engine use case more robust (partial writes are handled correctly) but the multi-engine use case will produce corrupt files. It doesn't feel like a great tradeoff to say that profiling can't be done in Wasmtime when a partial write would happen for this niche use case of multiple engines, hence the direction of this tradeoff.</p>\n<p>Closes #11862</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 545017165,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760547312
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865\">PR #11865</a>.</p>",
        "id": 545017166,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760547312
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865#pullrequestreview-3341443735\">PR review</a>.</p>",
        "id": 545017285,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760547349
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865#discussion_r2433339176\">PR review comment</a>:</p>\n<blockquote>\n<p>I ended up deleting this method since it's not used in Wasmtime at all and opted to expose a <code>file</code> and <code>file_mut</code> accessor in case anyone externally is using this and still wants to be able to write.</p>\n</blockquote>",
        "id": 545017286,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760547349
    },
    {
        "content": "<p>pchickey submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865#pullrequestreview-3342479268\">PR review</a>.</p>",
        "id": 545132874,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760565085
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11865\">PR #11865</a>.</p>",
        "id": 545136282,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760566844
    }
]