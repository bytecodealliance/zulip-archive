[
    {
        "content": "<p>theotherjimmy opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a> from <code>theotherjimmy:s390x-arith-overflow</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Implement the following isle instructions for S390x: </p>\n<ul>\n<li><code>uadd_overflow</code></li>\n<li><code>sadd_overflow</code></li>\n<li><code>usub_overflow</code></li>\n<li><code>ssub_overflow</code></li>\n<li><code>umul_overflow</code></li>\n<li><code>smul_overflow</code><br>\n</li>\n</ul>\n</blockquote>",
        "id": 571987274,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770231516
    },
    {
        "content": "<p><strong>theotherjimmy</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 571987276,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770231516
    },
    {
        "content": "<p><strong>theotherjimmy</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 571987278,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770231517
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3849349518\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>r? @uweigand </p>\n</blockquote>",
        "id": 571993264,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770233531
    },
    {
        "content": "<p>github-actions[bot] added the label <code>cranelift</code> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 571997046,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770234832
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768942737\">PR review comment</a>:</p>\n<blockquote>\n<p>This is again unnecessary.</p>\n</blockquote>",
        "id": 572139523,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768948699\">PR review comment</a>:</p>\n<blockquote>\n<p>Since you're doing a 64-bit multiply here, you still need to zero-extend the inputs even here.  Or else, you could use a 32x32-&gt;64 unsigned multiply.</p>\n</blockquote>",
        "id": 572139525,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3756785790\">PR review</a>.</p>",
        "id": 572139526,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768938338\">PR review comment</a>:</p>\n<blockquote>\n<p>The inputs are not guaranteed to be zero-extended, so you have to do that here.</p>\n</blockquote>",
        "id": 572139527,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768950445\">PR review comment</a>:</p>\n<blockquote>\n<p>This still needs to do the != 0 conversion to boolean on the high part.</p>\n</blockquote>",
        "id": 572139528,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768943911\">PR review comment</a>:</p>\n<blockquote>\n<p>This should do a != 0 test to set a boolean.</p>\n</blockquote>",
        "id": 572139529,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2769005013\">PR review comment</a>:</p>\n<blockquote>\n<p>This is more of a cosmetic issue, but I think I'd prefer to keep these types of helpers in inst.isle - see e.g. what we're doing for the ..._sat_reg helpers.  Ideally, we'd have a interface between inst.isle and lower.isle that looks more symmetrical across the different types ...</p>\n</blockquote>",
        "id": 572139530,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768895358\">PR review comment</a>:</p>\n<blockquote>\n<p>This seems just wrong.  The second return should be a boolean indicating whether overflow happened, not simply the high part of the widened multiplication.</p>\n</blockquote>",
        "id": 572139531,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768915915\">PR review comment</a>:</p>\n<blockquote>\n<p>For the 32-bit and 64-bit cases of smul_overflow, why don't you simply use MS(G)RKC, which sets CC indicating overflow - that would work exactly the same as for sadd/ssub.</p>\n<p>For the 8-bit and 16-bit cases, you should be able to use a similar shift trick as for sadd/ssub, only you have to make sure to shift just one of the inputs (the other must still be sign-extended).</p>\n</blockquote>",
        "id": 572139532,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2768891339\">PR review comment</a>:</p>\n<blockquote>\n<p>This is unnecessary - the high bytes are considered don't care.</p>\n</blockquote>",
        "id": 572139533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770295879
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758168173\">PR review</a>.</p>",
        "id": 572196359,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770308880
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770065206\">PR review comment</a>:</p>\n<blockquote>\n<p>From <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254\">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254</a></p>\n<blockquote>\n<p>Multiply integers unsigned with overflow out.<br>\n<code>of</code> is set when the multiplication overflowed.<br>\n<code>text\n     a &amp;= x * y \\pmod 2^B \\\\\n    of &amp;= x * y &gt; 2^B\n</code></p>\n</blockquote>\n<p>My read is that the overflow out is the whole upper word size of the multiply.</p>\n</blockquote>",
        "id": 572196364,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770308881
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758169670\">PR review</a>.</p>",
        "id": 572196447,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770308901
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770066562\">PR review comment</a>:</p>\n<blockquote>\n<p>From <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254\">https://github.com/bytecodealliance/wasmtime/blob/main/cranelift/codegen/meta/src/shared/instructions.rs#L2249-L2254</a></p>\n<blockquote>\n<p>Multiply integers unsigned with overflow out.<br>\n<code>of</code> is set when the multiplication overflowed.<br>\n<code>text\n     a &amp;= x * y \\pmod 2^B \\\\\n    of &amp;= x * y &gt; 2^B\n</code></p>\n</blockquote>\n<p>My read is that the overflow out is the whole upper word size of the multiply.</p>\n</blockquote>",
        "id": 572196448,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770308901
    },
    {
        "content": "<p>theotherjimmy deleted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770065206\">PR review comment</a>.</p>",
        "id": 572196476,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770308908
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 572203768,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770310684
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 572210885,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770312583
    },
    {
        "content": "<p>uweigand submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758470724\">PR review</a>.</p>",
        "id": 572212893,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313168
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770337965\">PR review comment</a>:</p>\n<blockquote>\n<p>This needs to sign-extend from <em>byte</em>, not word.</p>\n</blockquote>",
        "id": 572212895,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313168
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770356026\">PR review comment</a>:</p>\n<blockquote>\n<p>This is wrong, the CC checks for signed overflow, not unsigned overflow.   For <code>umul_overflow</code>, you'll have to either multiply in a wider mode, or use a widening multiply, and then check the high part is nonzero to detect unsigned overflow.</p>\n</blockquote>",
        "id": 572212897,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313169
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770340353\">PR review comment</a>:</p>\n<blockquote>\n<p>And this needs to sign-extend from halfword.</p>\n</blockquote>",
        "id": 572212898,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313169
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770345750\">PR review comment</a>:</p>\n<blockquote>\n<p>This is unfortunately wrong as msr does not set CC.  You'll have to use msrkc.</p>\n</blockquote>",
        "id": 572212899,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313169
    },
    {
        "content": "<p>uweigand created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770347408\">PR review comment</a>:</p>\n<blockquote>\n<p>And msgkrc here.</p>\n</blockquote>",
        "id": 572212900,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313169
    },
    {
        "content": "<p>theotherjimmy edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770066562\">PR review comment</a>.</p>",
        "id": 572213255,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313288
    },
    {
        "content": "<p>uweigand <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3855163844\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>You should enable the run-time filetests on s390x as well, these would probably have caught some of those errors:<br>\nfiletests/filetests/runtests/<em>overflow</em>.clif</p>\n</blockquote>",
        "id": 572213330,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313309
    },
    {
        "content": "<p>uweigand edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3855163844\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>You should enable the run-time filetests on s390x as well, these would probably have caught some of those errors:<br>\n<code>filetests/filetests/runtests/*overflow*.clif</code></p>\n</blockquote>",
        "id": 572213401,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313331
    },
    {
        "content": "<p>theotherjimmy submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#pullrequestreview-3758514912\">PR review</a>.</p>",
        "id": 572213640,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313410
    },
    {
        "content": "<p>theotherjimmy created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#discussion_r2770372875\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah, oops.</p>\n</blockquote>",
        "id": 572213641,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770313410
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 572219439,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1770315364
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 573827884,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771016739
    },
    {
        "content": "<p>theotherjimmy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899467596\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>@uweigand I ran all these tests on my lpar. The current version passes all enabled runtests on s390x, and I enabled the runtests for these instructions.</p>\n</blockquote>",
        "id": 573828123,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771016830
    },
    {
        "content": "<p>theotherjimmy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899482722\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>It looks like I need to rebase onto main. I'll do that now then.</p>\n</blockquote>",
        "id": 573828444,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771016985
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 573828667,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771017096
    },
    {
        "content": "<p>theotherjimmy edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899482722\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>It looks like I need to rebase onto main. I'll do that now then. Tests still pass with the rebase onto main.</p>\n</blockquote>",
        "id": 573828868,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771017192
    },
    {
        "content": "<p>theotherjimmy edited a <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899467596\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>@uweigand I ran all these tests on my lpar. The current version passes all enabled runtests on s390x, and I enabled the runtests for these instructions.</p>\n<p>I missed the <code>cargo test</code> tests. My bad. Please hold off on reviewing while I fix them.</p>\n</blockquote>",
        "id": 573832606,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771019067
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 573834946,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771020236
    },
    {
        "content": "<p>theotherjimmy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3899768514\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>Fixed <code>cargo test</code> locally.</p>\n</blockquote>",
        "id": 573834978,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771020253
    },
    {
        "content": "<p>theotherjimmy updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 574766027,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771517239
    },
    {
        "content": "<p>theotherjimmy <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523#issuecomment-3928247020\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>:</p>\n<blockquote>\n<p>Rebased for the regalloc2 version bump. Re-blessed all new tests. ran all runtests on my s390x LPAR, they passed.</p>\n</blockquote>",
        "id": 574766245,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771517311
    },
    {
        "content": "<p>alexcrichton requested <a href=\"https://github.com/uweigand\">uweigand</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12523\">PR #12523</a>.</p>",
        "id": 574807867,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771529512
    }
]