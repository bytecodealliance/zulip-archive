[
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495386860,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737585776
    },
    {
        "content": "<p>dicej opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a> from <code>dicej:async-lift-test</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>This is another piece of #9582 which I'm splitting out to make review easier.</p>\n<p>This test includes two components: one which exports a function using the async-with-callback ABI, and another which uses the async-without-callback ABI. It doesn't actually instantiate or run either component yet.</p>\n<p>The rest of the changes fill in some TODOs to make the test pass.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 495386861,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737585776
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495386862,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737585777
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-fuzz-reviewers\">wasmtime-fuzz-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495386863,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737585777
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2568450811\">PR review</a>.</p>",
        "id": 495387327,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737586027
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1926077406\">PR review comment</a>:</p>\n<blockquote>\n<p>This file was shamelessly copied from <a href=\"http://resources.rs\">resources.rs</a> and modified for use with stream/future/error-context state.  Those handles are different enough from resource handles that I didn't want to try to address everything with a single data structure.  I'm open to other approaches, though.</p>\n</blockquote>",
        "id": 495387328,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737586028
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495389884,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737587316
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495390849,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737587837
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495391489,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737588210
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#issuecomment-2608626933\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>:</p>\n<blockquote>\n<h4>Subscribe to Label Action</h4>\n<p>cc @fitzgen</p>\n<p>&lt;details&gt;<br>\nThis issue or pull request has been labeled: \"fuzzing\", \"wasmtime:api\", \"wasmtime:config\"</p>\n<p>Thus the following users have been cc'd because of the following labels:</p>\n<ul>\n<li>fitzgen: fuzzing</li>\n</ul>\n<p>To subscribe or unsubscribe from this label, edit the &lt;code&gt;.github/subscribe-to-label.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/subscribe-to-label-action\">Learn more.</a><br>\n&lt;/details&gt;</p>\n</blockquote>",
        "id": 495402290,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737594304
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#issuecomment-2608695611\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>:</p>\n<blockquote>\n<h4>Label Messager: wasmtime:config</h4>\n<p>It looks like you are changing Wasmtime's configuration options. Make sure to<br>\ncomplete this check list:</p>\n<ul>\n<li>\n<p>[ ] If you added a new <code>Config</code> method, you wrote extensive documentation for<br>\n      it.</p>\n<p>&lt;details&gt;</p>\n<p>Our documentation should be of the following form:</p>\n<p>```text<br>\nShort, simple summary sentence.</p>\n<p>More details. These details can be multiple paragraphs. There should be<br>\ninformation about not just the method, but its parameters and results as<br>\nwell.</p>\n<p>Is this method fallible? If so, when can it return an error?</p>\n<p>Can this method panic? If so, when does it panic?</p>\n<h1>Example</h1>\n<p>Optional example here.<br>\n```</p>\n<p>&lt;/details&gt;</p>\n</li>\n<li>\n<p>[ ] If you added a new <code>Config</code> method, or modified an existing one, you<br>\n  ensured that this configuration is exercised by the fuzz targets.</p>\n<p>&lt;details&gt;</p>\n<p>For example, if you expose a new strategy for allocating the next instance<br>\nslot inside the pooling allocator, you should ensure that at least one of our<br>\nfuzz targets exercises that new strategy.</p>\n<p>Often, all that is required of you is to ensure that there is a knob for this<br>\nconfiguration option in [<code>wasmtime_fuzzing::Config</code>][fuzzing-config] (or one<br>\nof its nested <code>struct</code>s).</p>\n<p>Rarely, this may require authoring a new fuzz target to specifically test this<br>\nconfiguration. See [our docs on fuzzing][fuzzing-docs] for more details.</p>\n<p>&lt;/details&gt;</p>\n</li>\n<li>\n<p>[ ] If you are enabling a configuration option by default, make sure that it<br>\n  has been fuzzed for at least two weeks before turning it on by default.</p>\n</li>\n</ul>\n<p>[fuzzing-config]: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194\">https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194</a><br>\n[fuzzing-docs]: <a href=\"https://docs.wasmtime.dev/contributing-fuzzing.html\">https://docs.wasmtime.dev/contributing-fuzzing.html</a></p>\n<hr>\n<p>&lt;details&gt;</p>\n<p>To modify this label's message, edit the &lt;code&gt;.github/label-messager/wasmtime-config.md&lt;/code&gt; file.</p>\n<p>To add new label messages or remove existing label messages, edit the<br>\n&lt;code&gt;.github/label-messager.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/label-messager-action\">Learn more.</a></p>\n<p>&lt;/details&gt;</p>\n</blockquote>",
        "id": 495408802,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737598021
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2568540188\">PR review</a>:</p>\n<blockquote>\n<p>I'm definitely pretty far out of my comfort zone reviewing this in the sense that there's enough pieces that I don't see how they're connected just in this PR that I'm not confident I have the ability to review without going over to the spec. At a high level the test added here seems like it probably doesn't require the lift/lower impls, but then again I suspect that removing those impls would remove all the meat of the PR. Would it be possible to add some tests exercising the impls added here in this PR? </p>\n</blockquote>",
        "id": 495606409,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676653
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927805246\">PR review comment</a>:</p>\n<blockquote>\n<p>To confirm, this'll eventually be a <code>concurrent.rs</code> in a future PR? So just a placeholder for now?</p>\n</blockquote>",
        "id": 495606410,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676653
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927808686\">PR review comment</a>:</p>\n<blockquote>\n<p>Could this perhaps be <code>impl&lt;T&gt; From&lt;FutureReader&lt;T&gt;&gt; for Val</code>?</p>\n</blockquote>",
        "id": 495606411,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1926139409\">PR review comment</a>:</p>\n<blockquote>\n<p>If you'd prefer to simplify this I think it's reasonable to just fold this into the component-model feature above too</p>\n</blockquote>",
        "id": 495606412,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927813461\">PR review comment</a>:</p>\n<blockquote>\n<p>For this and the below change I had to reread and re-figure-out what I was originally intending with this. I think it would be preferable to not add <code>pub(crate)</code> here as that expands the number of locations that need to be audited when working with this field.</p>\n<p>I think it should be ok though to add accessors like <code>fn instance(&amp;self) -&gt; &amp;ComponentInstance</code> and <code>fn instance_mut(&amp;mut self) -&gt; &amp;mut ComponentInstance</code> to these types (lift/lower contexts). That would remove the need for <code>unsafe</code> at access sites and might clean up some preexisting access sites as well</p>\n</blockquote>",
        "id": 495606413,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927806298\">PR review comment</a>:</p>\n<blockquote>\n<p>How temporary is the representation of these structures? E.g. is the <code>u32</code> what it'll be in the long run?</p>\n</blockquote>",
        "id": 495606414,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927806521\">PR review comment</a>:</p>\n<blockquote>\n<p>The <code>::&lt;()&gt;</code> bit here and below gives me a bit of pause. Is that temporary or final-into-the-future?</p>\n</blockquote>",
        "id": 495606415,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927822770\">PR review comment</a>:</p>\n<blockquote>\n<p>Personally I know I'm in a state of \"I'm not a component-model async expert\" so coming across bits of nontrivial code like this I'm left to go find where in the spec this behavior is implementing and trying to cross-reference that for example. Basically I find myself unable to reason about this locally and understand, just from what's here, what's going on.</p>\n<p>Could you add some comments for any sort of nontrivial transformations like this? For example with resources I <a href=\"https://github.com/bytecodealliance/wasmtime/blob/8a969897f76e9725778f713a31024651f7e3e72b/crates/wasmtime/src/runtime/component/resources.rs#L646-L669\">tried to leave comments</a> about all the various state transitions in lifts/lowers.</p>\n<p>I suspect the majority of future readers of this code are also unlikely to be component-model async experts and comments can help quite a bit in understanding what's going on. The more I read in various places in this PR this is also applicable in general to any nontrivial bits here as opposed to just this one function. For example <code>get_mut_by_index_from</code> above is easy enough to understand as it's pretty mechanical internally but in isolation I'm not really sure what it's doing in a broader sense just from reading it. It may not be too helpful to understand at-a-glance what it's doing but at the same time having a comment I think would still be helpful.</p>\n<p>(aka this is sort of a general request for more comments on anything nontrivial)</p>\n</blockquote>",
        "id": 495606416,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927829863\">PR review comment</a>:</p>\n<blockquote>\n<p>Mind adding some comments as to what this <code>rep</code> is? My naive understanding of component model async is probably showing here but I'm familiar with \"rep\" of a resource where it's user-supplied but I didn't think that there was anything user-supplied here but rather this is an index to something (but I'm not sure)</p>\n</blockquote>",
        "id": 495606417,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927835966\">PR review comment</a>:</p>\n<blockquote>\n<p>I'll definitely admit that I'm very lost when it comes to error-context here. I see a local refcount table and a global refcount table but I don't actually see the global refcount table being used. I'm also not really sure what <code>rep</code> is in the context of an error-context so I'm pretty lost here.</p>\n<p>While comments would help here is this something that may be best deferred to a future PR? For example ideally there'd be a test exercising this lifting and lowering and testing various errors here and things like that, but I suspect such a test isn't quite ready yet?</p>\n</blockquote>",
        "id": 495606418,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927814845\">PR review comment</a>:</p>\n<blockquote>\n<p>s/error/error-context/</p>\n</blockquote>",
        "id": 495606419,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927828760\">PR review comment</a>:</p>\n<blockquote>\n<p>I'm not sure how much this will persist int he future but you can drop the <code>&lt;Data = U&gt;</code> here in the sense that it's not necessary as part of this definition. In the future if you need bounds on <code>U</code> it should be possible to do <code>S::Data: Bound</code> I think too</p>\n</blockquote>",
        "id": 495606420,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927836759\">PR review comment</a>:</p>\n<blockquote>\n<p>This might be one part about error-context I don't understand b/c I think I'm missing where this is used...</p>\n</blockquote>",
        "id": 495606421,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927855230\">PR review comment</a>:</p>\n<blockquote>\n<p>Could you expand the documentation for this struct as to what problem it's solving? For example what extra functionality it has over <code>ResourceTable</code>. I'm a bit surprised for example of the <code>reps_to_indexes</code> reverse mapping where most of the component model stuff doesn't require hash maps today and that seems like it's bordering on needing something like that.</p>\n<p>Also this is something I probably should have done for <code>ResourceTable</code> but if it's possible this'd be a good place to have some <code>#[test]</code> unit tests for this data structure doing some simple pushes/pops/etc.</p>\n</blockquote>",
        "id": 495606422,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737676654
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571383956\">PR review</a>.</p>",
        "id": 495608476,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737677760
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927913036\">PR review comment</a>:</p>\n<blockquote>\n<p><code>concurrent.rs</code> is <a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/crates/wasmtime/src/runtime/component/concurrent.rs\">already in main</a> and was added in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10044\">https://github.com/bytecodealliance/wasmtime/pull/10044</a> (and will be expanded in subsequent PRs).  This is the stub module to be used when the <code>component-model-async</code> feature is disabled, so it will only go away when that feature is removed.</p>\n<p>Alternatively, I could remove this stub module and make <code>concurrent.rs</code> the only implementation, but that would mean adding more <code>#[cfg(...)]</code> annotations elsewhere, so it's kind of a tradeoff.  Happy to do whichever you think is best, though.</p>\n</blockquote>",
        "id": 495608479,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737677760
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571388028\">PR review</a>.</p>",
        "id": 495608810,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737677938
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927915013\">PR review comment</a>:</p>\n<blockquote>\n<p>They're like resource reps in that they'll be <code>u32</code>s for wasm32 but become <code>u64</code>s when we add wasm64 support for the component model.</p>\n</blockquote>",
        "id": 495608812,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737677938
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571398337\">PR review</a>.</p>",
        "id": 495609730,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737678561
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927921626\">PR review comment</a>:</p>\n<blockquote>\n<p>It's \"final\" in that I wasn't planning to change it, but I agree it looks weird.  I had already written the static API <code>Lift</code>/<code>Lower</code> impls for these types, so I figured I'd reuse those implementations here since they're payload-type-agnostic.  I'll move the lifting and lowering code into separate, top-level functions which both the static API and dynamic API can use, which will avoid this.</p>\n</blockquote>",
        "id": 495609731,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737678561
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571404003\">PR review</a>.</p>",
        "id": 495610221,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737678857
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927925193\">PR review comment</a>:</p>\n<blockquote>\n<p>Agreed and apologies for forgetting to add comments; I have \"Add doc and code comments to new, non-trivial code (especially <a href=\"http://concurrent.rs\">concurrent.rs</a> and <a href=\"http://futures_and_streams.rs\">futures_and_streams.rs</a>)\" in the task list on #9582, and that was my next priority before I switched my focus to breaking the PR up into smaller pieces.  I'll start doing both now.</p>\n</blockquote>",
        "id": 495610222,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737678857
    },
    {
        "content": "<p>dicej edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927925193\">PR review comment</a>.</p>",
        "id": 495610244,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737678868
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571410536\">PR review</a>.</p>",
        "id": 495610881,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737679285
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927929805\">PR review comment</a>:</p>\n<blockquote>\n<p>Good catch.  This is just a stub, with the signature copied from <a href=\"https://github.com/dicej/wasmtime/blob/d1596df0361a4a8c956ba7ef34ac8d3c5e0140e1/crates/wasmtime/src/runtime/component/concurrent/futures_and_streams.rs#L578\">https://github.com/dicej/wasmtime/blob/d1596df0361a4a8c956ba7ef34ac8d3c5e0140e1/crates/wasmtime/src/runtime/component/concurrent/futures_and_streams.rs#L578</a>, but it looks like the real version doesn't use <code>U</code> either, so I'm guessing I had originally been using <code>U</code>, then stopped using it, but forgot to update the signature.</p>\n</blockquote>",
        "id": 495610882,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737679285
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571419801\">PR review</a>.</p>",
        "id": 495611714,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737679872
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927935807\">PR review comment</a>:</p>\n<blockquote>\n<p>I might have the terminology mixed up myself, but I've been using \"rep\" to mean \"the instance-agnostic index for the waitable\" which used to look up the state of the stream/future/task in a table (which will be added in a later PR), akin to the <code>ResourceTable</code> index for resources.  When lifting and lowering we convert between that index and a per-instance local index visible to the guest.</p>\n<p>If there's a more conventional way to refer to these \"global\" and \"local\" indexes, I'm happy to adopt it.</p>\n</blockquote>",
        "id": 495611715,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737679873
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571424164\">PR review</a>.</p>",
        "id": 495612179,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737680179
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927938793\">PR review comment</a>:</p>\n<blockquote>\n<p>Yeah, I can replace this stuff with stubs.  My approach with this PR was to run the lift.wast test, hit a <code>todo!()</code>, replace the <code>todo!()</code> with code copied from #9582, let the compiler tell me what _other_ code _that_ code needed, then either copying more code or adding stubs to make the compiler happy.  Looks like I copied over too much, and that's making the review more difficult; sorry about that.  I'll trim it down.</p>\n</blockquote>",
        "id": 495612180,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737680179
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2571425097\">PR review</a>.</p>",
        "id": 495612284,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737680242
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1927939462\">PR review comment</a>:</p>\n<blockquote>\n<p>I don't think it _is_ being used yet; again, I may have copied over more than necessary from the Big PR.</p>\n</blockquote>",
        "id": 495612285,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737680242
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495744018,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737733825
    },
    {
        "content": "<p>dicej <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#issuecomment-2612857030\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>:</p>\n<blockquote>\n<p>@alexcrichton I've \"rebooted\" this PR from scratch, this time only pulling in the minimum code needed for the <code>lift.wast</code> test.  It's much smaller now.</p>\n<p>As a consequence, most of your review comments no longer apply, but I'll address them in future PRs.  Sorry for the churn; I'll try to keep future PRs more focused.</p>\n</blockquote>",
        "id": 495744864,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737734106
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495745651,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737734364
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2573091710\">PR review</a>.</p>",
        "id": 495750747,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736008
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1928944777\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah I see, sorry I missed the <code>not(...)</code>!</p>\n<p>I'll take a closer look in a future PR to see how it fits together <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n</blockquote>",
        "id": 495750749,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736008
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2573097143\">PR review</a>.</p>",
        "id": 495751221,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736149
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1928947982\">PR review comment</a>:</p>\n<blockquote>\n<p>No worries of course! I myself basically never write comments as I write code itself and then I have to force myself to go back afterwards and comment things, which I often forget to do. I just wanted to highlight this as something I think will be important to do as pieces incrementally land as opposed to only once at the end</p>\n</blockquote>",
        "id": 495751223,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736150
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2573101922\">PR review</a>.</p>",
        "id": 495751616,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736288
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#discussion_r1928950851\">PR review comment</a>:</p>\n<blockquote>\n<p>How about something like <code>rep: WaitableIndex</code>? Basically using a type here to indicate more clearly what it's pointing to. My history with resources makes me think that \"rep\" comes from guests themselves and needs to be preserved and handed back to the guest but I don't think that's what's going on here, so this isn't so much a \"representation\" internally but moreso an index somewhere else, which is where I think a custom newtype might help to distinguish</p>\n</blockquote>",
        "id": 495751617,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736288
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083#pullrequestreview-2573102834\">PR review</a>:</p>\n<blockquote>\n<p>Looks good to me, thanks!</p>\n</blockquote>",
        "id": 495751682,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737736313
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495753741,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737737044
    },
    {
        "content": "<p>dicej has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495753856,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737737092
    },
    {
        "content": "<p>dicej updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495753998,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737737143
    },
    {
        "content": "<p>dicej merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10083\">PR #10083</a>.</p>",
        "id": 495759588,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1737739295
    }
]