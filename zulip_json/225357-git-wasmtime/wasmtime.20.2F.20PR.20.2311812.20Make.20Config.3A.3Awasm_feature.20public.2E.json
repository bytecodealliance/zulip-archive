[
    {
        "content": "<p>graydon opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a> from <code>graydon:surface-wasm-feature</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>I wanted to disable (and in some cases explicitly enable) <code>WasmFeatures</code> that are not currently surfaced with specific methods on <code>Config</code>. It seems like the simplest path is just to expose this existing helper function publicly.</p>\n</blockquote>",
        "id": 543676145,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759908340
    },
    {
        "content": "<p><strong>graydon</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 543676147,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759908340
    },
    {
        "content": "<p><strong>graydon</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 543676148,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759908340
    },
    {
        "content": "<p>github-actions[bot] <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#issuecomment-3380462682\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>:</p>\n<blockquote>\n<h4>Label Messager: wasmtime:config</h4>\n<p>It looks like you are changing Wasmtime's configuration options. Make sure to<br>\ncomplete this check list:</p>\n<ul>\n<li>\n<p>[ ] If you added a new <code>Config</code> method, you wrote extensive documentation for<br>\n      it.</p>\n<p>&lt;details&gt;</p>\n<p>Our documentation should be of the following form:</p>\n<p>```text<br>\nShort, simple summary sentence.</p>\n<p>More details. These details can be multiple paragraphs. There should be<br>\ninformation about not just the method, but its parameters and results as<br>\nwell.</p>\n<p>Is this method fallible? If so, when can it return an error?</p>\n<p>Can this method panic? If so, when does it panic?</p>\n<h1>Example</h1>\n<p>Optional example here.<br>\n```</p>\n<p>&lt;/details&gt;</p>\n</li>\n<li>\n<p>[ ] If you added a new <code>Config</code> method, or modified an existing one, you<br>\n  ensured that this configuration is exercised by the fuzz targets.</p>\n<p>&lt;details&gt;</p>\n<p>For example, if you expose a new strategy for allocating the next instance<br>\nslot inside the pooling allocator, you should ensure that at least one of our<br>\nfuzz targets exercises that new strategy.</p>\n<p>Often, all that is required of you is to ensure that there is a knob for this<br>\nconfiguration option in [<code>wasmtime_fuzzing::Config</code>][fuzzing-config] (or one<br>\nof its nested <code>struct</code>s).</p>\n<p>Rarely, this may require authoring a new fuzz target to specifically test this<br>\nconfiguration. See [our docs on fuzzing][fuzzing-docs] for more details.</p>\n<p>&lt;/details&gt;</p>\n</li>\n<li>\n<p>[ ] If you are enabling a configuration option by default, make sure that it<br>\n  has been fuzzed for at least two weeks before turning it on by default.</p>\n</li>\n</ul>\n<p>[fuzzing-config]: <a href=\"https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194\">https://github.com/bytecodealliance/wasmtime/blob/ca0e8d0a1d8cefc0496dba2f77a670571d8fdcab/crates/fuzzing/src/generators.rs#L182-L194</a><br>\n[fuzzing-docs]: <a href=\"https://docs.wasmtime.dev/contributing-fuzzing.html\">https://docs.wasmtime.dev/contributing-fuzzing.html</a></p>\n<hr>\n<p>&lt;details&gt;</p>\n<p>To modify this label's message, edit the &lt;code&gt;.github/label-messager/wasmtime-config.md&lt;/code&gt; file.</p>\n<p>To add new label messages or remove existing label messages, edit the<br>\n&lt;code&gt;.github/label-messager.json&lt;/code&gt; configuration file.</p>\n<p><a href=\"https://github.com/bytecodealliance/label-messager-action\">Learn more.</a></p>\n<p>&lt;/details&gt;</p>\n</blockquote>",
        "id": 543691855,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759913311
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#pullrequestreview-3315202722\">PR review</a>:</p>\n<blockquote>\n<p>Thanks! While deceptively simple as a PR I think we'll want to flesh this out a bit more before exposing it for general usage given how low-level it is. I'm happy to do some of these changes as well, but some things I can think of are:</p>\n<ul>\n<li>The <code>wasmtime</code> crate should reexport the <code>WasmFeatures</code> flag so users have a way to reasonably use the right version (vs depending on <code>wasmparser</code> themselves)</li>\n<li>This method may want to be renamed to <code>wasm_features</code> since it can be used to set mutliple features at once.</li>\n<li>For the documentation I think it'd be worth calling out that it's always possible for <code>Config</code> to return an error when creating an <code>Engine</code> if the feature configuration isn't supported. For example if gc is enabled at runtime but was disabled at compile time that'll cause <code>Engine</code> creation to fail.</li>\n<li>I'm a bit worried about possible unsafety/unsoundness/panics/etc related to features that wasm-tools supports that Wasmtime doesn't support. Most of the time Wasmtime would probably panic at the compilation phase of a module which isn't the end of the world, but panicking at runtime is a possibility and would be much worse. To sole this the <code>Config::compiler_panicking_wasm_features</code> method I think should be updated to have a known set of \"anything outside this set will panic\". Basically an allow-list of the set of proposals Wasmtime understands well enough to not egregriously panic on. That way if <code>wasmparser</code> adds a new feature and there's no support in Wasmtime that's fine, it'll just return a first-class error during <code>Engine</code> creation saying \"we don't support that\".</li>\n</ul>\n<p>That's what I can think of at least to make sure we've crossed our t's and dotted the i's here. I realize that's probably more than you wanted to take on with this PR though. Would you be ok applying some of these updates? Or would you prefer to hand it off?</p>\n</blockquote>",
        "id": 543768033,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759934910
    },
    {
        "content": "<p>graydon <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#issuecomment-3383390978\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>:</p>\n<blockquote>\n<blockquote>\n<p>Would you be ok applying some of these updates? Or would you prefer to hand it off?</p>\n</blockquote>\n<p>I'll see what I can do!</p>\n</blockquote>",
        "id": 543841243,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759960902
    },
    {
        "content": "<p>graydon updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 543844572,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759963050
    },
    {
        "content": "<p>graydon <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#issuecomment-3383461552\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>:</p>\n<blockquote>\n<p>@alexcrichton I've added what I _think_ ought to dot those i's and cross those t's though I am uncertain that I picked the list of \"known to wasmtime at all\" flags correctly; I don't know exactly what wasmtime knows implicitly or explicitly. So I just put in \"every feature currently in wasmparser at the time of writing\". I can pare it down a little if you can spot any \"oh no we definitely don't support that one\" entries in the list.</p>\n</blockquote>",
        "id": 543844733,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1759963176
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#discussion_r2417056770\">PR review comment</a>:</p>\n<blockquote>\n<p>One way to organize this might be, at the top, to have <code>let mut unsupported = !features_known_to_wasmtime;</code> and then this <code>match</code> conditionally adds more features into the set, then after the <code>match</code> the <code>unsupported</code> set is returned. That way we don't have to worry about or-ing in the set on each branch.</p>\n</blockquote>",
        "id": 543988961,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760023290
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#discussion_r2417054693\">PR review comment</a>:</p>\n<blockquote>\n<p>Thanks for listing these out! For ones that we can remove, I'd drop: <code>MEMORY_CONTROL</code>,  <code>LEGACY_EXCEPTIONS</code>, <code>CM_VALUES</code>, <code>CM_NESTED_NAMES</code>, and <code>CM_FIXED_SIZE_LIST</code>. Everything else should be reasonable enough to keep, however.</p>\n</blockquote>",
        "id": 543989025,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760023306
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812#pullrequestreview-3319366119\">PR review</a>:</p>\n<blockquote>\n<p>Thanks again for this!</p>\n</blockquote>",
        "id": 543989227,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760023353
    },
    {
        "content": "<p>graydon updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 544017066,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760031539
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 544038899,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760040346
    },
    {
        "content": "<p>alexcrichton has enabled auto merge for <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 544038937,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760040360
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11812\">PR #11812</a>.</p>",
        "id": 544049677,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760045167
    }
]