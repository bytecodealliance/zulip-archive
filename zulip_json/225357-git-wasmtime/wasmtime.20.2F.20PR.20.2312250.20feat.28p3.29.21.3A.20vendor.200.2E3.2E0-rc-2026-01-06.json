[
    {
        "content": "<p>ricochet opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a> from <code>ricochet:p3-rc-01-6</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Update wasmtime's WASI implementation from version<br>\n0.3.0-rc-2025-09-16 to 0.3.0-rc-2026-01-06, using wkg for WIT vendoring.</p>\n<p>This involves API changes in clocks and HTTP.</p>\n<p>By using wkg here, we are also now pointing at the WASI monorepo (closes #9419).</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 566606627,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767727027
    },
    {
        "content": "<p><strong>ricochet</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-wasi-reviewers\">wasmtime-wasi-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 566606630,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767727028
    },
    {
        "content": "<p><strong>ricochet</strong> requested <a href=\"https://github.com/fitzgen\">fitzgen</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 566606635,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767727029
    },
    {
        "content": "<p><strong>ricochet</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 566606636,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767727029
    },
    {
        "content": "<p><strong>ricochet</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-default-reviewers\">wasmtime-default-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 566606637,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767727029
    },
    {
        "content": "<p>ricochet updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 566608511,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767727773
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3632240817\">PR review</a>.</p>",
        "id": 566610722,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767728657
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2666072604\">PR review comment</a>:</p>\n<blockquote>\n<p>If you'd like, an output file of <code>$path/$pkg_name.wit</code> would also work to avoid the <code>$pkg_name/$pkg_name</code></p>\n</blockquote>",
        "id": 566610723,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767728658
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2666076331\">PR review comment</a>:</p>\n<blockquote>\n<p>This top-level of addition of a <code>wit</code> directory might be accidental?</p>\n</blockquote>",
        "id": 566610724,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767728658
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2666074849\">PR review comment</a>:</p>\n<blockquote>\n<p>How come here (and a number of other locations in this PR) are now specifying <code>features</code>? Would it be possible to omit them?</p>\n<p>The annotations in the adapter, for example, I think are load bearing in the sense that we don't want to activate them there ideally.</p>\n</blockquote>",
        "id": 566610725,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767728658
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2666077925\">PR review comment</a>:</p>\n<blockquote>\n<p>Was this a stray addition? Most of the other folders don't have <code>wkg.lock</code> and given that we're already pinning versions I'd imagine that we could probably eschew having this entirely, but I'm also not too too familiar with wkg.</p>\n</blockquote>",
        "id": 566610726,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767728658
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 566610750,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767728667
    },
    {
        "content": "<p>ricochet submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3640594201\">PR review</a>.</p>",
        "id": 567002242,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767895267
    },
    {
        "content": "<p>ricochet created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2673341409\">PR review comment</a>:</p>\n<blockquote>\n<p>I think generally wkg.lock should always be included like a Cargo.lock. We could add a gitignore but when running wkg and the vendor step it will always create this. </p>\n</blockquote>",
        "id": 567002244,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767895268
    },
    {
        "content": "<p>ricochet submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3640645331\">PR review</a>.</p>",
        "id": 567004832,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767896187
    },
    {
        "content": "<p>ricochet created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2673386453\">PR review comment</a>:</p>\n<blockquote>\n<p>I may need some help diagnosing. It seems like bindgen here is either configured for all features or previously relied on not receiving wit with unstable.</p>\n<p>When not specifying features:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>cargo<span class=\"w\"> </span><span class=\"nb\">test</span><span class=\"w\"> </span>--package<span class=\"w\"> </span>wasmtime-wasi<span class=\"w\"> </span>--test<span class=\"w\"> </span>all<span class=\"w\"> </span>--<span class=\"w\"> </span>p2_api_reactor\n<span class=\"w\">   </span>Compiling<span class=\"w\"> </span>test-programs-artifacts<span class=\"w\"> </span>v0.0.0<span class=\"w\"> </span><span class=\"o\">(</span>/Users/bhayes/repos/bytecodealliance/wasmtime/crates/test-programs/artifacts<span class=\"o\">)</span>\nerror:<span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>run<span class=\"w\"> </span>custom<span class=\"w\"> </span>build<span class=\"w\"> </span><span class=\"nb\">command</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"sb\">`</span>test-programs-artifacts<span class=\"w\"> </span>v0.0.0<span class=\"w\"> </span><span class=\"o\">(</span>/Users/bhayes/repos/bytecodealliance/wasmtime/crates/test-programs/artifacts<span class=\"o\">)</span><span class=\"sb\">`</span>\n\nCaused<span class=\"w\"> </span>by:\n<span class=\"w\">  </span>process<span class=\"w\"> </span>didn<span class=\"s1\">'t exit successfully: `/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-09b249d84a25b153/build-script-build` (exit status: 101)</span>\n<span class=\"s1\">  --- stdout</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/cli.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/clocks.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/filesystem.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/io.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/random.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/sockets.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/test.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/world.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter/build.rs</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter/byte-array-literals/src/lib.rs</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter/src/descriptors.rs</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter/src/lib.rs</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter/src/macros.rs</span>\n<span class=\"s1\">  wasi reactor adapter: \"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out/wasi_snapshot_preview1.reactor.wasm\"</span>\n<span class=\"s1\">  wasi command adapter: \"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out/wasi_snapshot_preview1.command.wasm\"</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/cli.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/clocks.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/filesystem.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/http.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/io.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/random.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/deps/sockets.wit</span>\n<span class=\"s1\">  cargo:rerun-if-changed=/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-http/wit/world.wit</span>\n<span class=\"s1\">  wasi proxy adapter: \"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out/wasi_snapshot_preview1.proxy.wasm\"</span>\n<span class=\"s1\">  cargo:rerun-if-env-changed=MIRI_TEST_CWASM_DIR</span>\n\n<span class=\"s1\">  --- stderr</span>\n<span class=\"s1\">  running: env -u CARGO_ENCODED_RUSTFLAGS CARGO_TARGET_DIR=\"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out\" RUSTFLAGS=\"\" \"cargo\" \"build\" \"--release\" \"--package=wasi-preview1-component-adapter\" \"--target=wasm32-unknown-unknown\"</span>\n<span class=\"s1\">     Compiling wasi-preview1-component-adapter v41.0.0 (/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter)</span>\n<span class=\"s1\">      Finished `release` profile [optimized] target(s) in 1.10s</span>\n<span class=\"s1\">  running: env -u CARGO_ENCODED_RUSTFLAGS CARGO_TARGET_DIR=\"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out\" RUSTFLAGS=\"\" \"cargo\" \"build\" \"--release\" \"--package=wasi-preview1-component-adapter\" \"--target=wasm32-unknown-unknown\" \"--no-default-features\" \"--features=command\"</span>\n<span class=\"s1\">     Compiling wasi-preview1-component-adapter v41.0.0 (/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter)</span>\n<span class=\"s1\">      Finished `release` profile [optimized] target(s) in 0.93s</span>\n<span class=\"s1\">  running: env -u CARGO_ENCODED_RUSTFLAGS CARGO_TARGET_DIR=\"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out\" RUSTFLAGS=\"\" \"cargo\" \"build\" \"--release\" \"--package=wasi-preview1-component-adapter\" \"--target=wasm32-unknown-unknown\" \"--no-default-features\" \"--features=proxy\"</span>\n<span class=\"s1\">     Compiling wasi-preview1-component-adapter v41.0.0 (/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi-preview1-component-adapter)</span>\n<span class=\"s1\">      Finished `release` profile [optimized] target(s) in 0.40s</span>\n<span class=\"s1\">  running: env -u CARGO_ENCODED_RUSTFLAGS CARGO_PROFILE_DEV_DEBUG=\"2\" CARGO_TARGET_DIR=\"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out\" RUSTFLAGS=\"\" \"cargo\" \"build\" \"--target=wasm32-wasip1\" \"--package=test-programs\"</span>\n<span class=\"s1\">     Compiling test-programs v0.0.0 (/Users/bhayes/repos/bytecodealliance/wasmtime/crates/test-programs)</span>\n<span class=\"s1\">  error: failed to resolve directory while parsing WIT for path [/Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit]</span>\n\n<span class=\"s1\">         Caused by:</span>\n<span class=\"s1\">           interface not found in package</span>\n<span class=\"s1\">              --&gt; /Users/bhayes/repos/bytecodealliance/wasmtime/crates/wasi/src/p2/wit/deps/cli.wit:174:22</span>\n<span class=\"s1\">               |</span>\n<span class=\"s1\">           174 |   import wasi:clocks/timezone@0.2.6;</span>\n<span class=\"s1\">               |                      ^-------</span>\n<span class=\"s1\">   --&gt; crates/test-programs/src/bin/p2_api_reactor.rs:3:1</span>\n<span class=\"s1\">    |</span>\n<span class=\"s1\">  3 | / wit_bindgen::generate!({</span>\n<span class=\"s1\">  4 | |     world: \"test-reactor\",</span>\n<span class=\"s1\">  5 | |     path: \"../wasi/src/p2/wit\",</span>\n<span class=\"s1\">  6 | |     generate_all,</span>\n<span class=\"s1\">  7 | | });</span>\n<span class=\"s1\">    | |__^</span>\n<span class=\"s1\">    |</span>\n<span class=\"s1\">    = note: this error originates in the macro `wit_bindgen::generate` (in Nightly builds, run with -Z macro-backtrace for more info)</span>\n\n<span class=\"s1\">  error: cannot find macro `export` in this scope</span>\n<span class=\"s1\">    --&gt; crates/test-programs/src/bin/p2_api_reactor.rs:11:1</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  11 | export!(T);</span>\n<span class=\"s1\">     | ^^^^^^</span>\n\n<span class=\"s1\">  error[E0405]: cannot find trait `Guest` in this scope</span>\n<span class=\"s1\">    --&gt; crates/test-programs/src/bin/p2_api_reactor.rs:18:6</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  18 | impl Guest for T {</span>\n<span class=\"s1\">     |      ^^^^^ not found in this scope</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  help: consider importing one of these traits</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::p3::exports::wasi::cli::run::Guest;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::p3::proxy::exports::wasi::http::handler::Guest;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::proxy::exports::wasi::http::incoming_handler::Guest;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use wasip2::exports::cli::run::Guest;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">     = and 1 other candidate</span>\n\n<span class=\"s1\">  error[E0412]: cannot find type `OutputStream` in this scope</span>\n<span class=\"s1\">    --&gt; crates/test-programs/src/bin/p2_api_reactor.rs:36:28</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  36 |     fn write_strings_to(o: OutputStream) -&gt; Result&lt;(), ()&gt; {</span>\n<span class=\"s1\">     |                            ^^^^^^^^^^^^ not found in this scope</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  help: consider importing one of these items</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::wasi::cli::stderr::OutputStream;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::wasi::cli::stdout::OutputStream;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::wasi::filesystem::types::OutputStream;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::wasi::http::types::OutputStream;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">     = and 9 other candidates</span>\n\n<span class=\"s1\">  error[E0433]: failed to resolve: use of unresolved module or unlinked crate `wasi`</span>\n<span class=\"s1\">    --&gt; crates/test-programs/src/bin/p2_api_reactor.rs:67:38</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  67 |     fn pass_an_imported_record(stat: wasi::filesystem::types::DescriptorStat) -&gt; String {</span>\n<span class=\"s1\">     |                                      ^^^^ use of unresolved module or unlinked crate `wasi`</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">     = help: if you wanted to use a crate named `wasi`, use `cargo add wasi` to add it to your `Cargo.toml`</span>\n<span class=\"s1\">  help: consider importing one of these modules</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::p3::wasi::filesystem::types;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use test_programs::wasi::filesystem::types;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">   1 + use wasip2::filesystem::types;</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  help: if you import `types`, refer to it directly</span>\n<span class=\"s1\">     |</span>\n<span class=\"s1\">  67 -     fn pass_an_imported_record(stat: wasi::filesystem::types::DescriptorStat) -&gt; String {</span>\n<span class=\"s1\">  67 +     fn pass_an_imported_record(stat: types::DescriptorStat) -&gt; String {</span>\n<span class=\"s1\">     |</span>\n\n<span class=\"s1\">  Some errors have detailed explanations: E0405, E0412, E0433.</span>\n<span class=\"s1\">  For more information about an error, try `rustc --explain E0405`.</span>\n<span class=\"s1\">  error: could not compile `test-programs` (bin \"p2_api_reactor\") due to 5 previous errors</span>\n\n<span class=\"s1\">  thread '</span>main<span class=\"err\">'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">480942390</span><span class=\"o\">)</span><span class=\"w\"> </span>panicked<span class=\"w\"> </span>at<span class=\"w\"> </span>crates/test-programs/artifacts/build.rs:156:9:\n<span class=\"w\">  </span>assertion<span class=\"w\"> </span>failed:<span class=\"w\"> </span>status.success<span class=\"o\">()</span>\n<span class=\"w\">  </span>note:<span class=\"w\"> </span>run<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"sb\">`</span><span class=\"nv\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"m\">1</span><span class=\"sb\">`</span><span class=\"w\"> </span>environment<span class=\"w\"> </span>variable<span class=\"w\"> </span>to<span class=\"w\"> </span>display<span class=\"w\"> </span>a<span class=\"w\"> </span>backtrace\n</code></pre></div>\n<p>With just the clocks-timezone feature:</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"w\">  </span>creating<span class=\"w\"> </span>a<span class=\"w\"> </span>component<span class=\"w\"> </span>from<span class=\"w\"> </span><span class=\"s2\">\"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out/wasm32-wasip1/debug/p2_api_reactor.wasm\"</span>\n\n<span class=\"w\">  </span>---<span class=\"w\"> </span>stderr\n<span class=\"w\">  </span>running:<span class=\"w\"> </span>env<span class=\"w\"> </span>-u<span class=\"w\"> </span>CARGO_ENCODED_RUSTFLAGS<span class=\"w\"> </span><span class=\"nv\">CARGO_TARGET_DIR</span><span class=\"o\">=</span><span class=\"s2\">\"/Users/bhayes/repos/bytecodealliance/wasmtime/target/debug/build/test-programs-artifacts-eba4d8530bb0b1ec/out\"</span><span class=\"w\"> </span><span class=\"nv\">RUSTFLAGS</span><span class=\"o\">=</span><span class=\"s2\">\"\"</span><span class=\"w\"> </span><span class=\"s2\">\"cargo\"</span><span class=\"w\"> </span><span class=\"s2\">\"build\"</span><span class=\"w\"> </span><span class=\"s2\">\"--release\"</span><span class=\"w\"> </span><span class=\"s2\">\"--package=wasi-preview1-component-adapter\"</span><span class=\"w\"> </span><span class=\"s2\">\"--target=wasm32-unknown-unknown\"</span>\n<span class=\"w\">     </span>Compiling<span class=\"w\"> </span>wasi-preview1-co\n<span class=\"o\">[</span>message<span class=\"w\"> </span>truncated<span class=\"o\">]</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 567004833,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767896188
    },
    {
        "content": "<p>ricochet updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567005623,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767896440
    },
    {
        "content": "<p>ricochet created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2673416715\">PR review comment</a>:</p>\n<blockquote>\n<p>Thanks that deletes a line too <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n</blockquote>",
        "id": 567006608,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767896792
    },
    {
        "content": "<p>ricochet submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3640679293\">PR review</a>.</p>",
        "id": 567006609,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767896793
    },
    {
        "content": "<p>ricochet updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567012236,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767898800
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2676870389\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah ok this specific location I think is ok to keep the features enabled since it's just related to testing, but there's some other locations that I was curious about too:</p>\n<ul>\n<li><code>crates/test-programs/src/bin/p3_http_middleware.rs</code> - how come the timezone feature was necessary here?</li>\n<li><code>crates/test-programs/src/bin/p3_http_middleware_with_chain.rs</code> - same as above</li>\n<li><code>crates/test-programs/src/lib.rs</code> - seems ok as this is generating more bindings for more tests. Was the addition of <code>clocks-timezone</code> necessary though? I don't think it's problematic, but with nothing using it prior I wouldn't have expected it to be required to be added.</li>\n<li><code>crates/test-programs/src/p3/mod.rs</code> - similar to above</li>\n<li><code>crates/wasi-preview1-component-adapter/src/lib.rs</code> - this one is what I'm particularly worried about and I think this cannot have extra features enabled (since it's such a public-facing component that shouldn't be using unstable WASI features)</li>\n</ul>\n</blockquote>",
        "id": 567184664,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767976839
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3644728530\">PR review</a>.</p>",
        "id": 567184665,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767976839
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3644731080\">PR review</a>.</p>",
        "id": 567184832,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767976886
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2676872817\">PR review comment</a>:</p>\n<blockquote>\n<p>Would it be possible to switch to <code>wkg</code> in a separate PR maybe? This is for example both updating WITs and switching to <code>wkg</code>, but ideally we'd do those as two discrete steps to ensure everything stays in sync and nothing slips through the cracks</p>\n</blockquote>",
        "id": 567184833,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767976886
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#issuecomment-3741013157\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>:</p>\n<blockquote>\n<p>I did some splicing/editing/editorializing in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12327\">https://github.com/bytecodealliance/wasmtime/pull/12327</a>. I'm happy to land that (tried to make sure to perserve your authorship) but if you'd prefer to morph those changes back in here I'm happy to merge this as well. Whatever's easiest for you, let me know!</p>\n</blockquote>",
        "id": 567661807,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768261390
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567802457,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768320034
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#issuecomment-3745137254\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>:</p>\n<blockquote>\n<p>If you don't mind @ricochet I did some merging/rebasing of this after #12327 landed and I've also handled some other thoughts I had related to the <code>i64</code> switch for datetime.</p>\n</blockquote>",
        "id": 567802639,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768320066
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#issuecomment-3745158253\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>:</p>\n<blockquote>\n<p>Assuming @ricochet is ok with the changes I've made here, @pchickey would you also be ok for reviewing the changes I made?  I don't want to self-approve my changes related to clocks.</p>\n</blockquote>",
        "id": 567803713,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768320333
    },
    {
        "content": "<p>ricochet submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3656863506\">PR review</a>:</p>\n<blockquote>\n<p>I debated making the as change myself since without that fix, we risk the conversion of seconds as i64 to silently truncate values, and a potential overflow in system_clock::Instant conversion. </p>\n<p>Body of the changes LGTM although I see CI is failing.</p>\n</blockquote>",
        "id": 567815431,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768323401
    },
    {
        "content": "<p>alexcrichton updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567846251,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768333336
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/pchickey\">pchickey</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567846827,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768333537
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#issuecomment-3746322608\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>:</p>\n<blockquote>\n<p>Actually, apologies for the notification overload Pat, I realized that due to the WASIp3 adjacent things @dicej would be a good candidate too, so I'm going to switch to Joel to confirm I didn't get anything wrong here</p>\n</blockquote>",
        "id": 567849267,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768334444
    },
    {
        "content": "<p><strong>alexcrichton</strong> requested <a href=\"https://github.com/dicej\">dicej</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567849286,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768334451
    },
    {
        "content": "<p>dicej submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3657773815\">PR review</a>:</p>\n<blockquote>\n<p>LGTM; just one question inline.</p>\n</blockquote>",
        "id": 567851408,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768335200
    },
    {
        "content": "<p>dicej created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2687982160\">PR review comment</a>:</p>\n<blockquote>\n<p>What's the reason for generating the bindings locally here?  I.e. what changed such that using the bindings generated in <code>test_programs/src/p3/mod.rs</code> is no longer feasible?</p>\n</blockquote>",
        "id": 567851410,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768335200
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3658222319\">PR review</a>.</p>",
        "id": 567872390,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768344442
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2688366053\">PR review comment</a>:</p>\n<blockquote>\n<p>Ah I tried that initially but it's a <code>wit-bindgen</code> bug. The way the exported macros are generated, namespaced, etc, means that you can't generate, even in separate modules in the same crate, two worlds where the worlds overlap in exports. The middleware/service worlds overlap in their export of <code>wasi:http/handler</code> meaning that putting the two in the same crate would clash. I'll file a bug over on the wit-bindgen side of things for this.</p>\n</blockquote>",
        "id": 567872391,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768344443
    },
    {
        "content": "<p>alexcrichton submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#pullrequestreview-3658237542\">PR review</a>.</p>",
        "id": 567873031,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768344837
    },
    {
        "content": "<p>alexcrichton created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250#discussion_r2688380449\">PR review comment</a>:</p>\n<blockquote>\n<p>Specifically, <a href=\"https://github.com/bytecodealliance/wit-bindgen/issues/1502\">this issue</a></p>\n</blockquote>",
        "id": 567873033,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768344837
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12250\">PR #12250</a>.</p>",
        "id": 567875979,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768346493
    }
]