[
    {
        "content": "<p>TartanLlama opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a> from <code>TartanLlama:sy/sync-multithreading</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 561839371,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764843314
    },
    {
        "content": "<p>TartanLlama edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>Threads are currently not created on sync-&gt;sync export calls, sync host-&gt;guest calls, and module-level start function calls. This PR adds support to this for all of these.</p>\n<p>Fixes #11954 </p>\n</blockquote>",
        "id": 561839740,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764843423
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561842357,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764844275
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561846706,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764845588
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561848429,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764846130
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561851203,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764847055
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561852510,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764847518
    },
    {
        "content": "<p>TartanLlama edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>Threads are currently not created on sync-&gt;sync export calls, sync host-&gt;guest calls, and module-level start function calls. This PR adds support to this for all of these.</p>\n<p>I added a component-model-async feature to wasmtime-environ so that sync-&gt;sync adapters are compiled as they were originally for wasip2 code, avoiding changing performance characteristics.</p>\n<p>Fixes #11954 </p>\n</blockquote>",
        "id": 561853145,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764847731
    },
    {
        "content": "<p>TartanLlama edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>Threads are currently not created on sync-&gt;sync export calls, sync host-&gt;guest calls, and module-level start function calls. This PR adds support to this for all of these.</p>\n<p>I added a component-model-async feature to wasmtime-environ so that sync-&gt;sync adapters are compiled as they were originally for wasip2 code, avoiding changing performance characteristics.</p>\n<p>Rather than use the existing prepare_call + start_call machinery, I introduced sync_to_sync_enter/exit_call intrinsics to avoid adding additional host frames to the stack for sync calls</p>\n<p>Fixes #11954 </p>\n</blockquote>",
        "id": 561853289,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764847776
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561853652,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764847878
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561863863,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764851007
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 561864953,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1764851309
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 562487586,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765205800
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 562491082,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765206555
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 562950267,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765372003
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 562950926,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765372192
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 562957688,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765374069
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 562960665,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765374878
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563183038,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765458794
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563186460,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765459841
    },
    {
        "content": "<p>TartanLlama updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563186718,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765459907
    },
    {
        "content": "<p>TartanLlama edited <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>Threads are currently not created on sync-&gt;sync export calls, sync host-&gt;guest calls, and module-level start function calls. This PR adds support to this for all of these.</p>\n<p>I added a component-model-async feature to wasmtime-environ so that sync-&gt;sync adapters are compiled as they were originally for wasip2 code, avoiding changing performance characteristics.</p>\n<p>Rather than use the existing prepare_call + start_call machinery, I introduced sync_to_sync_enter/exit_call intrinsics to avoid adding additional host frames to the stack for sync calls.</p>\n<p>Currently, doing operations that require thread state inside <code>post_return</code> functions is unsupported. If we're happy merging this as-is and creating an issue to resolve this later, we can do so, or I can try and address it prior to merging. </p>\n<p>Fixes #11954 </p>\n</blockquote>",
        "id": 563187029,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765459993
    },
    {
        "content": "<p><strong>TartanLlama</strong> has marked <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a> as ready for review.</p>",
        "id": 563210248,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765465526
    },
    {
        "content": "<p><strong>TartanLlama</strong> requested <a href=\"https://github.com/abrown\">abrown</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563210253,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765465527
    },
    {
        "content": "<p><strong>TartanLlama</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563210255,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765465528
    },
    {
        "content": "<p><strong>TartanLlama</strong> requested <a href=\"https://github.com/pchickey\">pchickey</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563210256,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765465528
    },
    {
        "content": "<p><strong>TartanLlama</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-core-reviewers\">wasmtime-core-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 563210258,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1765465528
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/alexcrichton\">alexcrichton</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 566784988,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767806643
    },
    {
        "content": "<p><strong>dicej</strong> requested <a href=\"https://github.com/dicej\">dicej</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 566784989,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767806643
    },
    {
        "content": "<p>dicej <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123#issuecomment-3719985704\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>I've only skimmed this so far; it looks generally reasonable, but I expect it will conflict with <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12153\">https://github.com/bytecodealliance/wasmtime/pull/12153</a>, which I'm about to split into smaller PRs per @alexcrichton's request.</p>\n<p>Given that the <code>component-model-async</code> feature is now enabled by default, we'll need to be conscious of the overhead of e.g. calling <code>sync_to_sync_enter_call</code> and <code>sync_to_sync_exit_call</code> per <a href=\"#narrow/channel/217126-wasmtime/topic/Wasmtime.20sync.3C-.3Esync.20adapter.20optimizability/with/565057397\">this Zulip topic</a>.  In <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12153\">https://github.com/bytecodealliance/wasmtime/pull/12153</a>, I had to get creative and sometimes lazily push <code>GuestTask</code>s and <code>GuestThread</code>s as necessary to avoid pessimizing sync-to-sync adapters.  @TartanLlama we should chat sometime about if (and if so, how) we could do a similar optimization here.</p>\n</blockquote>",
        "id": 566787594,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1767807447
    },
    {
        "content": "<p>dicej <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123#issuecomment-3751984503\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>See <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12311\">https://github.com/bytecodealliance/wasmtime/issues/12311</a> for the latest plan.  I'm planning to work on a new PR tomorrow that ensures we always push a task and thread on the stack when entering Wasm from the guest or host, at which point we can rebase this PR on top of that.</p>\n</blockquote>",
        "id": 568091640,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1768429626
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123#issuecomment-3791417152\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>@dicej / @TartanLlama does <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12379\">https://github.com/bytecodealliance/wasmtime/pull/12379</a> subsume this? (my impression is \"yes\" but want to confirm)</p>\n</blockquote>",
        "id": 569769863,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769189515
    },
    {
        "content": "<p>TartanLlama closed without merge <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>.</p>",
        "id": 569783532,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769193927
    },
    {
        "content": "<p>TartanLlama <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123#issuecomment-3791758978\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12123\">PR #12123</a>:</p>\n<blockquote>\n<p>Yeah I believe it is. Closing for now, can always grab stuff from the branch if we need it</p>\n</blockquote>",
        "id": 569783533,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769193927
    }
]