[
    {
        "content": "<p>philipc opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428</a> from <code>philipc:transform</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>Replace parts of the transform code with <code>gimli</code>'s generic DWARF transformation support. Most of the remaining code is specific to the needs of Wasmtime.</p>\n<p>This change relates to #5537. While this PR provides some small improvements, it doesn't fundamentally change the quality of the transformed DWARF. The primary benefit is simply less code in Wasmtime.</p>\n<p>The overall behaviour is the same as the previous implementation. We build a graph of the DIE dependencies, and prune DIEs that don't have valid code ranges. Then we traverse the DIE tree again and transform the DIEs. However, there are some differences.</p>\n<p>Previously, unresolved references to DIEs were stored in <code>PendingUnitRefs</code> and <code>PendingDebugInfoRefs</code>, then at the end of the transformation we went back and fixed up these references. The new behaviour reserves IDs for all of the DIEs in the dependency tree before transformation, which avoids the need to fix up references later. It also allows gimli to correctly handle references in DWARF expressions, although that doesn't currently matter for Wasmtime because it doesn't handle references in expressions yet. The visible effect of this in Wasmtime is that the order of transformed attributes will now always match the original DWARF.</p>\n<p>The DIE tree pruning is slightly different. We no longer add back-edges pointing to namespace DIEs or the root DIE, which previously caused some DIEs to be reachable when they should not have been. In particular, this affects DW_TAG_variable DIEs for global variables. Wasmtime can't currently translate the location for globals, so they were added without a valid DW_AT_location. These DIEs are now omitted from the transformed DWARF. In the future when global variables can be translated correctly, they can be included by calling <code>ReserveUnitSection::require_entry</code>.</p>\n<p>Performance measurements for <code>wasmtime compile -D debug-info=y</code> show minimal change.</p>\n</blockquote>",
        "id": 569923270,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769313080
    },
    {
        "content": "<p><strong>philipc</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428</a>.</p>",
        "id": 569923271,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769313080
    },
    {
        "content": "<p><strong>philipc</strong> requested <a href=\"https://github.com/fitzgen\">fitzgen</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428</a>.</p>",
        "id": 569923272,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769313080
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428#pullrequestreview-3707683937\">PR review</a>:</p>\n<blockquote>\n<p>Fantastic, thanks so much!</p>\n</blockquote>",
        "id": 570179855,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769458322
    },
    {
        "content": "<p>fitzgen created <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428#discussion_r2728987805\">PR review comment</a>:</p>\n<blockquote>\n<p>Nice to see this parameter list getting smaller!</p>\n</blockquote>",
        "id": 570179856,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769458322
    },
    {
        "content": "<p>fitzgen <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428#issuecomment-3801549456\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428</a>:</p>\n<blockquote>\n<p>Going to wait until <a href=\"https://www.githubstatus.com/incidents/90hj03y5tj3c\">https://www.githubstatus.com/incidents/90hj03y5tj3c</a> is resolved before adding this to the merge queue.</p>\n</blockquote>",
        "id": 570179922,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769458346
    },
    {
        "content": "<p>alexcrichton added <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428 Use <code>gimli::write::Dwarf::convert_with_filter</code> for DWARF transform</a> to the merge queue.</p>",
        "id": 570194246,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769463863
    },
    {
        "content": "<p>alexcrichton merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428</a>.</p>",
        "id": 570215019,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769474735
    },
    {
        "content": "<p>alexcrichton removed <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12428\">PR #12428 Use <code>gimli::write::Dwarf::convert_with_filter</code> for DWARF transform</a> from the merge queue.</p>",
        "id": 570215021,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769474736
    }
]