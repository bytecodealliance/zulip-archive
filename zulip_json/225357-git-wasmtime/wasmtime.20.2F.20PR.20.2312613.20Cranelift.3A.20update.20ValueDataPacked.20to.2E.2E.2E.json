[
    {
        "content": "<p>cfallin opened <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613</a> from <code>cfallin:bigger-valuedata</code> to <code>bytecodealliance:main</code>:</p>\n<blockquote>\n<p>This updates the <code>ValueDataPacked</code> scheme from the old</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">            </span><span class=\"p\">(</span><span class=\"k\">enum</span><span class=\"w\"> </span><span class=\"nc\">tag</span><span class=\"p\">)</span><span class=\"w\">    </span><span class=\"p\">(</span><span class=\"n\">CLIF</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"p\">)</span><span class=\"w\">    </span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"w\">     </span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"p\">)</span>\n<span class=\"sd\">///        | tag:2 |  type:14        |    x:24       | y:24          |</span>\n</code></pre></div>\n<p>encoding in a <code>u64</code> to a new</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"sd\">///        | tag:2 |  type:14        |    x:32       | y:32</span>\n<span class=\"o\">|</span>\n</code></pre></div>\n<p>encoding, with a <code>packed</code> tag attribute to ensure the struct fits in 10 bytes. This permits the full range of <code>Value</code> (a <code>u32</code> entity index) to be encoded, removing the remaining major limit on function body size after the work in #12611 to address #12229.</p>\n<p>Curiously, this appears to be a <em>speedup</em> in compile time of 3-5% on bz2 and 3% on spidermonkey-json (Sightglass, 50 data points each). My best guess as to why is that putting the value fields in their own <code>u32</code>s allows for quick access without shifts/masks, which is actually better than the unaligned accesses (caused by 10-byte size) -- which have no penalty on modern mainstream CPUs -- and 25% size inflation of the value-definitions array.</p>\n<p>&lt;!--<br>\nPlease make sure you include the following information:</p>\n<ul>\n<li>\n<p>If this work has been discussed elsewhere, please include a link to that<br>\n  conversation. If it was discussed in an issue, just mention \"issue #...\".</p>\n</li>\n<li>\n<p>Explain why this change is needed. If the details are in an issue already,<br>\n  this can be brief.</p>\n</li>\n</ul>\n<p>Our development process is documented in the Wasmtime book:<br>\n<a href=\"https://docs.wasmtime.dev/contributing-development-process.html\">https://docs.wasmtime.dev/contributing-development-process.html</a></p>\n<p>Please ensure all communication follows the code of conduct:<br>\n<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md\">https://github.com/bytecodealliance/wasmtime/blob/main/CODE_OF_CONDUCT.md</a><br>\n--&gt;</p>\n</blockquote>",
        "id": 574407725,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771373274
    },
    {
        "content": "<p><strong>cfallin</strong> requested <a href=\"https://github.com/fitzgen\">fitzgen</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613</a>.</p>",
        "id": 574407726,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771373274
    },
    {
        "content": "<p><strong>cfallin</strong> requested <a href=\"https://github.com/orgs/bytecodealliance/teams/wasmtime-compiler-reviewers\">wasmtime-compiler-reviewers</a> for a review on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613</a>.</p>",
        "id": 574407729,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771373274
    },
    {
        "content": "<p>cfallin updated <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613</a>.</p>",
        "id": 574408431,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771373717
    },
    {
        "content": "<p>github-actions[bot] added the label <code>cranelift</code> on <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613</a>.</p>",
        "id": 574424553,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771385685
    },
    {
        "content": "<p>fitzgen submitted <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613#pullrequestreview-3820724782\">PR review</a>.</p>",
        "id": 574542547,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771429958
    },
    {
        "content": "<p>fitzgen added <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613 Cranelift: update ValueDataPacked to support full Value range.</a> to the merge queue</p>",
        "id": 574542576,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771429967
    },
    {
        "content": "<p>fitzgen merged <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613</a>.</p>",
        "id": 574550973,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771431985
    },
    {
        "content": "<p>fitzgen removed <a href=\"https://github.com/bytecodealliance/wasmtime/pull/12613\">PR #12613 Cranelift: update ValueDataPacked to support full Value range.</a> from the merge queue</p>",
        "id": 574550976,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771431986
    }
]