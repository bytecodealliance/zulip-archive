[
    {
        "content": "<p>edward-playbit opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830\">issue #11830</a>:</p>\n<blockquote>\n<h3>Test Case</h3>\n<p>Compile the following two .c files with these commands on macOS:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>clang<span class=\"w\"> </span>-c<span class=\"w\"> </span>--target<span class=\"o\">=</span>wasm32<span class=\"w\"> </span>-o<span class=\"w\"> </span>a.o<span class=\"w\"> </span>a.c<span class=\"w\"> </span>-g\nwasm-ld<span class=\"w\"> </span>-o<span class=\"w\"> </span>a.wasm<span class=\"w\"> </span>a.o<span class=\"w\"> </span>--import-memory<span class=\"w\"> </span>--no-entry<span class=\"w\"> </span>--export<span class=\"o\">=</span>func\nclang<span class=\"w\"> </span>-o<span class=\"w\"> </span>b<span class=\"w\"> </span>b.c<span class=\"w\"> </span>-Wall<span class=\"w\"> </span>-Wextra<span class=\"w\"> </span>-fsanitize<span class=\"o\">=</span>address<span class=\"w\"> </span>-g<span class=\"w\"> </span><span class=\"se\">\\</span>\n<span class=\"w\">    </span>-I<span class=\"w\"> </span>wasmtime-37.0.1.2/include<span class=\"w\"> </span>-L<span class=\"w\"> </span>wasmtime-37.0.1.2/lib<span class=\"w\"> </span>-l<span class=\"w\"> </span>wasmtime\n</code></pre></div>\n<p><code>a.c</code>:</p>\n<div class=\"codehilite\" data-code-language=\"C\"><pre><span></span><code><span class=\"kt\">void</span><span class=\"w\"> </span><span class=\"nf\">func</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">++</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">+=</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p><code>b.c</code>:</p>\n<div class=\"codehilite\" data-code-language=\"C\"><pre><span></span><code><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;stdio.h&gt;</span>\n<span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;assert.h&gt;</span>\n<span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;wasm.h&gt;</span>\n<span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;wasmtime.h&gt;</span>\n\n<span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_trap_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_error_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"n\">wasm_config_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">config</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasm_config_new</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_config_debug_info_set</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">true</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_config_cranelift_opt_level_set</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_OPT_LEVEL_NONE</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"n\">wasm_engine_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">engine</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasm_engine_new_with_config</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_store_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">store</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_store_new</span><span class=\"p\">(</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_context_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">cx</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_store_context</span><span class=\"p\">(</span><span class=\"n\">store</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_linker_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_linker_new</span><span class=\"p\">(</span><span class=\"n\">engine</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_limits_t</span><span class=\"w\"> </span><span class=\"n\">limits</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">256</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">UINT32_MAX</span><span class=\"w\"> </span><span class=\"p\">};</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_memorytype_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">mem_ty</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasm_memorytype_new</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">limits</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_memory_t</span><span class=\"w\">  </span><span class=\"n\">memory</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_memory_new</span><span class=\"p\">(</span><span class=\"n\">cx</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">mem_ty</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">memory</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">err</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_memorytype_delete</span><span class=\"p\">(</span><span class=\"n\">mem_ty</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_extern_t</span><span class=\"w\"> </span><span class=\"n\">mem_extern</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">kind</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_EXTERN_MEMORY</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"p\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">          </span><span class=\"p\">.</span><span class=\"n\">memory</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">memory</span><span class=\"p\">,</span>\n<span class=\"w\">        </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"p\">};</span>\n<span class=\"w\">    </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_linker_define</span><span class=\"p\">(</span><span class=\"n\">linker</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">cx</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"env\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"memory\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">mem_extern</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">err</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"kt\">FILE</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">fopen</span><span class=\"p\">(</span><span class=\"s\">\"a.wasm\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"rb\"</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">fseek</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">SEEK_END</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"kt\">size_t</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">ftell</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">fseek</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">SEEK_SET</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_byte_vec_t</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_byte_vec_new_uninitialized</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">bytes</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">fread</span><span class=\"p\">(</span><span class=\"n\">bytes</span><span class=\"p\">.</span><span class=\"n\">data</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">fclose</span><span class=\"p\">(</span><span class=\"n\">f</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"n\">wasmtime_module_t</span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_module_new</span><span class=\"p\">(</span><span class=\"n\">engine</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"kt\">uint8_t</span><span class=\"o\">*</span><span class=\"p\">)</span><span class=\"n\">bytes</span><span class=\"p\">.</span><span class=\"n\">data</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"p\">.</span><span class=\"n\">size</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">module</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">err</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasm_byte_vec_delete</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">bytes</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">wasmtime_instance_t</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{};</span>\n<span class=\"w\">    </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_linker_instantiate</span><span class=\"p\">(</span><span class=\"n\">linker</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">cx</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">instance</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">trap</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">err</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"n\">wasmtime_extern_t</span><span class=\"w\"> </span><span class=\"n\">item</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{};</span>\n<span class=\"w\">    </span><span class=\"kt\">bool</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_instance_export_get</span><span class=\"p\">(</span><span class=\"n\">cx</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">instance</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"func\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">item</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"n\">success</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">.</span><span class=\"n\">kind</span><span class=\"w\"> </span><span class=\"o\">==</span><span class=\"w\"> </span><span class=\"n\">WASMTIME_EXTERN_FUNC</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">wasmtime_func_call</span><span class=\"p\">(</span><span class=\"n\">cx</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">item</span><span class=\"p\">.</span><span class=\"n\">of</span><span class=\"p\">.</span><span class=\"n\">func</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">NULL</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"n\">trap</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">assert</span><span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">err</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">;</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<h3>Steps to Reproduce</h3>\n<p>Run the compiled executable under LLDB with the following command:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lldb<span class=\"w\"> </span>b<span class=\"w\"> </span>-b<span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"b func\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"r\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"n\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"n\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"p s\"</span>\n</code></pre></div>\n<p>Note: You will need to create the file <code>~/.lldbinit</code> with the following contents if not already:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">settings</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">plugin</span><span class=\"p\">.</span><span class=\"n\">jit</span><span class=\"o\">-</span><span class=\"n\">loader</span><span class=\"p\">.</span><span class=\"n\">gdb</span><span class=\"p\">.</span><span class=\"n\">enable</span><span class=\"w\"> </span><span class=\"n\">on</span>\n</code></pre></div>\n<h3>Expected Results</h3>\n<p>To see the current value of the <code>s</code> variable printed, i.e. <code>0</code>.</p>\n<h3>Actual Results</h3>\n<p>Instead, the following error message is displayed:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Couldn</span><span class=\"o\">'</span><span class=\"na\">t</span><span class=\"w\"> </span><span class=\"n\">materialize</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">couldn</span><span class=\"o\">'</span><span class=\"na\">t</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">variable</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">available</span>\n<span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">errored</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">DoExecute</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">couldn</span><span class=\"o\">'</span><span class=\"na\">t</span><span class=\"w\"> </span><span class=\"n\">PrepareToExecuteJITExpression</span>\n</code></pre></div>\n<h3>Versions and Environment</h3>\n<p>Wasmtime version or commit: 37.0.1.2</p>\n<p>clang, wasm-ld and lldb version: 21.1.2 (from Homebrew)</p>\n<p>Operating system: macOS 15.6.1 (24G90)</p>\n<p>Architecture: Apple M2 Max (aarch64)</p>\n<h3>Extra Info</h3>\n<p>There is an existing issue with something similar: <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11337\">https://github.com/bytecodealliance/wasmtime/issues/11337</a>. However that issue is only in the case \"after indirect call\", while this issue is that variables cannot be displayed at all.</p>\n</blockquote>",
        "id": 544168583,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760102461
    },
    {
        "content": "<p><a href=\"https://github.com/edward-playbit\">edward-playbit</a> added the bug label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830\">Issue #11830</a>.</p>",
        "id": 544168585,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760102462
    },
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the wasmtime:debugging label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830\">Issue #11830</a>.</p>",
        "id": 544186315,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760107309
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830#issuecomment-3391175997\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830\">issue #11830</a>:</p>\n<blockquote>\n<p>@edward-playbit I'll make the same comment I made in #11337 (because \"after indirect call\" does not alter the fundamental underlying case):</p>\n<blockquote>\n<p>Unfortunately I don't have an easy answer/fix, but I'll note that historically our native-debugger support has been quite best-effort, and is more or less unmaintained at the moment. The DWARF translation has had known bugs, and we know that various aspects of our lowering can cause values to become unavailable. All of that to say: I'm not surprised that you are finding holes, and I wouldn't recommend relying on debugging by attaching a native debugger to wasmtime at the moment.</p>\n<p>We do have a <a href=\"https://github.com/bytecodealliance/rfcs/blob/main/accepted/wasmtime-debugging.md\">debugging RFC</a> that captures a lot of thinking about our debugging plans from a year ago; and assuming plans don't change, I should be able to start work on pieces of this later in the year.</p>\n</blockquote>\n<p>My update on that since that Jul 28 comment is that I am now actively working on \"guest debugging\", which will subsume use of a native debugger as you're attempting here.</p>\n</blockquote>",
        "id": 544212504,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1760114953
    },
    {
        "content": "<p>philipc <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830#issuecomment-3830497688\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830\">issue #11830</a>:</p>\n<blockquote>\n<p>Since I have a fix (#12484) for #11337, I tried reproducing this one too, but I am unable to reproduce this on Ubuntu 24.04 and clang 22 using a build from the repository (commit bc4582c347aafd174f583a006891603d6bcb25ab). These are the commands I ran:</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>cmake<span class=\"w\"> </span>-S<span class=\"w\"> </span>crates/c-api<span class=\"w\"> </span>-B<span class=\"w\"> </span>target/c-api<span class=\"w\"> </span>--install-prefix<span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"k\">$(</span><span class=\"nb\">pwd</span><span class=\"k\">)</span><span class=\"s2\">/artifacts\"</span>\ncmake<span class=\"w\"> </span>--build<span class=\"w\"> </span>target/c-api\ncmake<span class=\"w\"> </span>--install<span class=\"w\"> </span>target/c-api\nclang<span class=\"w\"> </span>-c<span class=\"w\"> </span>--target<span class=\"o\">=</span>wasm32<span class=\"w\"> </span>-o<span class=\"w\"> </span>a.o<span class=\"w\"> </span>a.c<span class=\"w\"> </span>-g\nwasm-ld<span class=\"w\"> </span>-o<span class=\"w\"> </span>a.wasm<span class=\"w\"> </span>a.o<span class=\"w\"> </span>--import-memory<span class=\"w\"> </span>--no-entry<span class=\"w\"> </span>--export<span class=\"o\">=</span>func\nclang<span class=\"w\"> </span>-o<span class=\"w\"> </span>b<span class=\"w\"> </span>b.c<span class=\"w\"> </span>-Wall<span class=\"w\"> </span>-Wextra<span class=\"w\"> </span>-fsanitize<span class=\"o\">=</span>address<span class=\"w\"> </span>-g<span class=\"w\"> </span>-I<span class=\"w\"> </span>artifacts/include<span class=\"w\"> </span>-L<span class=\"w\"> </span>artifacts/lib<span class=\"w\"> </span>-l<span class=\"w\"> </span>wasmtime\n<span class=\"nv\">LD_LIBRARY_PATH</span><span class=\"o\">=</span>artifacts/lib<span class=\"w\"> </span>lldb-20<span class=\"w\"> </span>b<span class=\"w\"> </span>-b<span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"b func\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"r\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"n\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"n\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"p s\"</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 571263442,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769929421
    },
    {
        "content": "<p>philipc edited a <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830#issuecomment-3830497688\">comment</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11830\">issue #11830</a>:</p>\n<blockquote>\n<p>Since I have a fix (#12484) for #11337, I tried reproducing this one too, but I am unable to reproduce this on Ubuntu 24.04 and clang 21 using a build from the repository (tag v37.0.1). These are the commands I ran:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>cmake<span class=\"w\"> </span>-S<span class=\"w\"> </span>crates/c-api<span class=\"w\"> </span>-B<span class=\"w\"> </span>target/c-api<span class=\"w\"> </span>--install-prefix<span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"k\">$(</span><span class=\"nb\">pwd</span><span class=\"k\">)</span><span class=\"s2\">/artifacts\"</span>\ncmake<span class=\"w\"> </span>--build<span class=\"w\"> </span>target/c-api\ncmake<span class=\"w\"> </span>--install<span class=\"w\"> </span>target/c-api\nclang-21<span class=\"w\"> </span>-c<span class=\"w\"> </span>--target<span class=\"o\">=</span>wasm32<span class=\"w\"> </span>-o<span class=\"w\"> </span>a.o<span class=\"w\"> </span>a.c<span class=\"w\"> </span>-g\nwasm-ld-21<span class=\"w\"> </span>-o<span class=\"w\"> </span>a.wasm<span class=\"w\"> </span>a.o<span class=\"w\"> </span>--import-memory<span class=\"w\"> </span>--no-entry<span class=\"w\"> </span>--export<span class=\"o\">=</span>func\nclang-21<span class=\"w\"> </span>-o<span class=\"w\"> </span>b<span class=\"w\"> </span>b.c<span class=\"w\"> </span>-Wall<span class=\"w\"> </span>-Wextra<span class=\"w\"> </span>-fsanitize<span class=\"o\">=</span>address<span class=\"w\"> </span>-g<span class=\"w\"> </span>-I<span class=\"w\"> </span>artifacts/include<span class=\"w\"> </span>-L<span class=\"w\"> </span>artifacts/lib<span class=\"w\"> </span>-l<span class=\"w\"> </span>wasmtime\n<span class=\"nv\">LD_LIBRARY_PATH</span><span class=\"o\">=</span>artifacts/lib<span class=\"w\"> </span>lldb-20<span class=\"w\"> </span>b<span class=\"w\"> </span>-b<span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"b func\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"r\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"n\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"n\"</span><span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"p s\"</span>\n</code></pre></div>\n<p>Edit: changed to older versions</p>\n</blockquote>",
        "id": 571272312,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1769939036
    }
]