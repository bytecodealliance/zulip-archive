[
    {
        "content": "<p>NickLarsenNZ opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12591\">issue #12591</a>:</p>\n<blockquote>\n<p>When I expand the code generated by this macro:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">component</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"n\">world</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"plugin\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"../wit\"</span><span class=\"p\">,</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n<p>There appears to be additional <code>/</code> ending up in the actual doc comments:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#[doc = </span><span class=\"s\">\"/ Auto-generated bindings for a pre-instantiated version of a\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ component which implements the world `plugin`.\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ This structure is created through [`PluginPre::new`] which\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ takes a [`InstancePre`](wasmtime::component::InstancePre) that\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ has been created through a [`Linker`](wasmtime::component::Linker).\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ For more information see [`Plugin`] as well.\"</span><span class=\"cp\">]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span><span class=\"w\"> </span><span class=\"nc\">PluginPre</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">static</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">instance_pre</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">component</span><span class=\"p\">::</span><span class=\"n\">InstancePre</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">indices</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">PluginIndices</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 573829642,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771017581
    },
    {
        "content": "<p>NickLarsenNZ edited <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12591\">issue #12591</a>:</p>\n<blockquote>\n<p>With:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"s2\">\"41.0.3\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">features</span><span class=\"w\"> </span><span class=\"p\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"component-model\"</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"p\">}</span>\n</code></pre></div>\n<p>When I expand the code generated by this macro:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">component</span><span class=\"p\">::</span><span class=\"n\">bindgen</span><span class=\"o\">!</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"n\">world</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"plugin\"</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"../wit\"</span><span class=\"p\">,</span>\n<span class=\"p\">});</span>\n</code></pre></div>\n<p>There appears to be additional <code>/</code> ending up in the actual doc comments:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#[doc = </span><span class=\"s\">\"/ Auto-generated bindings for a pre-instantiated version of a\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ component which implements the world `plugin`.\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ This structure is created through [`PluginPre::new`] which\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ takes a [`InstancePre`](wasmtime::component::InstancePre) that\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ has been created through a [`Linker`](wasmtime::component::Linker).\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/\"</span><span class=\"cp\">]</span>\n<span class=\"cp\">#[doc = </span><span class=\"s\">\"/ For more information see [`Plugin`] as well.\"</span><span class=\"cp\">]</span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span><span class=\"w\"> </span><span class=\"nc\">PluginPre</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">static</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">instance_pre</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasmtime</span><span class=\"p\">::</span><span class=\"n\">component</span><span class=\"p\">::</span><span class=\"n\">InstancePre</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"n\">indices</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">PluginIndices</span><span class=\"p\">,</span>\n<span class=\"p\">}</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 573829861,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771017690
    },
    {
        "content": "<p>NickLarsenNZ <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12591#issuecomment-3899591323\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12591\">issue #12591</a>:</p>\n<blockquote>\n<p>The docs in the template appear to be correct:</p>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/blob/bda02c19ef1f89d2abc25eb5783c36fbf9f8c7e9/crates/wit-bindgen/src/lib.rs#L749-L760\">https://github.com/bytecodealliance/wasmtime/blob/bda02c19ef1f89d2abc25eb5783c36fbf9f8c7e9/crates/wit-bindgen/src/lib.rs#L749-L760</a></p>\n</blockquote>",
        "id": 573830817,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771018193
    },
    {
        "content": "<p>pchickey <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12591#issuecomment-3899916700\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12591\">issue #12591</a>:</p>\n<blockquote>\n<p>To check whether this is an artifact of wasmtime's bindgen or your code expansion, can you try setting <code>WASMTIME_DEBUG_BINDGEN=1</code> in your environment? That will have bindgen write a separate <code>.rs</code> file in OUT_DIR and <code>include!</code> that file in place, which sometimes has a better experience for debugging because errors get line numbers.</p>\n<p>If that resolves your issue, then what you are seeing is down to whatever mechanism you are using to expand the macro.</p>\n</blockquote>",
        "id": 573837977,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1771021969
    }
]