[
    {
        "content": "<p>LeoBorai opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12223\">issue #12223</a>:</p>\n<blockquote>\n<p>Hi folks from Bytecode Alliance,</p>\n<p>I'm writing a solution where I'm running <code>wasm32-wasip2</code> async function via<br>\nwasmtime.</p>\n<p>I have Rust code I'm compiling to WASM using the following command:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>cargo<span class=\"w\"> </span>+nightly<span class=\"w\"> </span>build<span class=\"w\"> </span>--release<span class=\"w\"> </span>--target<span class=\"w\"> </span>wasm32-wasip2\n</code></pre></div>\n<p>Then I grab the <code>wasm</code> file in:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">wasm32</span><span class=\"o\">-</span><span class=\"n\">wasip2</span><span class=\"o\">/</span><span class=\"n\">release</span><span class=\"o\">/</span><span class=\"n\">http</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n</code></pre></div>\n<p>And execute it via the following wasmtime instance:</p>\n<p><a href=\"https://github.com/LeoBorai/mate/blob/a83f164948ad6c349618c781df4ef1564d3d04c2/src/runner/src/lib.rs#L46\">https://github.com/LeoBorai/mate/blob/a83f164948ad6c349618c781df4ef1564d3d04c2/src/runner/src/lib.rs#L46</a></p>\n<p>But when I run it, I'm getting the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"n\">WebAssembly</span><span class=\"w\"> </span><span class=\"n\">module</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"err\">`</span><span class=\"n\">waitable</span><span class=\"p\">.</span><span class=\"n\">join</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">requires</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"n\">model</span><span class=\"w\"> </span><span class=\"k\">async</span><span class=\"w\"> </span><span class=\"n\">feature</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">offset</span><span class=\"w\"> </span><span class=\"mh\">0x8be71</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>I've checked on features already, I see the feature <code>component-model-async</code> is<br>\nenabled (_Which comes as part of the default features so should be redundant at this point_).</p>\n</blockquote>",
        "id": 565537152,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766880128
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12223#issuecomment-3694527351\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12223\">issue #12223</a>:</p>\n<blockquote>\n<p>Does <code>config.wasm_component_model_async(true).wasm_component_model_async_builtins(true)</code> work?</p>\n</blockquote>",
        "id": 565552630,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766906366
    },
    {
        "content": "<p>LeoBorai <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12223#issuecomment-3694888532\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12223\">issue #12223</a>:</p>\n<blockquote>\n<p>Hi @bjorn3, thank you so much for the suggestion. I've updated my code for the <code>wasmtime</code> instance to use the <code>wasm_component_model_async</code>/<code>_builtins</code> methods and the previous error not being printed anymore.</p>\n<p>I will leave the snippet for the record:</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"w\"> </span>        let mut config = Config::new();\n<span class=\"gd\">-        config.async_support(true);</span>\n<span class=\"gi\">+        config</span>\n<span class=\"gi\">+            .async_support(true)</span>\n<span class=\"gi\">+            .wasm_component_model_async(true)</span>\n<span class=\"gi\">+            .wasm_component_model_async_builtins(true);</span>\n<span class=\"w\"> </span>        let engine = Engine::new(&amp;config)?;\n<span class=\"w\"> </span>        let mut linker = Linker::new(&amp;engine);\n</code></pre></div>\n<p><a href=\"https://github.com/LeoBorai/mate/pull/2/changes/bdc94658cd7269fcabc57cc970271bdce9f643a6\">Link to changes</a></p>\n</blockquote>",
        "id": 565579796,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766941276
    },
    {
        "content": "<p>LeoBorai closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/12223\">issue #12223</a>:</p>\n<blockquote>\n<p>Hi folks from Bytecode Alliance,</p>\n<p>I'm writing a solution where I'm running <code>wasm32-wasip2</code> async function via<br>\nwasmtime.</p>\n<p>I have Rust code I'm compiling to WASM using the following command:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>cargo<span class=\"w\"> </span>+nightly<span class=\"w\"> </span>build<span class=\"w\"> </span>--release<span class=\"w\"> </span>--target<span class=\"w\"> </span>wasm32-wasip2\n</code></pre></div>\n<p>Then I grab the <code>wasm</code> file in:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">target</span><span class=\"o\">/</span><span class=\"n\">wasm32</span><span class=\"o\">-</span><span class=\"n\">wasip2</span><span class=\"o\">/</span><span class=\"n\">release</span><span class=\"o\">/</span><span class=\"n\">http</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n</code></pre></div>\n<p>And execute it via the following wasmtime instance:</p>\n<p><a href=\"https://github.com/LeoBorai/mate/blob/a83f164948ad6c349618c781df4ef1564d3d04c2/src/runner/src/lib.rs#L46\">https://github.com/LeoBorai/mate/blob/a83f164948ad6c349618c781df4ef1564d3d04c2/src/runner/src/lib.rs#L46</a></p>\n<p>But when I run it, I'm getting the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"n\">WebAssembly</span><span class=\"w\"> </span><span class=\"n\">module</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"err\">`</span><span class=\"n\">waitable</span><span class=\"p\">.</span><span class=\"n\">join</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">requires</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"n\">model</span><span class=\"w\"> </span><span class=\"k\">async</span><span class=\"w\"> </span><span class=\"n\">feature</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">offset</span><span class=\"w\"> </span><span class=\"mh\">0x8be71</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>I've checked on features already, I see the feature <code>component-model-async</code> is<br>\nenabled (_Which comes as part of the default features so should be redundant at this point_).</p>\n</blockquote>",
        "id": 565579798,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1766941277
    }
]