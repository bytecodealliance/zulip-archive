[
    {
        "content": "<p>simongdavies opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685\">issue #11685</a>:</p>\n<blockquote>\n<p>We are embedding wasmtime in hyperlight-wasm. We do not support being able to compile wasm in hyperlight-wasm so we compile to cwasm offline and load those compiled versions at runtime.</p>\n<p>This creates a problem when we want to upgrade from one version of wasmtime to another in that we need to create and keep/distribute a cwasm version for each version of wasmtime that is in use.</p>\n<p>We had hoped to be able to use LTS versions of wasmtime to reduce the need to recompile but it would seem that LTS versions have the same behaviour as other versions in this regard. </p>\n<p>Is this intentional? <br>\nIs it something that would be open to changing?</p>\n<p>The following demonstrates this issue:</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">wasmtime --version</span>\n<span class=\"go\">wasmtime 36.0.1</span>\n\n<span class=\"go\">wasmtime run --invoke add add.wasm 1 2</span>\n<span class=\"go\">warning: using `--invoke` with a function that takes arguments is experimental and may break in the future</span>\n<span class=\"go\">warning: using `--invoke` with a function that returns values is experimental and may break in the future</span>\n<span class=\"go\">3</span>\n\n<span class=\"go\">wasmtime compile add.wasm</span>\n\n<span class=\"go\">wasmtime run --invoke add --allow-precompiled add.cwasm 1 2</span>\n<span class=\"go\">warning: using `--invoke` with a function that takes arguments is experimental and may break in the future</span>\n<span class=\"go\">warning: using `--invoke` with a function that returns values is experimental and may break in the future</span>\n<span class=\"go\">3</span>\n\n<span class=\"go\">cargo install wasmtime-cli --locked --version 36.0.2</span>\n\n<span class=\"go\">wasmtime run --invoke add --allow-precompiled add.cwasm 1 2</span>\n<span class=\"go\">Error: failed deserialization for: add.cwasm</span>\n\n<span class=\"go\">Caused by:</span>\n<span class=\"go\">    Module was compiled with incompatible Wasmtime version '36.0.1'</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 538918895,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1757614402
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685#issuecomment-3282236237\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685\">issue #11685</a>:</p>\n<blockquote>\n<p>This is intentional insofar as we bake the version string into cwasms and ensure that the loaded version string matches. It's less intentional in the sense that this decision was made in the context of major versions of wasmtime, not patch versions. In that sense I'd personally agree that this is probably a guarantee that we should provide. I'll look to make a PR, thanks for opening the issue!</p>\n</blockquote>",
        "id": 538923941,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1757616556
    },
    {
        "content": "<p>bjorn3 <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685#issuecomment-3282253298\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685\">issue #11685</a>:</p>\n<blockquote>\n<p>Allowing this would restrict the kind of changes patch releases can make, right? And if the patch is on the Cranelift side, then you necessarily have to recompile to get the security fix.</p>\n</blockquote>",
        "id": 538924684,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1757616852
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685#issuecomment-3282261315\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685\">issue #11685</a>:</p>\n<blockquote>\n<p>Correct yeah, and indeed if the bug is in Cranelift's output a recompile would be necessary. We also have the escape hatch of updating the version string matching manually in case a conscious break is actually needed.</p>\n</blockquote>",
        "id": 538925096,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1757617031
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685\">issue #11685</a>:</p>\n<blockquote>\n<p>We are embedding wasmtime in hyperlight-wasm. We do not support being able to compile wasm in hyperlight-wasm so we compile to cwasm offline and load those compiled versions at runtime.</p>\n<p>This creates a problem when we want to upgrade from one version of wasmtime to another in that we need to create and keep/distribute a cwasm version for each version of wasmtime that is in use.</p>\n<p>We had hoped to be able to use LTS versions of wasmtime to reduce the need to recompile but it would seem that LTS versions have the same behaviour as other versions in this regard. </p>\n<p>Is this intentional? <br>\nIs it something that would be open to changing?</p>\n<p>The following demonstrates this issue:</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">wasmtime --version</span>\n<span class=\"go\">wasmtime 36.0.1</span>\n\n<span class=\"go\">wasmtime run --invoke add add.wasm 1 2</span>\n<span class=\"go\">warning: using `--invoke` with a function that takes arguments is experimental and may break in the future</span>\n<span class=\"go\">warning: using `--invoke` with a function that returns values is experimental and may break in the future</span>\n<span class=\"go\">3</span>\n\n<span class=\"go\">wasmtime compile add.wasm</span>\n\n<span class=\"go\">wasmtime run --invoke add --allow-precompiled add.cwasm 1 2</span>\n<span class=\"go\">warning: using `--invoke` with a function that takes arguments is experimental and may break in the future</span>\n<span class=\"go\">warning: using `--invoke` with a function that returns values is experimental and may break in the future</span>\n<span class=\"go\">3</span>\n\n<span class=\"go\">cargo install wasmtime-cli --locked --version 36.0.2</span>\n\n<span class=\"go\">wasmtime run --invoke add --allow-precompiled add.cwasm 1 2</span>\n<span class=\"go\">Error: failed deserialization for: add.cwasm</span>\n\n<span class=\"go\">Caused by:</span>\n<span class=\"go\">    Module was compiled with incompatible Wasmtime version '36.0.1'</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 540140908,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1758167319
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685#issuecomment-3305318629\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/11685\">issue #11685</a>:</p>\n<blockquote>\n<p>Fixed in <a href=\"https://github.com/bytecodealliance/wasmtime/pull/11687\">https://github.com/bytecodealliance/wasmtime/pull/11687</a></p>\n</blockquote>",
        "id": 540140909,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1758167320
    }
]