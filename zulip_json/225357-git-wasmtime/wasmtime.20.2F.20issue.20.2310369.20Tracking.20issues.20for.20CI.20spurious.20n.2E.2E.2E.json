[
    {
        "content": "<p><a href=\"https://github.com/alexcrichton\">alexcrichton</a> added the ci label to <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">Issue #10369</a>.</p>",
        "id": 504864461,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741704691
    },
    {
        "content": "<p>alexcrichton opened <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p>CI just <a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/13790687014/job/38569638778\">spuriously failed</a> where a test hits <code>example.com</code> as a live testing service. This was known that it was probably going to be flaky so I wanted to have an issue here tracking this so we know what's going on. I've also opened an issue at <a href=\"https://github.com/WebAssembly/wasi-tls/issues/9\">https://github.com/WebAssembly/wasi-tls/issues/9</a> for more error information</p>\n<p>cc @jsturtevant and @badeend </p>\n<p>Currently the failure looks like this:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">test</span>\n\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">-</span><span class=\"n\">programs</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">tls_sample_application</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">33</span><span class=\"p\">:</span><span class=\"mi\">14</span><span class=\"p\">:</span>\n<span class=\"nc\">test</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">FAILED</span>\n<span class=\"n\">called</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Result</span><span class=\"p\">::</span><span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Err</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">()</span>\n\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n<span class=\"n\">failures</span><span class=\"p\">:</span>\n<span class=\"nc\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">test</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">rerun</span><span class=\"w\"> </span><span class=\"n\">pass</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">wasi</span><span class=\"o\">-</span><span class=\"n\">tls</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"err\">`</span>\n\n<span class=\"o\">----</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"w\"> </span><span class=\"o\">----</span>\n<span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1cd96</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__rust_start_panic</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1cce8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">rust_panic</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1ccbb</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">rust_panic_with_hook</span><span class=\"p\">::</span><span class=\"n\">he1beb51ce54153b5</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1bf2e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">begin_panic_handler</span><span class=\"p\">::{{</span><span class=\"n\">closure</span><span class=\"p\">}}::</span><span class=\"n\">hdbff82bd9d56f6f9</span>\n<span class=\"w\">    </span><span class=\"mi\">4</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1be9a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">sys</span><span class=\"p\">::</span><span class=\"n\">backtrace</span><span class=\"p\">::</span><span class=\"n\">__rust_end_short_backtrace</span><span class=\"p\">::</span><span class=\"n\">h5bb26fcae04a79f5</span>\n<span class=\"w\">    </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1c64f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">rust_begin_unwind</span>\n<span class=\"w\">    </span><span class=\"mi\">6</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21b2b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">panic_fmt</span><span class=\"p\">::</span><span class=\"n\">h2781e55e5f70e742</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2339b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">result</span><span class=\"p\">::</span><span class=\"n\">unwrap_failed</span><span class=\"p\">::</span><span class=\"n\">he956e17bd675892a</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x5fea</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">tls_sample_application</span><span class=\"p\">::</span><span class=\"n\">test_tls_sample_application</span><span class=\"p\">::</span><span class=\"n\">h85c84c9b597e7424</span>\n<span class=\"w\">    </span><span class=\"mi\">9</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x6903</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">tls_sample_application</span><span class=\"p\">::</span><span class=\"n\">main</span><span class=\"p\">::</span><span class=\"n\">hd80f60ac75378593</span>\n<span class=\"w\">   </span><span class=\"mi\">10</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21c8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">ops</span><span class=\"p\">::</span><span class=\"n\">function</span><span class=\"p\">::</span><span class=\"nb\">FnOnce</span><span class=\"p\">::</span><span class=\"n\">call_once</span><span class=\"p\">::</span><span class=\"n\">hadd62004787a8069</span>\n<span class=\"w\">   </span><span class=\"mi\">11</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2167</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">sys</span><span class=\"p\">::</span><span class=\"n\">backtrace</span><span class=\"p\">::</span><span class=\"n\">__rust_begin_short_backtrace</span><span class=\"p\">::</span><span class=\"n\">h7e8098332588ec78</span>\n<span class=\"w\">   </span><span class=\"mi\">12</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2107</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">rt</span><span class=\"p\">::</span><span class=\"n\">lang_start</span><span class=\"p\">::{{</span><span class=\"n\">closure</span><span class=\"p\">}}::</span><span class=\"n\">h9add34816d3fff1f</span>\n<span class=\"w\">   </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1a60a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">rt</span><span class=\"p\">::</span><span class=\"n\">lang_start_internal</span><span class=\"p\">::</span><span class=\"n\">hb9a72f8093679cde</span>\n<span class=\"w\">   </span><span class=\"mi\">14</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x20a4</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">rt</span><span class=\"p\">::</span><span class=\"n\">lang_start</span><span class=\"p\">::</span><span class=\"n\">hf7b99a0ab1f3109d</span>\n<span class=\"w\">   </span><span class=\"mi\">15</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x6927</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__main_void</span>\n<span class=\"w\">   </span><span class=\"mi\">16</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1fdd</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">_start</span>\n<span class=\"w\">   </span><span class=\"mi\">17</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x50bb69</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">component</span><span class=\"p\">:</span><span class=\"nc\">adapter</span><span class=\"p\">:</span><span class=\"nc\">wasi_snapshot_preview1</span><span class=\"o\">!</span><span class=\"n\">wasi</span><span class=\"p\">:</span><span class=\"nc\">cli</span><span class=\"o\">/</span><span class=\"n\">run</span><span class=\"o\">@</span><span class=\"mf\">0.2.3</span><span class=\"p\">#</span><span class=\"n\">run</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n\n\n<span class=\"n\">failures</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nc\">tls_sample_application</span>\n\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">FAILED</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">passed</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">ignored</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">measured</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">filtered</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">finished</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">3.34</span><span class=\"n\">s</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 504864465,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741704692
    },
    {
        "content": "<p>cfallin <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369#issuecomment-2714862480\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p>Idea: if we need a live testing endpoint, would it be possible to use <code>github.com</code> or <code>api.github.com</code> as the target instead? That way, as long as CI is running, we know the endpoint is up (put another way: the one service we know is working if we're running on GitHub CI is GitHub).</p>\n</blockquote>",
        "id": 504883537,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741708421
    },
    {
        "content": "<p>jsturtevant <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369#issuecomment-2714958593\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<blockquote>\n<p>Idea: if we need a live testing endpoint, would it be possible to use <a href=\"http://github.com\">github.com</a> or <a href=\"http://api.github.com\">api.github.com</a> as the target instead? That way, as long as CI is running, we know the endpoint is up (put another way: the one service we know is working if we're running on GitHub CI is GitHub).</p>\n</blockquote>\n<p>We could try this, the intent behind a live endpoint was to test the system cert store.  If it becomes a larger issues we could add retry.  I would like to add a local only test as well.</p>\n<p>I'll look into returning an error as well.</p>\n</blockquote>",
        "id": 504892196,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741710021
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369#issuecomment-2715175580\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p>One idea might be to test N different domains and return success if any succeed. That way we're resilient to some domains going down as well. I suspect <a href=\"http://github.com\">github.com</a> isn't 100% tied to GHA but it's probably more closely related to <a href=\"http://example.com\">example.com</a> vs GHA, but por que no los dos?</p>\n</blockquote>",
        "id": 504910130,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741714502
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369#issuecomment-2715504452\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/13796425075/job/38589165093\">Another failure</a></p>\n</blockquote>",
        "id": 504936436,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741721880
    },
    {
        "content": "<p>jsturtevant <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369#issuecomment-2715543203\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p>For a few minutes I was able to reproduce this locally by running the test in a tight loop but recent tries its not failing.  </p>\n<p>It's failing on <a href=\"https://github.com/bytecodealliance/wasmtime/blob/696726f2097240a9ad07ab1a583eff6964e63c54/crates/wasi-tls/src/lib.rs#L189-L192\">connection</a>; We will need to surface those errors with changes to the spec as suggested in <a href=\"https://github.com/WebAssembly/wasi-tls/issues/9\">https://github.com/WebAssembly/wasi-tls/issues/9</a>.    </p>\n<p>In the mean time started to work on <code>One idea might be to test N different domains and return success if any succeed. </code> to remove the test flakes while we work on the tls changes.</p>\n</blockquote>",
        "id": 504939750,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1741722845
    },
    {
        "content": "<p>alexcrichton closed <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p>CI just <a href=\"https://github.com/bytecodealliance/wasmtime/actions/runs/13790687014/job/38569638778\">spuriously failed</a> where a test hits <code>example.com</code> as a live testing service. This was known that it was probably going to be flaky so I wanted to have an issue here tracking this so we know what's going on. I've also opened an issue at <a href=\"https://github.com/WebAssembly/wasi-tls/issues/9\">https://github.com/WebAssembly/wasi-tls/issues/9</a> for more error information</p>\n<p>cc @jsturtevant and @badeend </p>\n<p>Currently the failure looks like this:</p>\n<p><div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">test</span>\n\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">main</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">crates</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">-</span><span class=\"n\">programs</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">tls_sample_application</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"p\">:</span><span class=\"mi\">33</span><span class=\"p\">:</span><span class=\"mi\">14</span><span class=\"p\">:</span>\n<span class=\"nc\">test</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">FAILED</span>\n<span class=\"n\">called</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Result</span><span class=\"p\">::</span><span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"nb\">Err</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">()</span>\n\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span>\n<span class=\"n\">failures</span><span class=\"p\">:</span>\n<span class=\"nc\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">test</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">rerun</span><span class=\"w\"> </span><span class=\"n\">pass</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"o\">-</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">wasmtime</span><span class=\"o\">-</span><span class=\"n\">wasi</span><span class=\"o\">-</span><span class=\"n\">tls</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"err\">`</span>\n\n<span class=\"o\">----</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"w\"> </span><span class=\"o\">----</span>\n<span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">error</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">executing</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1cd96</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__rust_start_panic</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1cce8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">rust_panic</span>\n<span class=\"w\">    </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1ccbb</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">rust_panic_with_hook</span><span class=\"p\">::</span><span class=\"n\">he1beb51ce54153b5</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1bf2e</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">begin_panic_handler</span><span class=\"p\">::{{</span><span class=\"n\">closure</span><span class=\"p\">}}::</span><span class=\"n\">hdbff82bd9d56f6f9</span>\n<span class=\"w\">    </span><span class=\"mi\">4</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1be9a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">sys</span><span class=\"p\">::</span><span class=\"n\">backtrace</span><span class=\"p\">::</span><span class=\"n\">__rust_end_short_backtrace</span><span class=\"p\">::</span><span class=\"n\">h5bb26fcae04a79f5</span>\n<span class=\"w\">    </span><span class=\"mi\">5</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1c64f</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">rust_begin_unwind</span>\n<span class=\"w\">    </span><span class=\"mi\">6</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21b2b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">panicking</span><span class=\"p\">::</span><span class=\"n\">panic_fmt</span><span class=\"p\">::</span><span class=\"n\">h2781e55e5f70e742</span>\n<span class=\"w\">    </span><span class=\"mi\">7</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2339b</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">result</span><span class=\"p\">::</span><span class=\"n\">unwrap_failed</span><span class=\"p\">::</span><span class=\"n\">he956e17bd675892a</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x5fea</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">tls_sample_application</span><span class=\"p\">::</span><span class=\"n\">test_tls_sample_application</span><span class=\"p\">::</span><span class=\"n\">h85c84c9b597e7424</span>\n<span class=\"w\">    </span><span class=\"mi\">9</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x6903</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">tls_sample_application</span><span class=\"p\">::</span><span class=\"n\">main</span><span class=\"p\">::</span><span class=\"n\">hd80f60ac75378593</span>\n<span class=\"w\">   </span><span class=\"mi\">10</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x21c8</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">core</span><span class=\"p\">::</span><span class=\"n\">ops</span><span class=\"p\">::</span><span class=\"n\">function</span><span class=\"p\">::</span><span class=\"nb\">FnOnce</span><span class=\"p\">::</span><span class=\"n\">call_once</span><span class=\"p\">::</span><span class=\"n\">hadd62004787a8069</span>\n<span class=\"w\">   </span><span class=\"mi\">11</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2167</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">sys</span><span class=\"p\">::</span><span class=\"n\">backtrace</span><span class=\"p\">::</span><span class=\"n\">__rust_begin_short_backtrace</span><span class=\"p\">::</span><span class=\"n\">h7e8098332588ec78</span>\n<span class=\"w\">   </span><span class=\"mi\">12</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x2107</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">rt</span><span class=\"p\">::</span><span class=\"n\">lang_start</span><span class=\"p\">::{{</span><span class=\"n\">closure</span><span class=\"p\">}}::</span><span class=\"n\">h9add34816d3fff1f</span>\n<span class=\"w\">   </span><span class=\"mi\">13</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1a60a</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">rt</span><span class=\"p\">::</span><span class=\"n\">lang_start_internal</span><span class=\"p\">::</span><span class=\"n\">hb9a72f8093679cde</span>\n<span class=\"w\">   </span><span class=\"mi\">14</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x20a4</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">std</span><span class=\"p\">::</span><span class=\"n\">rt</span><span class=\"p\">::</span><span class=\"n\">lang_start</span><span class=\"p\">::</span><span class=\"n\">hf7b99a0ab1f3109d</span>\n<span class=\"w\">   </span><span class=\"mi\">15</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x6927</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">__main_void</span>\n<span class=\"w\">   </span><span class=\"mi\">16</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x1fdd</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">tls_sample_application</span><span class=\"o\">-</span><span class=\"mi\">3</span><span class=\"n\">d73890cb2b55afd</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"o\">!</span><span class=\"n\">_start</span>\n<span class=\"w\">   </span><span class=\"mi\">17</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mh\">0x50bb69</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">component</span><span class=\"p\">:</span><span class=\"nc\">adapter</span><span class=\"p\">:</span><span class=\"nc\">wasi_snapshot_preview1</span><span class=\"o\">!</span><span class=\"n\">wasi</span><span class=\"p\">:</span><span class=\"nc\">cli</span><span class=\"o\">/</span><span class=\"n\">run</span><span class=\"o\">@</span><span class=\"mf\">0.2.3</span><span class=\"p\">#</span><span class=\"n\">run</span>\n<span class=\"n\">note</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">WASMTIME_BACKTRACE_DETAILS</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">show</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">debugging</span><span class=\"w\"> </span><span class=\"n\">information</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"n\">trap</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">wasm</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">unreachable</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">instruction</span><span class=\"w\"> </span><span class=\"n\">executed</span>\n\n\n<span class=\"n\">failures</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nc\">tls_sample_application</span>\n\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">FAILED</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">passed</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">ignored</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">measured</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">filtered</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">finished</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">3.34</span><span class=\"n\">s</span>\n</code></pre></div><br>\n</p>\n</blockquote>",
        "id": 510985178,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744131865
    },
    {
        "content": "<p>alexcrichton <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369#issuecomment-2787119917\">commented</a> on <a href=\"https://github.com/bytecodealliance/wasmtime/issues/10369\">issue #10369</a>:</p>\n<blockquote>\n<p>Hasn't shown up since <a href=\"https://github.com/bytecodealliance/wasmtime/pull/10377\">https://github.com/bytecodealliance/wasmtime/pull/10377</a>, so going to close</p>\n</blockquote>",
        "id": 510985179,
        "sender_full_name": "Wasmtime GitHub notifications bot",
        "timestamp": 1744131865
    }
]