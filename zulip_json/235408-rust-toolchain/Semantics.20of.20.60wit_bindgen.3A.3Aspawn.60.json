[
    {
        "content": "<p><a href=\"https://docs.rs/wit-bindgen/0.46.0/wit_bindgen/fn.spawn.html\">https://docs.rs/wit-bindgen/0.46.0/wit_bindgen/fn.spawn.html</a></p>\n<blockquote>\n<p>Defer the specified future to be run after the current async-lifted export task has returned a value.</p>\n</blockquote>\n<p>IIUC this means that the spawning task will deadlock if it waits on something that the spawned task will do, right? That makes sense to me but I wonder if we should name this something other than <code>spawn</code> since you can't use it for things that you would naturally use thread or tokio <code>spawn</code> for. How about <code>defer</code>?</p>",
        "id": 544556324,
        "sender_full_name": "Lann Martin",
        "timestamp": 1760362833
    },
    {
        "content": "<p>Relatedly, would it make sense to include a basic <code>wit_bindgen::join(fut_a, fut_b)</code>? You can always pull in e.g. <code>futures-lite</code> but this seems fundamental enough that it might be worth including anyway.</p>",
        "id": 544557401,
        "sender_full_name": "Lann Martin",
        "timestamp": 1760363040
    },
    {
        "content": "<p>The wording here isn't quite right, your situation wouldn't deadlock because it actually progresses both tasks concurrently - needs a doc update</p>",
        "id": 544566446,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1760365387
    },
    {
        "content": "<p>And yeah having some simple future combinators seems reasonable to me</p>",
        "id": 544566538,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1760365409
    },
    {
        "content": "<p>Did this change since 0.46?</p>",
        "id": 544566948,
        "sender_full_name": "Lann Martin",
        "timestamp": 1760365530
    },
    {
        "content": "<p>I blamed a deadlock on this, just curious if I was mistaken.</p>",
        "id": 544567059,
        "sender_full_name": "Lann Martin",
        "timestamp": 1760365563
    },
    {
        "content": "<p>nah it's always been the case that spawned tasks progress in parallel with the main task</p>",
        "id": 544569440,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1760366224
    },
    {
        "content": "<p>fun fact: futures-lite doesnt even include join :(</p>",
        "id": 544589654,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1760373029
    },
    {
        "content": "<p>It calls it <code>zip</code> <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 544589702,
        "sender_full_name": "Lann Martin",
        "timestamp": 1760373046
    },
    {
        "content": "<p>whaaaaaaa</p>",
        "id": 544589842,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1760373091
    },
    {
        "content": "<p>god dammit why did they do that</p>",
        "id": 544589855,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1760373096
    }
]