[
    {
        "content": "<p>I’m relatively new to WebAssembly and would appreciate some guidance on the following challenge.</p>\n<p>I currently have the following setup:</p>\n<ul>\n<li>Library A is implemented in Python and compiled into a WASM component.</li>\n<li>Library B is implemented in Rust and also compiled into a WASM component.</li>\n<li>Library B exports functions and resources using WIT.</li>\n</ul>\n<p>My questions are:</p>\n<ul>\n<li>How can Library A call the functions exported by Library B from within Python?</li>\n<li>Is it possible to automatically generate Python bindings from the interfaces exported by B, so that A can use them easily?</li>\n</ul>\n<p>I’ve looked through relevant documentation, but most resources focus on Guest/Host interoperability. I haven’t been able to find clear guidance on interoperability between two WASM components.</p>\n<p>My use case seems similar to the one shown in this example:</p>\n<p><a href=\"https://github.com/bytecodealliance/wac/tree/main/examples\">https://github.com/bytecodealliance/wac/tree/main/examples</a></p>\n<p>However, I’m interested in understanding how the underlying code that generates these WASM components actually works.</p>\n<p>It would be beneficial if there were any similar project examples available.</p>\n<p>Thank you!</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wac/tree/main/examples\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/6d9c3b42f73157ffbac5e4369bb9af45162baf40/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f333030386362356664646163336336363262346432383063303264363438633662646536353666353939353735363139373937323766353436633566633565642f62797465636f6465616c6c69616e63652f776163&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wac/tree/main/examples\" title=\"wac/examples at main · bytecodealliance/wac\">wac/examples at main · bytecodealliance/wac</a></div><div class=\"message_embed_description\">WebAssembly Composition (WAC) tooling. Contribute to bytecodealliance/wac development by creating an account on GitHub.</div></div></div>",
        "id": 560744119,
        "sender_full_name": "Hua",
        "timestamp": 1764323259
    },
    {
        "content": "<p>The component model book goes through the concepts with a Rust component (calculator) calling a JavaScript component (adder): <a href=\"https://component-model.bytecodealliance.org/importing-and-reusing-components.html\">https://component-model.bytecodealliance.org/importing-and-reusing-components.html</a></p>\n<p>The key bit is that the wit used to define the API of B is what A uses to generate Python bindings. The componentize-py docs show what it's like to generate bindings for a hello world wit: <a href=\"https://github.com/bytecodealliance/componentize-py?tab=readme-ov-file#getting-started\">https://github.com/bytecodealliance/componentize-py?tab=readme-ov-file#getting-started</a><br>\nThat example is exporting the interface, but in your version from the Python component it sounds like you'll want to import the interface.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/componentize-py?tab=readme-ov-file#getting-started\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/c9a307ce7db6f82b361aa753d148eea799d7f5fb/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633865316364393031396632313438313235393330663439643230353239366563623731643561343665623661396666353462333635616163626134326265362f62797465636f6465616c6c69616e63652f636f6d706f6e656e74697a652d7079&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/componentize-py?tab=readme-ov-file#getting-started\" title=\"GitHub - bytecodealliance/componentize-py: Tool for targetting the WebAssembly Component Model using Python\">GitHub - bytecodealliance/componentize-py: Tool for targetting the WebAssembly Component Model using Python</a></div><div class=\"message_embed_description\">Tool for targetting the WebAssembly Component Model using Python - bytecodealliance/componentize-py</div></div></div>",
        "id": 560788283,
        "sender_full_name": "Milan (rajsite)",
        "timestamp": 1764336816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417958\">Milan (rajsite)</span> <a href=\"#narrow/channel/206238-general/topic/How.20can.20a.20function.20exported.20by.20one.20WASM.20component.20be.20called.3F/near/560788283\">說</a>：</p>\n<blockquote>\n<p>The component model book goes through the concepts with a Rust component (calculator) calling a JavaScript component (adder): <a href=\"https://component-model.bytecodealliance.org/importing-and-reusing-components.html\">https://component-model.bytecodealliance.org/importing-and-reusing-components.html</a></p>\n<p>The key bit is that the wit used to define the API of B is what A uses to generate Python bindings. The componentize-py docs show what it's like to generate bindings for a hello world wit: <a href=\"https://github.com/bytecodealliance/componentize-py?tab=readme-ov-file#getting-started\">https://github.com/bytecodealliance/componentize-py?tab=readme-ov-file#getting-started</a><br>\nThat example is exporting the interface, but in your version from the Python component it sounds like you'll want to import the interface.</p>\n</blockquote>\n<p>Thank you for your reply.</p>\n<p>I've reviewed the Rust component (calculator) example in the documentation. My needs are similar, but I require a Python version. I have searched extensively but have been unable to locate one. The available componentize-py examples focus on exporting components, whereas I specifically need the interface for importing a component into Python.</p>",
        "id": 561660396,
        "sender_full_name": "Hua",
        "timestamp": 1764770851
    },
    {
        "content": "<p>Here's a quick example of building two components using <code>componentize-py</code>, composing them, and running the result:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>mkdir<span class=\"w\"> </span>compose\n<span class=\"nb\">cd</span><span class=\"w\"> </span>compose\npython3<span class=\"w\"> </span>-m<span class=\"w\"> </span>venv<span class=\"w\"> </span>.venv\n<span class=\"nb\">source</span><span class=\"w\"> </span>.venv/bin/activate\npip<span class=\"w\"> </span>install<span class=\"w\"> </span>componentize-py\ncat<span class=\"w\"> </span>&gt;worlds.wit<span class=\"w\"> </span><span class=\"s\">&lt;&lt;EOF</span>\n<span class=\"s\">package test:test;</span>\n\n<span class=\"s\">interface foo {</span>\n<span class=\"s\">  bar: func() -&gt; string;</span>\n<span class=\"s\">}</span>\n\n<span class=\"s\">world thing1 {</span>\n<span class=\"s\">  export foo;</span>\n<span class=\"s\">}</span>\n\n<span class=\"s\">world thing2 {</span>\n<span class=\"s\">  import foo;</span>\n<span class=\"s\">  export run: func() -&gt; string;</span>\n<span class=\"s\">}</span>\n<span class=\"s\">EOF</span>\ncat<span class=\"w\"> </span>&gt;mything1.py<span class=\"w\"> </span><span class=\"s\">&lt;&lt;EOF</span>\n<span class=\"s\">from wit_world import exports</span>\n\n<span class=\"s\">class Foo(exports.Foo):</span>\n<span class=\"s\">    def bar(self) -&gt; string:</span>\n<span class=\"s\">        return \"Hello, world!\"</span>\n<span class=\"s\">EOF</span>\ncat<span class=\"w\"> </span>&gt;mything2.py<span class=\"w\"> </span><span class=\"s\">&lt;&lt;EOF</span>\n<span class=\"s\">import wit_world</span>\n<span class=\"s\">from wit_world.imports import foo</span>\n\n<span class=\"s\">class WitWorld(wit_world.WitWorld):</span>\n<span class=\"s\">    def run(self) -&gt; string:</span>\n<span class=\"s\">        return foo.bar()</span>\n<span class=\"s\">EOF</span>\ncomponentize-py<span class=\"w\"> </span>-d<span class=\"w\"> </span>worlds.wit<span class=\"w\"> </span>-w<span class=\"w\"> </span>thing1<span class=\"w\"> </span>componentize<span class=\"w\"> </span>mything1<span class=\"w\"> </span>-o<span class=\"w\"> </span>thing1.wasm\ncomponentize-py<span class=\"w\"> </span>-d<span class=\"w\"> </span>worlds.wit<span class=\"w\"> </span>-w<span class=\"w\"> </span>thing2<span class=\"w\"> </span>componentize<span class=\"w\"> </span>mything2<span class=\"w\"> </span>-o<span class=\"w\"> </span>thing2.wasm\nwasm-tools<span class=\"w\"> </span>compose<span class=\"w\"> </span>-d<span class=\"w\"> </span>thing1.wasm<span class=\"w\"> </span>thing2.wasm<span class=\"w\"> </span>-o<span class=\"w\"> </span>composed.wasm\nwasmtime<span class=\"w\"> </span>run<span class=\"w\"> </span>--invoke<span class=\"w\"> </span><span class=\"s1\">'run()'</span><span class=\"w\"> </span>composed.wasm\n</code></pre></div>",
        "id": 561688967,
        "sender_full_name": "Joel Dice",
        "timestamp": 1764776812
    }
]