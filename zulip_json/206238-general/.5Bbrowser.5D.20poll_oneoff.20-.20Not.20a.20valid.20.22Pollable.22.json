[
    {
        "content": "<p>TLDR: when my component calls WASI poll_oneoff it fails with \"Not a valid 'Pollable' resource\"</p>\n<p>This is a real hack, but I hope I can be pointed in the right direction as I can't find any resources for more info on this. Background: this project is to perform patching on binary firmware files for industrial equipment. We have a working prototype via a container and need to get it out to the front line</p>\n<p>We use Container2WASM (<a href=\"https://github.com/container2wasm/container2wasm\">https://github.com/container2wasm/container2wasm</a>) to build the container into a WASM module (which uses WASI Preview1), then call wasm-tools to make that into a component (using the  wasm1 console adapter) and then call JCO to transpile that.</p>\n<p>The core loads and starts, but once the VM starts polling, it fails witht he following exception:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">[</span><span class=\"n\">PatchFirmware</span><span class=\"p\">]</span><span class=\"w\"> </span><span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">TypeError</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Resource</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">valid</span><span class=\"w\"> </span><span class=\"s\">\"Pollable\"</span><span class=\"w\"> </span><span class=\"n\">resource</span><span class=\"p\">.</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">trampoline6</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">js</span><span class=\"p\">:</span><span class=\"mi\">862</span><span class=\"p\">:</span><span class=\"mi\">11</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">poll_oneoff</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core2</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0x54a6</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">abba7226</span><span class=\"p\">:</span><span class=\"mh\">0x2b0</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">__imported_wasi_snapshot_preview1_poll_oneoff</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0xae85</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">__wasi_poll_oneoff</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0x70787</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">pselect</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0x6be92</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">select</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0x6c045</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">virt_machine_run</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0x9693</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0xabc5</span><span class=\"p\">)</span>\n\n<span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">__main_void</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">firmwarepatcher</span><span class=\"p\">.</span><span class=\"n\">core</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"mh\">0x6c4dc</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>Previously we were using browser_wasi_shim with C2W (<a href=\"https://github.com/bjorn3/browser_wasi_shim\">https://github.com/bjorn3/browser_wasi_shim</a>) which handled the polls correctly. We switched as that package lacks full WASI support, unlike JCO which we have successfully used for other (less janky) projects. But we haven't used it for command/CLI before, and wonder if we are missing a stdin/stdout which is causing the issue?</p>\n<p>We are working on a proper solution... I promise! But for now, we need to get this working, so any advice would be great.</p>\n<p>Here is the full build process:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">docker</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">dk</span><span class=\"o\">-</span><span class=\"n\">patcher</span><span class=\"p\">:</span><span class=\"nc\">latest</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">platform</span><span class=\"o\">=</span><span class=\"n\">linux</span><span class=\"o\">/</span><span class=\"n\">riscv64</span><span class=\"w\"> </span><span class=\"p\">.</span>\n<span class=\"n\">c2w</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"o\">-</span><span class=\"n\">arch</span><span class=\"o\">=</span><span class=\"n\">riscv64</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"w\"> </span><span class=\"n\">dk</span><span class=\"o\">-</span><span class=\"n\">patcher</span><span class=\"p\">:</span><span class=\"nc\">latest</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">temptopatch</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">tools</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">temptopatch</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">adapt</span><span class=\"w\"> </span><span class=\"n\">wasi_snapshot_preview1</span><span class=\"o\">=</span><span class=\"n\">adapter</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">temp</span><span class=\"p\">.</span><span class=\"n\">component</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">bunx</span><span class=\"w\"> </span><span class=\"o\">@</span><span class=\"n\">bytecodealliance</span><span class=\"o\">/</span><span class=\"n\">jco</span><span class=\"w\"> </span><span class=\"n\">transpile</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">temp</span><span class=\"p\">.</span><span class=\"n\">component</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"o\">../</span><span class=\"n\">webserver</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">patcher</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">dashkeepfirmwarepatcher</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">no</span><span class=\"o\">-</span><span class=\"n\">namespaced</span><span class=\"o\">-</span><span class=\"n\">exports</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"k\">async</span><span class=\"o\">-</span><span class=\"n\">mode</span><span class=\"w\"> </span><span class=\"n\">jspi</span>\n</code></pre></div>\n<p>Basic launch code:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">import</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">expose</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"s\">\"comlink\"</span><span class=\"p\">;</span>\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">instantiate</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"s\">\"$lib/patcher/firmwarepatcher\"</span><span class=\"p\">;</span>\n<span class=\"n\">import</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"n\">WASIShim</span><span class=\"p\">,</span>\n<span class=\"w\">  </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"nc\">WASIImportObject</span><span class=\"p\">,</span>\n<span class=\"w\">  </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"nc\">VersionedWASIImportObject</span><span class=\"p\">,</span>\n<span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"s\">\"@bytecodealliance/preview2-shim/instantiation\"</span><span class=\"p\">;</span>\n\n<span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">wasmModules</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">import</span><span class=\"p\">.</span><span class=\"n\">meta</span><span class=\"p\">.</span><span class=\"n\">glob</span><span class=\"p\">(</span><span class=\"s\">\"$lib/patcher/*.wasm\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"k\">as</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"url\"</span><span class=\"p\">,</span>\n<span class=\"p\">});</span>\n\n<span class=\"n\">export</span><span class=\"w\"> </span><span class=\"k\">type</span><span class=\"w\"> </span><span class=\"nc\">TPatchFirmware</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kr\">typeof</span><span class=\"w\"> </span><span class=\"n\">PatchFirmware</span><span class=\"p\">;</span>\n\n<span class=\"k\">async</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">PatchFirmware</span><span class=\"p\">(</span>\n<span class=\"w\">  </span><span class=\"n\">firmwareBuff</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">ArrayBuffer</span><span class=\"p\">,</span>\n<span class=\"w\">  </span><span class=\"n\">onStdout</span><span class=\"o\">?</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">text</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">string</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">void</span><span class=\"p\">,</span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">console</span><span class=\"p\">.</span><span class=\"n\">log</span><span class=\"p\">(</span><span class=\"s\">\"[PatchFirmware] Starting firmware patching process\"</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"k\">async</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">loader</span><span class=\"p\">(</span><span class=\"n\">path</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">string</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"k\">await</span><span class=\"w\"> </span><span class=\"n\">WebAssembly</span><span class=\"p\">.</span><span class=\"n\">compileStreaming</span><span class=\"p\">(</span>\n<span class=\"w\">        </span><span class=\"n\">fetch</span><span class=\"p\">(</span><span class=\"k\">await</span><span class=\"w\"> </span><span class=\"n\">wasmModules</span><span class=\"p\">[</span><span class=\"err\">`</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"o\">/</span><span class=\"n\">patcher</span><span class=\"o\">/</span><span class=\"cp\">$</span><span class=\"p\">{</span><span class=\"n\">path</span><span class=\"p\">}</span><span class=\"err\">`</span><span class=\"p\">]()),</span>\n<span class=\"w\">      </span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"p\">}</span>\n\n<span class=\"w\">    </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">shimCore</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">WASIShim</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"c1\">// for importing directly, i.e. wasi:cli/blah</span>\n<span class=\"w\">    </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">shim</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">shimCore</span><span class=\"p\">.</span><span class=\"n\">getImportObject</span><span class=\"p\">();</span>\n<span class=\"w\">    </span><span class=\"c1\">// For importing when a version is defined, i.e. wasi:cli/blah@0.2.6</span>\n<span class=\"w\">    </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">shimVersioned</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">VersionedWASIImportObject</span><span class=\"o\">&lt;</span><span class=\"s\">\"0.2.6\"</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"o\">=</span>\n<span class=\"w\">      </span><span class=\"n\">shimCore</span><span class=\"p\">.</span><span class=\"n\">getImportObject</span><span class=\"p\">({</span><span class=\"w\"> </span><span class=\"n\">asVersion</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"0.2.6\"</span><span class=\"w\"> </span><span class=\"p\">});</span>\n<span class=\"w\">    </span><span class=\"n\">shim</span><span class=\"w\"> </span><span class=\"n\">satisfies</span><span class=\"w\"> </span><span class=\"n\">WASIImportObject</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"n\">shim</span><span class=\"w\"> </span><span class=\"n\">satisfies</span><span class=\"w\"> </span><span class=\"n\">VersionedWASIImportObject</span><span class=\"o\">&lt;</span><span class=\"s\">\"\"</span><span class=\"o\">&gt;</span><span class=\"p\">;</span>\n<span class=\"w\">    </span><span class=\"n\">shimVersioned</span><span class=\"w\"> </span><span class=\"n\">satisfies</span><span class=\"w\"> </span><span class=\"n\">VersionedWASIImportObject</span><span class=\"o\">&lt;</span><span class=\"s\">\"0.2.6\"</span><span class=\"o\">&gt;</span><span class=\"p\">;</span>\n\n<span class=\"w\">    </span><span class=\"c1\">// @ts-ignore - We have provided it everything it needs (except for debug provisions)</span>\n<span class=\"w\">    </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">await</span><span class=\"w\"> </span><span class=\"n\">instantiate</span><span class=\"p\">(</span><span class=\"n\">loader</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"n\">shim</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"n\">shimVersioned</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">});</span>\n\n<span class=\"w\">    </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">instance</span><span class=\"p\">.</span><span class=\"n\">run</span><span class=\"p\">.</span><span class=\"n\">run</span><span class=\"p\">();</span>\n\n<span class=\"w\">    </span><span class=\"n\">console</span><span class=\"p\">.</span><span class=\"n\">log</span><span class=\"p\">(</span><span class=\"n\">result</span><span class=\"p\">);</span>\n\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"n\">success</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">true</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"n\">message</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s\">\"Firmware patched successfully\"</span><span class=\"p\">,</span>\n<span class=\"w\">      </span><span class=\"n\">result</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"p\">};</span>\n<span class=\"w\">  </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">catch</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">error</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"n\">console</span><span class=\"p\">.</span><span class=\"n\">error</span><span class=\"p\">(</span><span class=\"s\">\"[PatchFirmware] Error:\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">);</span>\n<span class=\"w\">    </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">;</span>\n<span class=\"w\">  </span><span class=\"p\">}</span>\n<span class=\"p\">}</span>\n\n<span class=\"n\">expose</span><span class=\"p\">(</span><span class=\"n\">PatchFirmware</span><span class=\"p\">);</span>\n</code></pre></div>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/container2wasm/container2wasm\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/0b20b5a89e24ea86ad1493ebd7cf115518ef80c2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f643631626136613630343238626231306339623033326439353765343462323337396134343063633536383461303365353130613939666235353361643035372f636f6e7461696e6572327761736d2f636f6e7461696e6572327761736d&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/container2wasm/container2wasm\" title=\"GitHub - container2wasm/container2wasm: Container to WASM converter\">GitHub - container2wasm/container2wasm: Container to WASM converter</a></div><div class=\"message_embed_description\">Container to WASM converter. Contribute to container2wasm/container2wasm development by creating an account on GitHub.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bjorn3/browser_wasi_shim\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/00626045240e59e8fa9fbf1f44104510d307d09a/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f386564393531346133353531333366373337303235643432663237633437646234373838333139393130386466316131346438303530653463356130306530662f626a6f726e332f62726f777365725f776173695f7368696d&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bjorn3/browser_wasi_shim\" title=\"GitHub - bjorn3/browser_wasi_shim: A WASI shim for in the browser\">GitHub - bjorn3/browser_wasi_shim: A WASI shim for in the browser</a></div><div class=\"message_embed_description\">A WASI shim for in the browser. Contribute to bjorn3/browser_wasi_shim development by creating an account on GitHub.</div></div></div>",
        "id": 547838957,
        "sender_full_name": "Ed",
        "timestamp": 1761787806
    },
    {
        "content": "<p>This could range anywhere from a bug in the original code to a bug in c2w to a bug in wasm-tools to a bug in jco to a bug in browsers. If the starting point is an entire container compiled to wasm it's going to be quite difficult to try to reduce that at all or narrow down what's going on. My only wild guess at this point would be that it's UB and some out-of-bounds write or something like that corrupting the state of the wasi adapter. I have no real reason to suspect that over anything else, though.</p>",
        "id": 553198040,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1762039170
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"253994\">@Alex Crichton</span> - I figured it was predominantly due to the browser implementation being essentially in a skeleton state. It worked on the node version fine. I did try to shim, which did work but added a bit too much complexity, so ended up taking a different approach.  I think instead of JCO having separate node and browser code versions they should follow the same codebase with different compatible dependencies</p>",
        "id": 553201980,
        "sender_full_name": "Ed",
        "timestamp": 1762043730
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"983594\">@Ed</span> sorry a bit late here, but didn't realize this was about Jco -- yes the browser code is still very experimental (and is just missing some bits), so if things worked fine in the Node version, this is almost surely the browser shims not being up to snuff. </p>\n<p>The community does use some other shims for the browser (so you could look at  those), but also happy to take any PRs if you're motivated to improve the browser shims! <span aria-label=\"bow\" class=\"emoji emoji-1f647\" role=\"img\" title=\"bow\">:bow:</span></p>",
        "id": 553913164,
        "sender_full_name": "Victor Adossi",
        "timestamp": 1762361844
    }
]