[
    {
        "content": "<p>Hi Y'all! I'm working on a Spin SDK for Go, and I'm trying to troubleshoot a WIT-related error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"n\">inside</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"o\">/</span><span class=\"n\">examples</span><span class=\"o\">/</span><span class=\"n\">spin</span><span class=\"o\">-</span><span class=\"n\">basic</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">spin</span><span class=\"w\"> </span><span class=\"n\">up</span>\n<span class=\"n\">Logging</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"n\">stdio</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"s\">\".spin/logs/\"</span>\n<span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">resolve</span><span class=\"w\"> </span><span class=\"n\">dependencies</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"s\">\"spin-basic\"</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">an</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">occurred</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">preparing</span><span class=\"w\"> </span><span class=\"n\">dependencies</span>\n<span class=\"w\">   </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">decode</span><span class=\"w\"> </span><span class=\"n\">world</span><span class=\"w\"> </span><span class=\"n\">from</span><span class=\"w\"> </span><span class=\"n\">module</span>\n<span class=\"w\">   </span><span class=\"mi\">2</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">reduce</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"n\">adapter</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">its</span><span class=\"w\"> </span><span class=\"n\">minimal</span><span class=\"w\"> </span><span class=\"n\">size</span>\n<span class=\"w\">   </span><span class=\"mi\">3</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">adapter</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">have</span><span class=\"w\"> </span><span class=\"n\">export</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">wasi</span><span class=\"p\">:</span><span class=\"nc\">otel</span><span class=\"o\">/</span><span class=\"n\">tracing</span><span class=\"o\">@</span><span class=\"mf\">0.2.0</span><span class=\"o\">-</span><span class=\"n\">draft</span><span class=\"p\">:</span><span class=\"nc\">outer</span><span class=\"o\">-</span><span class=\"n\">span</span><span class=\"o\">-</span><span class=\"n\">context</span><span class=\"err\">`</span>\n</code></pre></div>\n<p>I <strong><em>think</em></strong> I'm properly generating the bindings (intellisense works):</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">#</span><span class=\"w\"> </span><span class=\"n\">Commands</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"o\">/</span><span class=\"n\">Makefile</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">wkg</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">../</span><span class=\"n\">wit</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">wkg</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">../</span><span class=\"n\">wit</span>\n<span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">tool</span><span class=\"w\"> </span><span class=\"n\">wit</span><span class=\"o\">-</span><span class=\"n\">bindgen</span><span class=\"o\">-</span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">generate</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">world</span><span class=\"w\"> </span><span class=\"n\">imports</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">internal</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"o\">/</span><span class=\"n\">wasi</span><span class=\"p\">:</span><span class=\"nc\">otel</span><span class=\"o\">@</span><span class=\"mf\">0.2.0</span><span class=\"o\">-</span><span class=\"n\">draft</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n</code></pre></div>\n<p>I'm certain it's not an issue with the WIT files not exporting <code>outer-span-context</code>, which leads me to guess that I'm not properly pulling the dependencies together. Any thoughts?</p>\n<p>Link to my code: <a href=\"https://github.com/asteurer/opentelemetry-wasi/tree/go/go\">https://github.com/asteurer/opentelemetry-wasi/tree/go/go</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/asteurer/opentelemetry-wasi/tree/go/go\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/6f0507bd21f9cbb412a41f789fa819dc819b2f87/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663337613731653533323165653136383661623462613037363165633931343330303464326565626362333431326331373030363864323565663436383032372f61737465757265722f6f70656e74656c656d657472792d77617369&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/asteurer/opentelemetry-wasi/tree/go/go\" title=\"opentelemetry-wasi/go at go · asteurer/opentelemetry-wasi\">opentelemetry-wasi/go at go · asteurer/opentelemetry-wasi</a></div><div class=\"message_embed_description\">Libraries to enable using OpenTelemetry within WebAssembly components backed by WASI OTel - asteurer/opentelemetry-wasi</div></div></div>",
        "id": 526229379,
        "sender_full_name": "Andrew Steurer",
        "timestamp": 1751146166
    },
    {
        "content": "<p>For context this work is related to <a class=\"stream\" data-stream-id=\"431443\" href=\"/#narrow/channel/431443-wasi-observe\">#wasi-observe</a> </p>\n<p>Are you using the special version of Spin that implements wasi-otel?</p>",
        "id": 527044807,
        "sender_full_name": "Caleb Schoepp",
        "timestamp": 1751563641
    },
    {
        "content": "<p>Yes</p>",
        "id": 527044984,
        "sender_full_name": "Andrew Steurer",
        "timestamp": 1751563721
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"932703\">@Andrew Steurer</span> I think you'd get more responses in the cncf Slack's <code>spin</code> channel, as this Zulip is very much focused on Bytecode Alliance-hosted projects</p>",
        "id": 527761406,
        "sender_full_name": "Till Schneidereit",
        "timestamp": 1752003551
    }
]