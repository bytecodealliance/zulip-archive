[
    {
        "content": "<p>When this project was initially created, we didn't have the wasm32-wasip2 target, and this project was quite helpful in creating wasm components from Rust. Today, this project needs quite a bit of love and dedicated maintainership that may not be worth the effort. This has previously been brought up in threads like <a class=\"stream-topic\" data-stream-id=\"407292\" href=\"/#narrow/channel/407292-cargo-component/topic/Rust.20toolchain.20vs.20cargo.20component/with/516717067\">#cargo-component &gt; Rust toolchain vs cargo component</a>.</p>\n<p>As such, the TSC is considering archiving this project. If anyone ever wanted to pick it back up and fix it up, it could be un-archived in the future.</p>\n<p>Are there any thoughts from previous maintainers? cc <span class=\"user-mention\" data-user-id=\"254083\">@Dan Gohman</span> <span class=\"user-mention\" data-user-id=\"344849\">@Yosh Wuyts</span> <span class=\"user-mention\" data-user-id=\"253992\">@Pat Hickey</span> <span class=\"user-mention\" data-user-id=\"479055\">@Calvin Prewitt</span> <span class=\"user-mention\" data-user-id=\"253994\">@Alex Crichton</span></p>",
        "id": 536296531,
        "sender_full_name": "Oscar Spencer",
        "timestamp": 1756234979
    },
    {
        "content": "<p>Personally I think this makes sense to do. There's going to be a long tail of documentation to update so I think it'd be good to have two prereqs for this:</p>\n<ul>\n<li>Have one \"canonical location\" which explains how to compile Rust to wasm32-wasip2. This'd likely be <a href=\"http://component-model.bytecodealliance.org\">component-model.bytecodealliance.org</a> for example</li>\n<li>Leave a note in the cargo-component README explaining how the tool was historically used and link to this \"one location\" for up-to-date documentation.</li>\n</ul>",
        "id": 536297194,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1756235287
    },
    {
        "content": "<p>that'd then enable slowly updating docs over time without having to update everything all at once</p>",
        "id": 536297233,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1756235305
    },
    {
        "content": "<p>Makes sense to archive. Currently, we lack the resources to support the project. The one thing that I really will miss is <code>cargo component new --target</code> to scaffold out a new component that targets a WIT world.</p>",
        "id": 536298124,
        "sender_full_name": "Calvin Prewitt",
        "timestamp": 1756235722
    },
    {
        "content": "<p>Not quite the same as <code>cargo component new --target</code>, but for http driven components, this is a great starting point: <a href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\">https://github.com/bytecodealliance/sample-wasi-http-rust</a></p>\n<p>It's easy enough to tweak that template to whatever custom wit you may need.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/af234a4f4dd28c55d38810ac96702e729b412610/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f323136333831666662616438613735363835346232346664383330633161306232383036653963386366646163653935383932626436333735616230326239382f62797465636f6465616c6c69616e63652f73616d706c652d776173692d687474702d72757374&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\" title=\"GitHub - bytecodealliance/sample-wasi-http-rust: An example `wasi:http` server component written in Rust\">GitHub - bytecodealliance/sample-wasi-http-rust: An example `wasi:http` server component written in Rust</a></div><div class=\"message_embed_description\">An example `wasi:http` server component written in Rust - bytecodealliance/sample-wasi-http-rust</div></div></div>",
        "id": 536298382,
        "sender_full_name": "Bailey Hayes",
        "timestamp": 1756235858
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"421591\">Bailey Hayes</span> <a href=\"#narrow/channel/407292-cargo-component/topic/On.20archiving.20cargo-component/near/536298382\">said</a>:</p>\n<blockquote>\n<p>Not quite the same as <code>cargo component new --target</code>, but for http driven components, this is a great starting point: <a href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\">https://github.com/bytecodealliance/sample-wasi-http-rust</a></p>\n<p>It's easy enough to tweak that template to whatever custom wit you may need.</p>\n</blockquote>\n<p>Yeah, I meant specifically for custom WIT packages.</p>",
        "id": 536298620,
        "sender_full_name": "Calvin Prewitt",
        "timestamp": 1756235973
    },
    {
        "content": "<p>This makes sense to me too.</p>",
        "id": 536320629,
        "sender_full_name": "Dan Gohman",
        "timestamp": 1756247243
    },
    {
        "content": "<p>my proposal is that we can find a way to add that sort of templating in the wit-bindgen-cli <code>rust</code> subcommand</p>",
        "id": 536322824,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756248513
    },
    {
        "content": "<p>thats a very small piece of functionality compared to the current complexity of cargo-component, and it could dovetail well with other features to make wit-bindgen-cli more capable, e.g. giving it library use of wkg so that it can automatically get wasi and other published wits without needing the filesystem.</p>",
        "id": 536322950,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756248601
    },
    {
        "content": "<p>until those ideas are implemented, we should have <a href=\"http://component-model.bytecodealliance.org\">component-model.bytecodealliance.org</a> have the canonical docs alex suggests, for rust guests it should document that if you're just using wasi you can just <code>cargo add wasi</code> and use the bindings provided by that crate, if you want an even higher level binding for cli or proxy world then <code>cargo add wstd</code> and use that crate, and if you are using your own wits here is how you can put them in the filesystem and invoke wit-bindgen as a proc macro to use them.</p>",
        "id": 536323188,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756248755
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"938242\">@Tim Chevalier</span> is on vacation right now but he's been doing excellent work updating the component-model site, we can ask him to work on that when he returns.</p>",
        "id": 536323279,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756248824
    },
    {
        "content": "<p>I understand the decision to archive it and support it. Though one thing we will be losing out on because of that is automatic SBOM generation support that we currently use in <a href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\">https://github.com/bytecodealliance/sample-wasi-http-rust</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/6d40d0a5c325254ab4f2df8ea7c61b8b3e5560ff/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f623664626264626166616661616435316137373039336332346134383637303234346162333037386465613231633661663166383966623138383231303832372f62797465636f6465616c6c69616e63652f73616d706c652d776173692d687474702d72757374&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/sample-wasi-http-rust\" title=\"GitHub - bytecodealliance/sample-wasi-http-rust: An example `wasi:http` server component written in Rust\">GitHub - bytecodealliance/sample-wasi-http-rust: An example `wasi:http` server component written in Rust</a></div><div class=\"message_embed_description\">An example `wasi:http` server component written in Rust - bytecodealliance/sample-wasi-http-rust</div></div></div>",
        "id": 536441780,
        "sender_full_name": "Yosh Wuyts",
        "timestamp": 1756307219
    },
    {
        "content": "<p>does <code>cargo auditable build --target wasm32-wasip2</code> work for that?</p>",
        "id": 536441864,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756307245
    },
    {
        "content": "<p>Oh! Yeah I think it should actually!</p>",
        "id": 536441920,
        "sender_full_name": "Yosh Wuyts",
        "timestamp": 1756307260
    },
    {
        "content": "<p>I forgot about that</p>",
        "id": 536441936,
        "sender_full_name": "Yosh Wuyts",
        "timestamp": 1756307264
    },
    {
        "content": "<p>Yes, perfect - SBOM support _is_ being upstreamed to Cargo proper right now too (though not just for wasm targets), so that will give us a long term story here too. But in the short term we can just keep pointing at <code>cargo-auditable</code>. I like that ^^</p>",
        "id": 536442206,
        "sender_full_name": "Yosh Wuyts",
        "timestamp": 1756307347
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253992\">Pat Hickey</span> <a href=\"#narrow/channel/407292-cargo-component/topic/On.20archiving.20cargo-component/near/536322950\">said</a>:</p>\n<blockquote>\n<p>a very small piece of functionality compared to the current complexity of cargo-component, and it could dovetail well with other features to make wit-bindgen-cli more capable, e.g. giving it library use of wkg so that it can automatically get wasi and other published wits without needing the filesystem.</p>\n</blockquote>\n<p>Would it make sense to go ahead and create an issue for this in <code>wit-bindgen</code>?  The one thing that I currently find cargo-component uniquely good at is just fetching the wit I need whenever I run <code>cargo-component build</code>, and this I think would really help with not having to instruct users to run a separate set of <code>wkg</code> commands before doing their build.</p>",
        "id": 536453534,
        "sender_full_name": "Daniel Macovei",
        "timestamp": 1756310718
    },
    {
        "content": "<p>yeah id like for wit-bindgen cli to be able to do the wkg bits</p>",
        "id": 536461335,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756313402
    },
    {
        "content": "<p>so file an issue describing how youd imagine that working and then others can give real feedback on whether thats a good idea or not</p>",
        "id": 536461408,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1756313429
    },
    {
        "content": "<p>I appreciate the discussion, folks! The TSC will make sure the README and component model book gets updated before we archive the project. Thanks all!</p>",
        "id": 536482464,
        "sender_full_name": "Oscar Spencer",
        "timestamp": 1756321830
    },
    {
        "content": "<p>Hi, I'm using the component model (and hence cargo-component) but I'm not using wasi nor do I plan to ( the targets I use are <code>wasm32v1-none</code> or <code>wasm32-unknown-unknown</code>). In the event of the archival of cargo-component, is there a documented alternative to create components ?</p>",
        "id": 540418368,
        "sender_full_name": "Antoine Lavandier",
        "timestamp": 1758276441
    },
    {
        "content": "<p>I assume you're using the <code>wit-bindgen</code> macros? In that case, you can use <code>wasm-tools component new</code> to turn your module into a component</p>",
        "id": 540421152,
        "sender_full_name": "Till Schneidereit",
        "timestamp": 1758277474
    },
    {
        "content": "<p>it's a good question though whether there might be room for a target like <code>wasm32-unknown-component</code> (probably not quite under that name)</p>",
        "id": 540421326,
        "sender_full_name": "Till Schneidereit",
        "timestamp": 1758277546
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"234973\">Till Schneidereit</span> <a href=\"#narrow/channel/407292-cargo-component/topic/On.20archiving.20cargo-component/near/540421152\">said</a>:</p>\n<blockquote>\n<p>I assume you're using the <code>wit-bindgen</code> macros? In that case, you can use <code>wasm-tools component new</code> to turn your module into a component</p>\n</blockquote>\n<p>I was using them but through <code>cargo-component</code> so I didn't realize what was needed to migrate away from <code>cargo-component</code>. Thanks for pointing me in the right direction. I will miss the one stop shop of <code>cargo component  build</code> but doing <code>cargo build</code> and then <code>wasm-tools component new</code> is not too bad.</p>",
        "id": 540442324,
        "sender_full_name": "Antoine Lavandier",
        "timestamp": 1758284571
    },
    {
        "content": "<p>If you'd like you can pass <code>-Clinker=wasm-component-ld</code> to skip the <code>wasm-tools component new</code> step, for example:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">$</span><span class=\"w\"> </span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"o\">=</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">component</span><span class=\"o\">-</span><span class=\"n\">ld</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">wasm32</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span>\n<span class=\"n\">foo</span><span class=\"p\">.</span><span class=\"n\">wasm</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">WebAssembly</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">wasm</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"n\">binary</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mh\">0x1000d</span>\n</code></pre></div>",
        "id": 540473491,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1758293052
    },
    {
        "content": "<p>Are there some early docs demonstrating how to get the same basic functionality of <code>cargo component build</code> with native+additional tools?</p>\n<p>Specifically in the case of having the WIT defined on a remote registry like <code>wa.dev</code></p>",
        "id": 541638115,
        "sender_full_name": "dakom",
        "timestamp": 1758883684
    },
    {
        "content": "<p>You should be able to get the same functionality by using wit-bindgen's <code>generate</code> macro after using <code>wasm-pkg-tools</code> to fetch all of your wit dependencies.  Don't want to clog the <code>cargo-component</code> thread too much with how to use <code>wa.dev</code> specifically, but if you'd like I'd be happy to chat with you over DMs about how you can do what you were doing with <code>cargo-component</code></p>",
        "id": 541703567,
        "sender_full_name": "Daniel Macovei",
        "timestamp": 1758902933
    }
]