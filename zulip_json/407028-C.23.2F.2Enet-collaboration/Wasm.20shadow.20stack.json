[
    {
        "content": "<p>Hi. I am using ilc with llvm (from componentize-dotnet) on linux to build a wasm executable. I am linking the bc files generated by ilc together with a C-based library (built with emscripten), and am trying to call from C# into C by declaring methods like this:</p>\n<p>[RuntimeImport(Path, nameof(CreateWorld))]<br>\n[MethodImpl(MethodImplOptions.InternalCall)]<br>\npublic static extern World* CreateWorld();</p>\n<p>This works for native excecutables, but in wasm i get a mismatch in calling conventions between emscripten and ilc. ilc seems to add an additional first parameter to each function, which I think is used to manage a shadow stack used by the GC. I have two questions:</p>\n<ol>\n<li>Can I somehow declare external methods as not using this calling convention and drop the first parameter?</li>\n<li>Can I tell ilc to completely disable the shadow stack, as we have a scenario where we use the C# language, but all data is unmanaged, and we don't need a GC.</li>\n</ol>\n<p>(Also, is this the right place for such questions? If not, do you know what is? Thanks!)</p>",
        "id": 511637248,
        "sender_full_name": "jonas echterhoff",
        "timestamp": 1744373960
    },
    {
        "content": "<p>it's the right place!</p>",
        "id": 511651423,
        "sender_full_name": "Ralph",
        "timestamp": 1744377954
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"890337\">@jonas echterhoff</span> I don't know the answer to that one of the top of my head. <span class=\"user-mention\" data-user-id=\"395878\">@Scott Waye</span> might and there are some folks who maintain that part of the stack in the .net llvm discord channel <a href=\"https://discord.com/channels/143867839282020352/1141126727028985877\">https://discord.com/channels/143867839282020352/1141126727028985877</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://discord.com/channels/143867839282020352/1141126727028985877\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/29a8c83fbc739f313cf0caf7112e41651b8deb75/68747470733a2f2f63646e2e646973636f72646170702e636f6d2f6173736574732f6f675f696d675f646973636f72645f686f6d652e706e67&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://discord.com/channels/143867839282020352/1141126727028985877\" title=\"Discord - Group Chat That’s All Fun &amp; Games\">Discord - Group Chat That’s All Fun &amp; Games</a></div><div class=\"message_embed_description\">Discord is great for playing games and chilling with friends, or even building a worldwide community. Customize your own space to talk, play, and hang out.</div></div></div>",
        "id": 511687441,
        "sender_full_name": "James Sturtevant",
        "timestamp": 1744387462
    },
    {
        "content": "<p>Thanks! I'm going on vacation today, but will follow up on discord once I'm back (unless someone here will have the answer until then).</p>",
        "id": 511801389,
        "sender_full_name": "jonas echterhoff",
        "timestamp": 1744456065
    }
]