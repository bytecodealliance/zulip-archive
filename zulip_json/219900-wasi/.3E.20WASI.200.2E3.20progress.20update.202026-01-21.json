[
    {
        "content": "<p>Due to the US holiday yesterday we didn't have the meeting but wanted to give an update on my side:</p>\n<p>A large chunk of work in getting the semantics (mostly async tasks, subtasks, etc) along with upstream tests passing (error context, back pressure, yielding, some others) has <a href=\"https://github.com/bytecodealliance/jco/pull/1151\">landed</a> in jco (the name of the PR is misleading but was relevant to close a user issue that was filed -- individual commits tell the story better).</p>\n<p>Now I'm on to updating to the latest upstream libs w/ the changes from the last couple months, and that <a href=\"https://github.com/bytecodealliance/jco/pull/1203\">is going fine</a>, what I'm working on now is re-generating all the wasm binaries we store in Jco currently (for simplicity's sake) and dealing with the somewhat new behavior (there's a bit more waitable set polling, the same components seem to export a few more on-by-deafult stream/future related exports IIRC mostly related to stdin/stdout, etc).</p>\n<p>Once the upstream deps update PR merges I'll be going back to finishing out porting the upstream P3 \"base\" tests (streams, futures, async sematics, etc) which is already underway. Once the base tests are in, we can start (and split up) work for the P3 shim tests (i.e. clocks, http, etc).</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/jco/pull/1151\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/50ca06c323220dfdcf78ba68c1e59ec51913c158/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f613864396166323866356236396366303533306462656266386137333231616365616236333933613936366564393836393163623838623432633266316333632f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f31313531&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/jco/pull/1151\" title=\"test(jco): add basic async num returning test by vados-cosmonic · Pull Request #1151 · bytecodealliance/jco\">test(jco): add basic async num returning test by vados-cosmonic · Pull Request #1151 · bytecodealliance/jco</a></div><div class=\"message_embed_description\">This should be merged after #1094</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/jco/pull/1203\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/3af9c86be36c45c673c904cf1ef834ce979649b2/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f353236633632373732373261646530653631333236646338613336313666616530363934663866656438636261366432336131386237646563383436373164342f62797465636f6465616c6c69616e63652f6a636f2f70756c6c2f31323033&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/jco/pull/1203\" title=\"chore(jco): update upstream deps by vados-cosmonic · Pull Request #1203 · bytecodealliance/jco\">chore(jco): update upstream deps by vados-cosmonic · Pull Request #1203 · bytecodealliance/jco</a></div><div class=\"message_embed_description\">We read every piece of feedback, and take your input very seriously.</div></div></div>",
        "id": 569066896,
        "sender_full_name": "Victor Adossi",
        "timestamp": 1768924829
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"344849\">@Yosh Wuyts</span> <span class=\"user-mention\" data-user-id=\"253994\">@Alex Crichton</span> <span class=\"user-mention\" data-user-id=\"509936\">@Joel Dice</span> <span class=\"user-mention\" data-user-id=\"484032\">@Roman Volosatovs</span> </p>\n<p>Thanks to Alex and Luke for the help in the bits that have landed as IIRC I needed help on the impl/spec translation there.</p>",
        "id": 569067319,
        "sender_full_name": "Victor Adossi",
        "timestamp": 1768924925
    },
    {
        "content": "<p>FWIW, things have been progressing (though a bit slowly) on wasi-testsuite for wasip3.</p>\n<p>Finally we landed initial support for testing sockets via a test suite description that can script the interaction between the test runner and the component under test, allowing us to connect to sockets, expect that reading from a socket produces the right data, respond, etc.  this extends the json specification that we used to have.  there is code in wasi-testsuite to automatically translate an instance of the older way of writing those json files to the newer script format, and we have left existing tests as they are.</p>\n<p>Documentation here: <a href=\"https://github.com/WebAssembly/wasi-testsuite/blob/main/doc/specification.md\">https://github.com/WebAssembly/wasi-testsuite/blob/main/doc/specification.md</a></p>\n<p>Minimal example here: <a href=\"https://github.com/WebAssembly/wasi-testsuite/blob/main/tests/rust/wasm32-wasip3/src/bin/sockets-echo.json\">https://github.com/WebAssembly/wasi-testsuite/blob/main/tests/rust/wasm32-wasip3/src/bin/sockets-echo.json</a></p>\n<p>There are some pending PRs for more functionality.  All credit to <span class=\"user-mention\" data-user-id=\"411395\">@Saúl Cabrera</span> for the good things and blame to me for bugs :)</p>\n<p>For wasip3 implementations:</p>\n<ul>\n<li>\n<p>I would like to merge support for jco whenever that is ready; last I looked, things were not quite there yet: <a href=\"https://github.com/WebAssembly/wasi-testsuite/pull/165#issuecomment-3669640418\">https://github.com/WebAssembly/wasi-testsuite/pull/165#issuecomment-3669640418</a></p>\n</li>\n<li>\n<p>Need to sync with wasmtime folks to see about adapting their test harness to eagerly reject new-style test specifications (json files), and see if they are willing to implement the newer protocol</p>\n</li>\n</ul>\n<p>Hoping to finish sockets, http, and command tests for the week after FOSDEM, i.e. in two weeks or so.</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-testsuite/blob/main/doc/specification.md\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/1f858a4deb77c750fd1c4842785bb93ee81e87c0/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f393135336561356130316139373834656339646330616633333231666664316434336164333461623938636136303662643461393438323237616464303231342f576562417373656d626c792f776173692d746573747375697465&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-testsuite/blob/main/doc/specification.md\" title=\"wasi-testsuite/doc/specification.md at main · WebAssembly/wasi-testsuite\">wasi-testsuite/doc/specification.md at main · WebAssembly/wasi-testsuite</a></div><div class=\"message_embed_description\">WASI Testsuite. Contribute to WebAssembly/wasi-testsuite development by creating an account on GitHub.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-testsuite/blob/main/tests/rust/wasm32-wasip3/src/bin/sockets-echo.json\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/1f858a4deb77c750fd1c4842785bb93ee81e87c0/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f393135336561356130316139373834656339646330616633333231666664316434336164333461623938636136303662643461393438323237616464303231342f576562417373656d626c792f776173692d746573747375697465&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-testsuite/blob/main/tests/rust/wasm32-wasip3/src/bin/sockets-echo.json\" title=\"wasi-testsuite/tests/rust/wasm32-wasip3/src/bin/sockets-echo.json at main · WebAssembly/wasi-testsuite\">wasi-testsuite/tests/rust/wasm32-wasip3/src/bin/sockets-echo.json at main · WebAssembly/wasi-testsuite</a></div><div class=\"message_embed_description\">WASI Testsuite. Contribute to WebAssembly/wasi-testsuite development by creating an account on GitHub.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-testsuite/pull/165#issuecomment-3669640418\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/d399d273a3702db3d1781234d1d7497525e581cc/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f343761303036623261353761383135633639306462666533383561356666656363646632633465363937313238393338376330303536383565386330636561372f576562417373656d626c792f776173692d7465737473756974652f70756c6c2f313635&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-testsuite/pull/165#issuecomment-3669640418\" title=\"Add adapter for jco by wingo · Pull Request #165 · WebAssembly/wasi-testsuite\">Add adapter for jco by wingo · Pull Request #165 · WebAssembly/wasi-testsuite</a></div><div class=\"message_embed_description\">This PR adds support for jco.  However, nothing passes yet:\n\njco run needs --env and --dir argument support\njco doesn&#39;t yet support some of the component model (lowering async imports, i think)...</div></div></div>",
        "id": 569510932,
        "sender_full_name": "Andy Wingo",
        "timestamp": 1769093743
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"396878\">@Andy Wingo</span> <br>\nMost wasi-sockets tests in wasmtime are self contained, i.e. they act as both the server _and_ the client wherever needed. AFAIK, there's no choreography between the test runner and the component to be configured.</p>\n<p>But I'm not familiar with this project, so maybe I'm misunderstanding</p>",
        "id": 569524983,
        "sender_full_name": "Dave Bakker (badeend)",
        "timestamp": 1769096652
    },
    {
        "content": "<p>right, the question is how to adapt wasmtime's runner for wasi-testsuite tests (<a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/tests/wasi.rs\">https://github.com/bytecodealliance/wasmtime/blob/main/tests/wasi.rs</a>) to support the kind of test that needs to be driven externally</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/wasmtime/blob/main/tests/wasi.rs\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/9292efdc565d4ac98b963a2da93de185e648a889/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f363432636134353465356439626439663037383035343130663466656537336237346365346661646465333834326563396166313939323031316132646461652f62797465636f6465616c6c69616e63652f7761736d74696d65&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/wasmtime/blob/main/tests/wasi.rs\" title=\"wasmtime/tests/wasi.rs at main · bytecodealliance/wasmtime\">wasmtime/tests/wasi.rs at main · bytecodealliance/wasmtime</a></div><div class=\"message_embed_description\">A lightweight WebAssembly runtime that is fast, secure, and standards-compliant - bytecodealliance/wasmtime</div></div></div>",
        "id": 569525563,
        "sender_full_name": "Andy Wingo",
        "timestamp": 1769096766
    },
    {
        "content": "<p>i.e. not wasmtime's own tests, but the ones that come from wasi-testsuite</p>",
        "id": 569525875,
        "sender_full_name": "Andy Wingo",
        "timestamp": 1769096834
    },
    {
        "content": "<p>Just to add a bit more context: most of the sockets tests are indeed self-contained as of the latest progress in the wasi-testsuite, where the new configuration becomes relevant IMHO is for testing the http handlers.</p>",
        "id": 569527846,
        "sender_full_name": "Saúl Cabrera",
        "timestamp": 1769097260
    }
]