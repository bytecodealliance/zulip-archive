[
    {
        "content": "<p>hey tx for comments, fwiw I was just following wasi-sdk README; to build the toolchain:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cmake</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Ninja</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">DWASI_SDK_BUILD_TOOLCHAIN</span><span class=\"o\">=</span><span class=\"n\">ON</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">DCMAKE_INSTALL_PREFIX</span><span class=\"o\">=</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">install</span>\n<span class=\"n\">cmake</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">install</span>\n</code></pre></div>\n<p>Then to build the sysroot:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">cmake</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Ninja</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">sysroot</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"err\">\\</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"n\">DCMAKE_INSTALL_PREFIX</span><span class=\"o\">=</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">install</span><span class=\"w\"> </span><span class=\"err\">\\</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"n\">DCMAKE_TOOLCHAIN_FILE</span><span class=\"o\">=</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">install</span><span class=\"o\">/</span><span class=\"n\">share</span><span class=\"o\">/</span><span class=\"n\">cmake</span><span class=\"o\">/</span><span class=\"n\">wasi</span><span class=\"o\">-</span><span class=\"n\">sdk</span><span class=\"p\">.</span><span class=\"n\">cmake</span><span class=\"w\"> </span><span class=\"err\">\\</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"n\">DCMAKE_C_COMPILER_WORKS</span><span class=\"o\">=</span><span class=\"n\">ON</span><span class=\"w\"> </span><span class=\"err\">\\</span>\n<span class=\"w\">    </span><span class=\"o\">-</span><span class=\"n\">DCMAKE_CXX_COMPILER_WORKS</span><span class=\"o\">=</span><span class=\"n\">ON</span>\n<span class=\"n\">cmake</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">sysroot</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">install</span>\n</code></pre></div>\n<p>I was unable to find the combination of <code>--sysroot</code> and <code>-resource-dir</code> to produce a working in-tree toolchain yesterday; will spend a few minutes seeing if there is a fix, otherwise i will see about installing to /opt; will let you know.</p>",
        "id": 534374577,
        "sender_full_name": "Andy Wingo",
        "timestamp": 1755155103
    },
    {
        "content": "<p>ok, found out the deal: one must add <code>-DWASI_SDK_INSTALL_TO_CLANG_RESOURCE_DIR=ON</code> to the sysroot build.  then the compiler appears to work fine without needing any <code>--sysroot</code> or <code>-resource-dir</code> flag</p>",
        "id": 534413815,
        "sender_full_name": "Andy Wingo",
        "timestamp": 1755156816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"396878\">Andy Wingo</span> has marked this topic as resolved.</p>",
        "id": 534414329,
        "sender_full_name": "Notification Bot",
        "timestamp": 1755156855
    }
]