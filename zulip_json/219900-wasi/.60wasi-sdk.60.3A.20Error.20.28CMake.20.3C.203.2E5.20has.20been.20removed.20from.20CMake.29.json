[
    {
        "content": "<p>Hi,</p>\n<p>Just curious about the best path forward regarding CMake versions when using <code>wasi-sdk</code> and other repositories where <code>wasi-sdk</code> is a dependency. I submitted an issue in the <code>WebAssembly/wasi-sdk</code> repository with some additional details.</p>\n<p><a href=\"https://github.com/WebAssembly/wasi-sdk/issues/529\">https://github.com/WebAssembly/wasi-sdk/issues/529</a>.</p>\n<p>Thanks<br>\nTim</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-sdk/issues/529\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/242542b094ba2ddbce5e575eb493045117df2e57/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f373861373532346164313535306232653031653234323636643462623763633039653336663766616664626334633666393531623730393062356132346138622f576562417373656d626c792f776173692d73646b2f6973737565732f353239&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-sdk/issues/529\" title=\"Compatibility with CMake &lt; 3.5 has been removed from CMake. · Issue #529 · WebAssembly/wasi-sdk\">Compatibility with CMake &lt; 3.5 has been removed from CMake. · Issue #529 · WebAssembly/wasi-sdk</a></div><div class=\"message_embed_description\">Hi, I see that wasi-sdk has cmake_minimum_required(VERSION 3.22) set in tests/CMakeLists.txt and cmake_minimum_required(VERSION 3.26) set in wasi-sdk/CMakeLists.txt. Compatibility with versions of ...</div></div></div>",
        "id": 517035025,
        "sender_full_name": "Timothy McCallum",
        "timestamp": 1746770194
    },
    {
        "content": "<p>I now realise where the error came from. </p>\n<p>The <a href=\"https://github.com/bytecodealliance/StarlingMonkey/blob/4051ee1e72b8c9ae49cc78140529fb6198992760/cmake/wasi-sdk.cmake#L1\">StarlingMonkey/cmake) /wasi-sdk.cmake file</a> uses <code>WASI_SDK_VERSION 20</code> which in turn fetches an older <code>wasi-sdk/share/cmake/wasi-sdk.cmake</code> file that contains the <code>cmake_minimum_required(VERSION 3.4.0)</code> and hence the issue (when I am installing StarlingMonkey with <code>cmake</code> 4.0.2):</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">CMake Error at deps/cpm_cache/wasi-sdk ... wasi-sdk.cmake ...</span>\n<span class=\"go\">  Compatibility with CMake &lt; 3.5 has been removed from CMake.</span>\n</code></pre></div>\n<p>I noticed this closed <code>wasi-sdk</code> PR to <a href=\"https://github.com/WebAssembly/wasi-sdk/pull/412\">\"Remove cmake_minimum_required from toolchain files\"</a>, and evidently the latest <code>wasi-sdk</code> toolchain files no longer contain the <code>cmake_minimum_required</code>, which is a solution to the issue.</p>\n<p>Can StarlingMonkey use <code>WASI_SDK_VERSION 24</code>, which is where the fix landed? I was going to ask the question via a new issue in the StarlingMonkey repo, but then noticed this issue <a href=\"https://github.com/bytecodealliance/StarlingMonkey/issues/3\">\"Make SpiderMonkey build with the latest WASI-SDK and support dynamic linking\"</a>.</p>\n<p>Any thoughts on StarlingMonkey using a newer <code>wasi-sdk</code> version?</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/StarlingMonkey/blob/4051ee1e72b8c9ae49cc78140529fb6198992760/cmake/wasi-sdk.cmake#L1\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/be0ed7df36fba7e567c939bf3a1fe565761e771f/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f663765386234343462633437333130306333316630626536333234306537383634633632393331633566663431353663653263613432366237353433356532342f62797465636f6465616c6c69616e63652f537461726c696e674d6f6e6b6579&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/StarlingMonkey/blob/4051ee1e72b8c9ae49cc78140529fb6198992760/cmake/wasi-sdk.cmake#L1\" title=\"StarlingMonkey/cmake/wasi-sdk.cmake at 4051ee1e72b8c9ae49cc78140529fb6198992760 · bytecodealliance/StarlingMonkey\">StarlingMonkey/cmake/wasi-sdk.cmake at 4051ee1e72b8c9ae49cc78140529fb6198992760 · bytecodealliance/StarlingMonkey</a></div><div class=\"message_embed_description\">The StarlingMonkey JS runtime. Contribute to bytecodealliance/StarlingMonkey development by creating an account on GitHub.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-sdk/pull/412\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/0ea86eb2e0fae4831f5a5376750a90e15babbf44/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f373562326237363537623031613166323965626531623330353466346531386566323437313031633562303834626634393661373132633863613138636533622f576562417373656d626c792f776173692d73646b2f70756c6c2f343132&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-sdk/pull/412\" title=\"Remove cmake_minimum_required from toolchain files by thewtex · Pull Request #412 · WebAssembly/wasi-sdk\">Remove cmake_minimum_required from toolchain files by thewtex · Pull Request #412 · WebAssembly/wasi-sdk</a></div><div class=\"message_embed_description\">This command is generally not included in toolchain files. It is used in\nproject configuration files that will consume the toolchain file. Also,\nsuch a low value triggers warnings, support for &lt;...</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/bytecodealliance/StarlingMonkey/issues/3\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/783a69b6ff7350039b54ab5ef8bb363e43f9cd7a/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f613031303765376634303264646139623438316532653739666561623464363161396633353762393263313630326666396166396135623930376630626164632f62797465636f6465616c6c69616e63652f537461726c696e674d6f6e6b65792f6973737565732f33&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/bytecodealliance/StarlingMonkey/issues/3\" title=\"Make SpiderMonkey build with the latest WASI-SDK and support dynamic linking · Issue #3 · bytecodealliance/StarlingMonkey\">Make SpiderMonkey build with the latest WASI-SDK and support dynamic linking · Issue #3 · bytecodealliance/StarlingMonkey</a></div><div class=\"message_embed_description\">The StarlingMonkey JS runtime. Contribute to bytecodealliance/StarlingMonkey development by creating an account on GitHub.</div></div></div>",
        "id": 517120717,
        "sender_full_name": "Timothy McCallum",
        "timestamp": 1746799779
    },
    {
        "content": "<p>Moved to <span aria-label=\"right\" class=\"emoji emoji-27a1\" role=\"img\" title=\"right\">:right:</span> <a href=\"#narrow/channel/459697-StarlingMonkey/topic/.60wasi-sdk.60.3A.20Error.20.28CMake.20.3C.203.2E5.20has.20been.20removed.20from.20CMake.29/near/517201590\">StarlingMonkey channel</a></p>",
        "id": 517203591,
        "sender_full_name": "Timothy McCallum",
        "timestamp": 1746835500
    }
]