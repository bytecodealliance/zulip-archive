[
    {
        "content": "<p>hi everyone, sorry, this is my first message here so I am not sure if I am on the right channel. But I would like to understand if WASM + wasmtime offers GPU support? I would like to develop a simple object detection service that leverages my gpu (5060 ti), and it needs to be compiled to wasm</p>",
        "id": 562161458,
        "sender_full_name": "Gustavo Jardim",
        "timestamp": 1764959424
    },
    {
        "content": "<p><a href=\"#narrow/channel/217126-wasmtime/topic/Wasmtime.20.2B.20GPU.20support/near/562161458\">A message</a> was moved here from <a class=\"stream-topic\" data-stream-id=\"217126\" href=\"/#narrow/channel/217126-wasmtime/topic/CLI.20Argument.20Options/with/562124258\">#wasmtime &gt; CLI Argument Options</a> by <span class=\"user-mention silent\" data-user-id=\"253994\">Alex Crichton</span>.</p>",
        "id": 562164247,
        "sender_full_name": "Notification Bot",
        "timestamp": 1764960504
    },
    {
        "content": "<p>Wasmtime out-of-the-box has support for wasi-nn, but whether that's what you're looking for would require someone more knowledgable than I to investigate. There's also wasi-gfx historically which has had Wasmtime support too, but that's not in bytecodealliance/wasmtime the-repo.</p>",
        "id": 562164445,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1764960590
    },
    {
        "content": "<p>Ok, thanks, I'll look into it!</p>",
        "id": 562164525,
        "sender_full_name": "Gustavo Jardim",
        "timestamp": 1764960619
    },
    {
        "content": "<p>To give a few links: <a href=\"https://github.com/WebAssembly/wasi-gfx\">wasi-gfx</a> defines some interfaces for this, and there is the <a href=\"https://github.com/wasi-gfx/wasi-gfx-runtime\">wasi-gfx-runtime</a> reference implementation</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/WebAssembly/wasi-gfx\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/d4b8ad5a3df156532eb358817667b807c694d5a4/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633462353564623337656335373034643938316539353139393331343831356365623231626135363563323439386630306464386334663665643730383236622f576562417373656d626c792f776173692d676678&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/WebAssembly/wasi-gfx\" title=\"GitHub - WebAssembly/wasi-gfx\">GitHub - WebAssembly/wasi-gfx</a></div><div class=\"message_embed_description\">Contribute to WebAssembly/wasi-gfx development by creating an account on GitHub.</div></div></div><div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/wasi-gfx/wasi-gfx-runtime\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/03969313466694318acf7692c00460349cc728e3/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f643361323363643261653066333832336162396238306263643237646664306130623866373432626466323866613937643864303766656166653961666337632f776173692d6766782f776173692d6766782d72756e74696d65&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/wasi-gfx/wasi-gfx-runtime\" title=\"GitHub - wasi-gfx/wasi-gfx-runtime\">GitHub - wasi-gfx/wasi-gfx-runtime</a></div><div class=\"message_embed_description\">Contribute to wasi-gfx/wasi-gfx-runtime development by creating an account on GitHub.</div></div></div>",
        "id": 562164532,
        "sender_full_name": "Chris Fallin",
        "timestamp": 1764960623
    },
    {
        "content": "<p>You haven't said anything about your environment and the \"needs to be compiled to Wasm\" requirement, so whether the above is viable depends on whether you are choosing your runtime (hence can choose the above) or have to deliver a portable Wasm module that works \"anywhere\"</p>",
        "id": 562164704,
        "sender_full_name": "Chris Fallin",
        "timestamp": 1764960691
    },
    {
        "content": "<p>Got it. Yeah, that's the only thing that's strict, to be compiled to WASM, simply that. The runtime is up to me</p>",
        "id": 562164905,
        "sender_full_name": "Gustavo Jardim",
        "timestamp": 1764960783
    },
    {
        "content": "<p>Aditionally, I'll be running ML inference models for the object detection. The best shot I've seen so far documented on the internet + AI search was wasmtime + wasi-nn + libtorch (pytorch). I am trying that but didn't have success so far.</p>",
        "id": 562165645,
        "sender_full_name": "Gustavo Jardim",
        "timestamp": 1764961046
    },
    {
        "content": "<p>You can consider writing your own wasmtime wasi-nn Backend for your accelerator. I've done this a couple of times for different AI Accelerators and its worked out really well. </p>\n<p>You can look at the Backend implementations included in wasmtime to see the traits you need to implement (<code>wasmtime_wasi_nn::{backend::BackendExecutionContext</code>,  <code>wasmtime_wasi_nn::{backend::BackendGraph</code> etc)</p>\n<p>I ended up having to write the Rust-&gt;C/C++ code calling the Accelerators APIs but you might be able to find that there is Rust code out there that already handles it.</p>\n<p>I ended up being able to perform the AI inference using the wasi-nn defined API from my WASM components</p>",
        "id": 562238517,
        "sender_full_name": "Richard Backhouse",
        "timestamp": 1765023291
    },
    {
        "content": "<p>A colleague suggested using host functions for my use case, and it turns out that it is suitable, so I am gonna go with that approach</p>",
        "id": 562239166,
        "sender_full_name": "Gustavo Jardim",
        "timestamp": 1765024081
    },
    {
        "content": "<p>Thanks everyone for the replies!</p>",
        "id": 562239181,
        "sender_full_name": "Gustavo Jardim",
        "timestamp": 1765024092
    }
]