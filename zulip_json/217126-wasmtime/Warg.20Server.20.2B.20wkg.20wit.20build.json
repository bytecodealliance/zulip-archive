[
    {
        "content": "<p>Hello,</p>\n<p>I have set up a warg server and have successfully published a package, <code>example:hello@0.1.0</code>.</p>\n<p>I configured my warg &amp; wkg to use the private registry. But when I run <code>wkg wit build</code>, I get the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">Unable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">resolve</span><span class=\"w\"> </span><span class=\"n\">dependencies</span>\n\n<span class=\"n\">Caused</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">registry</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">EOF</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">parsing</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"mi\">1</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">EOF</span><span class=\"w\"> </span><span class=\"k\">while</span><span class=\"w\"> </span><span class=\"n\">parsing</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>I can see these logs on warg-server:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.424813</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">warg_server</span><span class=\"p\">::</span><span class=\"n\">api</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">starting</span><span class=\"w\"> </span><span class=\"n\">GET</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"p\">.</span><span class=\"n\">well</span><span class=\"o\">-</span><span class=\"n\">known</span><span class=\"o\">/</span><span class=\"n\">wasm</span><span class=\"o\">-</span><span class=\"n\">pkg</span><span class=\"o\">/</span><span class=\"n\">registry</span><span class=\"p\">.</span><span class=\"n\">json</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.424850</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">tower_http</span><span class=\"p\">::</span><span class=\"n\">trace</span><span class=\"p\">::</span><span class=\"n\">on_response</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">finished</span><span class=\"w\"> </span><span class=\"n\">processing</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"w\"> </span><span class=\"n\">latency</span><span class=\"o\">=</span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"err\">μ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">status</span><span class=\"o\">=</span><span class=\"mi\">404</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.478089</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">warg_server</span><span class=\"p\">::</span><span class=\"n\">api</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">starting</span><span class=\"w\"> </span><span class=\"n\">GET</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">v2</span><span class=\"o\">/</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.478124</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">tower_http</span><span class=\"p\">::</span><span class=\"n\">trace</span><span class=\"p\">::</span><span class=\"n\">on_response</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">finished</span><span class=\"w\"> </span><span class=\"n\">processing</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"w\"> </span><span class=\"n\">latency</span><span class=\"o\">=</span><span class=\"mi\">41</span><span class=\"w\"> </span><span class=\"err\">μ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">status</span><span class=\"o\">=</span><span class=\"mi\">404</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.493968</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">warg_server</span><span class=\"p\">::</span><span class=\"n\">api</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">starting</span><span class=\"w\"> </span><span class=\"n\">GET</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">v2</span><span class=\"o\">/</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.494004</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">tower_http</span><span class=\"p\">::</span><span class=\"n\">trace</span><span class=\"p\">::</span><span class=\"n\">on_response</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">finished</span><span class=\"w\"> </span><span class=\"n\">processing</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"w\"> </span><span class=\"n\">latency</span><span class=\"o\">=</span><span class=\"mi\">41</span><span class=\"w\"> </span><span class=\"err\">μ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">status</span><span class=\"o\">=</span><span class=\"mi\">404</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.509961</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">warg_server</span><span class=\"p\">::</span><span class=\"n\">api</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">starting</span><span class=\"w\"> </span><span class=\"n\">GET</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">v2</span><span class=\"o\">/</span><span class=\"n\">example</span><span class=\"o\">/</span><span class=\"n\">hello</span><span class=\"o\">/</span><span class=\"n\">tags</span><span class=\"o\">/</span><span class=\"n\">list</span>\n<span class=\"n\">Feb</span><span class=\"w\"> </span><span class=\"mi\">02</span><span class=\"w\"> </span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mi\">39</span><span class=\"w\"> </span><span class=\"n\">staging</span><span class=\"p\">.</span><span class=\"n\">registry</span><span class=\"w\"> </span><span class=\"n\">warg</span><span class=\"o\">-</span><span class=\"n\">server</span><span class=\"p\">[</span><span class=\"mi\">2469</span><span class=\"p\">]:</span><span class=\"w\"> </span><span class=\"mi\">2025</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"o\">-</span><span class=\"mi\">02</span><span class=\"n\">T05</span><span class=\"p\">:</span><span class=\"mi\">05</span><span class=\"p\">:</span><span class=\"mf\">39.509996</span><span class=\"n\">Z</span><span class=\"w\">  </span><span class=\"n\">INFO</span><span class=\"w\"> </span><span class=\"n\">tower_http</span><span class=\"p\">::</span><span class=\"n\">trace</span><span class=\"p\">::</span><span class=\"n\">on_response</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"nc\">finished</span><span class=\"w\"> </span><span class=\"n\">processing</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"w\"> </span><span class=\"n\">latency</span><span class=\"o\">=</span><span class=\"mi\">40</span><span class=\"w\"> </span><span class=\"err\">μ</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">status</span><span class=\"o\">=</span><span class=\"mi\">404</span>\n</code></pre></div>\n<p>When I try to request GET <code>/v2/example/hello/tags/list</code> I get a 404 not found. </p>\n<p>Is wit expecting a newer version of warg-server? I am trying to find a version in GitHub that has the <code>v2</code> endpoints but haven't had much luck so far.</p>\n<p>On another note, would I have better luck using OCI registry instead of Warg in terms of stability etc?</p>",
        "id": 497227669,
        "sender_full_name": "Lorenzo",
        "timestamp": 1738472904
    },
    {
        "content": "<p>I think I found out the problem. It seems to default to OCI, need to specify that it's a <code>warg</code> registry instead in the config file:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[registry.</span><span class=\"s2\">\"some.registry.origin.example.com\"</span><span class=\"k\">]</span>\n<span class=\"n\">default</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"warg\"</span>\n</code></pre></div>",
        "id": 497233041,
        "sender_full_name": "Lorenzo",
        "timestamp": 1738478327
    },
    {
        "content": "<p>So that previous issue has been resolved, but now I am running into something else. I am publishing this package to the registry:</p>\n<p>hello.wit</p>\n<div class=\"codehilite\" data-code-language=\"wit\"><pre><span></span><code>package example:hello;\n\nworld hello {\n  export greet: func(name: string);\n}\n</code></pre></div>\n<p>hello.js</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"k\">export</span><span class=\"w\"> </span><span class=\"kd\">const</span><span class=\"w\"> </span><span class=\"nx\">greet</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">name</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"sb\">`hello </span><span class=\"si\">${</span><span class=\"nx\">name</span><span class=\"si\">}</span><span class=\"sb\">!`</span><span class=\"p\">);</span>\n<span class=\"p\">};</span>\n</code></pre></div>\n<p>But it looks like when I build the component, it overrides the  namespace, package and world names. Instead of <code>example:hello/hello</code> it becomes <code>root:component/root</code>, so it doesn't find the package because the resolver is looking for the original name.</p>",
        "id": 497243753,
        "sender_full_name": "Lorenzo",
        "timestamp": 1738489226
    }
]