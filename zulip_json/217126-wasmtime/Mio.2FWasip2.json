[
    {
        "content": "<p>Hello, was wondering if this planned to be merged? <a href=\"https://github.com/tokio-rs/mio/pull/1836\">https://github.com/tokio-rs/mio/pull/1836</a></p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://github.com/tokio-rs/mio/pull/1836\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/d5e17ce09f51ea35c6ff1751f76461fa2cb8e462/68747470733a2f2f6f70656e67726170682e6769746875626173736574732e636f6d2f633339633437306531623831626338323764303435613932363862633639646630353162333366303934623234316364356639663638646661626433383430372f746f6b696f2d72732f6d696f2f70756c6c2f31383336&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://github.com/tokio-rs/mio/pull/1836\" title=\"add `wasm32-wasip2` support by dicej 路 Pull Request #1836 路 tokio-rs/mio\">add `wasm32-wasip2` support by dicej 路 Pull Request #1836 路 tokio-rs/mio</a></div><div class=\"message_embed_description\">This implementation currently uses a mix of POSIX-style APIs (provided by wasi-libc via the libc crate) and WASIp2-native APIs (provided by the wasi crate).\nAlternatively, we could implement Select...</div></div></div>",
        "id": 567590328,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768236837
    },
    {
        "content": "<p>That's up to the <code>mio</code> maintainers.  So far, the feedback has been that it won't be accepted as-is, but nobody has come up with an alternative approach that <em>would</em> be accepted.</p>\n<p>My current thinking is that once <code>wasi-libc</code> has <code>wasm32-wasip3</code> + pthread support, <code>mio</code> can treat it as just another POSIX platform via <code>poll</code>.  That won't be particularly efficient, but has the advantage of minimal maintenance effort for the <code>mio</code> team.</p>",
        "id": 567592806,
        "sender_full_name": "Joel Dice",
        "timestamp": 1768237385
    },
    {
        "content": "<p>Okay I see. This and socket2 would really unlock a lot of crates but I understand their concerns. Thank you for the response</p>",
        "id": 567596080,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768238167
    },
    {
        "content": "<p>while mio is a prerequisite, its worth noting that until shared-everything-threads or stack-switching wasm standard proposals stabilize, it won't be possible to make a fully functional port of tokio to webassembly, because tokio::task::spawn_blocking requires some sort of stack switching or thread creation primitive that webassembly does not have.</p>",
        "id": 567600382,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1768239230
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253992\">Pat Hickey</span> <a href=\"#narrow/channel/217126-wasmtime/topic/Mio.2FWasip2/near/567600382\">said</a>:</p>\n<blockquote>\n<p>shared-everything-threads or stack-switching wasm standard proposals</p>\n</blockquote>\n<p><em>or</em> the cooperative multi-threading support coming in WASIp3, which is already implemented in Wasmtime.</p>",
        "id": 567602036,
        "sender_full_name": "Joel Dice",
        "timestamp": 1768239645
    },
    {
        "content": "<p>and which <span class=\"user-mention\" data-user-id=\"928951\">@Sy Brand</span> is adding support for in <code>wasi-libc</code>.</p>",
        "id": 567602160,
        "sender_full_name": "Joel Dice",
        "timestamp": 1768239676
    },
    {
        "content": "<p>oh! right, thank you. I forgot about that</p>",
        "id": 567602258,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1768239709
    },
    {
        "content": "<p>Awesome, will keep a lookout for it. For my usecase I figured I would be able to get away with current_thread but aligning with the current tokio socket api would be really cool as well.</p>\n<p>Looking forward to preview 3</p>",
        "id": 567603395,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768240002
    },
    {
        "content": "<p>some use cases may get away with spawn_blocking being <code>unimplemented!()</code> but its use is a pretty infectious assumption of many tokio-dependent crates (e.g. <code>reqwest</code>)</p>",
        "id": 567606375,
        "sender_full_name": "Pat Hickey",
        "timestamp": 1768240748
    },
    {
        "content": "<p>Ah I see! Okay I will wait patiently. Thank you again</p>",
        "id": 567612766,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768242410
    },
    {
        "content": "<p>Also don't know if its appropriate to share here but started working on an async runtime last year. Pretty barebones right now but makes me really excited about preview 3.  Uses a lot of poll mechanics right now</p>\n<p><a href=\"https://tangled.org/staticanxiety.tngl.sh/tiny-wasm-async-runtime\">https://tangled.org/staticanxiety.tngl.sh/tiny-wasm-async-runtime</a> for anyone even interested</p>\n<div class=\"message_embed\"><a class=\"message_embed_image\" href=\"https://tangled.org/staticanxiety.tngl.sh/tiny-wasm-async-runtime\" style=\"background-image: url(&quot;https://uploads.zulipusercontent.net/87614704971a5e9b013616fde6956e27b923cd5f/68747470733a2f2f74616e676c65642e6f72672f737461746963616e78696574792e746e676c2e73682f74696e792d7761736d2d6173796e632d72756e74696d652f6f70656e6772617068&quot;)\"></a><div class=\"data-container\"><div class=\"message_embed_title\"><a href=\"https://tangled.org/staticanxiety.tngl.sh/tiny-wasm-async-runtime\" title=\"staticanxiety.tngl.sh/tiny-wasm-async-runtime\">staticanxiety.tngl.sh/tiny-wasm-async-runtime</a></div><div class=\"message_embed_description\">Moved my tiny async preview 2 runtime here</div></div></div>",
        "id": 567820619,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768324790
    },
    {
        "content": "<p>this is cool!!!!</p>",
        "id": 567823376,
        "sender_full_name": "Ralph",
        "timestamp": 1768325591
    },
    {
        "content": "<p>Thank you so much!</p>",
        "id": 567824022,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768325790
    },
    {
        "content": "<p>what are you doing with it? having fun, or for some purpose?</p>",
        "id": 567826512,
        "sender_full_name": "Ralph",
        "timestamp": 1768326550
    },
    {
        "content": "<p>Mostly just having fun with it.  After Yoshua's post and reading a bit of smol I was really interested into seeing how they work. Once spawn is implemented, I would love to have multiple threads running, I think it would be really interesting</p>",
        "id": 567826820,
        "sender_full_name": "Ashanti Mutinta",
        "timestamp": 1768326652
    },
    {
        "content": "<p>you're not wrong!</p>",
        "id": 567826937,
        "sender_full_name": "Ralph",
        "timestamp": 1768326687
    }
]